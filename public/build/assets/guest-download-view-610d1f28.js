import{j as e,r,ao as k,L as C}from"./vendor-react-fefbac25.js";import{h as S}from"./admin-analytics-cad99b47.js";import{j as D,k as F,l as I}from"./main-c6885f20.js";import"./admin-appearance-7a196083.js";const $="/build/assets/Vector-45797815.png",E=(t,o)=>{const a=o?B(o):"4.5 KB";if(!t)return`${a} - No expiry date`;try{const s=new Date(t),l=s.toLocaleDateString("en-US"),n=s.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${a} - Expires on ${l} at ${n}`}catch{return`${a} - Invalid expiry date`}},B=t=>{if(t===0)return"0 B";const o=1024,a=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,s)).toFixed(1))+" "+a[s]};function U({expiresAt:t,totalSize:o,itemCount:a=1}){return e.jsxs("div",{className:"column-center border-apply p-6",children:[e.jsx("img",{src:$,alt:"",className:"h-12 w-12 object-cover"}),e.jsxs("h3",{className:"mt-2 font-semibold !text-[18px] mt-1 ",children:["You received ",a," ",a===1?"item":"items"]}),e.jsx("p",{className:"text-gray-500 text-[16px] mt-1",children:E(t,o)})]})}const L="/build/assets/storage-17c480b6.png",M=({isOpen:t})=>{const[o,a]=r.useState(!1);r.useEffect(()=>{a(t)},[t]);const s=[{title:"20GB of secure, high-quality storage",description:"No compression. No clutter. Just reliable cloud storage built for your biggest ideas."},{title:"Custom share links with full control",description:"Set passwords, expiration dates, and track every document you share."},{title:"PDF-ready. Feedback-ready.",description:" Fill, sign, edit and comment,  all in one place, no tool switching."}];return e.jsx(e.Fragment,{children:o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-0 md:p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-[20px] shadow-2xl w-full h-full md:max-w-[1100px] md:h-auto flex flex-col lg:flex-row overflow-auto",children:[e.jsxs("div",{className:"  relative bg-[#bbecff] w-full max-w-[55%]  ",children:[e.jsx("button",{className:"absolute top-4 left-4 text-black hover:text-red-500 z-10",onClick:()=>a(!1),children:e.jsx(k,{size:32})}),e.jsx("img",{src:L,alt:"A visual representation of cloud storage",className:"w-full h-full object-contain"})]}),e.jsxs("div",{className:"bg-white text-black px-[40px] py-[45px]  justify-center space-y-6 overflow-auto w-full max-w-[45%]",children:[e.jsx("h2",{className:"text-[20px] lg:text-[36px] font-semibold leading-[36px] pb-4  ",children:"Love how this was shared?"}),s.map((l,n)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-3xl mt-2",children:e.jsx(D,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[15px]",children:l.title}),e.jsx("p",{className:"text-gray-600 mt-1 text[12px]",children:l.description})]})]},n)),e.jsx("div",{className:"pt-[30px]",children:e.jsx("a",{href:"https://drime.cloud/",className:"button shadow-none font-normal w-full ",children:"Get started for free"})})]})]})})})},P=({files:t,totalSize:o,expiresAt:a,hash:s,hasPassword:l})=>{const[n,h]=r.useState(""),[V,p]=r.useState(!1),g=c=>{h(c.target.value)},[m,u]=r.useState(!1),[d,w]=r.useState(!l),[G,x]=r.useState("");console.log("GuestDownloadView props:",{files:t,totalSize:o,expiresAt:a,hash:s,hasPassword:l});const j=async c=>{if(c.preventDefault(),!!n.trim()){u(!0),x("");try{(await S.post(`guest/upload/${s}/verify-password`,{password:n})).data.valid?w(!0):x("Incorrect password. Please try again.")}catch{x("Error verifying password. Please try again.")}finally{u(!1)}}},[T,f]=r.useState(!1),[b,y]=r.useState(!1),v=()=>{if(!s){alert("Invalid download link.");return}if(l&&!d)return!1;f(!0);try{const c=l&&n?`?password=${encodeURIComponent(n)}`:"";if(t&&t.length===1){const i=t[0];console.log("file",i);const N=`/download/${s}/${i.id}${c}`;window.open(N,"_blank")}else if(t&&t.length>1){const i=`/download/${s}${c}`;window.open(i,"_blank"),console.log("downloadUrl",i)}else alert("No files available for download.")}finally{f(!1),setTimeout(()=>{y(!0)},3e3)}};return e.jsx("div",{className:"space-y-6 bg-white",children:e.jsxs(e.Fragment,{children:[l&&!d?e.jsx("div",{className:"fixed inset-0 w-full bg-gray-600 bg-opacity-50 flex items-center justify-center  z-50",children:e.jsxs("div",{className:"box max-w-[500px] border border-gray-500 p-[20px] md:p-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center  ",children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-800",children:"Enter the password "}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(F,{className:"h-6 w-6"})})]}),e.jsx("p",{className:"text-[16px] mt-4 text-gray-600 mb-4",children:"To access this link, you will need its password. If you do not have the password, contact the creator of the link."}),e.jsx("input",{type:"password",autoComplete:"off",placeholder:"Enter the password",value:n,onChange:g,className:"inut-sm  sm:input"}),e.jsxs("div",{className:"flex justify-end items-center p-4 gap-4",children:[e.jsx("button",{onClick:()=>p(!1),className:"button !bg-transparent !text-black shadow-none hover:shadow-none hover:opacity-[0.5] !p-[12px]",children:"Cancel"}),e.jsx("button",{disabled:m||!n.trim(),onClick:j,className:"button font-semibold !p-[12px] !px-[20px] rounded-[14px] min-w-[80px] !shadow-none",children:m?e.jsx("p",{children:"Verifying.."}):e.jsx("p",{children:"Ok"})})]})]})}):"",e.jsx(U,{expiresAt:a,totalSize:o,itemCount:t?t.length:0}),e.jsxs("div",{className:" mt-0 px-[20px] md:!px-[30px]    ",children:[e.jsx(I,{step:4,selectedFiles:t,hash:s,isLocked:l&&!d,hasPassword:l,password:n}),e.jsxs("div",{className:"between-align mt-6 absolute left-0 p-[30px] bottom-0 w-full",children:[e.jsx(C,{to:"/",className:"text-[16px]  text-black font-[600] leading-5 underline",children:"Create a transfer"}),e.jsx("button",{onClick:v,className:"button-md ",children:"Download"})]}),e.jsx(M,{isOpen:b})]})]})})};export{P as G};
//# sourceMappingURL=guest-download-view-610d1f28.js.map
