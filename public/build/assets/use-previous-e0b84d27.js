import{bE as L,j as l,r as m,cN as oe,q as y,R as le,h as be,cO as we,ag as ye,Z as _,o as C,aP as Ee,b as De,G as U,T as M,S as ce,a as ue,aC as Ie,al as de,a0 as F,cc as je,V as Ce,X as Se,aJ as Oe,a2 as Pe,D as fe,y as Ae,cP as K,cQ as Re,cR as Te,c8 as Me,bz as G,ar as ke,E as ze,$ as Fe,A as _e}from"./main-14f9202e.js";import{$ as Ne,a as B,b as V,m as Le}from"./table-be4c9f90.js";import{d as $e,K as Ue,e as he,f as Be,t as Ve,h as We,D as He,i as qe,C as Ye}from"./formatted-number-ff408592.js";import{C as Xe}from"./breadcrumb-f6cd9ad0.js";function Q(t,r){if(!t)return!1;let e=window.getComputedStyle(t),s=/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY);return s&&r&&(s=t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth),s}function Bt(t,r){let e=t;for(Q(e,r)&&(e=e.parentElement);e&&!Q(e,r);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Vt=L(l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),S=new Map,$=new Map,Ke=new Map,j={status:"inactive"};function W({e:t,rect:r,deltaX:e,deltaY:s}){return{rect:r,x:t.clientX,y:t.clientY,deltaX:e??0,deltaY:s??0,nativeEvent:t}}let me=null;function Z(t){me=t}function Ge(t){return{left:t.left,top:t.top,width:t.width,height:t.height}}function Qe(t){const r=new IntersectionObserver(e=>{e.forEach(s=>{const{width:n,height:i,left:a,top:o}=s.boundingClientRect,[c,d]=[...t].find(([,v])=>v.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:n,height:i,left:a,top:o};t.set(c,{...d,rect:u})}),r.disconnect()});[...t.values()].forEach(e=>{e.ref.current&&r.observe(e.ref.current)})}function Wt({id:t,disabled:r,ref:e,preview:s,hidePreview:n,...i}){const a=m.useRef(null),{addGlobalListener:o,removeAllGlobalListeners:c}=Ne(),d=m.useRef({lastPosition:{x:0,y:0}}).current,u=m.useRef(i);u.current=i,m.useLayoutEffect(()=>(r?S.delete(t):S.set(t,{...S.get(t),id:t,ref:e,type:u.current.type,getData:u.current.getData}),()=>{S.delete(t)}),[t,r,u,e]);const v=g=>{Ke.forEach(x=>{var w;x.type===((w=S.get(t))==null?void 0:w.type)&&g(x)})},f=g=>{var D,A;const x=S.get(t),w=e.current,I=!a.current||!d.clickedEl||a.current.contains(d.clickedEl);if(me||!w||!x||!I){g.preventDefault(),g.stopPropagation();return}Qe($),Z("drag"),n&&Ze(g),g.dataTransfer.effectAllowed="move",d.lastPosition={x:g.clientX,y:g.clientY},d.currentRect=Ge(w.getBoundingClientRect());const E=W({rect:d.currentRect,e:g});s!=null&&s.current&&s.current(x,R=>{g.dataTransfer.setDragImage(R,0,0)}),j.status="dragging",j.dragTargetId=t,e.current&&(e.current.dataset.dragging="true"),(A=(D=u.current).onDragStart)==null||A.call(D,E,x),requestAnimationFrame(()=>{v(R=>{var k;return(k=R.onDragStart)==null?void 0:k.call(R,E,x)})}),o(window,"dragover",h,!0)},h=g=>{var A,R;if(g.preventDefault(),!d.currentRect)return;const x=g.clientX-d.lastPosition.x,w=g.clientY-d.lastPosition.y,I={...d.currentRect,left:d.currentRect.left+x,top:d.currentRect.top+w},E=W({rect:I,e:g,deltaX:x,deltaY:w}),D=S.get(t);D&&((R=(A=u.current).onDragMove)==null||R.call(A,E,D),v(k=>{var X;return(X=k.onDragMove)==null?void 0:X.call(k,E,D)})),d.lastPosition={x:g.clientX,y:g.clientY},d.currentRect=I};return{draggableProps:{draggable:!r,onDragStart:f,onDragEnd:g=>{var I,E;if(c(),!d.currentRect)return;Z(null),T&&T.remove();const x=W({rect:d.currentRect,e:g}),w=S.get(t);w&&((E=(I=u.current).onDragEnd)==null||E.call(I,x,w),v(D=>{var A;return(A=D.onDragEnd)==null?void 0:A.call(D,x,w,j.status)})),requestAnimationFrame(()=>{j.dragTargetId=void 0,j.status="inactive",e.current&&delete e.current.dataset.dragging})},onPointerDown:g=>{d.clickedEl=g.target}},dragHandleRef:a}}let T;function Ze(t){T||(T=new Image,document.body.append(T),T.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),t.dataTransfer.setDragImage(T,0,0)}async function*Je(t){const r=[];for(const e of t.items)if(e.kind==="file"){const s=e.webkitGetAsEntry();s&&r.push(s)}for(const e of r)if(e.isFile){if(e.name===".DS_Store")continue;const s=await pe(e);yield new oe(s,e.fullPath)}else e.isDirectory&&(yield*ge(e))}async function*ge(t){const r=t.createReader();let e;do{e=await new Promise((s,n)=>{r.readEntries(s,n)});for(const s of e)if(s.isFile){if(s.name===".DS_Store")continue;const n=await pe(s);yield new oe(n,s.fullPath)}else s.isDirectory&&(yield*ge(s))}while(e.length>0)}function pe(t){return new Promise((r,e)=>t.file(r,e))}async function et(t){const r=[];for await(const e of t)r.push(e);return r}const tt=400;function Ht({id:t,disabled:r,ref:e,...s}){const n=m.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,i=m.useRef(s);i.current=s,m.useLayoutEffect(()=>($.set(t,{...$.get(t),disabled:r,id:t,ref:e}),()=>{$.delete(t)}),[t,i,r,e]);const a=f=>{var b;const h=i.current,p=h.allowDragEventsFromItself||e.current!==((b=f.ref)==null?void 0:b.current);return!!(f!=null&&f.type&&p&&h.types.includes(f.type)&&(!h.acceptsDrop||h.acceptsDrop(f)))},o=f=>{var p,b;const h=N(f);h&&((b=(p=i.current).onDragLeave)==null||b.call(p,h))};return{droppableProps:r?{}:{onDragOver:f=>{var p,b;f.preventDefault(),f.stopPropagation();const h=N(f);h&&a(h)&&((b=(p=i.current).onDragOver)==null||b.call(p,h,f))},onDragEnter:f=>{var p,b;if(f.stopPropagation(),n.dragOverElements.add(f.target),n.dragOverElements.size>1)return;const h=N(f);h&&a(h)&&((b=(p=i.current).onDragEnter)==null||b.call(p,h),clearTimeout(n.dropActivateTimer),typeof i.current.onDropActivate=="function"&&(n.dropActivateTimer=setTimeout(()=>{var g,x;h&&((x=(g=i.current).onDropActivate)==null||x.call(g,h))},tt)))},onDragLeave:f=>{f.stopPropagation(),n.dragOverElements.delete(f.target);for(const p of n.dragOverElements)f.currentTarget.contains(p)||n.dragOverElements.delete(p);if(n.dragOverElements.size>0)return;const h=N(f);h&&a(h)&&(o(f),clearTimeout(n.dropActivateTimer))},onDrop:async f=>{var p,b,g,x;f.preventDefault(),f.stopPropagation(),n.dragOverElements.clear(),o(f),clearTimeout(n.dropActivateTimer);const h=N(f);if(h)if((b=(p=i.current).onDragLeave)==null||b.call(p,h),!a(h))j.status!=="inactive"&&(j.status="dropFail");else{const w=(x=(g=i.current).onDrop)==null?void 0:x.call(g,h);j.status!=="inactive"&&(j.status=w===!1?"dropFail":"dropSuccess")}}}}}function N(t){if(j.dragTargetId!=null)return S.get(j.dragTargetId);if(t.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>et(Je(t.dataTransfer))}}const st="user";function ve(t){var r;return{...t,defaultOperator:B.between,control:{type:V.DateRangePicker,defaultValue:((r=t.control)==null?void 0:r.defaultValue)||Le($e[3].getRangeValue())}}}function nt(t){return ve({key:"created_at",label:y("Date created"),...t})}function rt(t){return ve({key:"updated_at",label:y("Last updated"),...t})}const it={key:"type",label:y("Type"),description:y("Type of the file"),defaultOperator:B.eq,control:{type:V.Select,defaultValue:"05",options:[{key:"02",label:y("Text"),value:"text"},{key:"03",label:y("Audio"),value:"audio"},{key:"04",label:y("Video"),value:"video"},{key:"05",label:y("Image"),value:"image"},{key:"06",label:y("PDF"),value:"pdf"},{key:"07",label:y("Spreadsheet"),value:"spreadsheet"},{key:"08",label:y("Word Document"),value:"word"},{key:"09",label:y("Photoshop"),value:"photoshop"},{key:"10",label:y("Archive"),value:"archive"},{key:"11",label:y("Folder"),value:"folder"}]}},qt=[it,{key:"public",label:y("Visibility"),description:y("Whether file is publicly accessible"),defaultOperator:B.eq,control:{type:V.Select,defaultValue:"01",options:[{key:"01",label:y("Private"),value:!1},{key:"02",label:y("Public"),value:!0}]}},nt({description:y("Date file was uploaded")}),rt({description:y("Date file was last changed")}),{key:"owner_id",label:y("Uploader"),description:y("User that this file was uploaded by"),defaultOperator:B.eq,control:{type:V.SelectModel,model:st}}],J=L(l.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),at=le.createContext(null);function P(t,r){const{base_url:e}=be(),s=m.useContext(at);return m.useMemo(()=>{if(!t)return{};const i={previewUrl:ot(t,(r==null?void 0:r.preferThumbnail)||!1),downloadUrl:`${e}/api/v1/file-entries/download/${(r==null?void 0:r.downloadHashes)||t.hash}`};return s&&(i.previewUrl&&(i.previewUrl=ee(i.previewUrl,{...s,thumbnail:r!=null&&r.preferThumbnail?"true":""},e)),i.downloadUrl=ee(i.downloadUrl,s,e)),i},[e,t,r==null?void 0:r.downloadHashes,r==null?void 0:r.preferThumbnail,s])}function ot(t,r){if(t.url){if(we(t.url))if(r&&t.thumbnail){const e=t.extension==="png"?"png":"jpg";return t.url.replace(new RegExp(t.file_name+"$"),`thumbnail.${e}`)}else return t.url;return`${ye().settings.base_url}/${t.url}`}}function ee(t,r,e){const s=new URL(t,e);return Object.entries(r).forEach(([n,i])=>{s.searchParams.append(n,i)}),s.toString()}function q(t,r){const e=document.createElement("a");e.href=t,r&&(e.download=r),document.body.appendChild(e),e.click(),document.body.removeChild(e)}const Yt=L(l.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined"),lt=2*1024*1024;function ct({file:t,className:r,iconClassName:e,showImage:s=!0}){const{trans:n}=_(),{previewUrl:i}=P(t,{preferThumbnail:!0});if(t.file_size&&t.file_size>lt&&!t.thumbnail&&(s=!1),s&&t.type==="image"&&i){const a=n({message:":fileName thumbnail",values:{fileName:t.name}});return l.jsx("img",{className:C(r,"object-cover"),src:i,alt:a,draggable:!1})}return l.jsx(Ee,{className:e,type:t.type})}function z(t,r,e){let s=e.initialDeps??[],n;function i(){var a,o,c,d;let u;e.key&&((a=e.debug)!=null&&a.call(e))&&(u=Date.now());const v=t();if(!(v.length!==s.length||v.some((p,b)=>s[b]!==p)))return n;s=v;let h;if(e.key&&((o=e.debug)!=null&&o.call(e))&&(h=Date.now()),n=r(...v),e.key&&((c=e.debug)!=null&&c.call(e))){const p=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-h)*100)/100,g=b/16,x=(w,I)=>{for(w=String(w);w.length<I;)w=" "+w;return w};console.info(`%c⏱ ${x(b,5)} /${x(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(d=e==null?void 0:e.onChange)==null||d.call(e,n),n}return i.updateDeps=a=>{s=a},i}function te(t,r){if(t===void 0)throw new Error(`Unexpected undefined${r?`: ${r}`:""}`);return t}const ut=(t,r)=>Math.abs(t-r)<1.01,dt=(t,r,e)=>{let s;return function(...n){t.clearTimeout(s),s=t.setTimeout(()=>r.apply(this,n),e)}},se=t=>{const{offsetWidth:r,offsetHeight:e}=t;return{width:r,height:e}},ft=t=>t,ht=t=>{const r=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),s=[];for(let n=r;n<=e;n++)s.push(n);return s},mt=(t,r)=>{const e=t.scrollElement;if(!e)return;const s=t.targetWindow;if(!s)return;const n=a=>{const{width:o,height:c}=a;r({width:Math.round(o),height:Math.round(c)})};if(n(se(e)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(a=>{const o=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const d=c.borderBoxSize[0];if(d){n({width:d.inlineSize,height:d.blockSize});return}}n(se(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},ne={passive:!0},re=typeof window>"u"?!0:"onscrollend"in window,gt=(t,r)=>{const e=t.scrollElement;if(!e)return;const s=t.targetWindow;if(!s)return;let n=0;const i=t.options.useScrollendEvent&&re?()=>{}:dt(s,()=>{r(n,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:v,isRtl:f}=t.options;n=v?e.scrollLeft*(f&&-1||1):e.scrollTop,i(),r(n,u)},o=a(!0),c=a(!1);c(),e.addEventListener("scroll",o,ne);const d=t.options.useScrollendEvent&&re;return d&&e.addEventListener("scrollend",c,ne),()=>{e.removeEventListener("scroll",o),d&&e.removeEventListener("scrollend",c)}},pt=(t,r,e)=>{if(r!=null&&r.borderBoxSize){const s=r.borderBoxSize[0];if(s)return Math.round(s[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},vt=(t,{adjustments:r=0,behavior:e},s)=>{var n,i;const a=t+r;(i=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[s.options.horizontal?"left":"top"]:a,behavior:e})};class xt{constructor(r){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const s=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=s())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=s())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([s,n])=>{typeof n>"u"&&delete e[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ft,rangeExtractor:ht,onChange:()=>{},measureElement:pt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,e)},this.maybeNotify=z(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,s)=>{const n=new Map,i=new Map;for(let a=s-1;a>=0;a--){const o=e[a];if(n.has(o.lane))continue;const c=i.get(o.lane);if(c==null||o.end>c.end?i.set(o.lane,o):o.end<c.end&&n.set(o.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=z(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,s,n,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=z(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:s,scrollMargin:n,getItemKey:i,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,c);for(let u=c;u<e;u++){const v=i(u),f=this.options.lanes===1?d[u-1]:this.getFurthestMeasurement(d,u),h=f?f.end+this.options.gap:s+n,p=o.get(v),b=typeof p=="number"?p:this.options.estimateSize(u),g=h+b,x=f?f.lane:u%this.options.lanes;d[u]={index:u,start:h,size:b,end:g,key:v,lane:x}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=z(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,s,n,i)=>this.range=e.length>0&&s>0?bt({measurements:e,outerSize:s,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=z(()=>{let e=null,s=null;const n=this.calculateRange();return n&&(e=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,s]},(e,s,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const s=this.options.indexAttribute,n=e.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(e,s)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,o=this.elementsCache.get(a);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,s,this))},this.resizeItem=(e,s)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=s-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=z(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,s)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const o=e[i],c=s[o];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const s=this.getMeasurements();if(s.length!==0)return te(s[xe(0,s.length-1,n=>te(s[n]).start,e)])},this.getOffsetForAlignment=(e,s,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();s==="auto"&&(s=e>=a+i?"end":"start"),s==="center"?e+=(n-i)/2:s==="end"&&(e-=i);const o=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,s="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(s==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)s="end";else if(n.start<=a+this.options.scrollPaddingStart)s="start";else return[a,s];const o=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:s="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:s="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let i=0;const a=10,o=d=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(e,d);if(!u){console.warn("Failed to get offset for index:",e);return}const[v,f]=u;this._scrollToOffset(v,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),p=this.getOffsetForIndex(e,f);if(!p){console.warn("Failed to get offset for index:",e);return}ut(p[0],h)||c(f)})},c=d=>{this.targetWindow&&(i++,i<a?this.targetWindow.requestAnimationFrame(()=>o(d)):console.warn(`Failed to scroll to index ${e} after ${a} attempts.`))};o(s)},this.scrollBy=(e,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var e;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=s[s.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=s.length-1;for(;a>=0&&i.some(o=>o===null);){const o=s[a];i[o.lane]===null&&(i[o.lane]=o.end),a--}n=Math.max(...i.filter(o=>o!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:s,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(r)}}const xe=(t,r,e,s)=>{for(;t<=r;){const n=(t+r)/2|0,i=e(n);if(i<s)t=n+1;else if(i>s)r=n-1;else return n}return t>0?t-1:0};function bt({measurements:t,outerSize:r,scrollOffset:e,lanes:s}){const n=t.length-1,i=c=>t[c].start;if(t.length<=s)return{startIndex:0,endIndex:n};let a=xe(0,n,i,e),o=a;if(s===1)for(;o<n&&t[o].end<e+r;)o++;else if(s>1){const c=Array(s).fill(0);for(;o<n&&c.some(u=>u<e+r);){const u=t[o];c[u.lane]=u.end,o++}const d=Array(s).fill(e+r);for(;a>=0&&d.some(u=>u>=e);){const u=t[a];d[u.lane]=u.start,a--}a=Math.max(0,a-a%s),o=Math.min(n,o+(s-1-o%s))}return{startIndex:a,endIndex:o}}const ie=typeof document<"u"?m.useLayoutEffect:m.useEffect;function wt(t){const r=m.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?De.flushSync(r):r(),(a=t.onChange)==null||a.call(t,n,i)}},[s]=m.useState(()=>new xt(e));return s.setOptions(e),ie(()=>s._didMount(),[]),ie(()=>s._willUpdate()),s}function Xt(t){return wt({observeElementRect:mt,observeElementOffset:gt,scrollToFn:vt,...t})}const Y=le.createContext(null);function O({message:t,className:r,allowDownload:e}){const{entries:s,activeIndex:n}=m.useContext(Y),i=s[n],a=t||l.jsx(M,{message:"No file preview available"}),{downloadUrl:o}=P(i);return l.jsxs("div",{className:C(r,"w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow"),children:[l.jsx("div",{className:"text-lg",children:a}),e&&l.jsx("div",{className:"mt-20 block text-center",children:l.jsx(U,{variant:"flat",color:"primary",onClick:()=>{o&&q(o)},children:l.jsx(M,{message:"Download"})})})]})}function yt(t){const{entry:r,className:e}=t,{trans:s}=_(),{previewUrl:n}=P(r);return n?l.jsx("img",{className:C(e,"shadow"),src:n,alt:s({message:"Preview for :name",values:{name:r.name}})}):l.jsx(O,{...t})}const Et=5242880;function Dt(t){const{entry:r,className:e}=t,{trans:s}=_(),[n,i]=m.useState(!1),[a,o]=m.useState(!0),[c,d]=m.useState(!1),[u,v]=m.useState(null),{previewUrl:f}=P(r);return m.useEffect(()=>{r&&(f?r.file_size>=Et?(i(!0),o(!1)):It(f).then(h=>{v(h.data)}).catch(()=>{d(!0)}).finally(()=>{o(!1)}):d(!0))},[r,f]),a?l.jsx(ce,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):n?l.jsx(O,{...t,message:l.jsx(M,{message:"This file is too large to preview."})}):c?l.jsx(O,{...t,message:l.jsx(M,{message:"There was an issue previewing this file"})}):l.jsx("pre",{className:C("h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm",e),children:l.jsx("div",{className:"container mx-auto",children:`${u}`})})}function It(t){return ue.get(t,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function jt(t){const{entry:r,className:e}=t,{previewUrl:s}=P(r),n=m.useRef(null),[i,a]=m.useState(!1);return m.useEffect(()=>{var o;a(!((o=n.current)!=null&&o.canPlayType(r.mime)))},[r]),i||!s?l.jsx(O,{...t}):l.jsx("video",{className:e,ref:n,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:l.jsx("source",{src:s,type:r.mime,onError:()=>{a(!0)}})})}function Ct(t){const{entry:r,className:e}=t,{previewUrl:s}=P(r),n=m.useRef(null),[i,a]=m.useState(!1);return m.useEffect(()=>{var o;a(!((o=n.current)!=null&&o.canPlayType(r.mime)))},[r]),i||!s?l.jsx(O,{...t}):l.jsx("audio",{className:e,ref:n,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:l.jsx("source",{src:s,type:r.mime,onError:()=>{a(!0)}})})}function St(t){const{entry:r,className:e}=t,{trans:s}=_(),{previewUrl:n}=P(r);return n?l.jsx("iframe",{title:s({message:"Preview for :name",values:{name:r.name}}),className:C(e,"h-full w-full"),src:`${n}#toolbar=0`}):l.jsx(O,{...t})}function H(t){const{entry:r,className:e}=t,{trans:s}=_(),n=m.useRef(null),[i,a]=m.useState(!1),o=m.useRef(),[c,d]=m.useState(!1),{previewUrl:u}=P(r);return m.useEffect(()=>{u?r.file_size&&r.file_size>25e6?a(!0):n.current&&(n.current.onload=()=>{clearTimeout(o.current),d(!1)},Ot(u,r).then(v=>{n.current&&(n.current.src=v)}),o.current=setTimeout(()=>{a(!0)},5e3)):a(!0)},[r,u]),i?l.jsx(O,{...t}):l.jsxs("div",{className:C(e,"h-full w-full"),children:[c&&l.jsx(ce,{}),l.jsx("iframe",{ref:n,title:s({message:"Preview for :name",values:{name:r.name}}),className:C("h-full w-full",c&&"hidden")})]})}async function Ot(t,r){const e=new URL(t);if(!e.searchParams.has("shareable_link")){const{data:s}=await ue.post(`file-entries/${r.id}/add-preview-token`);e.searchParams.append("preview_token",s.preview_token)}return Pt(e)}function Pt(t){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(t.toString())}`}const ae={text:Dt,video:jt,audio:Ct,image:yt,pdf:St,spreadsheet:H,powerPoint:H,word:H,"text/rtf":O};function At(t){const r=t==null?void 0:t.mime,e=t==null?void 0:t.type;return ae[r]||ae[e]||O}const Rt=L(l.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function Tt({entries:t,onClose:r,showHeader:e=!0,className:s,headerActionsLeft:n,allowDownload:i=!0,...a}){const o=Ie("(max-width: 1024px)"),[c,d]=de(a.activeIndex,a.defaultActiveIndex||0,a.onActiveIndexChange),u=t[c],v=m.useMemo(()=>({entries:t,activeIndex:c}),[t,c]),f=At(u);if(!u)return r==null||r(),null;const h=t.length-1>c,p=()=>{d(c+1)},b=c>0,g=()=>{d(c-1)};return l.jsxs(Y.Provider,{value:v,children:[e&&l.jsx(Mt,{actionsLeft:n,isMobile:o,onClose:r,onNext:h?p:void 0,onPrevious:b?g:void 0,allowDownload:i}),l.jsxs("div",{className:C("relative flex-auto overflow-hidden",s),children:[o&&l.jsx(F,{size:"lg",className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!b,onClick:g,children:l.jsx(je,{})}),l.jsx(Ce,{initial:!1,children:l.jsx(Se.div,{className:"absolute inset-0 flex items-center justify-center",...Oe,children:l.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:i})},u.id)}),o&&l.jsx(F,{size:"lg",className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!h,onClick:p,children:l.jsx(Ue,{})})]})]})}function Mt({onNext:t,onPrevious:r,onClose:e,isMobile:s,actionsLeft:n,allowDownload:i}){const{entries:a,activeIndex:o}=m.useContext(Y),c=a[o],{downloadUrl:d}=P(c),f=s?l.jsx(F,{onClick:()=>{d&&q(d)},children:l.jsx(J,{})}):l.jsx(U,{startIcon:l.jsx(J,{}),variant:"text",onClick:()=>{d&&q(d)},children:l.jsx(M,{message:"Download"})});return l.jsxs("div",{className:"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted",children:[l.jsxs("div",{className:"flex w-1/3 items-center justify-start gap-4",children:[n,i?f:void 0]}),l.jsxs("div",{className:"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main",children:[l.jsx(ct,{file:c,iconClassName:"w-16 h-16",showImage:!1}),l.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:c.name})]}),l.jsxs("div",{className:"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap",children:[!s&&l.jsxs(m.Fragment,{children:[l.jsx(F,{disabled:!r,onClick:r,children:l.jsx(Rt,{})}),l.jsx("div",{children:o+1}),l.jsx("div",{children:"/"}),l.jsx("div",{children:a.length}),l.jsx(F,{disabled:!t,onClick:t,children:l.jsx(Xe,{})}),l.jsx("div",{className:"mx-20 h-24 w-1 bg-divider"})]}),l.jsx(F,{radius:"rounded-none",onClick:e,children:l.jsx(Pe,{})})]})]})}function Kt(t){return l.jsx(fe,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:l.jsx(kt,{...t})})}function kt(t){const{close:r}=Ae();return l.jsx(Tt,{onClose:r,...t})}function zt(t){const r=he(),[e,s]=m.useState(!t.value&&!t.defaultValue),n=t.onChange,[i,a]=de(t.value||r,t.defaultValue||r,E=>{s(!1),n==null||n(E)}),{min:o,max:c,granularity:d,timezone:u,calendarIsOpen:v,setCalendarIsOpen:f,closeDialogOnSelection:h}=Be(i,t),p=m.useCallback(()=>{s(!0),a(r),n==null||n(null),f(!1)},[r,a,n,f]),[b,g]=m.useState(()=>[K(i)]),x=m.useCallback(E=>{o&&E.compare(o)<0?E=o:c&&E.compare(c)>0&&(E=c);const D=i?i.set(E):Ve(E,u);a(D),g([K(D)]),s(!1)},[a,o,c,i,u]),w=m.useCallback(E=>!e&&Re(i,E),[i,e]),I=m.useCallback(E=>({onClick:()=>{x==null||x(E),h&&(f==null||f(!1))}}),[x,f,h]);return{selectedValue:i,setSelectedValue:a,calendarIsOpen:v,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:I,calendarDates:b,setCalendarDates:g,isPlaceholder:e,clear:p,setIsPlaceholder:s,min:o,max:c,granularity:d,timezone:u,closeDialogOnSelection:h}}function Ft({showCalendarFooter:t,...r}){const e=zt(r),s=m.useRef(null),n=he(),i=t&&l.jsx(ze,{padding:"px-14 pb-14",startAction:l.jsx(U,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:l.jsx(M,{message:"Clear"})}),children:l.jsx(U,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(n),e.setCalendarIsOpen(!1)},children:l.jsx(M,{message:"Today"})})}),a=l.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:l.jsxs(fe,{size:"auto",children:[l.jsx(_e,{className:"flex items-start gap-40",padding:t?"px-24 pt-20 pb-10":null,children:l.jsx(Ye,{state:e,visibleMonths:1})}),i]})}),o={onClick:c=>{c.stopPropagation(),c.preventDefault(),_t(c)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return l.jsxs(m.Fragment,{children:[l.jsx(We,{ref:s,wrapperProps:o,endAdornment:l.jsx(He,{className:C(r.disabled&&"text-disabled")}),...r,children:l.jsx(qe,{segmentProps:o,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),a]})}function Gt(t){const{min:r,max:e}=t,{trans:s}=_(),{format:n}=Te(),{field:{onChange:i,onBlur:a,value:o=null,ref:c},fieldState:{invalid:d,error:u}}=Me({name:t.name,rules:{validate:h=>{if(!h)return;const p=G(h);if(r&&p.compare(r)<0)return s({message:"Enter a date after :date",values:{date:n(h)}});if(e&&p.compare(e)>0)return s({message:"Enter a date before :date",values:{date:n(h)}})}}}),v=o?G(o):null,f={onChange:h=>{i(h&&h.toAbsoluteString())},onBlur:a,value:v,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return l.jsx(Ft,{...ke(f,t)})}function _t(t){return["hour","minute","dayPeriod"].includes(t.currentTarget.ariaLabel||"")}const Qt=L(l.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function Zt({children:t,isScrollable:r=!0,stableScrollbar:e=!0}){var s;return m.cloneElement(t,{className:C((s=t==null?void 0:t.props)==null?void 0:s.className,r&&"w-full overflow-y-auto",r&&e&&"stable-scrollbar","dashboard-grid-content","has-[.dashboard-stable-scrollbar]:stable-scrollbar")})}function Jt(t){const r=m.useRef();return m.useEffect(()=>{r.current=t},[t]),r.current}export{Bt as $,Vt as A,Rt as C,Zt as D,it as F,Qt as I,Yt as M,st as U,Wt as a,rt as b,nt as c,$ as d,me as e,Qe as f,P as g,J as h,q as i,ct as j,Xt as k,Kt as l,Gt as m,Ke as n,Jt as o,at as p,Tt as q,qt as r,ve as t,Ht as u};
//# sourceMappingURL=use-previous-e0b84d27.js.map
