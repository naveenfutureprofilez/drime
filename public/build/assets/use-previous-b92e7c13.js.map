{"version":3,"file":"use-previous-b92e7c13.js","sources":["../../../node_modules/@react-aria/utils/dist/isScrollable.mjs","../../../node_modules/@react-aria/utils/dist/getScrollParent.mjs","../../../common/foundation/resources/client/ui/library/icons/material/Add.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/drag-state.jsx","../../../common/foundation/resources/client/ui/library/interactions/interactable-event.jsx","../../../common/foundation/resources/client/ui/library/interactions/active-interaction.jsx","../../../common/foundation/resources/client/ui/library/interactions/utils/dom-rect-to-obj.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/update-rects.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-draggable.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/read-files-from-data-transfer.jsx","../../../common/foundation/resources/client/ui/library/utils/array/async-iterable-to-array.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-droppable.jsx","../../../common/foundation/resources/client/ui/library/types/user.jsx","../../../common/foundation/resources/client/datatable/filters/timestamp-filters.jsx","../../../common/foundation/resources/client/admin/file-entry/file-entry-index-filters.jsx","../../../common/foundation/resources/client/ui/library/icons/material/FileDownload.jsx","../../../common/foundation/resources/client/uploads/file-entry-urls.jsx","../../../common/foundation/resources/client/ui/library/utils/files/download-file-from-url.jsx","../../../common/foundation/resources/client/ui/library/icons/material/MoreVert.jsx","../../../common/foundation/resources/client/uploads/components/file-type-icon/file-thumbnail.jsx","../../../node_modules/@tanstack/virtual-core/dist/esm/utils.js","../../../node_modules/@tanstack/virtual-core/dist/esm/index.js","../../../node_modules/@tanstack/react-virtual/dist/esm/index.js","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-context.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/default-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/image-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/text-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/video-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/audio-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/pdf-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/word-document-file-preview.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/available-previews.jsx","../../../common/foundation/resources/client/ui/library/icons/material/ChevronLeft.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-container.jsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-dialog.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/use-date-picker-state.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/date-picker.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Info.jsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-content.jsx","../../../common/foundation/resources/client/ui/library/utils/hooks/use-previous.jsx"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $cc38e7bd3fc7b213$export$2bb74740c4e19def(node, checkForOverflow) {\n    if (!node) return false;\n    let style = window.getComputedStyle(node);\n    let isScrollable = /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\n    if (isScrollable && checkForOverflow) isScrollable = node.scrollHeight !== node.clientHeight || node.scrollWidth !== node.clientWidth;\n    return isScrollable;\n}\n\n\nexport {$cc38e7bd3fc7b213$export$2bb74740c4e19def as isScrollable};\n//# sourceMappingURL=isScrollable.module.js.map\n","import {isScrollable as $cc38e7bd3fc7b213$export$2bb74740c4e19def} from \"./isScrollable.mjs\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nfunction $62d8ded9296f3872$export$cfa2225e87938781(node, checkForOverflow) {\n    let scrollableNode = node;\n    if ((0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow)) scrollableNode = scrollableNode.parentElement;\n    while(scrollableNode && !(0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow))scrollableNode = scrollableNode.parentElement;\n    return scrollableNode || document.scrollingElement || document.documentElement;\n}\n\n\nexport {$62d8ded9296f3872$export$cfa2225e87938781 as getScrollParent};\n//# sourceMappingURL=getScrollParent.module.js.map\n","import { createSvgIcon } from '../create-svg-icon';\nexport const AddIcon = createSvgIcon(<path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />, 'AddOutlined');","export const draggables = new Map();\nexport const droppables = new Map();\nexport const dragMonitors = new Map();\nexport const dragSession = {\n  status: 'inactive'\n};","export function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY\n}) {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e\n  };\n}","export let activeInteraction = null;\nexport function setActiveInteraction(name) {\n  activeInteraction = name;\n}","export function domRectToObj(rect) {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height\n  };\n}","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\n\nexport function updateRects(targets) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {\n        width,\n        height,\n        left,\n        top\n      } = entry.boundingClientRect;\n      const [id, target] = [...targets].find(([, target]) => target.ref.current === entry.target) || [];\n      if (id == null || target == null) return;\n      const rect = {\n        width,\n        height,\n        left,\n        top\n      };\n      targets.set(id, {\n        ...target,\n        rect\n      });\n    });\n    observer.disconnect();\n  });\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}","import { useLayoutEffect, useRef } from 'react';\nimport { draggables, dragMonitors, dragSession, droppables } from './drag-state';\nimport { interactableEvent } from '../interactable-event';\nimport { activeInteraction, setActiveInteraction } from '../active-interaction';\nimport { domRectToObj } from '../utils/dom-rect-to-obj';\nimport { updateRects } from './update-rects';\nimport { useGlobalListeners } from '@react-aria/utils';\n\n// Either draggable from within the app, or file dragged in from the desktop\n\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}) {\n  const dragHandleRef = useRef(null);\n  const {\n    addGlobalListener,\n    removeAllGlobalListeners\n  } = useGlobalListeners();\n  const state = useRef({\n    lastPosition: {\n      x: 0,\n      y: 0\n    }\n  }).current;\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = callback => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n  const onDragStart = e => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle = !dragHandleRef.current || !state.clickedEl || dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n    state.lastPosition = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({\n      rect: state.currentRect,\n      e\n    });\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n  const onDragOver = e => {\n    e.preventDefault();\n    if (!state.currentRect) return;\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY\n    };\n    const ie = interactableEvent({\n      rect: newRect,\n      e,\n      deltaX,\n      deltaY\n    });\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n    state.lastPosition = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    state.currentRect = newRect;\n  };\n  const onDragEnd = e => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n    const ie = interactableEvent({\n      rect: state.currentRect,\n      e\n    });\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: e => {\n      state.clickedEl = e.target;\n    }\n  };\n  return {\n    draggableProps,\n    dragHandleRef\n  };\n}\nlet emptyImage;\nfunction hideNativeGhostImage(e) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}","import { UploadedFile } from '@ui/utils/files/uploaded-file';\nexport async function* readFilesFromDataTransfer(dataTransfer) {\n  const entries = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry);\n    }\n  }\n}\nasync function* getEntriesFromDirectory(item) {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries;\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry);\n      }\n    }\n  } while (entries.length > 0);\n}\nfunction getEntryFile(entry) {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}","export async function asyncIterableToArray(iterator) {\n  const items = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}","import { useLayoutEffect, useRef } from 'react';\nimport { draggables, dragSession, droppables } from './drag-state';\nimport { readFilesFromDataTransfer } from './read-files-from-data-transfer';\nimport { asyncIterableToArray } from '@ui/utils/array/async-iterable-to-array';\n\n// File dragged in from desktop\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\nexport function useDroppable({\n  id,\n  disabled,\n  ref,\n  ...options\n}) {\n  const state = useRef({\n    dragOverElements: new Set(),\n    dropActivateTimer: undefined\n  }).current;\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = draggable => {\n    const options = optionsRef.current;\n    const allowEventsOnSelf = options.allowDragEventsFromItself || ref.current !== draggable.ref?.current;\n    return !!(draggable?.type && allowEventsOnSelf && options.types.includes(draggable.type) && (!options.acceptsDrop || options.acceptsDrop(draggable)));\n  };\n  const fireDragLeave = e => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n  const onDragEnter = e => {\n    e.stopPropagation();\n    state.dragOverElements.add(e.target);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n  const onDragLeave = e => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n  const onDrop = async e => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n  const droppableProps = {\n    onDragOver: e => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop\n  };\n  return {\n    droppableProps: disabled ? {} : droppableProps\n  };\n}\nfunction getDraggable(e) {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      }\n    };\n  }\n}","export const USER_MODEL = 'user';","import { FilterControlType, FilterOperator } from './backend-filter';\nimport { DateRangePresets } from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport { message } from '@ui/i18n/message';\nimport { dateRangeToAbsoluteRange } from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nexport function timestampFilter(options) {\n  return {\n    ...options,\n    defaultOperator: FilterOperator.between,\n    control: {\n      type: FilterControlType.DateRangePicker,\n      defaultValue: options.control?.defaultValue || dateRangeToAbsoluteRange(DateRangePresets[3].getRangeValue())\n    }\n  };\n}\nexport function createdAtFilter(options) {\n  return timestampFilter({\n    key: 'created_at',\n    label: message('Date created'),\n    ...options\n  });\n}\nexport function updatedAtFilter(options) {\n  return timestampFilter({\n    key: 'updated_at',\n    label: message('Last updated'),\n    ...options\n  });\n}","import { FilterControlType, FilterOperator } from '../../datatable/filters/backend-filter';\nimport { message } from '@ui/i18n/message';\nimport { USER_MODEL } from '@ui/types/user';\nimport { createdAtFilter, updatedAtFilter } from '@common/datatable/filters/timestamp-filters';\nexport const FILE_ENTRY_TYPE_FILTER = {\n  key: 'type',\n  label: message('Type'),\n  description: message('Type of the file'),\n  defaultOperator: FilterOperator.eq,\n  control: {\n    type: FilterControlType.Select,\n    defaultValue: '05',\n    options: [{\n      key: '02',\n      label: message('Text'),\n      value: 'text'\n    }, {\n      key: '03',\n      label: message('Audio'),\n      value: 'audio'\n    }, {\n      key: '04',\n      label: message('Video'),\n      value: 'video'\n    }, {\n      key: '05',\n      label: message('Image'),\n      value: 'image'\n    }, {\n      key: '06',\n      label: message('PDF'),\n      value: 'pdf'\n    }, {\n      key: '07',\n      label: message('Spreadsheet'),\n      value: 'spreadsheet'\n    }, {\n      key: '08',\n      label: message('Word Document'),\n      value: 'word'\n    }, {\n      key: '09',\n      label: message('Photoshop'),\n      value: 'photoshop'\n    }, {\n      key: '10',\n      label: message('Archive'),\n      value: 'archive'\n    }, {\n      key: '11',\n      label: message('Folder'),\n      value: 'folder'\n    }]\n  }\n};\nexport const FILE_ENTRY_INDEX_FILTERS = [FILE_ENTRY_TYPE_FILTER, {\n  key: 'public',\n  label: message('Visibility'),\n  description: message('Whether file is publicly accessible'),\n  defaultOperator: FilterOperator.eq,\n  control: {\n    type: FilterControlType.Select,\n    defaultValue: '01',\n    options: [{\n      key: '01',\n      label: message('Private'),\n      value: false\n    }, {\n      key: '02',\n      label: message('Public'),\n      value: true\n    }]\n  }\n}, createdAtFilter({\n  description: message('Date file was uploaded')\n}), updatedAtFilter({\n  description: message('Date file was last changed')\n}), {\n  key: 'owner_id',\n  label: message('Uploader'),\n  description: message('User that this file was uploaded by'),\n  defaultOperator: FilterOperator.eq,\n  control: {\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL\n  }\n}];","import { createSvgIcon } from '../create-svg-icon';\nexport const FileDownloadIcon = createSvgIcon(<path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />, 'FileDownloadOutlined');","import React, { useContext, useMemo } from 'react';\nimport { useSettings } from '@ui/settings/use-settings';\nimport { isAbsoluteUrl } from '@ui/utils/urls/is-absolute-url';\nimport { getBootstrapData } from '@ui/bootstrap-data/bootstrap-data-store';\nexport const FileEntryUrlsContext = React.createContext(null);\nexport function useFileEntryUrls(entry, options) {\n  const {\n    base_url\n  } = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n  return useMemo(() => {\n    if (!entry) {\n      return {};\n    }\n    const previewUrl = buildPreviewUrl(entry, options?.preferThumbnail || false);\n    const urls = {\n      previewUrl,\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${options?.downloadHashes || entry.hash}`\n    };\n    if (urlSearchParams) {\n      // preview url\n      if (urls.previewUrl) {\n        urls.previewUrl = addParams(urls.previewUrl, {\n          ...urlSearchParams,\n          thumbnail: options?.preferThumbnail ? 'true' : ''\n        }, base_url);\n      }\n\n      // download url\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n    }\n    return urls;\n  }, [base_url, entry, options?.downloadHashes, options?.preferThumbnail, urlSearchParams]);\n}\nfunction buildPreviewUrl(entry, preferThumbnail) {\n  if (!entry.url) return;\n  if (isAbsoluteUrl(entry.url)) {\n    if (preferThumbnail && entry.thumbnail) {\n      // replace last instance of entry.file_name in entry.url with 'thumbnail'\n      const extension = entry.extension === 'png' ? 'png' : 'jpg';\n      return entry.url.replace(new RegExp(entry.file_name + '$'), `thumbnail.${extension}`);\n    } else {\n      return entry.url;\n    }\n  }\n  return `${getBootstrapData().settings.base_url}/${entry.url}`;\n}\nfunction addParams(urlString, params, baseUrl) {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value);\n  });\n  return url.toString();\n}","export function downloadFileFromUrl(url, name) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const MoreVertIcon = createSvgIcon(<path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />, 'MoreVertOutlined');","import clsx from 'clsx';\nimport { FileTypeIcon } from './file-type-icon';\nimport { useFileEntryUrls } from '../../file-entry-urls';\nimport { useTrans } from '@ui/i18n/use-trans';\nconst TwoMB = 2 * 1024 * 1024;\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true\n}) {\n  const {\n    trans\n  } = useTrans();\n  const {\n    previewUrl\n  } = useFileEntryUrls(file, {\n    preferThumbnail: true\n  });\n\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\n    showImage = false;\n  }\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {\n        fileName: file.name\n      }\n    });\n    return <img className={clsx(className, 'object-cover')} src={previewUrl} alt={alt} draggable={false} />;\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}","function memo(getDeps, fn, opts) {\n  let deps = opts.initialDeps ?? [];\n  let result;\n  function memoizedFunction() {\n    var _a, _b, _c, _d;\n    let depTime;\n    if (opts.key && ((_a = opts.debug) == null ? void 0 : _a.call(opts))) depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && ((_b = opts.debug) == null ? void 0 : _b.call(opts))) resultTime = Date.now();\n    result = fn(...newDeps);\n    if (opts.key && ((_c = opts.debug) == null ? void 0 : _c.call(opts))) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n      const pad = (str, num) => {\n        str = String(str);\n        while (str.length < num) {\n          str = \" \" + str;\n        }\n        return str;\n      };\n      console.info(\n        `%câ± ${pad(resultEndTime, 5)} /${pad(depEndTime, 5)} ms`,\n        `\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(\n          0,\n          Math.min(120 - 120 * resultFpsPercentage, 120)\n        )}deg 100% 31%);`,\n        opts == null ? void 0 : opts.key\n      );\n    }\n    (_d = opts == null ? void 0 : opts.onChange) == null ? void 0 : _d.call(opts, result);\n    return result;\n  }\n  memoizedFunction.updateDeps = (newDeps) => {\n    deps = newDeps;\n  };\n  return memoizedFunction;\n}\nfunction notUndefined(value, msg) {\n  if (value === void 0) {\n    throw new Error(`Unexpected undefined${msg ? `: ${msg}` : \"\"}`);\n  } else {\n    return value;\n  }\n}\nconst approxEqual = (a, b) => Math.abs(a - b) < 1.01;\nconst debounce = (targetWindow, fn, ms) => {\n  let timeoutId;\n  return function(...args) {\n    targetWindow.clearTimeout(timeoutId);\n    timeoutId = targetWindow.setTimeout(() => fn.apply(this, args), ms);\n  };\n};\nexport {\n  approxEqual,\n  debounce,\n  memo,\n  notUndefined\n};\n//# sourceMappingURL=utils.js.map\n","import { debounce, memo, notUndefined, approxEqual } from \"./utils.js\";\nconst getRect = (element) => {\n  const { offsetWidth, offsetHeight } = element;\n  return { width: offsetWidth, height: offsetHeight };\n};\nconst defaultKeyExtractor = (index) => index;\nconst defaultRangeExtractor = (range) => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n  return arr;\n};\nconst observeElementRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  const handler = (rect) => {\n    const { width, height } = rect;\n    cb({ width: Math.round(width), height: Math.round(height) });\n  };\n  handler(getRect(element));\n  if (!targetWindow.ResizeObserver) {\n    return () => {\n    };\n  }\n  const observer = new targetWindow.ResizeObserver((entries) => {\n    const run = () => {\n      const entry = entries[0];\n      if (entry == null ? void 0 : entry.borderBoxSize) {\n        const box = entry.borderBoxSize[0];\n        if (box) {\n          handler({ width: box.inlineSize, height: box.blockSize });\n          return;\n        }\n      }\n      handler(getRect(element));\n    };\n    instance.options.useAnimationFrameWithResizeObserver ? requestAnimationFrame(run) : run();\n  });\n  observer.observe(element, { box: \"border-box\" });\n  return () => {\n    observer.unobserve(element);\n  };\n};\nconst addEventListenerOptions = {\n  passive: true\n};\nconst observeWindowRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb({ width: element.innerWidth, height: element.innerHeight });\n  };\n  handler();\n  element.addEventListener(\"resize\", handler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"resize\", handler);\n  };\n};\nconst supportsScrollend = typeof window == \"undefined\" ? true : \"onscrollend\" in window;\nconst observeElementOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = instance.options.useScrollendEvent && supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    const { horizontal, isRtl } = instance.options;\n    offset = horizontal ? element[\"scrollLeft\"] * (isRtl && -1 || 1) : element[\"scrollTop\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  const registerScrollendEvent = instance.options.useScrollendEvent && supportsScrollend;\n  if (registerScrollendEvent) {\n    element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  }\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    if (registerScrollendEvent) {\n      element.removeEventListener(\"scrollend\", endHandler);\n    }\n  };\n};\nconst observeWindowOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = instance.options.useScrollendEvent && supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    offset = element[instance.options.horizontal ? \"scrollX\" : \"scrollY\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  const registerScrollendEvent = instance.options.useScrollendEvent && supportsScrollend;\n  if (registerScrollendEvent) {\n    element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  }\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    if (registerScrollendEvent) {\n      element.removeEventListener(\"scrollend\", endHandler);\n    }\n  };\n};\nconst measureElement = (element, entry, instance) => {\n  if (entry == null ? void 0 : entry.borderBoxSize) {\n    const box = entry.borderBoxSize[0];\n    if (box) {\n      const size = Math.round(\n        box[instance.options.horizontal ? \"inlineSize\" : \"blockSize\"]\n      );\n      return size;\n    }\n  }\n  return element[instance.options.horizontal ? \"offsetWidth\" : \"offsetHeight\"];\n};\nconst windowScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nconst elementScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nclass Virtualizer {\n  constructor(opts) {\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.targetWindow = null;\n    this.isScrolling = false;\n    this.measurementsCache = [];\n    this.itemSizeCache = /* @__PURE__ */ new Map();\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollRect = null;\n    this.scrollOffset = null;\n    this.scrollDirection = null;\n    this.scrollAdjustments = 0;\n    this.elementsCache = /* @__PURE__ */ new Map();\n    this.observer = /* @__PURE__ */ (() => {\n      let _ro = null;\n      const get = () => {\n        if (_ro) {\n          return _ro;\n        }\n        if (!this.targetWindow || !this.targetWindow.ResizeObserver) {\n          return null;\n        }\n        return _ro = new this.targetWindow.ResizeObserver((entries) => {\n          entries.forEach((entry) => {\n            const run = () => {\n              this._measureElement(entry.target, entry);\n            };\n            this.options.useAnimationFrameWithResizeObserver ? requestAnimationFrame(run) : run();\n          });\n        });\n      };\n      return {\n        disconnect: () => {\n          var _a;\n          (_a = get()) == null ? void 0 : _a.disconnect();\n          _ro = null;\n        },\n        observe: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.observe(target, { box: \"border-box\" });\n        },\n        unobserve: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.unobserve(target);\n        }\n      };\n    })();\n    this.range = null;\n    this.setOptions = (opts2) => {\n      Object.entries(opts2).forEach(([key, value]) => {\n        if (typeof value === \"undefined\") delete opts2[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        onChange: () => {\n        },\n        measureElement,\n        initialRect: { width: 0, height: 0 },\n        scrollMargin: 0,\n        gap: 0,\n        indexAttribute: \"data-index\",\n        initialMeasurementsCache: [],\n        lanes: 1,\n        isScrollingResetDelay: 150,\n        enabled: true,\n        isRtl: false,\n        useScrollendEvent: false,\n        useAnimationFrameWithResizeObserver: false,\n        ...opts2\n      };\n    };\n    this.notify = (sync) => {\n      var _a, _b;\n      (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, sync);\n    };\n    this.maybeNotify = memo(\n      () => {\n        this.calculateRange();\n        return [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ];\n      },\n      (isScrolling) => {\n        this.notify(isScrolling);\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"maybeNotify\",\n        debug: () => this.options.debug,\n        initialDeps: [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ]\n      }\n    );\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach((d) => d());\n      this.unsubs = [];\n      this.observer.disconnect();\n      this.scrollElement = null;\n      this.targetWindow = null;\n    };\n    this._didMount = () => {\n      return () => {\n        this.cleanup();\n      };\n    };\n    this._willUpdate = () => {\n      var _a;\n      const scrollElement = this.options.enabled ? this.options.getScrollElement() : null;\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        if (!scrollElement) {\n          this.maybeNotify();\n          return;\n        }\n        this.scrollElement = scrollElement;\n        if (this.scrollElement && \"ownerDocument\" in this.scrollElement) {\n          this.targetWindow = this.scrollElement.ownerDocument.defaultView;\n        } else {\n          this.targetWindow = ((_a = this.scrollElement) == null ? void 0 : _a.window) ?? null;\n        }\n        this.elementsCache.forEach((cached) => {\n          this.observer.observe(cached);\n        });\n        this._scrollToOffset(this.getScrollOffset(), {\n          adjustments: void 0,\n          behavior: void 0\n        });\n        this.unsubs.push(\n          this.options.observeElementRect(this, (rect) => {\n            this.scrollRect = rect;\n            this.maybeNotify();\n          })\n        );\n        this.unsubs.push(\n          this.options.observeElementOffset(this, (offset, isScrolling) => {\n            this.scrollAdjustments = 0;\n            this.scrollDirection = isScrolling ? this.getScrollOffset() < offset ? \"forward\" : \"backward\" : null;\n            this.scrollOffset = offset;\n            this.isScrolling = isScrolling;\n            this.maybeNotify();\n          })\n        );\n      }\n    };\n    this.getSize = () => {\n      if (!this.options.enabled) {\n        this.scrollRect = null;\n        return 0;\n      }\n      this.scrollRect = this.scrollRect ?? this.options.initialRect;\n      return this.scrollRect[this.options.horizontal ? \"width\" : \"height\"];\n    };\n    this.getScrollOffset = () => {\n      if (!this.options.enabled) {\n        this.scrollOffset = null;\n        return 0;\n      }\n      this.scrollOffset = this.scrollOffset ?? (typeof this.options.initialOffset === \"function\" ? this.options.initialOffset() : this.options.initialOffset);\n      return this.scrollOffset;\n    };\n    this.getFurthestMeasurement = (measurements, index) => {\n      const furthestMeasurementsFound = /* @__PURE__ */ new Map();\n      const furthestMeasurements = /* @__PURE__ */ new Map();\n      for (let m = index - 1; m >= 0; m--) {\n        const measurement = measurements[m];\n        if (furthestMeasurementsFound.has(measurement.lane)) {\n          continue;\n        }\n        const previousFurthestMeasurement = furthestMeasurements.get(\n          measurement.lane\n        );\n        if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n          furthestMeasurements.set(measurement.lane, measurement);\n        } else if (measurement.end < previousFurthestMeasurement.end) {\n          furthestMeasurementsFound.set(measurement.lane, true);\n        }\n        if (furthestMeasurementsFound.size === this.options.lanes) {\n          break;\n        }\n      }\n      return furthestMeasurements.size === this.options.lanes ? Array.from(furthestMeasurements.values()).sort((a, b) => {\n        if (a.end === b.end) {\n          return a.index - b.index;\n        }\n        return a.end - b.end;\n      })[0] : void 0;\n    };\n    this.getMeasurementOptions = memo(\n      () => [\n        this.options.count,\n        this.options.paddingStart,\n        this.options.scrollMargin,\n        this.options.getItemKey,\n        this.options.enabled\n      ],\n      (count, paddingStart, scrollMargin, getItemKey, enabled) => {\n        this.pendingMeasuredCacheIndexes = [];\n        return {\n          count,\n          paddingStart,\n          scrollMargin,\n          getItemKey,\n          enabled\n        };\n      },\n      {\n        key: false\n      }\n    );\n    this.getMeasurements = memo(\n      () => [this.getMeasurementOptions(), this.itemSizeCache],\n      ({ count, paddingStart, scrollMargin, getItemKey, enabled }, itemSizeCache) => {\n        if (!enabled) {\n          this.measurementsCache = [];\n          this.itemSizeCache.clear();\n          return [];\n        }\n        if (this.measurementsCache.length === 0) {\n          this.measurementsCache = this.options.initialMeasurementsCache;\n          this.measurementsCache.forEach((item) => {\n            this.itemSizeCache.set(item.key, item.size);\n          });\n        }\n        const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n        this.pendingMeasuredCacheIndexes = [];\n        const measurements = this.measurementsCache.slice(0, min);\n        for (let i = min; i < count; i++) {\n          const key = getItemKey(i);\n          const furthestMeasurement = this.options.lanes === 1 ? measurements[i - 1] : this.getFurthestMeasurement(measurements, i);\n          const start = furthestMeasurement ? furthestMeasurement.end + this.options.gap : paddingStart + scrollMargin;\n          const measuredSize = itemSizeCache.get(key);\n          const size = typeof measuredSize === \"number\" ? measuredSize : this.options.estimateSize(i);\n          const end = start + size;\n          const lane = furthestMeasurement ? furthestMeasurement.lane : i % this.options.lanes;\n          measurements[i] = {\n            index: i,\n            start,\n            size,\n            end,\n            key,\n            lane\n          };\n        }\n        this.measurementsCache = measurements;\n        return measurements;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getMeasurements\",\n        debug: () => this.options.debug\n      }\n    );\n    this.calculateRange = memo(\n      () => [\n        this.getMeasurements(),\n        this.getSize(),\n        this.getScrollOffset(),\n        this.options.lanes\n      ],\n      (measurements, outerSize, scrollOffset, lanes) => {\n        return this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n          measurements,\n          outerSize,\n          scrollOffset,\n          lanes\n        }) : null;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"calculateRange\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualIndexes = memo(\n      () => {\n        let startIndex = null;\n        let endIndex = null;\n        const range = this.calculateRange();\n        if (range) {\n          startIndex = range.startIndex;\n          endIndex = range.endIndex;\n        }\n        this.maybeNotify.updateDeps([this.isScrolling, startIndex, endIndex]);\n        return [\n          this.options.rangeExtractor,\n          this.options.overscan,\n          this.options.count,\n          startIndex,\n          endIndex\n        ];\n      },\n      (rangeExtractor, overscan, count, startIndex, endIndex) => {\n        return startIndex === null || endIndex === null ? [] : rangeExtractor({\n          startIndex,\n          endIndex,\n          overscan,\n          count\n        });\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getVirtualIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.indexFromElement = (node) => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n      if (!indexStr) {\n        console.warn(\n          `Missing attribute name '${attributeName}={index}' on measured element.`\n        );\n        return -1;\n      }\n      return parseInt(indexStr, 10);\n    };\n    this._measureElement = (node, entry) => {\n      const index = this.indexFromElement(node);\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const key = item.key;\n      const prevNode = this.elementsCache.get(key);\n      if (prevNode !== node) {\n        if (prevNode) {\n          this.observer.unobserve(prevNode);\n        }\n        this.observer.observe(node);\n        this.elementsCache.set(key, node);\n      }\n      if (node.isConnected) {\n        this.resizeItem(index, this.options.measureElement(node, entry, this));\n      }\n    };\n    this.resizeItem = (index, size) => {\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const itemSize = this.itemSizeCache.get(item.key) ?? item.size;\n      const delta = size - itemSize;\n      if (delta !== 0) {\n        if (this.shouldAdjustScrollPositionOnItemSizeChange !== void 0 ? this.shouldAdjustScrollPositionOnItemSizeChange(item, delta, this) : item.start < this.getScrollOffset() + this.scrollAdjustments) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"correction\", delta);\n          }\n          this._scrollToOffset(this.getScrollOffset(), {\n            adjustments: this.scrollAdjustments += delta,\n            behavior: void 0\n          });\n        }\n        this.pendingMeasuredCacheIndexes.push(item.index);\n        this.itemSizeCache = new Map(this.itemSizeCache.set(item.key, size));\n        this.notify(false);\n      }\n    };\n    this.measureElement = (node) => {\n      if (!node) {\n        this.elementsCache.forEach((cached, key) => {\n          if (!cached.isConnected) {\n            this.observer.unobserve(cached);\n            this.elementsCache.delete(key);\n          }\n        });\n        return;\n      }\n      this._measureElement(node, void 0);\n    };\n    this.getVirtualItems = memo(\n      () => [this.getVirtualIndexes(), this.getMeasurements()],\n      (indexes, measurements) => {\n        const virtualItems = [];\n        for (let k = 0, len = indexes.length; k < len; k++) {\n          const i = indexes[k];\n          const measurement = measurements[i];\n          virtualItems.push(measurement);\n        }\n        return virtualItems;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getVirtualItems\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualItemForOffset = (offset) => {\n      const measurements = this.getMeasurements();\n      if (measurements.length === 0) {\n        return void 0;\n      }\n      return notUndefined(\n        measurements[findNearestBinarySearch(\n          0,\n          measurements.length - 1,\n          (index) => notUndefined(measurements[index]).start,\n          offset\n        )]\n      );\n    };\n    this.getOffsetForAlignment = (toOffset, align, itemSize = 0) => {\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        align = toOffset >= scrollOffset + size ? \"end\" : \"start\";\n      }\n      if (align === \"center\") {\n        toOffset += (itemSize - size) / 2;\n      } else if (align === \"end\") {\n        toOffset -= size;\n      }\n      const maxOffset = this.getTotalSize() + this.options.scrollMargin - size;\n      return Math.max(Math.min(maxOffset, toOffset), 0);\n    };\n    this.getOffsetForIndex = (index, align = \"auto\") => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return void 0;\n      }\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        if (item.end >= scrollOffset + size - this.options.scrollPaddingEnd) {\n          align = \"end\";\n        } else if (item.start <= scrollOffset + this.options.scrollPaddingStart) {\n          align = \"start\";\n        } else {\n          return [scrollOffset, align];\n        }\n      }\n      const toOffset = align === \"end\" ? item.end + this.options.scrollPaddingEnd : item.start - this.options.scrollPaddingStart;\n      return [\n        this.getOffsetForAlignment(toOffset, align, item.size),\n        align\n      ];\n    };\n    this.isDynamicMode = () => this.elementsCache.size > 0;\n    this.scrollToOffset = (toOffset, { align = \"start\", behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getOffsetForAlignment(toOffset, align), {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.scrollToIndex = (index, { align: initialAlign = \"auto\", behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      let attempts = 0;\n      const maxAttempts = 10;\n      const tryScroll = (currentAlign) => {\n        if (!this.targetWindow) return;\n        const offsetInfo = this.getOffsetForIndex(index, currentAlign);\n        if (!offsetInfo) {\n          console.warn(\"Failed to get offset for index:\", index);\n          return;\n        }\n        const [offset, align] = offsetInfo;\n        this._scrollToOffset(offset, { adjustments: void 0, behavior });\n        this.targetWindow.requestAnimationFrame(() => {\n          const currentOffset = this.getScrollOffset();\n          const afterInfo = this.getOffsetForIndex(index, align);\n          if (!afterInfo) {\n            console.warn(\"Failed to get offset for index:\", index);\n            return;\n          }\n          if (!approxEqual(afterInfo[0], currentOffset)) {\n            scheduleRetry(align);\n          }\n        });\n      };\n      const scheduleRetry = (align) => {\n        if (!this.targetWindow) return;\n        attempts++;\n        if (attempts < maxAttempts) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"Schedule retry\", attempts, maxAttempts);\n          }\n          this.targetWindow.requestAnimationFrame(() => tryScroll(align));\n        } else {\n          console.warn(\n            `Failed to scroll to index ${index} after ${maxAttempts} attempts.`\n          );\n        }\n      };\n      tryScroll(initialAlign);\n    };\n    this.scrollBy = (delta, { behavior } = {}) => {\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getScrollOffset() + delta, {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.getTotalSize = () => {\n      var _a;\n      const measurements = this.getMeasurements();\n      let end;\n      if (measurements.length === 0) {\n        end = this.options.paddingStart;\n      } else if (this.options.lanes === 1) {\n        end = ((_a = measurements[measurements.length - 1]) == null ? void 0 : _a.end) ?? 0;\n      } else {\n        const endByLane = Array(this.options.lanes).fill(null);\n        let endIndex = measurements.length - 1;\n        while (endIndex >= 0 && endByLane.some((val) => val === null)) {\n          const item = measurements[endIndex];\n          if (endByLane[item.lane] === null) {\n            endByLane[item.lane] = item.end;\n          }\n          endIndex--;\n        }\n        end = Math.max(...endByLane.filter((val) => val !== null));\n      }\n      return Math.max(\n        end - this.options.scrollMargin + this.options.paddingEnd,\n        0\n      );\n    };\n    this._scrollToOffset = (offset, {\n      adjustments,\n      behavior\n    }) => {\n      this.options.scrollToFn(offset, { behavior, adjustments }, this);\n    };\n    this.measure = () => {\n      this.itemSizeCache = /* @__PURE__ */ new Map();\n      this.notify(false);\n    };\n    this.setOptions(opts);\n  }\n}\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange({\n  measurements,\n  outerSize,\n  scrollOffset,\n  lanes\n}) {\n  const lastIndex = measurements.length - 1;\n  const getOffset = (index) => measurements[index].start;\n  if (measurements.length <= lanes) {\n    return {\n      startIndex: 0,\n      endIndex: lastIndex\n    };\n  }\n  let startIndex = findNearestBinarySearch(\n    0,\n    lastIndex,\n    getOffset,\n    scrollOffset\n  );\n  let endIndex = startIndex;\n  if (lanes === 1) {\n    while (endIndex < lastIndex && measurements[endIndex].end < scrollOffset + outerSize) {\n      endIndex++;\n    }\n  } else if (lanes > 1) {\n    const endPerLane = Array(lanes).fill(0);\n    while (endIndex < lastIndex && endPerLane.some((pos) => pos < scrollOffset + outerSize)) {\n      const item = measurements[endIndex];\n      endPerLane[item.lane] = item.end;\n      endIndex++;\n    }\n    const startPerLane = Array(lanes).fill(scrollOffset + outerSize);\n    while (startIndex >= 0 && startPerLane.some((pos) => pos >= scrollOffset)) {\n      const item = measurements[startIndex];\n      startPerLane[item.lane] = item.start;\n      startIndex--;\n    }\n    startIndex = Math.max(0, startIndex - startIndex % lanes);\n    endIndex = Math.min(lastIndex, endIndex + (lanes - 1 - endIndex % lanes));\n  }\n  return { startIndex, endIndex };\n}\nexport {\n  Virtualizer,\n  approxEqual,\n  debounce,\n  defaultKeyExtractor,\n  defaultRangeExtractor,\n  elementScroll,\n  measureElement,\n  memo,\n  notUndefined,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  windowScroll\n};\n//# sourceMappingURL=index.js.map\n","import * as React from \"react\";\nimport { flushSync } from \"react-dom\";\nimport { Virtualizer, elementScroll, observeElementOffset, observeElementRect, windowScroll, observeWindowOffset, observeWindowRect } from \"@tanstack/virtual-core\";\nexport * from \"@tanstack/virtual-core\";\nconst useIsomorphicLayoutEffect = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  const rerender = React.useReducer(() => ({}), {})[1];\n  const resolvedOptions = {\n    ...options,\n    onChange: (instance2, sync) => {\n      var _a;\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      (_a = options.onChange) == null ? void 0 : _a.call(options, instance2, sync);\n    }\n  };\n  const [instance] = React.useState(\n    () => new Virtualizer(resolvedOptions)\n  );\n  instance.setOptions(resolvedOptions);\n  useIsomorphicLayoutEffect(() => {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase({\n    observeElementRect,\n    observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options\n  });\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase({\n    getScrollElement: () => typeof document !== \"undefined\" ? window : null,\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: () => typeof document !== \"undefined\" ? window.scrollY : 0,\n    ...options\n  });\n}\nexport {\n  useVirtualizer,\n  useWindowVirtualizer\n};\n//# sourceMappingURL=index.js.map\n","import React from 'react';\nexport const FilePreviewContext = React.createContext(null);","import { useContext } from 'react';\nimport clsx from 'clsx';\nimport { Button } from '@ui/buttons/button';\nimport { downloadFileFromUrl } from '@ui/utils/files/download-file-from-url';\nimport { FilePreviewContext } from '../file-preview-context';\nimport { Trans } from '@ui/i18n/trans';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nexport function DefaultFilePreview({\n  message,\n  className,\n  allowDownload\n}) {\n  const {\n    entries,\n    activeIndex\n  } = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {\n    downloadUrl\n  } = useFileEntryUrls(activeEntry);\n  return <div className={clsx(className, 'w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow')}>\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && <div className=\"mt-20 block text-center\">\n          <Button variant=\"flat\" color=\"primary\" onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}>\n            <Trans message=\"Download\" />\n          </Button>\n        </div>}\n    </div>;\n}","import clsx from 'clsx';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { DefaultFilePreview } from './default-file-preview';\nexport function ImageFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    trans\n  } = useTrans();\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n  return <img className={clsx(className, 'shadow')} src={previewUrl} alt={trans({\n    message: 'Preview for :name',\n    values: {\n      name: entry.name\n    }\n  })} />;\n}","import { useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport { DefaultFilePreview } from './default-file-preview';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport { useFileEntryUrls } from '@common/uploads/file-entry-urls';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { Trans } from '@ui/i18n/trans';\nimport { apiClient } from '@common/http/query-client';\nconst FIVE_MB = 5242880;\nexport function TextFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    trans\n  } = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState(null);\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl).then(response => {\n        setContents(response.data);\n      }).catch(() => {\n        setIsFailed(true);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    }\n  }, [entry, previewUrl]);\n  if (isLoading) {\n    return <ProgressCircle isIndeterminate aria-label={trans({\n      message: 'Loading file contents'\n    })} />;\n  }\n  if (tooLarge) {\n    return <DefaultFilePreview {...props} message={<Trans message=\"This file is too large to preview.\" />} />;\n  }\n  if (isFailed) {\n    return <DefaultFilePreview {...props} message={<Trans message=\"There was an issue previewing this file\" />} />;\n  }\n  return <pre className={clsx('h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm', className)}>\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>;\n}\nfunction getFileContents(src) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain'\n    }\n  });\n}","import { useEffect, useRef, useState } from 'react';\nimport { DefaultFilePreview } from './default-file-preview';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nexport function VideoFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  const ref = useRef(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n  return <video className={className} ref={ref} controls controlsList=\"nodownload noremoteplayback\" playsInline autoPlay>\n      <source src={previewUrl} type={entry.mime} onError={() => {\n      setMediaInvalid(true);\n    }} />\n    </video>;\n}","import { DefaultFilePreview } from './default-file-preview';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nimport { useEffect, useRef, useState } from 'react';\nexport function AudioFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  const ref = useRef(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n  return <audio className={className} ref={ref} controls controlsList=\"nodownload noremoteplayback\" autoPlay>\n      <source src={previewUrl} type={entry.mime} onError={() => {\n      setMediaInvalid(true);\n    }} />\n    </audio>;\n}","import clsx from 'clsx';\nimport { useFileEntryUrls } from '@common/uploads/file-entry-urls';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { DefaultFilePreview } from '@common/uploads/components/file-preview/file-preview/default-file-preview';\nexport function PdfFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    trans\n  } = useTrans();\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n  return <iframe title={trans({\n    message: 'Preview for :name',\n    values: {\n      name: entry.name\n    }\n  })} className={clsx(className, 'h-full w-full')} src={`${previewUrl}#toolbar=0`} />;\n}","import clsx from 'clsx';\nimport { useEffect, useRef, useState } from 'react';\nimport { DefaultFilePreview } from './default-file-preview';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { apiClient } from '@common/http/query-client';\nexport function WordDocumentFilePreview(props) {\n  const {\n    entry,\n    className\n  } = props;\n  const {\n    trans\n  } = useTrans();\n  const ref = useRef(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef();\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    previewUrl\n  } = useFileEntryUrls(entry);\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n  return <div className={clsx(className, 'h-full w-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe ref={ref} title={trans({\n      message: 'Preview for :name',\n      values: {\n        name: entry.name\n      }\n    })} className={clsx('h-full w-full', isLoading && 'hidden')} />\n    </div>;\n}\nasync function buildPreviewUrl(urlString, entry) {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {\n      data\n    } = await apiClient.post(`file-entries/${entry.id}/add-preview-token`);\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n  return buildOfficeLivePreviewUrl(url);\n}\nfunction buildOfficeLivePreviewUrl(url) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(url.toString())}`;\n}","import { ImageFilePreview } from './file-preview/image-file-preview';\nimport { DefaultFilePreview } from './file-preview/default-file-preview';\nimport { TextFilePreview } from './file-preview/text-file-preview';\nimport { VideoFilePreview } from './file-preview/video-file-preview';\nimport { AudioFilePreview } from './file-preview/audio-file-preview';\nimport { PdfFilePreview } from './file-preview/pdf-file-preview';\nimport { WordDocumentFilePreview } from './file-preview/word-document-file-preview';\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview\n};\nexport function getPreviewForEntry(entry) {\n  const mime = entry?.mime;\n  const type = entry?.type;\n  return AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview;\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const ChevronLeftIcon = createSvgIcon(<path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />, 'ChevronLeftOutlined');","import { AnimatePresence, m } from 'framer-motion';\nimport { Fragment, useContext, useMemo } from 'react';\nimport clsx from 'clsx';\nimport { getPreviewForEntry } from './available-previews';\nimport { FilePreviewContext } from './file-preview-context';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { ChevronLeftIcon } from '@ui/icons/material/ChevronLeft';\nimport { ChevronRightIcon } from '@ui/icons/material/ChevronRight';\nimport { FileDownloadIcon } from '@ui/icons/material/FileDownload';\nimport { downloadFileFromUrl } from '@ui/utils/files/download-file-from-url';\nimport { useFileEntryUrls } from '../../file-entry-urls';\nimport { Trans } from '@ui/i18n/trans';\nimport { Button } from '@ui/buttons/button';\nimport { CloseIcon } from '@ui/icons/material/Close';\nimport { FileThumbnail } from '@common/uploads/components/file-type-icon/file-thumbnail';\nimport { useMediaQuery } from '@ui/utils/hooks/use-media-query';\nimport { KeyboardArrowLeftIcon } from '@ui/icons/material/KeyboardArrowLeft';\nimport { KeyboardArrowRightIcon } from '@ui/icons/material/KeyboardArrowRight';\nimport { useControlledState } from '@react-stately/utils';\nimport { opacityAnimation } from '@ui/animation/opacity-animation';\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n  const [activeIndex, setActiveIndex] = useControlledState(props.activeIndex, props.defaultActiveIndex || 0, props.onActiveIndexChange);\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {\n      entries,\n      activeIndex\n    };\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n  return <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && <Header actionsLeft={headerActionsLeft} isMobile={isMobile} onClose={onClose} onNext={canOpenNext ? openNext : undefined} onPrevious={canOpenPrevious ? openPrevious : undefined} allowDownload={allowDownload} />}\n      <div className={clsx('relative flex-auto overflow-hidden', className)}>\n        {isMobile && <IconButton size=\"lg\" className=\"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\" disabled={!canOpenPrevious} onClick={openPrevious}>\n            <KeyboardArrowLeftIcon />\n          </IconButton>}\n        <AnimatePresence initial={false}>\n          <m.div className=\"absolute inset-0 flex items-center justify-center\" key={activeEntry.id} {...opacityAnimation}>\n            <Preview className=\"max-h-[calc(100%-30px)]\" entry={activeEntry} allowDownload={allowDownload} />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && <IconButton size=\"lg\" className=\"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\" disabled={!canOpenNext} onClick={openNext}>\n            <KeyboardArrowRightIcon />\n          </IconButton>}\n      </div>\n    </FilePreviewContext.Provider>;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload\n}) {\n  const {\n    entries,\n    activeIndex\n  } = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {\n    downloadUrl\n  } = useFileEntryUrls(activeEntry);\n  const desktopDownloadButton = <Button startIcon={<FileDownloadIcon />} variant=\"text\" onClick={() => {\n    if (downloadUrl) {\n      downloadFileFromUrl(downloadUrl);\n    }\n  }}>\n      <Trans message=\"Download\" />\n    </Button>;\n  const mobileDownloadButton = <IconButton onClick={() => {\n    if (downloadUrl) {\n      downloadFileFromUrl(downloadUrl);\n    }\n  }}>\n      <FileDownloadIcon />\n    </IconButton>;\n  const downloadButton = isMobile ? mobileDownloadButton : desktopDownloadButton;\n  return <div className=\"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted\">\n      <div className=\"flex w-1/3 items-center justify-start gap-4\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main\">\n        <FileThumbnail file={activeEntry} iconClassName=\"w-16 h-16\" showImage={false} />\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap\">\n        {!isMobile && <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"mx-20 h-24 w-1 bg-divider\" />\n          </Fragment>}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>;\n}","import { FilePreviewContainer } from './file-preview-container';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nexport function FilePreviewDialog(props) {\n  return <Dialog size=\"fullscreenTakeover\" background=\"bg-alt\" className=\"flex flex-col\">\n      <Content {...props} />\n    </Dialog>;\n}\nfunction Content(props) {\n  const {\n    close\n  } = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}","import { useControlledState } from '@react-stately/utils';\nimport { useCallback, useState } from 'react';\nimport { isSameDay, toCalendarDate } from '@internationalized/date';\nimport { useBaseDatePickerState } from '../use-base-date-picker-state';\nimport { useCurrentDateTime } from '@ui/i18n/use-current-date-time';\nimport { toSafeZoned } from '@ui/i18n/to-safe-zoned';\nexport function useDatePickerState(props) {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(!props.value && !props.defaultValue);\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(props.value || now, props.defaultValue || now, value => {\n    setIsPlaceholder(false);\n    setStateValue?.(value);\n  });\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection\n  } = useBaseDatePickerState(internalValue, props);\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n  const [calendarDates, setCalendarDates] = useState(() => {\n    return [toCalendarDate(internalValue)];\n  });\n  const setSelectedValue = useCallback(newValue => {\n    if (min && newValue.compare(min) < 0) {\n      newValue = min;\n    } else if (max && newValue.compare(max) > 0) {\n      newValue = max;\n    }\n\n    // preserve time\n    const value = internalValue ? internalValue.set(newValue) : toSafeZoned(newValue, timezone);\n    setInternalValue(value);\n    setCalendarDates([toCalendarDate(value)]);\n    setIsPlaceholder(false);\n  }, [setInternalValue, min, max, internalValue, timezone]);\n  const dayIsActive = useCallback(day => !isPlaceholder && isSameDay(internalValue, day), [internalValue, isPlaceholder]);\n  const getCellProps = useCallback(date => {\n    return {\n      onClick: () => {\n        setSelectedValue?.(date);\n        if (closeDialogOnSelection) {\n          setCalendarIsOpen?.(false);\n        }\n      }\n    };\n  }, [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection]);\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection\n  };\n}","import React, { Fragment, useRef } from 'react';\nimport { parseAbsoluteToLocal } from '@internationalized/date';\nimport { useController } from 'react-hook-form';\nimport { mergeProps } from '@react-aria/utils';\nimport { useDatePickerState } from './use-date-picker-state';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { DateRangeIcon } from '@ui/icons/material/DateRange';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { Calendar } from '../calendar/calendar';\nimport { DatePickerField } from '../date-range-picker/date-picker-field';\nimport { DateSegmentList } from '../segments/date-segment-list';\nimport { useDateFormatter } from '@ui/i18n/use-date-formatter';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport clsx from 'clsx';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { Button } from '@ui/buttons/button';\nimport { Trans } from '@ui/i18n/trans';\nimport { useCurrentDateTime } from '@ui/i18n/use-current-date-time';\nexport function DatePicker({\n  showCalendarFooter,\n  ...props\n}) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef(null);\n  const now = useCurrentDateTime();\n  const footer = showCalendarFooter && <DialogFooter padding=\"px-14 pb-14\" startAction={<Button disabled={state.isPlaceholder} variant=\"text\" color=\"primary\" onClick={() => {\n    state.clear();\n  }}>\n          <Trans message=\"Clear\" />\n        </Button>}>\n      <Button variant=\"text\" color=\"primary\" onClick={() => {\n      state.setSelectedValue(now);\n      state.setCalendarIsOpen(false);\n    }}>\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>;\n  const dialog = <DialogTrigger offset={8} placement=\"bottom-start\" isOpen={state.calendarIsOpen} onOpenChange={state.setCalendarIsOpen} type=\"popover\" triggerRef={inputRef} returnFocusToTrigger={false} moveFocusToDialog={false}>\n      <Dialog size=\"auto\">\n        <DialogBody className=\"flex items-start gap-40\" padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}>\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>;\n  const openOnClick = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    }\n  };\n  return <Fragment>\n      <DatePickerField ref={inputRef} wrapperProps={openOnClick} endAdornment={<DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />} {...props}>\n        <DateSegmentList segmentProps={openOnClick} state={state} value={state.selectedValue} onChange={state.setSelectedValue} isPlaceholder={state.isPlaceholder} />\n      </DatePickerField>\n      {dialog}\n    </Fragment>;\n}\nexport function FormDatePicker(props) {\n  const {\n    min,\n    max\n  } = props;\n  const {\n    trans\n  } = useTrans();\n  const {\n    format\n  } = useDateFormatter();\n  const {\n    field: {\n      onChange,\n      onBlur,\n      value = null,\n      ref\n    },\n    fieldState: {\n      invalid,\n      error\n    }\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {\n              date: format(v)\n            }\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {\n              date: format(v)\n            }\n          });\n        }\n      }\n    }\n  });\n  const parsedValue = value ? parseAbsoluteToLocal(value) : null;\n  const formProps = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref\n  };\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\nfunction isHourSegment(e) {\n  return ['hour', 'minute', 'dayPeriod'].includes(e.currentTarget.ariaLabel || '');\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const InfoIcon = createSvgIcon(<path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />, 'InfoOutlined');","import { cloneElement } from 'react';\nimport clsx from 'clsx';\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n  stableScrollbar = true\n}) {\n  return cloneElement(children, {\n    className: clsx(children?.props?.className, isScrollable && 'w-full overflow-y-auto', isScrollable && stableScrollbar && 'stable-scrollbar', 'dashboard-grid-content', 'has-[.dashboard-stable-scrollbar]:stable-scrollbar')\n  });\n}","import { useEffect, useRef } from 'react';\nexport function usePrevious(value) {\n  const ref = useRef();\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}"],"names":["$cc38e7bd3fc7b213$export$2bb74740c4e19def","node","checkForOverflow","style","isScrollable","$62d8ded9296f3872$export$cfa2225e87938781","scrollableNode","AddIcon","createSvgIcon","jsx","draggables","droppables","dragMonitors","dragSession","interactableEvent","e","rect","deltaX","deltaY","activeInteraction","setActiveInteraction","name","domRectToObj","updateRects","targets","observer","entries","entry","width","height","left","top","id","target","useDraggable","disabled","ref","preview","hidePreview","options","dragHandleRef","useRef","addGlobalListener","removeAllGlobalListeners","useGlobalListeners","state","optionsRef","useLayoutEffect","notifyMonitors","callback","monitor","_a","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","_b","m","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","item","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","resolve","reject","asyncIterableToArray","iterator","items","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","_d","_c","USER_MODEL","timestampFilter","FilterOperator","FilterControlType","dateRangeToAbsoluteRange","DateRangePresets","createdAtFilter","message","updatedAtFilter","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","FileDownloadIcon","FileEntryUrlsContext","React","useFileEntryUrls","base_url","useSettings","urlSearchParams","useContext","useMemo","urls","buildPreviewUrl","addParams","preferThumbnail","isAbsoluteUrl","extension","getBootstrapData","urlString","params","baseUrl","url","key","value","downloadFileFromUrl","link","MoreVertIcon","TwoMB","FileThumbnail","className","iconClassName","showImage","trans","useTrans","previewUrl","alt","clsx","FileTypeIcon","memo","getDeps","fn","opts","deps","result","memoizedFunction","depTime","newDeps","dep","index","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","notUndefined","msg","approxEqual","a","b","debounce","targetWindow","ms","timeoutId","args","getRect","offsetWidth","offsetHeight","defaultKeyExtractor","defaultRangeExtractor","range","start","end","arr","i","observeElementRect","instance","cb","handler","run","box","addEventListenerOptions","supportsScrollend","observeElementOffset","offset","fallback","createHandler","isScrolling","horizontal","isRtl","endHandler","registerScrollendEvent","measureElement","elementScroll","adjustments","behavior","toOffset","Virtualizer","_ro","get","opts2","sync","d","scrollElement","cached","measurements","furthestMeasurementsFound","furthestMeasurements","measurement","previousFurthestMeasurement","count","paddingStart","scrollMargin","getItemKey","enabled","itemSizeCache","min","furthestMeasurement","measuredSize","size","lane","outerSize","scrollOffset","lanes","calculateRange","startIndex","endIndex","rangeExtractor","overscan","attributeName","indexStr","prevNode","itemSize","delta","indexes","virtualItems","k","len","findNearestBinarySearch","align","maxOffset","initialAlign","attempts","maxAttempts","tryScroll","currentAlign","offsetInfo","currentOffset","afterInfo","scheduleRetry","endByLane","val","low","high","getCurrentValue","middle","currentValue","lastIndex","getOffset","endPerLane","pos","startPerLane","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","resolvedOptions","instance2","flushSync","React.useState","useVirtualizer","FilePreviewContext","DefaultFilePreview","allowDownload","activeIndex","activeEntry","content","Trans","downloadUrl","Button","ImageFilePreview","props","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","useState","isLoading","setIsLoading","isFailed","setIsFailed","contents","setContents","useEffect","getFileContents","response","ProgressCircle","src","apiClient","VideoFilePreview","mediaInvalid","setMediaInvalid","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","data","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","type","ChevronLeftIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","isMobile","useMediaQuery","setActiveIndex","useControlledState","contextValue","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","jsxs","Header","IconButton","KeyboardArrowLeftIcon","AnimatePresence","opacityAnimation","KeyboardArrowRightIcon","onNext","onPrevious","actionsLeft","downloadButton","Fragment","ChevronRightIcon","CloseIcon","FilePreviewDialog","Dialog","Content","close","useDialogContext","useDatePickerState","now","useCurrentDateTime","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","max","granularity","timezone","calendarIsOpen","setCalendarIsOpen","closeDialogOnSelection","useBaseDatePickerState","clear","useCallback","calendarDates","setCalendarDates","toCalendarDate","setSelectedValue","newValue","toSafeZoned","dayIsActive","day","isSameDay","getCellProps","date","DatePicker","showCalendarFooter","inputRef","footer","DialogFooter","dialog","DialogTrigger","DialogBody","Calendar","openOnClick","isHourSegment","DatePickerField","DateRangeIcon","DateSegmentList","FormDatePicker","format","useDateFormatter","onChange","onBlur","invalid","error","useController","v","parseAbsoluteToLocal","parsedValue","formProps","mergeProps","InfoIcon","DashboardContent","children","stableScrollbar","cloneElement","usePrevious"],"mappings":"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","x_google_ignoreList":[0,1,20,21,22]}