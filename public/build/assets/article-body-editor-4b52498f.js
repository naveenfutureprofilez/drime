import{r as g,ap as L,j as k,aq as v}from"./vendor-react-fefbac25.js";import{cp as f,cq as x,cr as C,cs as y,ct as h,cu as T,c0 as M,c1 as A,c2 as S,c3 as E,c4 as H,c5 as I,c6 as B,c7 as w,c8 as j,c9 as N,ca as O,cv as K,cw as R,cx as q,cy as G,cz as z,cA as D,cB as F,cC as P,cD as U,cE as X}from"./vendor-e6c98b2f.js";import{aX as $}from"./admin-analytics-cad99b47.js";import"./vendor-utils-f24f35c9.js";import"./vendor-editor-a92125c6.js";const J=f.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>e.style.backgroundColor.replace(/['"]+/g,""),renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:n})=>n().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Q=f.create({name:"indent",addOptions:()=>({types:["listItem","paragraph"],minLevel:0,maxLevel:6}),addGlobalAttributes(){return[{types:this.options.types,attributes:{indent:{renderHTML:e=>(e==null?void 0:e.indent)>this.options.minLevel?{"data-indent":e.indent}:null,parseHTML:e=>{const n=Number(e.getAttribute("data-indent"));return n&&n>this.options.minLevel?n:null}}}}]},addCommands(){const e=(r,o,c)=>{var i;const t=(i=r==null?void 0:r.doc)==null?void 0:i.nodeAt(o);if(t){const l=(t.attrs.indent||0)+c,{minLevel:s,maxLevel:u}=this.options,p=l<s?s:l>u?u:l;if(p!==t.attrs.indent){const{indent:Y,...m}=t.attrs,b=p>s?{...m,indent:p}:m;return r.setNodeMarkup(o,t.type,b,t.marks)}}return r},n=(r,o)=>{const{doc:c,selection:t}=r;if(c&&t&&(t instanceof x||t instanceof C)){const{from:i,to:l}=t;c.nodesBetween(i,l,(s,u)=>this.options.types.includes(s.type.name)?(r=e(r,u,o),!1):!0)}return r},d=r=>()=>({tr:o,state:c,dispatch:t})=>{const{selection:i}=c;return o=o.setSelection(i),o=n(o,r),o.docChanged?(t==null||t(o),!0):!1};return{indent:d(1),outdent:d(-1)}},addKeyboardShortcuts(){return{Tab:({editor:e})=>e.state.selection.to>e.state.selection.from?this.editor.commands.indent():!1,"Shift-Tab":({editor:e})=>e.state.selection.to>e.state.selection.from?this.editor.commands.outdent():!1}}}),V=y.create({name:"embed",group:"block",atom:!0,addAttributes(){return{allowfullscreen:{default:null},allow:{default:"autoplay; fullscreen; picture-in-picture"},src:{default:null}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:e}){return["iframe",h(this.options.HTMLAttributes,e)]},addCommands(){return{setEmbed:e=>({commands:n})=>n.insertContent({type:this.name,attrs:e})}}});const a=T();a.register("javascript",M);a.register("typescript",A);a.register("html",S);a.register("css",E);a.register("php",H);a.register("shell",I);a.register("bash",B);a.register("ruby",w);a.register("python",j);a.register("java",N);a.register("c",O);const W=y.create({name:"be-info-block",group:"block",content:"inline*",defining:!0,addOptions(){return{types:["important","warning","success"],defaultType:"success"}},addAttributes(){return{type:{default:this.options.defaultType,parseHTML:e=>{for(const n of this.options.types)if(e.classList.contains(n))return n;return this.options.defaultType},renderHTML:e=>({class:e.type})}}},parseHTML(){return[{tag:"div",contentElement:"p",getAttrs:e=>e.classList.contains("info-block")&&null}]},renderHTML({HTMLAttributes:e}){return["div",h(e,{class:"info-block"}),["div",{class:"title"},"Important:"],["p",0]]},addCommands(){return{addInfo:e=>({commands:n})=>n.setNode(this.name,e)}}});function re({initialContent:e="",children:n,onLoad:d,onCtrlEnter:r,minHeight:o="min-h-320",autoFocus:c}){const t=$(d),i=g.useRef(!1),l=[K.configure({codeBlock:!1}),R,q.extend({inclusive:!1,validate:{url:u=>/^https?:\/\//.test(u)}}),G,z,D,F,P,J,Q,U.configure({lowlight:a}),X.configure({types:["heading","paragraph"]}),W,V];r&&l.push(f.create({addKeyboardShortcuts:()=>({"Cmd-Enter"(){return r(),!0},"Ctrl-Enter"(){return r(),!0}})}));const s=L({extensions:l,onFocus:()=>{},autofocus:c,content:e});return g.useEffect(()=>{if(s)return()=>s.destroy()},[s]),s?(s&&t&&!i.current&&(t(s),i.current=!0),n(k.jsx(v,{className:o,editor:s}),s)):null}export{re as default};
//# sourceMappingURL=article-body-editor-4b52498f.js.map
