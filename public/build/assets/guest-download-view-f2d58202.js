import{j as e,bg as k,r,bh as S,bi as C,bj as F,a as D}from"./main-14f9202e.js";const $=""+new URL("Vector-45797815.png",import.meta.url).href,I=(t,o)=>{const a=o?E(o):"4.5 KB";if(!t)return`${a} - No expiry date`;try{const s=new Date(t),n=s.toLocaleDateString("en-US"),l=s.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${a} - Expires on ${n} at ${l}`}catch{return`${a} - Invalid expiry date`}},E=t=>{if(t===0)return"0 B";const o=1024,a=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,s)).toFixed(1))+" "+a[s]};function U({expiresAt:t,totalSize:o,itemCount:a=1}){return e.jsxs("div",{className:"column-center border-apply p-4",children:[e.jsx("img",{src:$,alt:"",className:"h-12 w-12 object-cover"}),e.jsxs("h3",{className:"mt-2 normal-heading text-sm md:!text-[18px] mt-1 ",children:["You received ",a," ",a===1?"item":"items"]}),e.jsx("p",{className:"normal-para text-sm md:!text-[16px] mt-1",children:I(t,o)})]})}function B(t){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}const M=""+new URL("storage-0d2b4209.png",import.meta.url).href,G=({isOpen:t})=>{const[o,a]=r.useState(!1);r.useEffect(()=>{a(t)},[t]);const s=[{title:"20GB of secure, high-quality storage",description:"No compression. No clutter. Just reliable cloud storage built for your biggest ideas."},{title:"Custom share links with full control",description:"Set passwords, expiration dates, and track every document you share."},{title:"PDF-ready. Feedback-ready.",description:"Fill, sign, edit and comment, all in one place, no tool switching."}];return e.jsx(e.Fragment,{children:o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-0 md:p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-none md:rounded-3xl shadow-2xl w-full h-full md:max-w-4xl md:h-auto flex flex-col lg:flex-row overflow-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col relative h-1/3 md:h-auto",children:[e.jsx("button",{className:"absolute top-4 left-4 text-black hover:text-red-500 z-10",onClick:()=>a(!1),children:e.jsx(S,{size:32})}),e.jsx("img",{src:M,alt:"A visual representation of cloud storage",className:"w-full h-full object-cover"})]}),e.jsxs("div",{className:"bg-white text-black p-4 md:p-8 flex-1 flex flex-col justify-center space-y-6 overflow-auto",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-3 md:mb-6",children:"Want to store your content?"}),s.map((n,l)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"w-6 h-6 text-green-400 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg md:text-xl",children:n.title}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm md:text-base",children:n.description})]})]},l)),e.jsx("a",{href:"https://drime.cloud/",className:"button-sm md:button-md lg:button-lg w-full md:w-auto !py-3 ",children:"Get started for free"})]})]})})})},R=({files:t,totalSize:o,expiresAt:a,hash:s,hasPassword:n})=>{const[l,f]=r.useState(""),[V,m]=r.useState(!1),h=c=>{f(c.target.value)},[x,u]=r.useState(!1),[g,w]=r.useState(!n),[z,d]=r.useState("");console.log("GuestDownloadView props:",{files:t,totalSize:o,expiresAt:a,hash:s,hasPassword:n});const b=async c=>{if(c.preventDefault(),!!l.trim()){u(!0),d("");try{(await D.post(`guest/upload/${s}/verify-password`,{password:l})).data.valid?w(!0):d("Incorrect password. Please try again.")}catch{d("Error verifying password. Please try again.")}finally{u(!1)}}},[L,p]=r.useState(!1),[j,y]=r.useState(!1),v=()=>{if(!s){alert("Invalid download link.");return}p(!0);try{const c=n&&l?`?password=${encodeURIComponent(l)}`:"";if(t&&t.length===1){const i=t[0];console.log("file",i);const N=`/download/${s}/${i.id}${c}`;window.open(N,"_blank")}else if(t&&t.length>1){const i=`/download/${s}${c}`;window.open(i,"_blank"),console.log("downloadUrl",i)}else alert("No files available for download.")}finally{p(!1),setTimeout(()=>{y(!0)},3e3)}};return n&&!g?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Enter the password"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(C,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"To access this link, you will need its password. If you do not have the password, contact the creator of the link."}),e.jsx("input",{type:"password",placeholder:"Enter the password",value:l,onChange:h,className:"inut-sm  sm:input"})]}),e.jsxs("div",{className:"flex justify-end items-center p-4 space-x-2 border-t",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-white bg-red-600 rounded-lg font-medium hover:bg-red-500 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:x||!l.trim(),onClick:b,className:"button-sm md:button-md lg:button-lg ",children:x?e.jsx("p",{children:"Verifying.."}):e.jsx("p",{children:"Access Files"})})]})]})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(e.Fragment,{children:[e.jsx(U,{expiresAt:a,totalSize:o,itemCount:t?t.length:0}),e.jsxs("div",{className:"!pt-0 p-[0px] lg:p-[30px]",children:[e.jsx(F,{step:4,selectedFiles:t,hash:s,hasPassword:n,password:l}),e.jsxs("div",{className:"between-align mt-6",children:[e.jsx("a",{href:"/",className:"text-[16px]  text-black font-[600] leading-5 underline",children:"Create a transfer"}),e.jsx("button",{onClick:v,className:"button-md ",children:"Download"})]}),e.jsx(G,{isOpen:j})]})]})})};export{R as G};
//# sourceMappingURL=guest-download-view-f2d58202.js.map
