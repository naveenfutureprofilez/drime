import{bF as et,r as d,bG as dr,bH as ur,j as e,p as b,bw as mr,bI as xr,av as gr,bJ as Ls,bd as Ea,bD as T,i as je,T as n,L as st,$ as E,bK as hr,bL as pr,bM as jr,bN as fr,b0 as br,I as Me,a as A,be as qe,bt as es,bO as vr,aU as Ta,v as x,aX as yr,R as V,bP as Da,bQ as hs,a6 as h,a0 as k,am as Ms,V as Xe,an as La,ao as Ma,a4 as wr,X as Le,z as G,D as ee,A as re,B as te,y as P,C as oe,aK as _r,H as f,Z as M,aA as He,aB as tt,aN as Ze,bo as X,bR as at,bS as Sr,b7 as qs,q as $,w as L,t as R,J as ae,O as we,bT as kr,aQ as nt,aR as rt,ae as Pe,G as xe,Y as it,x as Ce,E as p,a_ as lt,a7 as B,af as Ys,a2 as Be,aJ as ve,aE as Z,bU as Nr,aq as pe,b8 as ps,bV as js,d as Cr,bW as Fr,ba as zr,bX as Ir,br as Ar,b6 as Ke,bY as Pr,S as $s,a9 as ot,bg as ls,bZ as os,_ as Ee,aY as qa,aZ as $a,b_ as Js,as as cs,u as ge,b$ as C,c0 as Rs,bz as Ra,c1 as Er,c2 as Tr,c3 as fs,bA as ct,c4 as K,aL as Va,c5 as Dr,c6 as Oa,c7 as $t,bq as bs,a8 as Rt,c8 as ds,ah as Lr,aC as Vt,c9 as dt,ca as Mr,a3 as We,a5 as Ge,cb as Ot,cc as Ua,cd as qr,ce as Ut,cf as is,bE as $r,aH as Rr,aI as Vr,cg as Or,ch as Ha,ci as Ur,cj as Hr,ck as Br,cl as Kr,cm as Wr,cn as Gr,ag as Ba,ad as ut,bs as Qr,co as Ka,ax as Wa,cp as Ht,c as Yr,g as Jr,aT as Xr,bp as Zr,bl as Bt,cq as ei,cr as si,aV as ti,cs as ai,ct as ni,aa as ri,cu as ii,cv as li,cw as Ga,cx as oi,cy as ci,cz as Kt,cA as di,cB as vs,cC as ui,cD as mi,cE as xi,cF as gi,cG as hi,cH as pi,cI as ji,ap as ca}from"./main-e798bedc.js";import{f as Qa,E as fi,J as bi,G as vi,H as yi,b as le,c as ue,d as us,e as ys,h as wi,L as Wt,N as _i,O as Si,P as ki,Q as Ni,S as Ci,R as Fi,g as zi,q as Ii,o as mt,n as Ai,y as At,v as Pi,i as Ye,a as Ei,u as Ti,$ as Di,l as Li,U as xt,D as gt,V as Mi,W as qi,M as ht,C as $i,t as Ri,x as Ya,X as Vi,w as Oi,Y as Ui,Z as Hi,I as Bi,_ as Ja,j as Ki}from"./dashboard-layout-d83c0491.js";import{K as ws,F as D,S as Pt,f as Wi,A as Xa}from"./ArrowBack-7e40eb40.js";import{S as _s,E as ss,B as Gi,a as da}from"./breadcrumb-f2553d42.js";import{$ as Za,t as Qi,F as en,a as Yi}from"./formatted-bytes-b9b55034.js";import{O as Ji,u as sn,a as Xi}from"./use-resume-subscription-5c0203c1.js";function Zi(s,t){const a=et(t);return el({filters:{...s,status:"pending"}},a).length}function ua(s,t){return s.findAll(t.filters).map(a=>t.select?t.select(a):a.state)}function el(s={},t){const a=et(t).getMutationCache(),r=d.useRef(s),i=d.useRef();return i.current||(i.current=ua(a,s)),d.useEffect(()=>{r.current=s}),d.useSyncExternalStore(d.useCallback(l=>a.subscribe(()=>{const o=dr(i.current,ua(a,r.current));i.current!==o&&(i.current=o,ur.schedule(l))}),[a]),()=>i.current,()=>i.current)}function sl({className:s,isCompactMode:t=!1,matchDescendants:a,menuName:r,bottomContent:i,isOverlayMode:l,variant:o="withNavbar",customMenuRender:c}){const m=mr();return e.jsxs("div",{className:b(s,t?"px-6 pt-6":"px-12 pt-26","relative flex flex-col gap-20 overflow-y-auto overflow-x-hidden bg-alt pb-16 text-sm font-medium text-muted",l&&"border-r"),children:[o==="withoutNavbar"&&e.jsxs(d.Fragment,{children:[e.jsx(xr,{color:m?"light":"dark",logoType:t?"compact":"wide",className:t?"mx-auto mt-12":"mb-12",size:t?"h-34 w-34":"h-36"}),e.jsx(tl,{})]}),e.jsx(gr,{matchDescendants:a,menu:r,orientation:"vertical",onlyShowIcons:t,iconSize:t?"md":"sm",gap:t?"gap-2":"gap-4",itemClassName:({isActive:u})=>tn({isActive:u,isCompactMode:t}),children:c}),e.jsx("div",{className:b("mt-auto space-y-2",t&&"mx-auto"),children:i})]})}function tl(){const{leftSidenavStatus:s,setLeftSidenavStatus:t,name:a}=d.useContext(Qa),r=()=>{const i=s==="open"?"compact":"open";t(i),Ea(`${a}.sidenav.compact`,i==="compact")};return e.jsx("button",{className:b("fixed bottom-180 z-10 flex select-none appearance-none items-center justify-center rounded-full border bg align-middle outline-none transition-[left,color,shadow] duration-200 hover:text-primary focus-visible:ring",s==="open"?"left-[212px]":"left-48"),onClick:()=>r(),children:s==="open"?e.jsx(Ls,{size:"sm"}):e.jsx(ws,{size:"sm"})})}const al=d.forwardRef(({elementType:s="button",isCompact:t=!1,children:[a,r,...i],className:l,target:o,to:c,...m},u)=>{const g=s;return e.jsxs(g,{ref:u,...m,target:o,to:c,className:b(l,"flex",t?"gap-2":"gap-8",tn({isActive:!1,isCompactMode:t})),children:[d.cloneElement(a,{size:t?"md":"sm"}),!t&&r,i]})});function tn({isActive:s,isCompactMode:t}){return b("rounded-button",t?"w-48 h-48 items-center justify-center":"w-full py-12 px-16 block justify-start",s?"bg-primary/6 text-primary font-semibold":"hover:bg-hover")}const nl=T(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"}),"KeyboardArrowUpOutlined");function rl(s){const{version:t}=je(),{isMobileMode:a,leftSidenavStatus:r}=d.useContext(Qa),i=a||r==="compact"||!1,l=e.jsxs(d.Fragment,{children:[s.variant==="withoutNavbar"&&e.jsxs(d.Fragment,{children:[e.jsx(il,{isCompact:i}),e.jsx(ll,{isCompact:i})]}),s.isCompactMode?void 0:e.jsx("span",{children:e.jsx("div",{className:"mt-16 overflow-hidden text-ellipsis whitespace-nowrap px-16 text-xs",children:e.jsx(n,{message:"Version: :number",values:{number:t}})})})]});return e.jsx(sl,{...s,matchDescendants:o=>o==="/admin",menuName:"admin-sidebar",bottomContent:l})}function il({isCompact:s}){const{user:t}=st(),a=!!(t!=null&&t.unread_notifications_count);return e.jsxs(E,{type:"popover",placement:"top",children:[e.jsxs(al,{isCompact:s,className:"relative",children:[e.jsx(hr,{}),e.jsx(n,{message:"Notifications"}),a?e.jsx(pr,{children:t==null?void 0:t.unread_notifications_count}):void 0]}),e.jsx(jr,{})]})}function ll({isCompact:s,avatar:t}){const{user:a}=st();if(!a)return null;const r=t||br,i=e.jsx(r,{user:a,size:"w-32 h-32"});return e.jsx(fr,{placement:"top",children:s?e.jsx("button",{"aria-label":"toggle authentication menu",className:"flex h-48 w-48 items-center justify-center rounded-button hover:bg-hover",children:i}):e.jsxs("button",{className:"flex w-full items-center rounded-button px-12 py-8 hover:bg-hover",children:[i,e.jsx("span",{className:"ml-8 block min-w-0 overflow-x-hidden overflow-ellipsis whitespace-nowrap text-sm",children:a.name}),e.jsx(nl,{size:"xs",className:"ml-auto block"})]})})}function ol(){return Me({queryKey:["admin-setup-alerts"],queryFn:()=>cl()})}function cl(){return A.get("admin/setup-alerts").then(s=>s.data)}function dl(){const t=qe()?"withNavbar":"withoutNavbar";return e.jsxs(fi,{name:"admin",leftSidenavCanBeCompact:!0,className:"bg-alt",children:[t==="withNavbar"&&e.jsx(bi,{size:"sm",menuPosition:"admin-navbar"}),e.jsx(vi,{position:"left",size:"sm",children:e.jsx(rl,{variant:"withoutNavbar"})}),e.jsx(yi,{children:e.jsxs("div",{className:b(t==="withoutNavbar"?"relative bg ring-divider dark:bg-alt md:mt-6 md:rounded-tl-md md:shadow-sm md:ring md:ring-1":"border-l bg dark:bg-alt"),children:[e.jsx(ul,{}),e.jsx(es,{})]})})]})}function ul(){const{data:s}=ol(),[t]=vr("admin-setup-alert-dismissed",null),a=!t||Date.now()-t.timestamp>864e5;return!(s!=null&&s.alerts.length)||!a?null:e.jsx("div",{className:"fixed left-24 right-24 top-24 z-10 mx-auto w-max max-w-[calc(100%-48px)] overflow-hidden rounded-panel bg shadow-md",children:e.jsx(ml,{alert:s.alerts[0]})})}function ml({alert:s}){const t=e.jsx("div",{dangerouslySetInnerHTML:{__html:s.description}});return e.jsx(_s,{leadingIcon:e.jsx(Ta,{size:"xs",className:"text-danger"}),onClose:()=>{Ea("admin-setup-alert-dismissed",{timestamp:Date.now()})},title:s.title,description:t,color:"neutral"},s.title)}const xl=[{key:"email_verified_at",label:x("Email"),description:x("Email verification status"),defaultOperator:le.ne,control:{type:ue.Select,defaultValue:"01",options:[{key:"01",label:x("is confirmed"),value:{value:null,operator:le.ne}},{key:"02",label:x("is not confirmed"),value:{value:null,operator:le.eq}}]}},us({description:x("Date user registered or was created")}),ys({description:x("Date user was last updated")}),{key:"subscriptions",label:x("Subscription"),description:x("Whether user is subscribed or not"),defaultOperator:le.eq,control:{type:ue.Select,defaultValue:"01",options:[{key:"01",label:x("is subscribed"),value:{value:"*",operator:le.has}},{key:"02",label:x("is not subscribed"),value:{value:"*",operator:le.doesntHave}}]}}],Y=(s,t,a)=>{const r=a?[...a]:s.split("/");return t&&r.push(t),r};function gl(s,t,a,r){t.paginate||(t.paginate="preferLengthAware");const i=a==null?void 0:a.baseQueryKey;return a==null||delete a.baseQueryKey,Me({...a,queryKey:Y(s,t,i),queryFn:({signal:l})=>hl(s,t,r,l),placeholderData:yr})}async function hl(s,t,a,r){t.query&&await new Promise(l=>setTimeout(l,300));const i=await A.get(s,{params:t,signal:t.query?r:void 0}).then(l=>l.data);return a==null||a(i),i}const an=V.createContext(null);function pt(){return d.useContext(an)}const pl=15,jl=[{key:10},{key:15},{key:20},{key:50},{key:100}];function fl({query:s,onPerPageChange:t,onPageChange:a,className:r}){var m;const i=qe(),l=Da(),o=(m=s.data)==null?void 0:m.pagination;if(!o)return null;const c=t?e.jsx(hs,{minWidth:"min-w-auto",selectionMode:"single",disabled:s.isLoading,labelPosition:"side",size:"xs",label:e.jsx(n,{message:"Items per page"}),selectedValue:o.per_page?+o.per_page:pl,onSelectionChange:u=>t(u),children:jl.map(u=>e.jsx(h,{value:u.key,children:u.key},u.key))}):null;return e.jsxs("div",{className:b("flex h-54 select-none items-center justify-end gap-20 px-20",r),children:[!i&&c,o.from&&o.to&&"total"in o?e.jsx("div",{className:"text-sm",children:e.jsx(n,{message:":from - :to of :total",values:{from:o.from,to:o.to,total:l.format(o.total)}})}):null,e.jsxs("div",{className:"text-muted",children:[e.jsx(k,{disabled:s.isFetching||o.current_page<2,onClick:()=>{a==null||a((o==null?void 0:o.current_page)-1)},children:e.jsx(Ls,{})}),e.jsx(k,{disabled:s.isFetching||!wi(o),onClick:()=>{a==null||a((o==null?void 0:o.current_page)+1)},children:e.jsx(ws,{})})]})]})}const bl=T(e.jsx("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined"),ma={variants:{open:{height:"auto",visibility:"visible",transitionEnd:{overflow:"auto"}},closed:{height:0,overflow:"hidden",transitionEnd:{visibility:"hidden"}}},transition:{type:"tween",duration:.2}},ts=V.forwardRef(({variant:s="default",mode:t="single",children:a,className:r,isLazy:i,...l},o)=>{const[c,m]=Ms(l.expandedValues,l.defaultExpandedValues||[],l.onExpandedChange),u=V.Children.count(a);return e.jsx("div",{className:b(s==="outline"&&"space-y-10",r),ref:o,role:"presentation",children:e.jsx(Xe,{children:e.jsx(La,{children:V.Children.map(a,(g,j)=>d.isValidElement(g)?d.cloneElement(g,{key:g.key||j,value:g.props.value||j,isFirst:j===0,isLast:j===u-1,mode:t,variant:s,expandedValues:c,setExpandedValues:m,isLazy:i}):null)})})})});function Ie(s){const{children:t,label:a,disabled:r,bodyClassName:i,bodyPadding:l="p-16",labelClassName:o,buttonPadding:c="py-10 pl-14 pr-10",startIcon:m,description:u,endAppend:g,chevronPosition:j="right",isFirst:v,mode:y,isLazy:w,variant:_,footerContent:S,onHeaderMouseEnter:N,onHeaderMouseLeave:I}=s,z=s.expandedValues||[],J=s.value||0,q=s.setExpandedValues||(()=>{}),se=d.useRef(null),ne=!r&&z.includes(J),U=d.useRef(!1);ne&&(U.current=!0);const W=Ma(),ie=d.useId(),Te=`${ie}-button`,ce=`${ie}-panel`,De=Fe=>{switch(Fe.key){case"ArrowDown":W==null||W.focusNext();break;case"ArrowUp":W==null||W.focusPrevious();break;case"Home":W==null||W.focusFirst();break;case"End":W==null||W.focusLast();break}},de=()=>{const Fe=z.indexOf(J);if(Fe>-1){const he=[...z];he.splice(Fe,1),q(he)}else q(y==="single"?[J]:[...z,J])},be=e.jsx("div",{className:b(_==="minimal"&&""),children:e.jsx(wr,{"aria-hidden":"true",size:"md",className:b(r?"text-disabled":"text-muted",ne&&"rotate-180 transition-transform")})});return e.jsxs("div",{className:b(_==="default"&&"border-b",_==="outline"&&"rounded-panel border",r&&"text-disabled"),children:[e.jsxs("h3",{className:b("flex w-full items-center justify-between text-sm",r&&"pointer-events-none",v&&_==="default"&&"border-t",ne&&_!=="minimal"?"border-b":"border-b border-b-transparent",_==="outline"?ne?"rounded-panel-t":"rounded-panel":void 0),onMouseEnter:N,onMouseLeave:I,children:[e.jsxs("button",{disabled:r,"aria-expanded":ne,id:Te,"aria-controls":ce,type:"button",ref:se,onKeyDown:De,onClick:()=>{r||de()},className:b("flex flex-auto items-center gap-10 text-left outline-none hover:bg-hover focus-visible:bg-primary/focus",c),children:[j==="left"&&be,m&&d.cloneElement(m,{size:"md",className:b(m.props.className,r?"text-disabled":"text-muted")}),e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis",children:[e.jsx("div",{className:o,"data-testid":"accordion-label",children:a}),u&&e.jsx("div",{className:"text-xs text-muted",children:u})]}),j==="right"&&be]}),g&&e.jsx("div",{className:"flex-shrink-0 px-4 text-sm text-muted",children:g})]}),e.jsxs(Le.div,{"aria-labelledby":ie,role:"region",variants:ma.variants,transition:ma.transition,initial:!1,animate:ne?"open":"closed",children:[e.jsx("div",{className:b(l,i),children:!w||U?t:null}),S]})]})}function vl({filter:s}){return null}function yl({filters:s}){const{decodedFilters:t}=Wt(s),{formId:a}=G(),[r,i]=d.useState(()=>t.map(c=>c.key)),l=e.jsx(f,{size:"xs",variant:"outline",className:"mr-auto",onClick:()=>{i([])},children:e.jsx(n,{message:"Clear"})}),o=e.jsx(f,{size:"xs",variant:"flat",color:"primary",className:"ml-auto",type:"submit",form:a,children:e.jsx(n,{message:"Apply"})});return e.jsxs(ee,{className:"min-w-[300px]",maxWidth:"max-w-400",size:"auto",children:[e.jsx(re,{padding:"px-14 py-10",leftAdornment:l,rightAdornment:o,children:e.jsx(n,{message:"Filter"})}),e.jsx(te,{padding:"p-0",children:e.jsx(wl,{filters:s,expandedFilters:r,setExpandedFilters:i})})]})}function wl({filters:s,expandedFilters:t,setExpandedFilters:a}){const{decodedFilters:r,replaceAll:i}=Wt(s),l={};s.forEach(u=>{const g=r.find(j=>j.key===u.key);l[u.key]=(g==null?void 0:g.value)!==void 0?g:{value:u.control.defaultValue,operator:u.defaultOperator}});const o=P({defaultValues:l}),{formId:c,close:m}=G();return e.jsx(oe,{form:o,id:c,onSubmit:u=>{const g=Object.entries(u).filter(([j,v])=>t.includes(j)&&v!==void 0).map(([j,v])=>({key:j,...v}));i(g),m()},children:e.jsx(ts,{mode:"multiple",expandedValues:t,onExpandedChange:a,children:s.map(u=>e.jsxs(Ie,{startIcon:e.jsx(_r,{checked:t.includes(u.key)}),value:u.key,label:e.jsx(n,{...u.label}),bodyClassName:"max-h-288 overflow-y-auto compact-scrollbar",children:[u.description&&e.jsx("div",{className:b("text-xs text-muted",u.control.type!==ue.BooleanToggle&&"mb-14"),children:e.jsx(n,{...u.description})}),e.jsx(_l,{filter:u})]},u.key))})})}function _l({filter:s}){switch(s.control.type){case ue.Select:return e.jsx(Ci,{filter:s});case ue.ChipField:return e.jsx(Ni,{filter:s});case ue.DateRangePicker:return e.jsx(ki,{filter:s});case ue.SelectModel:return e.jsx(Si,{filter:s});case ue.Input:return e.jsx(_i,{filter:s});case ue.BooleanToggle:return e.jsx(vl,{filter:s});case"custom":const t=s.control.panel;return e.jsx(t,{filter:s});default:return null}}function Sl({filters:s,icon:t=e.jsx(bl,{}),color:a="primary",variant:r="outline",size:i="sm",disabled:l,className:o}){const c=qe(),m=e.jsx(f,{variant:r,color:a,startIcon:t,disabled:l,size:i,className:o,children:e.jsx(n,{message:"Filter"})}),u=e.jsx(k,{color:a,size:"sm",variant:r,disabled:l,className:o,children:t});return e.jsxs(E,{type:"popover",children:[c?u:m,e.jsx(yl,{filters:s})]})}function kl({actions:s,filters:t,filtersLoading:a,searchPlaceholder:r=x("Type to search..."),searchValue:i="",onSearchChange:l}){const{trans:o}=M();return e.jsxs(nn,{children:[e.jsx(He,{size:"sm",className:"mr-auto min-w-180 max-w-440 flex-auto",inputWrapperClassName:"mr-24 md:mr-0",placeholder:o(r),startAdornment:e.jsx(tt,{size:"sm"}),value:i,onChange:c=>{l(c.target.value)}}),t&&e.jsx(Sl,{filters:t,disabled:a}),s]})}function nn({children:s,...t}){return e.jsx("div",{className:"hidden-scrollbar relative mb-24 flex h-42 items-center gap-8 overflow-x-auto text-muted md:gap-12",...t,children:s})}function Nl({actions:s,selectedItemsCount:t}){return e.jsxs(nn,{"data-testid":"datatable-selected-header",children:[e.jsx("div",{className:"mr-auto",children:e.jsx(n,{message:"[one 1 item|other :count items] selected",values:{count:t}})}),s]})}function Cl(){return e.jsxs(Le.div,{className:"flex h-30 items-center gap-6",...Ze,children:[e.jsx(X,{variant:"rect",size:"h-full w-144",radius:"rounded-md"}),e.jsx(X,{variant:"rect",size:"h-full w-112",radius:"rounded-md"}),e.jsx(X,{variant:"rect",size:"h-full w-172",radius:"rounded-md"})]},"filter-list-skeleton")}function rn({filters:s,pinnedFilters:t,filtersLoading:a,columns:r,searchPlaceholder:i,queryParams:l,endpoint:o,baseQueryKey:c,actions:m,selectedActions:u,emptyStateMessage:g,tableDomProps:j,onRowAction:v,enableSelection:y=!0,selectionStyle:w="checkbox",children:_,cellHeight:S,collapseTableOnMobile:N=!0,skeletonsWhileLoading:I,border:z}){var Fe;const J=d.useRef(c),q=qe(),{trans:se}=M(),{encodedFilters:ne}=Wt(s),[U,W]=d.useState({perPage:15}),[ie,Te]=d.useState([]),ce=gl(o,{...U,...l,[Fi]:ne},{baseQueryKey:J.current},()=>Te([])),De=!!(U.query||U.filters||ne),de=(Fe=ce.data)==null?void 0:Fe.pagination,be=(de==null?void 0:de.data)||(ce.isLoading&&I?Array.from({length:I}).map(()=>({id:at(),isPlaceholder:!0})):[]);return e.jsxs(an.Provider,{value:{selectedRows:ie,setSelectedRows:Te,endpoint:o,params:U,setParams:W,query:ce,baseQueryKey:J.current},children:[_,e.jsx(Xe,{initial:!1,mode:"wait",children:ie.length?e.jsx(Nl,{selectedItemsCount:ie.length,actions:u},"selected"):e.jsx(kl,{searchPlaceholder:i,searchValue:U.query,onSearchChange:he=>W({...U,query:he}),actions:m,filters:s,filtersLoading:a},"default")}),s&&e.jsx("div",{className:"mb-14",children:e.jsx(Xe,{initial:!1,mode:"wait",children:a&&(ne||t!=null&&t.length)?e.jsx(Cl,{}):e.jsx(Le.div,{...Ze,children:e.jsx(zi,{filters:s,pinnedFilters:t})},"filter-list")})}),e.jsxs("div",{className:b("relative rounded-panel",z||(!q||!N)&&"border"),children:[ce.isFetching&&!I&&e.jsx(Sr,{isIndeterminate:!0,className:"absolute left-0 top-0 z-10 w-full","aria-label":se({message:"Loading"}),size:"xs"}),e.jsx("div",{className:"relative overflow-x-auto md:overflow-hidden",children:e.jsx(Ii,{...j,columns:r,data:be,sortDescriptor:U,onSortChange:he=>{W({...U,...he})},selectedRows:ie,enableSelection:y,selectionStyle:w,onSelectionChange:Te,onAction:v,collapseOnMobile:N,cellHeight:S})}),(ce.isFetched||ce.isPlaceholderData)&&!(de!=null&&de.data.length)?e.jsx("div",{className:"pt-50",children:d.cloneElement(g,{isFiltering:De})}):void 0,e.jsx(fl,{query:ce,onPageChange:he=>W({...U,page:he}),onPerPageChange:he=>W({...U,perPage:he})})]})]})}function $e({title:s,headerContent:t,headerItemsAlign:a="items-end",className:r,padding:i,variant:l,...o}){const c=d.useId();return e.jsxs("div",{className:b(i??l==="fullPage"?"p-0":"p-12 md:p-24",r),children:[s&&e.jsxs("div",{className:b(l==="fullPage"?"mb-6 border-b px-24 py-12":"mb-16",t&&`flex ${a} gap-4`),children:[e.jsx(qs,{children:s}),e.jsx("h1",{className:"text-3xl font-light first:capitalize",id:c,children:s}),t]}),e.jsx("div",{className:b(l==="fullPage"?"p-12 md:p-24":"p-0"),children:e.jsx(rn,{...o,tableDomProps:{"aria-labelledby":s?c:void 0}})})]})}function Fl(){const{endpoint:s,selectedRows:t,setSelectedRows:a,baseQueryKey:r}=pt();return $({mutationFn:()=>zl(s,t),onSuccess:async()=>{await L.invalidateQueries({queryKey:Y(s,void 0,r)}),R(x("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),a([])},onError:i=>ae(i,x("Could not delete records"))})}function zl(s,t){return A.delete(`${s}/${t.join(",")}`).then(a=>a.data)}function ms(){return e.jsxs(E,{type:"modal",children:[e.jsx(f,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(n,{message:"Delete"})}),e.jsx(Il,{})]})}function Il(){const s=Fl(),{selectedRows:t,setSelectedRows:a}=pt(),{close:r}=G();return e.jsx(we,{isLoading:s.isPending,title:e.jsx(n,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:e.jsx(n,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(n,{message:"Delete"}),isDanger:!0,onConfirm:()=>{s.mutate(void 0,{onSuccess:()=>r(),onError:i=>{kr(i,422)&&(a([]),r())}})}})}function Ne({isFiltering:s,title:t,filteringTitle:a,image:r,size:i,className:l}){const o=qe();return i||(i=o?"sm":"md"),e.jsx(nt,{className:l,size:i,image:e.jsx(rt,{src:r}),title:s&&a?a:t,description:s&&a?e.jsx(n,{message:"Try another search query or different filters"}):void 0})}const Ps=""+new URL("team-de984127.svg",import.meta.url).href,Oe=V.forwardRef(({children:s,to:t,elementType:a,onClick:r,href:i,download:l,icon:o,disabled:c},m)=>qe()?e.jsx(k,{ref:m,variant:"flat",color:"primary",className:"flex-shrink-0",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:o||e.jsx(Pe,{})}):e.jsx(f,{ref:m,startIcon:o||e.jsx(Pe,{}),variant:"flat",color:"primary",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:s}));function Al(s){return $({mutationFn:t=>Pl(s,t),onError:t=>ae(t)})}function Pl(s,t){return A.post(s,t).then(a=>a.data)}function El(){const{close:s}=G();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Csv export"})}),e.jsx(te,{children:e.jsx(n,{message:`Your request is being processed. We'll email you when the report is ready to download. In
            certain cases, it might take a little longer, depending on the number of items beings
            exported and the volume of activity.`})}),e.jsx(xe,{children:e.jsx(f,{variant:"flat",color:"primary",onClick:s,children:e.jsx(n,{message:"Got it"})})})]})}function ln({endpoint:s,payload:t}){const[a,r]=d.useState(!1),i=Al(s);return e.jsxs(d.Fragment,{children:[e.jsx(k,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",disabled:i.isPending,onClick:()=>{i.mutate(t,{onSuccess:l=>{l.downloadPath?mt(l.downloadPath):r(!0)}})},children:e.jsx(Ai,{})}),e.jsx(E,{type:"modal",isOpen:a,onOpenChange:r,children:e.jsx(El,{})})]})}function as({image:s,label:t,description:a,className:r,labelClassName:i,avatarSize:l="md",alwaysShowAvatar:o,avatarLabel:c,avatarCircle:m}){return e.jsxs("div",{className:b("flex items-center gap-12",r),children:[(s||o)&&e.jsx(it,{size:l,className:"flex-shrink-0",src:s,label:c??t,fallback:"initials",circle:m}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:b(i,"overflow-hidden overflow-ellipsis"),children:t}),a&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis text-xs text-muted",children:a})]})]})}const on=T(e.jsx("path",{d:"m20 17.17-3.37-3.38c.64.22 1.23.48 1.77.76.97.51 1.58 1.52 1.6 2.62zm1.19 4.02-1.41 1.41-2.61-2.6H4v-2.78c0-1.12.61-2.15 1.61-2.66 1.29-.66 2.87-1.22 4.67-1.45L1.39 4.22 2.8 2.81l18.39 18.38zM15.17 18l-3-3H12c-2.37 0-4.29.73-5.48 1.34-.32.16-.52.5-.52.88V18h9.17zM12 6c1.1 0 2 .9 2 2 0 .86-.54 1.59-1.3 1.87l1.48 1.48C15.28 10.64 16 9.4 16 8c0-2.21-1.79-4-4-4-1.4 0-2.64.72-3.35 1.82l1.48 1.48C10.41 6.54 11.14 6 12 6z"}),"PersonOffOutlined");function Tl(s,t){return $({mutationFn:a=>Dl(t,a),onSuccess:async()=>{R(x("User suspended")),await L.invalidateQueries({queryKey:["users"]})},onError:a=>Ce(a,s)})}function Dl(s,t){return A.post(`users/ban/${s}`,t).then(a=>a.data)}function cn({user:s}){const{trans:t}=M(),{close:a,formId:r}=G(),i=P({defaultValues:{permanent:!0}}),l=i.watch("permanent"),o=Tl(i,s.id);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}})}),e.jsx(te,{children:e.jsxs(oe,{id:r,form:i,onSubmit:c=>o.mutate(c,{onSuccess:()=>a(!0)}),children:[e.jsx(At,{name:"ban_until",label:e.jsx(n,{message:"Suspend until"}),disabled:l}),e.jsx(D,{name:"permanent",className:"mt-12",children:e.jsx(n,{message:"Permanent"})}),e.jsx(p,{className:"mt-24",name:"comment",inputElementType:"textarea",maxLength:250,label:e.jsx(n,{message:"Reason"}),placeholder:t(x("Optional"))})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{form:r,variant:"flat",color:"primary",type:"submit",disabled:o.isPending,children:e.jsx(n,{message:"Suspend"})})]})]})}function dn(s){return $({mutationFn:()=>Ll(s),onSuccess:()=>{R(x("User unsuspended")),L.invalidateQueries({queryKey:["users"]})},onError:t=>ae(t)})}function Ll(s){return A.delete(`users/unban/${s}`).then(t=>t.data)}function Ml(){return $({mutationFn:s=>ql(s),onSuccess:async s=>{R(x(`Impersonating User "${s.user.name}"`)),window.location.href="/"},onError:s=>ae(s)})}function ql(s){return A.post(`admin/users/impersonate/${s.userId}`,s).then(t=>t.data)}const xa=[{key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(as,{image:s.image,label:s.name,description:s.email,alwaysShowAvatar:!0,avatarCircle:!0})},{key:"roles",header:()=>e.jsx(n,{message:"Roles"}),body:s=>{var t;return e.jsx(Pi,{radius:"rounded",size:"xs",children:(t=s==null?void 0:s.roles)==null?void 0:t.map(a=>e.jsx(lt,{selectable:!0,children:e.jsx(B,{className:b("capitalize"),target:"_blank",to:`/admin/roles/${a.id}/edit`,children:e.jsx(n,{message:a.name})})},a.id))})}},{key:"subscribed",header:()=>e.jsx(n,{message:"Subscribed"}),width:"w-96",body:s=>{var t;return(t=s.subscriptions)!=null&&t.filter(a=>a.valid).length?e.jsx(Ys,{className:"text-positive icon-md"}):e.jsx(Be,{className:"text-danger icon-md"})}},{key:"banned_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Suspended"}),width:"w-96",body:s=>s.banned_at?e.jsx(Ys,{className:"text-danger icon-md"}):null},{key:"last_login",width:"w-110",header:()=>e.jsx(n,{message:"Last active"}),body:s=>s.last_login?e.jsx("time",{children:e.jsx(ve,{date:s.last_login.created_at})}):"-"},{key:"createdAt",allowsSorting:!0,width:"w-110",header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx("time",{children:e.jsx(ve,{date:s.created_at})})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(B,{to:`${s.id}/details`,children:e.jsx(Z,{label:e.jsx(n,{message:"Edit user"}),children:e.jsx(k,{size:"md",children:e.jsx(ss,{})})})}),s.banned_at?e.jsx($l,{user:s}):e.jsxs(E,{type:"modal",children:[e.jsx(Z,{label:e.jsx(n,{message:"Suspend user"}),children:e.jsx(k,{size:"md",children:e.jsx(on,{})})}),e.jsx(cn,{user:s})]}),e.jsx(Rl,{user:s})]})}];function $l({user:s}){const t=dn(s.id);return e.jsxs(E,{type:"modal",onClose:a=>{a&&t.mutate()},children:[e.jsx(Z,{label:e.jsx(n,{message:"Remove suspension"}),children:e.jsx(k,{size:"md",color:"danger",children:e.jsx(on,{})})}),e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}}),body:e.jsx(n,{message:"Are you sure you want to remove suspension from this user?"}),confirm:e.jsx(n,{message:"Unsuspend"})})]})}function Rl({user:s}){const t=Ml();return e.jsxs(E,{type:"modal",children:[e.jsx(Z,{label:e.jsx(n,{message:"Login as user"}),children:e.jsx(k,{size:"md",children:e.jsx(Nr,{})})}),e.jsx(we,{title:e.jsx(n,{message:"Login as “:name“",values:{name:s.name}}),isLoading:t.isPending,body:e.jsx(n,{message:"Are you sure you want to login as this user?"}),confirm:e.jsx(n,{message:"Login"}),onConfirm:()=>{t.mutate({userId:s.id})}})]})}function Vl(s){const t=pe();return $({mutationFn:a=>Ol(a),onSuccess:()=>{R(x("User created")),L.invalidateQueries({queryKey:Y("users")}),t("/admin/users")},onError:a=>Ce(a,s)})}function Ol(s){return s.roles&&(s.roles=s.roles.map(t=>t.id)),A.post("users",s).then(t=>t.data)}function Ul(){const s=P(),t=Vl(s),a=pe(),{close:r,formId:i}=G();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Create user"})}),e.jsx(te,{children:e.jsxs(oe,{id:i,form:s,onSubmit:l=>{t.mutate(l,{onSuccess:o=>{r(),a(`${o.user.id}/details`,{replace:!0})}})},children:[e.jsx(ps,{children:e.jsx(js,{className:"mb-24",name:"image",diskPrefix:"avatars",label:e.jsx(n,{message:"Avatar"}),showRemoveButton:!0})}),e.jsx(p,{required:!0,className:"mb-24",name:"email",type:"email",label:e.jsx(n,{message:"Email"})}),e.jsx(p,{className:"mb-24",name:"first_name",label:e.jsx(n,{message:"First name"})}),e.jsx(p,{className:"mb-24",name:"last_name",label:e.jsx(n,{message:"Last name"})}),e.jsx(p,{required:!0,name:"password",type:"password",label:e.jsx(n,{message:"Password"})})]})}),e.jsxs(xe,{children:[e.jsx(f,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",form:i,disabled:t.isPending,children:e.jsx(n,{message:"Create"})})]})]})}function Hl(){const{billing:s}=je(),t=s.enable?xa:xa.filter(a=>a.key!=="subscribed");return e.jsx(d.Fragment,{children:e.jsx($e,{endpoint:"users",title:e.jsx(n,{message:"Users"}),filters:xl,columns:t,actions:e.jsx(Bl,{}),queryParams:{with:"subscriptions,bans,lastLogin"},selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:Ps,title:e.jsx(n,{message:"No users have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})})}function Bl(){return e.jsxs(d.Fragment,{children:[e.jsx(ln,{endpoint:"users/csv/export"}),e.jsxs(E,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(n,{message:"Add new user"})}),e.jsx(Ul,{})]})]})}const Kl=s=>(t,a,r)=>{const i=r.subscribe;return r.subscribe=(o,c,m)=>{let u=o;if(c){const g=(m==null?void 0:m.equalityFn)||Object.is;let j=o(r.getState());u=v=>{const y=o(v);if(!g(j,y)){const w=j;c(j=y,w)}},m!=null&&m.fireImmediately&&c(j,j)}return i(u)},s(t,a,r)},Wl=Kl,Gl={preview:{defaultRoute:"/",navigationRoutes:[]},sections:{general:{label:x("General"),position:1},themes:{label:x("Themes"),position:2},menus:{label:x("Menus"),position:3,config:{availableRoutes:["/","/login","/register","/contact","/pricing","/account-settings","/admin","/admin/appearance","/admin/settings","/admin/plans","/admin/subscriptions","/admin/users","/admin/roles","/admin/pages","/admin/tags","/admin/files","/admin/localizations","/admin/ads","/admin/logs","/admin/settings/authentication","/admin/settings/branding","/admin/settings/cache","/admin/settings/providers","/api-docs"],positions:["admin-navbar","admin-sidebar","custom-page-navbar","auth-page-footer","auth-dropdown","account-settings-page","billing-page","checkout-page-navbar","checkout-page-footer","pricing-table-page","contact-us-page","notifications-page","footer","footer-secondary"]}},"custom-code":{label:x("Custom Code"),position:4},"seo-settings":{label:x("SEO Settings"),position:5}}},Es=Cr.all([Gl,Fr]);let un=()=>{};const Ql=new Promise(s=>un=s),ns=zr()(Wl((s,t)=>({defaults:null,iframeWindow:null,isDirty:!1,setIsDirty:a=>{s(()=>({isDirty:a}))},config:Es,setDefaults:a=>{s({defaults:{...a}})},setIframeWindow:a=>{s({iframeWindow:a}),a.addEventListener("message",r=>{r.data.source==="be-appearance-preview"&&r.data.type==="appLoaded"&&un()})},preview:{setValues:a=>{const r=t().iframeWindow;Fs(r,{type:"setValues",values:a})},setThemeFont:a=>{const r=t().iframeWindow;Fs(r,{type:"setThemeFont",value:a})},setThemeValue:(a,r)=>{const i=t().iframeWindow;Fs(i,{type:"setThemeValue",name:a,value:r})},setActiveTheme:a=>{const r=t().iframeWindow;Fs(r,{type:"setActiveTheme",themeId:a})},setCustomCode:(a,r)=>{const i=t().iframeWindow;Fs(i,{type:"setCustomCode",mode:a,value:r})},setHighlight:a=>{var l;let r=null;const i=(l=t().iframeWindow)==null?void 0:l.document;i&&a&&(r=i.querySelector(a)),r&&requestAnimationFrame(()=>{r&&r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}}})));function Fs(s,t){s&&s.postMessage({source:"be-appearance-editor",...t},"*")}function O(){return ns.getState()}function jt(){return Me(Yl)}const Yl={queryKey:["fetchAdminSettings"],queryFn:()=>Jl(),staleTime:1/0,select:Xs};function Jl(){return A.get("settings").then(s=>s.data)}function Xs(s){for(const t in s)Array.isArray(s[t])?s[t]=s[t].map(Xs):typeof s[t]=="object"?s[t]=Xs(s[t]):typeof s[t]=="number"?s[t]=s[t].toString():s[t]==null&&(s[t]="");return s}function mn(){return Me({queryKey:["admin/appearance/values"],queryFn:()=>Xl(),staleTime:1/0,select:Xs})}function Vs(){const{data:s}=mn();return s.values}function Xl(){return A.get("admin/appearance/values").then(s=>s.data)}function Zl(){var o,c;const{pathname:s}=Ke(),a=(c=(o=Pr().at(-1))==null?void 0:o.handle)==null?void 0:c.previewRoute,r=s.split("/")[3],i=Es.sections[r],l=(i==null?void 0:i.previewRoute)||Es.preview.defaultRoute||"/";return a?`${l}/${a}`:l}function eo(){const{isAppearanceEditorActive:s}=Ir(),{data:t}=mn(),{base_url:a}=je(),r=d.useRef(null),i=Zl();if(d.useEffect(()=>{t!=null&&t.defaults&&!O().defaults&&O().setDefaults(t.defaults)},[t]),d.useEffect(()=>{r.current&&O().setIframeWindow(r.current.contentWindow)},[]),s)return e.jsx(Ar,{to:"/admin"});const l=new URL(i&&i!=="/"?`${a}/${i}`:`${a}`);return l.searchParams.append("appearanceEditor","true"),e.jsxs("div",{className:"h-screen items-center md:flex",children:[e.jsx(qs,{children:e.jsx(n,{message:"Appearance"})}),e.jsx(so,{values:t==null?void 0:t.values}),e.jsx("div",{className:"relative h-full flex-auto",children:e.jsx("iframe",{ref:r,className:"h-full w-full max-md:hidden",src:l.toString()},i)})]})}function so({values:s}){const t=e.jsx("div",{className:"flex h-full flex-auto items-center justify-center",children:e.jsx($s,{isIndeterminate:!0,"aria-label":"Loading editor"})});return e.jsx("div",{className:"relative z-10 h-full w-full border-r bg shadow-lg @container md:w-320",children:s?e.jsx(es,{}):t})}const ye=d.forwardRef(({startIcon:s,children:t,className:a,description:r,endIcon:i,...l},o)=>e.jsxs(ot,{ref:o,display:"flex",className:b("relative mb-10 h-54 w-full items-center gap-10 rounded-input border bg px-14 text-sm hover:bg-hover",a,l.disabled&&"pointer-events-none opacity-50"),variant:null,...l,children:[s,e.jsxs("span",{className:"block min-w-0",children:[e.jsx("span",{className:"block",children:t}),r&&e.jsx("span",{className:"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted",children:r})]}),e.jsx("div",{className:"ml-auto",children:i??e.jsx(ws,{"aria-hidden":!0,className:"text-muted icon-sm"})})]}));function to(){const s=ls(),{trans:t}=M(),{fields:a,append:r}=os({name:"settings.menus",keyName:"key"});return e.jsxs(d.Fragment,{children:[e.jsx("div",{children:a.map((i,l)=>e.jsx(ye,{to:`${l}`,elementType:B,children:i.name},i.key))}),e.jsx("div",{className:"text-right",children:e.jsx(f,{variant:"outline",color:"primary",startIcon:e.jsx(Pe,{}),size:"xs",onClick:()=>{const i=at(10);r({name:t(x("New menu :number",{values:{number:a.length+1}})),id:i,positions:[],items:[]}),s(`${a.length}`)},children:e.jsx(n,{message:"Create menu"})})})]})}function xn(){const s=Es.sections.menus.config;return s?s.availableRoutes.map(t=>({id:t,label:t,action:t,type:"route",target:"_self"})):[]}function gn(s){return s&&s.charAt(0).toUpperCase()+s.slice(1)}function hn({title:s=e.jsx(n,{message:"Add menu item"})}){const{data:t}=Ee(["menuItemCategories"]),a=(t==null?void 0:t.menuItemCategories)||[],r=xn();return e.jsxs(ee,{size:"sm",children:[e.jsx(re,{children:s}),e.jsx(te,{children:e.jsxs(ts,{variant:"outline",children:[e.jsx(Ie,{label:e.jsx(n,{message:"Link"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(ao,{})}),e.jsx(Ie,{label:e.jsx(n,{message:"Route"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(ga,{items:r})}),a.map(i=>e.jsx(Ie,{label:e.jsx(n,{message:i.name}),children:e.jsx(ga,{items:i.items})},i.name))]})})]})}function ao(){const s=P({defaultValues:{id:at(6),type:"link",target:"_blank"}}),{close:t}=G();return e.jsxs(oe,{form:s,onSubmit:a=>{t(a)},children:[e.jsx(p,{required:!0,name:"label",label:e.jsx(n,{message:"Label"}),className:"mb-20"}),e.jsx(p,{required:!0,type:"url",name:"action",placeholder:"https://",label:e.jsx(n,{message:"Url"}),className:"mb-20"}),e.jsx("div",{className:"text-right",children:e.jsx(f,{type:"submit",variant:"flat",color:"primary",size:"xs",children:e.jsx(n,{message:"Add to menu"})})})]})}function ga({items:s}){const{close:t}=G();return e.jsx(qa,{children:s.map(a=>e.jsx($a,{startIcon:e.jsx(Pe,{size:"sm"}),onSelected:()=>{if(a.label){const r=a.label.split("/").pop();a.label=r?gn(r):a.label,a.id=at(6)}a.target||(a.target="_self"),t(a)},children:a.label},a.id))})}const no=T(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined"),ro=""+new URL("dropdown-menu-c9b3bd6a.svg",import.meta.url).href,io={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e:s,ref:t,item:a,sortSession:r,onDropPositionChange:i})=>{var m;const l=r.dropPosition;let o=null;const c=(m=Ye.get(a))==null?void 0:m.rect;if(c){const u=c.top+c.height/2;s.clientY<=u?o="before":s.clientY>=u&&(o="after")}if(o!==l){const u=r.sortables.indexOf(a);if(r.dropPosition=o,i==null||i(r.dropPosition),ha(r),t.current)if(r.dropPosition==="after")Ct(t.current,"bottom",r);else if(u===0)Ct(t.current,"top",r);else{const v=r.sortables[u-1],y=Ye.get(v);y!=null&&y.ref.current&&Ct(y.ref.current,"bottom",r)}const g=r.sortables.indexOf(a);if(r.activeIndex===g){r.finalIndex=r.activeIndex;return}(u>r.activeIndex?"after":"before")==="after"?r.finalIndex=r.dropPosition==="before"?g-1:g:r.finalIndex=r.dropPosition==="after"?g+1:g}},onDragEnd:s=>{ha(s)}};function ha(s){s!=null&&s.linePreviewEl&&(s.linePreviewEl.style.borderBottomColor="",s.linePreviewEl.style.borderTopColor="",s.linePreviewEl=void 0)}function Ct(s,t,a){const r="rgb(var(--be-primary))";t==="top"?s.style.borderTopColor=r:s.style.borderBottomColor=r,a&&(a.linePreviewEl=s)}function pn(s,t,a){const r=Js(t,0,s.length-1),i=Js(a,0,s.length-1);if(r===i)return s;const l=s[r],o=i<r?-1:1;for(let c=r;c!==i;c+=o)s[c]=s[c+o];return s[i]=l,s}function jn(s,t,a){const r=s.slice();return r.splice(a<0?r.length+a:a,0,r.splice(t,1)[0]),r}const lo="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",oo={onDragStart:s=>{s.sortables.forEach((t,a)=>{const r=Ye.get(t);r!=null&&r.ref.current&&(r.ref.current.style.transition=lo,(s==null?void 0:s.activeIndex)===a&&(r.ref.current.style.opacity="0.4"))})},onDragEnter:(s,t,a)=>{pn(s.sortables,a,t);const r=s.sortables.map(i=>{var l;return(l=Ye.get(i))==null?void 0:l.rect});s.sortables.forEach((i,l)=>{if(!s)return;const o=jn(r,t,s.activeIndex),c=r[l],m=o[l],u=Ye.get(i);if(u!=null&&u.ref.current&&m&&c){const g=m.left-c.left,j=m.top-c.top;u.ref.current.style.transform=`translate3d(${g}px, ${j}px, 0)`}}),s.finalIndex=t},onDragOver:()=>{},onDragEnd:s=>{s.sortables.forEach(t=>{const a=Ye.get(t);a!=null&&a.ref.current&&(a.ref.current.style.transform="",a.ref.current.style.transition="",a.ref.current.style.opacity="",a.ref.current.style.zIndex="")})}},co={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(s,t,a)=>{var i;const r=(i=Ye.get(s.sortables[a]))==null?void 0:i.ref.current;r&&(uo(r,a,t),pn(s.sortables,a,t),s.finalIndex=t)},onDragEnd:()=>{}};function uo(s,t,a){const r=s.parentElement;if(a<0)r.prepend(s);else{t>-1&&t<=a&&a++;const i=r.children.item(a);i?i.before(s):r.append(s)}}let H=null;const Ws={line:io,liveSort:oo,moveNode:co};function mo({item:s,items:t,type:a,ref:r,onSortEnd:i,onSortStart:l,onDragEnd:o,preview:c,disabled:m,onDropPositionChange:u,strategy:g="liveSort"}){d.useEffect(()=>{H&&H.sortables.length!==t.length&&(H.sortables=[...t],H.activeIndex=t.indexOf(s))},[t,s]);const{draggableProps:j,dragHandleRef:v}=Ei({id:s,ref:r,type:a,preview:c,disabled:m,onDragStart:()=>{var w;H={sortables:[...t],activeSortable:s,activeIndex:t.indexOf(s),finalIndex:t.indexOf(s),dropPosition:null,ref:r,scrollParent:r.current?Di(r.current):void 0,scrollListener:()=>{Li(Ye)}},Ws[g].onDragStart(H),l==null||l(),(w=H.scrollParent)==null||w.addEventListener("scroll",H.scrollListener)},onDragEnd:()=>{var w;H&&(H.dropPosition=null,u==null||u(H.dropPosition),H.activeIndex!==H.finalIndex&&(i==null||i(H.activeIndex,H.finalIndex)),(w=H.scrollParent)==null||w.removeEventListener("scroll",H.scrollListener),Ws[g].onDragEnd(H),o==null||o(),H=null)},getData:()=>{}}),{droppableProps:y}=Ti({id:s,ref:r,types:[a],disabled:m,allowDragEventsFromItself:!0,onDragOver:(w,_)=>{H&&Ws[g].onDragOver({e:_,ref:r,item:s,sortSession:H,onDropPositionChange:u})},onDragEnter:()=>{if(!H)return;const w=H.sortables.indexOf(s),_=H.sortables.indexOf(H.activeSortable);Ws[g].onDragEnter(H,w,_)},onDragLeave:()=>{H&&(H.dropPosition=null,u==null||u(H.dropPosition))}});return{sortableProps:{...cs(j,y)},dragHandleRef:v}}function xo(){const{menuIndex:s}=ge(),t=ls(),{getValues:a}=C(),r=`settings.menus.${s}`,i=a(r);return d.useEffect(()=>{i?O().preview.setHighlight(`[data-menu-id="${i.id}"]`):t("/admin/appearance/menus")},[t,i]),i?e.jsx(go,{menuFormPath:r}):null}function go({menuFormPath:s}){const{site:{has_mobile_app:t}}=je(),a=ns(i=>{var l;return(l=i.config)==null?void 0:l.sections.menus.config}),r=d.useMemo(()=>{const i=[...a==null?void 0:a.positions];return t&&i.push("mobile-app-about"),i.map(l=>({key:l,name:l.replaceAll("-"," ")}))},[a,t]);return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-30 border-b pb-30",children:[e.jsx(p,{name:`${s}.name`,label:e.jsx(n,{message:"Menu name"}),className:"mb-20",autoFocus:!0}),e.jsx(xt,{chipSize:"sm",name:`${s}.positions`,valueKey:"id",label:e.jsx(n,{message:"Menu positions"}),description:e.jsx(n,{message:"Where should this menu appear on the site"}),children:r.map(i=>e.jsx(h,{value:i.key,capitalizeFirst:!0,children:i.name},i.key))})]}),e.jsx(ho,{formPath:`${s}.items`}),e.jsx("div",{className:"text-right",children:e.jsx(po,{})})]})}function ho({formPath:s}){const t=ls(),a=C(),r=Rs({control:a.control,name:s});return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between gap-16",children:[e.jsx(n,{message:"Menu items"}),e.jsxs(E,{type:"popover",placement:"right",offset:20,onClose:i=>{i&&(a.setValue(s,[...r,i],{shouldDirty:!0}),t(`${r.length}`))},children:[e.jsx(f,{variant:"outline",color:"primary",size:"xs",startIcon:e.jsx(Pe,{}),children:e.jsx(n,{message:"Add"})}),e.jsx(hn,{})]})]}),e.jsxs("div",{className:"mt-20 flex-shrink-0",children:[r.map((i,l)=>e.jsx(jo,{item:i,items:r,index:l,onSortEnd:(o,c)=>{a.setValue(s,jn(r,o,c),{shouldDirty:!0})}},i.id)),r.length?null:e.jsx(nt,{size:"xs",className:"my-40",image:e.jsx(rt,{src:ro}),title:e.jsx(n,{message:"No menu items yet"}),description:e.jsx(n,{message:"Click “add“ button to start adding links, pages, routes and other items to this menu. "})})]})]})}function po(){const s=ls(),t=ge(),a=parseInt(t.menuIndex),r=C(),i="settings.menus",l=Rs({control:r.control,name:i}),o=l[a];return o?e.jsxs(E,{type:"modal",onClose:c=>{c&&(r.setValue(i,l.filter((m,u)=>u!=a),{shouldDirty:!0}),s("/admin/appearance/menus"))},children:[e.jsx(f,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(gt,{}),children:e.jsx(n,{message:"Delete menu"})}),e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"Delete menu"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.name}}),confirm:e.jsx(n,{message:"Delete"})})]}):null}function jo({item:s,items:t,index:a,onSortEnd:r}){const i=d.useRef(null),{sortableProps:l,dragHandleRef:o}=mo({item:s,items:t,type:"menuEditorSortable",ref:i,onSortEnd:r,strategy:"liveSort"}),c=s.icon&&Ra(s.icon),m=e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted",children:[c&&e.jsx(c,{size:"sm"}),"(",e.jsx(n,{message:"No label..."}),")"]});return e.jsx(d.Fragment,{children:e.jsx(ye,{elementType:B,to:`${a}`,ref:i,...l,children:e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsx(k,{ref:o,size:"sm",children:e.jsx(no,{className:"text-muted hover:cursor-move"})}),e.jsx("div",{children:s.label||m})]})})})}const fo=V.forwardRef(({valueListKey:s="permissions",...t},a)=>{const{data:r}=Ee([s]),i=(r==null?void 0:r.permissions)||(r==null?void 0:r.workspacePermissions),[l,o]=Ms(t.value,[],t.onChange),[c,m]=d.useState(!1);if(!i)return null;const u=fn(i,l,c),g=j=>{const v=[...l],y=v.findIndex(w=>w.id===j.id);y>-1&&v.splice(y,1,j),o(v)};return e.jsxs(d.Fragment,{children:[e.jsx(ts,{variant:"outline",ref:a,children:u.map(({groupName:j,items:v,anyChecked:y})=>e.jsx(Ie,{label:e.jsx(n,{message:Qt(j)}),startIcon:y?e.jsx(Er,{size:"sm"}):void 0,children:e.jsx(qa,{children:v.map(w=>{const _=l.findIndex(N=>N.id===w.id),S=_>-1;return e.jsxs("div",{children:[e.jsx($a,{onSelected:()=>{if(S){const N=[...l];N.splice(_,1),o(N)}else o([...l,w])},endSection:e.jsx(Pt,{tabIndex:-1,checked:S,onChange:()=>{}}),description:e.jsx(n,{message:w.description}),children:e.jsx(n,{message:w.display_name||w.name})}),S&&e.jsx(bo,{permission:w,onChange:g})]},w.id)})})},j))}),e.jsx(Pt,{className:"mt-30",checked:c,onChange:j=>{m(j.target.checked)},children:e.jsx(n,{message:"Show advanced permissions"})})]})});function bo({permission:s,onChange:t}){var r;if(!((r=s==null?void 0:s.restrictions)!=null&&r.length))return null;const a=(i,l)=>{const o=Tr(s,c=>{const m=c.restrictions.find(u=>u.name===i);m&&(m.value=l)});t==null||t(o)};return e.jsx("div",{className:"px-40 py-20",children:s.restrictions.map((i,l)=>{const o=l===s.restrictions.length-1,c=e.jsx(n,{message:Qt(i.name)}),m=i.description?e.jsx(n,{message:i.description}):void 0;return i.type==="bool"?e.jsx(Pt,{description:m,className:b(!o&&"mb-30"),checked:!!i.value,onChange:u=>{a(i.name,u.target.checked)},children:c},i.name):e.jsx(He,{size:"sm",label:c,description:m,type:"number",className:b(!o&&"mb-30"),value:i.value||"",onChange:u=>{a(i.name,u.target.value===""?void 0:parseInt(u.target.value))}},i.name)})})}function Gt(s){const{field:{onChange:t,value:a=[],ref:r}}=fs({name:s.name}),i={onChange:t,value:a};return e.jsx(fo,{ref:r,...cs(i,s)})}const Qt=s=>gn(s.replace("_"," "));function fn(s,t,a){const r=[];return s.forEach(i=>{const l=t.findIndex(c=>c.id===i.id);if(!a&&i.advanced)return;let o=r.find(c=>c.groupName===i.group);if(o||(o={groupName:i.group,anyChecked:!1,items:[]},r.push(o)),l>-1){const c={...i,restrictions:vo(i.restrictions,t[l].restrictions)};o.anyChecked=!0,o.items.push(c)}else o.items.push(i)}),r}function vo(s,t){return s==null?void 0:s.map(a=>{const r=t.find(i=>i.name===a.name);return r?{...a,value:r.value}:a})}const Ft={grid:"flex flex-wrap gap-24",button:"flex flex-col items-center rounded hover:bg-hover h-90 aspect-square"},yo=[...Array(60).keys()],wo=V.lazy(()=>ct(()=>import("./icon-list-4a5d3da3.js"),["./icon-list-4a5d3da3.js","./main-e798bedc.js","./main-7d4c83c3.css","./ArrowBack-7e40eb40.js","./dashboard-layout-d83c0491.js","./breadcrumb-f2553d42.js","./GridView-85cded39.js","./CalendarToday-547870f5.js","./use-resume-subscription-5c0203c1.js","./TaskAlt-003fdc8a.js","./TrendingFlat-0f357185.js","./formatted-bytes-b9b55034.js"],import.meta.url));function _o({onIconSelected:s}){const{trans:t}=M(),[a,r]=V.useState("");return e.jsxs("div",{className:"py-4",children:[e.jsx(He,{className:"mb-20",value:a,onChange:i=>{r(i.target.value)},placeholder:t({message:"Search icons..."})}),e.jsx(Xe,{mode:"wait",children:e.jsx(d.Suspense,{fallback:e.jsx(Le.div,{...Ze,className:Ft.grid,children:yo.map((i,l)=>e.jsx("div",{className:Ft.button,children:e.jsx(X,{variant:"rect"})},l))}),children:e.jsx(Le.div,{...Ze,className:Ft.grid,children:e.jsx(wo,{searchQuery:a,onIconSelected:s})})})})]})}function So(){return e.jsxs(ee,{size:"w-850",className:"min-h-dialog",children:[e.jsx(re,{children:e.jsx(n,{message:"Select icon"})}),e.jsx(te,{children:e.jsx(ko,{})})]})}function ko(){const{close:s}=G();return e.jsx(_o,{onIconSelected:t=>{s(t)}})}function xs({formPathPrefix:s,hideRoleAndPermissionFields:t}){const{trans:a}=M(),r=i=>s?`${s}.${i}`:i;return e.jsxs(d.Fragment,{children:[e.jsx(p,{className:"mb-20",name:r("label"),label:e.jsx(n,{message:"Label"}),placeholder:a(x("No label...")),startAppend:e.jsx(No,{prefixName:r})}),e.jsx(Co,{prefixName:r}),e.jsx(Ao,{prefixName:r}),!t&&e.jsxs(d.Fragment,{children:[e.jsx(Fo,{prefixName:r}),e.jsx(zo,{prefixName:r}),e.jsx(Io,{prefixName:r})]})]})}function No({prefixName:s,...t}){const{watch:a,setValue:r}=C(),i=s("icon"),l=a(i),o=l&&Ra(l);return e.jsxs(E,{type:"modal",onClose:c=>{(c||c===null)&&r(i,c,{shouldDirty:!0})},children:[e.jsx(k,{className:"text-muted icon-sm",variant:"outline",size:"md",...t,children:o?e.jsx(o,{}):e.jsx(ss,{})}),e.jsx(So,{})]})}function Co({prefixName:s}){const t=C(),a=t.watch(s("type")),r=Mi(a),{data:i}=Ee(["menuItemCategories"]),l=(i==null?void 0:i.menuItemCategories)||[],o=l.find(u=>u.type===a),{trans:c}=M(),m=xn();return d.useEffect(()=>{r&&r!==a&&t.setValue(s("action"),"")},[a,r,t,s]),e.jsxs(d.Fragment,{children:[e.jsxs(K,{className:"mb-20",name:s("type"),selectionMode:"single",label:e.jsx(n,{message:"Type"}),children:[e.jsx(h,{value:"link",children:e.jsx(n,{message:"Custom link"})}),e.jsx(h,{value:"route",children:e.jsx(n,{message:"Site page"})}),l.map(u=>e.jsx(h,{value:u.type,children:u.name},u.type))]}),a==="link"&&e.jsx(p,{className:"mb-20",required:!0,type:"url",name:s("action"),placeholder:c({message:"Enter a url..."}),label:e.jsx(n,{message:"Url"})}),a==="route"&&e.jsx(K,{className:"mb-20",required:!0,items:m,name:s("action"),label:e.jsx(n,{message:"Page"}),searchPlaceholder:c(x("Search pages")),showSearchField:!0,selectionMode:"single",children:u=>e.jsx(h,{value:u.id,children:u.label},u.id)}),o&&e.jsx(K,{className:"mb-20",required:!0,items:o.items,name:s("action"),showSearchField:!0,searchPlaceholder:c(x("Search...")),selectionMode:"single",label:e.jsx(n,{message:o.name}),children:u=>e.jsx(h,{value:u.action,children:e.jsx(n,{message:u.label})})})]})}function Fo({prefixName:s}){const{data:t}=Ee(["roles","permissions"]),a=(t==null?void 0:t.roles)||[],{trans:r}=M();return e.jsx(xt,{className:"my-20",placeholder:r({message:"Add role..."}),label:e.jsx(n,{message:"Only show if user has role"}),name:s("roles"),chipSize:"sm",suggestions:a,valueKey:"id",displayWith:i=>{var l;return(l=a.find(o=>o.id===i.id))==null?void 0:l.name},children:i=>e.jsx(h,{value:i.id,capitalizeFirst:!0,children:e.jsx(n,{message:i.name})},i.id)})}function zo({prefixName:s}){const{data:t}=Ee(["roles","permissions"]),{trans:a}=M(),r=d.useMemo(()=>fn((t==null?void 0:t.permissions)||[],[],!1),[t==null?void 0:t.permissions]);return e.jsx(xt,{label:e.jsx(n,{message:"Only show if user has permissions"}),placeholder:a({message:"Add permission..."}),chipSize:"sm",suggestions:r,name:s("permissions"),valueKey:"name",children:({groupName:i,items:l})=>e.jsx(Va,{label:Qt(i),children:l.map(o=>e.jsx(h,{value:o.name,description:e.jsx(n,{message:o.description}),children:e.jsx(n,{message:o.display_name||o.name})},o.name))},i)})}function Io({prefixName:s}){const{billing:t}=je();return t.enable?e.jsxs(K,{selectionMode:"single",className:"mt-20",label:e.jsx(n,{message:"Subscription status"}),name:s("subscriptionStatus"),children:[e.jsx(h,{value:"subscribed",children:e.jsx(n,{message:"Only show if user is subscribed"})}),e.jsx(h,{value:"unsubscribed",children:e.jsx(n,{message:"Only show if user is not subscribed"})}),e.jsx(h,{value:null,children:e.jsx(n,{message:"Always show"})})]}):null}function Ao({prefixName:s}){return e.jsxs(K,{className:"mt-20",selectionMode:"single",name:s("target"),label:e.jsx(n,{message:"Open link in"}),children:[e.jsx(h,{value:"_self",children:e.jsx(n,{message:"Same window"})}),e.jsx(h,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})}function Po(){const{menuIndex:s,menuItemIndex:t}=ge();return e.jsx(Eo,{itemsPath:`settings.menus.${s}.items`,itemIndex:t})}function Eo({itemsPath:s,itemIndex:t}){const a=pe(),{getValues:r}=C(),i=r(`${s}.${t}`);return d.useEffect(()=>{i?O().preview.setHighlight(`[data-menu-item-id="${i.id}"]`):a("..",{relative:"path",replace:!0})},[a,i]),i?e.jsx(To,{itemsPath:s,itemIndex:t}):null}function To({itemsPath:s,itemIndex:t}){return e.jsxs(d.Fragment,{children:[e.jsx(xs,{formPathPrefix:`${s}.${t}`}),e.jsx("div",{className:"mt-40 text-right",children:e.jsx(Do,{itemsPath:s,itemIndex:t})})]})}function Do({itemsPath:s,itemIndex:t}){const a=pe(),{fields:r}=os({name:s}),{setValue:i,getValues:l}=C(),o=r[+t];return e.jsxs(E,{type:"modal",onClose:c=>{if(c&&t){const m=l(s);i(s,m.filter((u,g)=>g!==+t),{shouldDirty:!0}),a("..",{relative:"path",replace:!0})}},children:[e.jsx(f,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(gt,{}),children:e.jsx(n,{message:"Delete this item"})}),e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"Delete item"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.label}}),confirm:e.jsx(n,{message:"Delete"})})]})}const bn=["appearance-editor-save"];function Lo(){return $({mutationKey:bn,mutationFn:s=>Mo(s),onSuccess:async s=>{L.setQueryData(["admin/appearance/values"],s),R(x("Changes saved"))},onError:s=>ae(s)})}function Mo(s){return A.post("admin/appearance",{changes:s}).then(t=>t.data)}function vn({isBlocked:s,allowedPath:t}){const{state:a,reset:r,proceed:i}=Dr(({nextLocation:l})=>s&&(!t||!l.pathname.includes(t)));return d.useEffect(()=>{const l=o=>{s&&(o.preventDefault(),o.returnValue=!0)};return window.addEventListener("beforeunload",l),()=>window.removeEventListener("beforeunload",l)},[s]),e.jsx(E,{type:"modal",isOpen:a==="blocked",onClose:l=>{a==="blocked"&&(l?i():r())},children:e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"You have unsaved changes"}),body:e.jsx(n,{message:"Your changes will be lost if you continue. Are you sure you want to discard them?"}),close:e.jsx(n,{message:"Stay here"}),confirm:e.jsx(n,{message:"Discard changes"})})})}function Os({children:s,breadcrumb:t,form:a,blockerAllowedPath:r}){const{isDirty:i}=Oa({control:a.control});d.useEffect(()=>(O().setIsDirty(i),()=>O().setIsDirty(!1)),[i]),d.useEffect(()=>{const o=a.watch(c=>{O().preview.setValues(c)});return()=>o.unsubscribe()},[a]);const l=Lo();return e.jsxs(d.Fragment,{children:[e.jsx(Yt,{breadcrumb:t,children:e.jsx(ps,{children:e.jsx(oe,{className:"h-full flex-auto",id:"appearance-editor",form:a,onSubmit:o=>{l.mutate(o,{onSuccess:()=>a.reset(o)})},children:s})})}),e.jsx(vn,{isBlocked:i,allowedPath:r})]})}function Yt({breadcrumb:s,children:t}){return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(qo,{}),s,e.jsx("div",{className:"flex-auto overflow-y-auto",children:e.jsx("div",{className:"flex h-full flex-col px-14 py-20",children:t})})]})}function qo(){const{state:s}=Ke(),t=Zi({mutationKey:bn})>0,a=ns(r=>r.isDirty);return e.jsxs("div",{className:"flex h-50 flex-shrink-0 items-center border-b pr-10",children:[e.jsx(k,{border:"border-r",className:"text-muted",elementType:B,to:(s==null?void 0:s.prevPath)||"/admin",replace:!0,children:e.jsx(Be,{})}),e.jsx("div",{className:"pl-10",children:e.jsx(n,{message:"Appearance editor"})}),e.jsx(f,{variant:"flat",color:"primary",className:"ml-auto block",disabled:!a||t,type:"submit",form:"appearance-editor",children:a?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Saved"})})]})}function $o(){const s=Ke();return new URL(".",window.origin+s.pathname).pathname.replace(/\/$/,"")}function Ss({children:s,backLink:t}){const a=d.Children.toArray(s),r=$o(),i=[e.jsx(n,{message:"Customizing"},"mainLabel")];a.length>1&&i.push(a[0]);const l=a.length>1?a.slice(1):a;return e.jsxs("div",{className:"flex h-60 flex-shrink-0 items-center border-b",children:[e.jsx(k,{iconSize:"md",radius:"rounded-none",className:"h-full w-50 flex-shrink-0 text-muted",elementType:B,to:t??r,children:e.jsx(Ls,{})}),e.jsxs("div",{className:"min-w-0 border-l p-10",children:[e.jsx(pa,{items:i,className:"text-xs text-muted"}),e.jsx(pa,{items:l,isEmphasized:!0,className:"mt-2 text-sm"})]})]})}function pa({items:s,className:t,isEmphasized:a}){return e.jsx("div",{className:b("flex items-center gap-4",t),children:s.map((r,i)=>{const l=s.length-1===i;return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:b("min-w-0 overflow-hidden overflow-ellipsis whitespace-nowrap",l&&a&&"text-primary"),children:r}),!l&&(a?e.jsx(ws,{className:"flex-shrink-0 text-muted",size:"font-inherit"}):e.jsx("div",{children:"•"}))]},i)})})}function Ro(){const s=Vs(),t=P({defaultValues:{settings:{branding:{favicon:s.settings.branding.favicon,logo_light:s.settings.branding.logo_light,logo_dark:s.settings.branding.logo_dark,logo_light_mobile:s.settings.branding.logo_light_mobile,logo_dark_mobile:s.settings.branding.logo_dark_mobile,site_description:s.settings.branding.site_description}},appearance:{env:{app_name:s.appearance.env.app_name}}}});return e.jsxs(Os,{form:t,breadcrumb:e.jsx(Ss,{children:e.jsx(n,{message:"General"})}),children:[e.jsx(zs,{label:e.jsx(n,{message:"Favicon"}),description:e.jsx(n,{message:"This will generate different size favicons. Image should be at least 512x512 in size."}),type:"favicon"}),e.jsx(zs,{label:e.jsx(n,{message:"Light logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds."}),type:"logo_light"}),e.jsx(zs,{label:e.jsx(n,{message:"Dark logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds. Will default to light logo if left empty."}),type:"logo_dark"}),e.jsx(zs,{label:e.jsx(n,{message:"Mobile light logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds on mobile. Will default to desktop logo if left empty."}),type:"logo_light_mobile"}),e.jsx(zs,{label:e.jsx(n,{message:"Mobile dark logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds on mobile. Will default to desktop if left empty."}),type:"logo_dark_mobile"}),e.jsx(Vo,{}),e.jsx(Oo,{})]})}function zs({label:s,description:t,type:a}){const r=ns(i=>{var l;return(l=i.defaults)==null?void 0:l.settings.branding[a]});return e.jsx(js,{name:`settings.branding.${a}`,className:"mb-30 border-b pb-30",label:s,description:t,diskPrefix:"branding_media",defaultValue:r,onChange:()=>{O().preview.setHighlight('[data-logo="navbar"]')}})}function Vo(){return e.jsx(p,{name:"appearance.env.app_name",required:!0,className:"mt-20",label:e.jsx(n,{message:"Site name"})})}function Oo(){return e.jsx(p,{name:"settings.branding.site_description",className:"mt-20",inputElementType:"textarea",rows:4,label:e.jsx(n,{message:"Site description"})})}function Uo(s=1,t=1e4){const a=new Uint32Array(1);window.crypto.getRandomValues(a);const r=a[0]/(4294967295+1);return s=Math.ceil(s),t=Math.floor(t),Math.floor(r*(t-s+1))+s}function Ho({type:s,children:t,disabled:a}){const{trans:r}=M(),i=ls(),{watch:l,getValues:o,setValue:c}=C();return e.jsxs(d.Fragment,{children:[t,e.jsx("div",{className:"mb-20",children:e.jsx(f,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(Pe,{}),disabled:a,onClick:()=>{var g;const m=(g=O().defaults)==null?void 0:g.appearance.themes.light,u=o("appearance.themes");c("appearance.themes",[...u,{id:Uo(),name:r(x("New theme")),values:m,type:s}],{shouldDirty:!0}),i(`${u.length}`)},children:e.jsx(n,{message:"New theme"})})}),l("appearance.themes").map((m,u)=>e.jsx(ye,{to:`${u}`,elementType:$t,disabled:a,children:m.name},m.id))]})}const Bo=V.lazy(()=>ct(()=>import("./ace-editor-85131765.js"),["./ace-editor-85131765.js","./main-e798bedc.js","./main-7d4c83c3.css","./index-c230f6c7.js"],import.meta.url));function Jt({defaultValue:s,mode:t="html",title:a,onSave:r,isSaving:i,footerStartAction:l,beautify:o,editorRef:c}){const[m,u]=d.useState(s),[g,j]=d.useState(!0);return e.jsxs(ee,{size:"fullscreen",className:"h-full w-full",children:[e.jsx(re,{children:a}),e.jsx(te,{className:"relative flex-auto",padding:"p-0",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"flex h-400 w-full items-center justify-center",children:e.jsx($s,{"aria-label":"Loading editor...",isIndeterminate:!0,size:"md"})}),children:e.jsx(Bo,{beautify:o,mode:t,onChange:v=>u(v),defaultValue:m||"",onIsValidChange:j,editorRef:c})})}),e.jsx(Ko,{disabled:!g||i,value:m,onSave:r,startAction:l})]})}function Ko({disabled:s,value:t,onSave:a,startAction:r}){const{close:i}=G();return e.jsxs(xe,{dividerTop:!0,startAction:r,children:[e.jsx(f,{onClick:()=>i(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{disabled:s,variant:"flat",color:"primary",onClick:()=>{a?a(t):i(t)},children:e.jsx(n,{message:"Save"})})]})}function yn(s){return Me({queryKey:["admin","seo-tags",s],queryFn:()=>Wo(s)})}function Wo(s){return A.get(`admin/appearance/seo-tags/${s}`).then(t=>t.data)}function Go(s){const t=et();return $({mutationFn:a=>Qo(s,a.tags),onSuccess:async()=>{await t.invalidateQueries({queryKey:["admin","seo-tags",s]}),R(x("Updated SEO tags"))},onError:a=>ae(a)})}function Qo(s,t){return A.put(`admin/appearance/seo-tags/${s}`,{tags:t}).then(a=>a.data)}var Pa;const wn=((Pa=Es.sections["seo-settings"].config)==null?void 0:Pa.pages)||[],_n=wn.map(s=>s.key);function Yo(){const{isLoading:s}=yn(_n);return e.jsx(Yt,{breadcrumb:e.jsx(Ss,{children:e.jsx(n,{message:"SEO"})}),children:s?e.jsx(bs,{}):e.jsx(d.Fragment,{children:wn.map(t=>e.jsx(Jo,{label:t.label,name:t.key},t.key))})})}function Jo({label:s,name:t}){const{data:a,isLoading:r}=yn(_n);return e.jsxs(E,{type:"modal",children:[e.jsx(ye,{disabled:r,children:e.jsx(n,{...s})}),a?e.jsx(Xo,{name:t,value:a[t]}):null]})}function Xo({name:s,value:t}){const{close:a}=G(),r=Go(s),i=d.useRef(null),l=e.jsx(f,{variant:"outline",color:"primary",onClick:()=>{i.current&&i.current.editor.setValue(t.original)},children:e.jsx(n,{message:"Reset to original"})});return e.jsx(Jt,{mode:"php_laravel_blade",title:e.jsx(n,{message:"Edit SEO meta tags"}),footerStartAction:l,editorRef:i,defaultValue:t.custom||t.original,isSaving:r.isPending,beautify:!1,onSave:o=>{o!=null&&r.mutate({tags:o},{onSuccess:()=>a()})}})}function Zo(){const s=Vs(),t=P({defaultValues:{appearance:{custom_code:{css:s.appearance.custom_code.css,html:s.appearance.custom_code.html}}}});return e.jsxs(Os,{form:t,breadcrumb:e.jsx(Ss,{children:e.jsx(n,{message:"Custom code"})}),children:[e.jsx(ja,{mode:"css"}),e.jsx(ja,{mode:"html"})]})}function ja({mode:s}){const{getValues:t}=C(),{setValue:a}=C(),r=s==="html"?e.jsx(n,{message:"Custom HTML & JavaScript"}):e.jsx(n,{message:"Custom CSS"});return e.jsxs(E,{type:"modal",onClose:i=>{i!=null&&(a(`appearance.custom_code.${s}`,i,{shouldDirty:!0}),O().preview.setCustomCode(s,i))},children:[e.jsx(ye,{children:r}),e.jsx(Jt,{title:r,defaultValue:t(`appearance.custom_code.${s}`)||"",mode:s})]})}const ec=""+new URL("articles-8bfd9f17.svg",import.meta.url).href,sc=s=>{const t=s.customPages.types.length>1?[{control:{type:ue.Select,defaultValue:"default",options:s.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))},key:"type",label:x("Type"),description:x("Type of the page"),defaultOperator:le.eq}]:[];return[{key:"user_id",label:x("User"),description:x("User page was created by"),defaultOperator:le.eq,control:{type:ue.SelectModel,model:qi}},...t,us({description:x("Date page was created")}),ys({description:x("Date page was last updated")})]},tc=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Slug"}),body:s=>e.jsx(B,{target:"_blank",to:`/pages/${s.slug}`,className:Rt,children:s.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(n,{message:"Owner"}),body:s=>s.user&&e.jsx(as,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(k,{size:"md",className:"text-muted",elementType:B,to:`${s.id}/edit`,children:e.jsx(ss,{})})}];function ac(){const s=d.useContext(ds),t=d.useMemo(()=>sc(s),[s]);return e.jsx($e,{endpoint:"custom-pages",title:e.jsx(n,{message:"Custom pages"}),filters:t,columns:tc,queryParams:{with:"user"},actions:e.jsx(nc,{}),selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:ec,title:e.jsx(n,{message:"No pages have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching pages"})})})}function nc(){return e.jsx(Oe,{elementType:B,to:"new",children:e.jsx(n,{message:"New page"})})}const rc=[{label:x("Drive"),to:"drive"},{label:x("Guest Uploads"),to:"guest-uploads"}],ic=[{label:x("General"),to:"general",position:1},...rc,Lr().settings.billing.integrated&&{label:x("Subscriptions"),to:"subscriptions",position:2},{label:x("Localization"),to:"localization",position:3},{label:x("Authentication"),to:"authentication",position:4},{label:x("Uploading"),to:"uploading",position:5},{label:x("Outgoing email"),to:"outgoing-email",position:6},{label:x("Cache"),to:"cache",position:7},{label:x("Analytics"),to:"analytics",position:8},{label:x("Logging"),to:"logging",position:9},{label:x("Queue"),to:"queue",position:10},{label:x("Recaptcha"),to:"recaptcha",position:11},{label:x("GDPR"),to:"gdpr",position:12},{label:x("Menus"),to:"/admin/appearance/menus",position:13},{label:x("Seo"),to:"/admin/appearance/seo-settings",position:14},{label:x("Themes"),to:"/admin/appearance/themes",position:15}].filter(Boolean),lc=ic;function oc({className:s,navConfig:t}){const a=qe(),r=d.useMemo(()=>(t??lc).sort((l,o)=>(l.position??0)-(o.position??0)),[t]);return e.jsxs("div",{className:b(s,"container mx-auto min-h-full items-start gap-30 p-24 md:flex"),children:[e.jsx(qs,{children:e.jsx(n,{message:"Settings"})}),a?e.jsx(cc,{navConfig:r}):e.jsx(dc,{navConfig:r}),e.jsx("div",{className:"relative max-w-500 flex-auto md:px-30",children:e.jsx(es,{})})]})}function cc({navConfig:s}){const{pathname:t}=Ke(),a=ls(),r=t.split("/").pop();return e.jsx(hs,{minWidth:"min-w-none",className:"mb-24 w-full bg",selectionMode:"single",selectedValue:r,onSelectionChange:i=>{a(i,{state:{prevPath:t}})},children:s.map(i=>e.jsx(h,{value:i.to,children:e.jsx(n,{...i.label})},i.to))})}function dc({navConfig:s}){const{pathname:t}=Ke();return e.jsx("div",{className:"sticky top-24 w-240 flex-shrink-0",children:s.map(a=>e.jsx($t,{to:a.to,state:{prevPath:t},className:({isActive:r})=>b("mb-8 block whitespace-nowrap rounded-button p-14 text-sm transition-bg-color",r?"bg-primary/6 font-semibold text-primary":"hover:bg-hover"),children:e.jsx(n,{...a.label})},a.to))})}function uc(){return $({mutationFn:()=>mc(),onSuccess:()=>{R(x("Sitemap generated"))},onError:s=>ae(s)})}function mc(){return A.post("sitemap/generate").then(s=>s.data)}function Sn(s){return $({mutationFn:t=>xc(t),onSuccess:t=>(R(x("Settings updated"),{position:"bottom-right"}),L.setQueryData(["fetchAdminSettings"],t)),onError:t=>Ce(t,s)})}function xc({client:s,server:t,files:a}){const r=new FormData;return s&&r.set("client",JSON.stringify(s)),t&&r.set("server",JSON.stringify(t)),Object.entries(a||{}).forEach(([i,l])=>{r.set(i,l)}),A.post("settings",r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data)}function Ae(){return e.jsx("div",{className:"bg-divider-lighter my-30 h-1"})}function gc(){return e.jsxs(Le.div,{className:"text-sm",...Ze,children:[e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsxs("div",{className:"mt-10 flex items-center gap-8",children:[e.jsx(X,{variant:"rect",size:"h-20 w-20"}),e.jsx(X,{className:"max-w-64 text-xs"})]})]}),e.jsx(Ae,{}),e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsx(X,{className:"mt-10 max-w-4/5 text-xs"})]}),e.jsx(Ae,{}),e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsx(X,{className:"mt-10 max-w-[90%] text-xs"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-20 flex items-center gap-12",children:[e.jsx(X,{variant:"rect",size:"h-20 w-40",radius:"rounded-full"}),e.jsx(X,{className:"max-w-140"})]}),e.jsx(X,{className:"mt-10 max-w-240 text-xs"})]}),e.jsx(Ae,{}),e.jsxs("div",{children:[e.jsx(X,{variant:"rect",size:"h-30 w-132",radius:"rounded-button"}),e.jsxs("div",{className:"mt-14",children:[e.jsx(X,{className:"max-w-240"}),e.jsx(X,{className:"max-w-384"})]})]}),e.jsx("div",{className:"mt-40",children:e.jsx(X,{variant:"rect",size:"h-36 w-132",radius:"rounded-button"})})]})}function _e({children:s,form:t}){const a=Sn(t),{isDirty:r}=Oa({control:t.control});return e.jsxs(Le.section,{...Ze,children:[e.jsxs(oe,{form:t,onBeforeSubmit:()=>{const i=t.formState.errors,l=Object.keys(i).filter(o=>o.endsWith("_group"));t.clearErrors(l)},onSubmit:i=>{a.mutate(i,{onSuccess:()=>t.reset(i)})},children:[s,e.jsx("div",{className:"mt-40",children:e.jsx(f,{type:"submit",variant:"flat",color:"primary",startIcon:a.isPending?e.jsx($s,{size:"xs",isIndeterminate:!0}):null,disabled:a.isPending||!r,children:e.jsx(n,{message:"Save changes"})})})]}),e.jsx(vn,{isBlocked:r})]},"settings-form")}function Se({title:s,description:t,headerMargin:a="mb-40",children:r,isLoading:i}){const{data:l}=jt();return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:a,children:[e.jsx("h2",{className:"mb-4 text-xl",children:s}),e.jsx("div",{className:"text-sm text-muted",children:t})]}),e.jsx(Xe,{initial:!1,mode:"wait",children:l&&!i?r(l):e.jsx(gc,{},"settings-skeleton")})]})}function ks({link:s,className:t}){const{site:a}=je();return a.hide_docs_button?null:e.jsxs("div",{className:b("flex items-center gap-8",t),children:[e.jsx(Vt,{size:"sm"}),e.jsx(dt,{href:s,children:e.jsx(n,{message:"Learn more"})})]})}function hc(){return e.jsx(Se,{title:e.jsx(n,{message:"General"}),description:e.jsx(n,{message:"Configure site url, homepage, theme and other general settings."}),children:s=>e.jsx(pc,{data:s})})}function pc({data:s}){var a,r,i,l;const t=P({defaultValues:{client:{homepage:{type:((a=s.client.homepage)==null?void 0:a.type)??"landingPage",value:((r=s.client.homepage)==null?void 0:r.value)??""},themes:{default_id:(i=s.client.themes)!=null&&i.default_id?parseInt(s.client.themes.default_id):0,user_change:((l=s.client.themes)==null?void 0:l.user_change)??!1}}}});return e.jsxs(_e,{form:t,children:[e.jsx(jc,{}),e.jsx(Ae,{}),e.jsx(fc,{}),e.jsx(Ae,{}),e.jsx(bc,{}),e.jsx(Ae,{}),e.jsx(vc,{})]})}function jc(){const{data:s}=jt();if(!s)return null;let t=null;const a=s.server,r=a.newAppUrl&&a.newAppUrl!==a.app_url;return r&&(t=e.jsx("div",{className:"mt-20 text-sm text-danger",children:e.jsx(n,{values:{baseUrl:a.app_url,currentUrl:a.newAppUrl,b:i=>e.jsx("b",{children:i})},message:"Base site url is set as <b>:baseUrl</b> in configuration, but current url is <b>:currentUrl</b>. It is recommended to set the primary url you want to use in configuration file and then redirect all other url versions to this primary version via cpanel or .htaccess file."})})),e.jsxs(d.Fragment,{children:[e.jsx(He,{readOnly:!0,invalid:!!r,value:a.app_url,label:e.jsx(n,{message:"Primary site url"}),description:e.jsx(ks,{link:"https://support.vebto.com/hc/articles/35/primary-site-url"})}),t]})}function fc(){var i,l;const{watch:s}=C(),{homepage:t}=d.useContext(ds),{data:a}=Ee(["menuItemCategories"]),r=s("client.homepage.type");return e.jsxs("div",{children:[e.jsxs(K,{name:"client.homepage.type",selectionMode:"single",label:e.jsx(n,{message:"Site home page"}),description:e.jsx(n,{message:"Which page should be used as site homepage."}),children:[t.options.map(o=>e.jsx(h,{value:o.value,children:e.jsx(n,{...o.label})},o.value)),(i=a==null?void 0:a.menuItemCategories)==null?void 0:i.map(o=>e.jsx(h,{value:o.type,children:o.name},o.type))]}),(l=a==null?void 0:a.menuItemCategories)==null?void 0:l.map(o=>r===o.type?e.jsx(K,{className:"mt-24",name:"client.homepage.value",selectionMode:"single",label:e.jsx(n,{message:"Homepage :name",values:{name:o.name}}),children:o.items.map(c=>e.jsx(h,{value:`${c.model_id}`,children:c.label},c.label))},o.name):null)]})}function bc(){const s=Mr(t=>t.data.themes);return e.jsxs(d.Fragment,{children:[e.jsxs(K,{className:"mb-20",name:"client.themes.default_id",selectionMode:"single",label:e.jsx(n,{message:"Default site theme"}),description:e.jsx(n,{message:"Which theme to use for users that have not chosen a theme manually."}),children:[e.jsx(h,{value:0,children:e.jsx(n,{message:"System"})}),s.map(t=>e.jsx(h,{value:t.id,children:t.name},t.id))]}),e.jsx(D,{name:"client.themes.user_change",description:e.jsx(n,{message:"Allow users to manually change site theme."}),children:e.jsx(n,{message:"Allow theme change"})})]})}function vc(){const s=uc(),{base_url:t}=je(),a=`${t}/storage/sitemaps/sitemap-index.xml`,r=e.jsx(dt,{href:a,children:a});return e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"outline",size:"xs",color:"primary",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(n,{message:"Generate sitemap"})}),e.jsx("div",{className:"mt-14 text-sm text-muted",children:e.jsx(n,{message:"Once generated, sitemap url will be: :url",values:{url:r}})})]})}const Xt=T(e.jsx("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"}));function fa(s){return Za(s).toString("rgb").replace("rgb(","").replace(")","").replace(/, ?/g," ")}const yc=T(e.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined");function wc(){const{getValues:s,setValue:t}=C(),{themeIndex:a}=ge(),r=s(`appearance.themes.${+a}`);return e.jsxs(E,{type:"modal",onClose:i=>{i&&s("appearance.themes").forEach((l,o)=>{if(l.id===i.id){t(`appearance.themes.${o}`,i,{shouldDirty:!0});return}if(i.default_light){t(`appearance.themes.${o}`,{...l,default_light:!1},{shouldDirty:!0});return}if(i.default_dark){t(`appearance.themes.${o}`,{...l,default_dark:!1},{shouldDirty:!0});return}})},children:[e.jsx(f,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(yc,{}),children:e.jsx(n,{message:"Settings"})}),e.jsx(_c,{theme:r})]})}function _c({theme:s}){const t=P({defaultValues:s}),{close:a,formId:r}=G();return d.useEffect(()=>{const i=t.watch((l,{name:o})=>{o==="default_light"&&l.default_light&&t.setValue("default_dark",!1),o==="default_dark"&&l.default_dark&&t.setValue("default_light",!1)});return()=>i.unsubscribe()},[t]),e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Update settings"})}),e.jsx(te,{children:e.jsxs(oe,{form:t,id:r,onSubmit:i=>{a(i)},children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",autoFocus:!0}),e.jsx(D,{name:"is_dark",className:"mb-20 border-b pb-20",description:e.jsx(n,{message:"Whether this theme has light text on dark background."}),children:e.jsx(n,{message:"Dark theme"})}),e.jsx(D,{name:"default_light",className:"mb-30",description:e.jsx(n,{message:"When light mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for light mode"})}),e.jsx(D,{name:"default_dark",description:e.jsx(n,{message:"When dark mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for dark mode"})})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{a()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",form:r,disabled:!t.formState.isDirty,children:e.jsx(n,{message:"Save"})})]})]})}const Sc=T(e.jsx("path",{d:"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z"}),"RestartAltOutlined");function kc(){const s=pe(),{themeIndex:t}=ge(),[a,r]=d.useState(!1),{setValue:i,getValues:l}=C(),o=()=>{if(l("appearance.themes").length<=1){R.danger(x("At least one theme is required"));return}t&&(s("..",{relative:"path",replace:!0}),i("appearance.themes",l("appearance.themes").filter((c,m)=>m!==+t),{shouldDirty:!0}))};return e.jsxs(d.Fragment,{children:[e.jsxs(We,{onItemSelected:c=>{if(c==="delete")r(!0);else if(c==="reset"){const m=`appearance.themes.${+t}`,u=l(`${m}.is_dark`)?O().defaults.appearance.themes.dark:O().defaults.appearance.themes.light;Object.entries(u).forEach(([g,j])=>{O().preview.setThemeValue(g,j)}),O().preview.setThemeFont(null),i(`${m}.values`,u,{shouldDirty:!0}),i(`${m}.font`,void 0,{shouldDirty:!0})}},children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(ht,{})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"reset",startIcon:e.jsx(Sc,{}),children:e.jsx(n,{message:"Reset colors"})}),e.jsx(h,{value:"delete",startIcon:e.jsx(gt,{}),children:e.jsx(n,{message:"Delete"})})]})]}),e.jsx(E,{type:"modal",isOpen:a,onClose:c=>{c&&o(),r(!1)},children:e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"Delete theme"}),body:e.jsx(n,{message:"Are you sure you want to delete this theme?"}),confirm:e.jsx(n,{message:"Delete"})})})]})}function Ns(){return(Ns=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s}).apply(this,arguments)}function ft(s,t){if(s==null)return{};var a,r,i={},l=Object.keys(s);for(r=0;r<l.length;r++)t.indexOf(a=l[r])>=0||(i[a]=s[a]);return i}function Ts(s){var t=d.useRef(s),a=d.useRef(function(r){t.current&&t.current(r)});return t.current=s,a.current}var Ds=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=1),s>a?a:s<t?t:s},Is=function(s){return"touches"in s},Et=function(s){return s&&s.ownerDocument.defaultView||self},ba=function(s,t,a){var r=s.getBoundingClientRect(),i=Is(t)?function(l,o){for(var c=0;c<l.length;c++)if(l[c].identifier===o)return l[c];return l[0]}(t.touches,a):t;return{left:Ds((i.pageX-(r.left+Et(s).pageXOffset))/r.width),top:Ds((i.pageY-(r.top+Et(s).pageYOffset))/r.height)}},va=function(s){!Is(s)&&s.preventDefault()},kn=V.memo(function(s){var t=s.onMove,a=s.onKey,r=ft(s,["onMove","onKey"]),i=d.useRef(null),l=Ts(t),o=Ts(a),c=d.useRef(null),m=d.useRef(!1),u=d.useMemo(function(){var y=function(S){va(S),(Is(S)?S.touches.length>0:S.buttons>0)&&i.current?l(ba(i.current,S,c.current)):_(!1)},w=function(){return _(!1)};function _(S){var N=m.current,I=Et(i.current),z=S?I.addEventListener:I.removeEventListener;z(N?"touchmove":"mousemove",y),z(N?"touchend":"mouseup",w)}return[function(S){var N=S.nativeEvent,I=i.current;if(I&&(va(N),!function(J,q){return q&&!Is(J)}(N,m.current)&&I)){if(Is(N)){m.current=!0;var z=N.changedTouches||[];z.length&&(c.current=z[0].identifier)}I.focus(),l(ba(I,N,c.current)),_(!0)}},function(S){var N=S.which||S.keyCode;N<37||N>40||(S.preventDefault(),o({left:N===39?.05:N===37?-.05:0,top:N===40?.05:N===38?-.05:0}))},_]},[o,l]),g=u[0],j=u[1],v=u[2];return d.useEffect(function(){return v},[v]),V.createElement("div",Ns({},r,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:i,onKeyDown:j,tabIndex:0,role:"slider"}))}),Zt=function(s){return s.filter(Boolean).join(" ")},Nn=function(s){var t=s.color,a=s.left,r=s.top,i=r===void 0?.5:r,l=Zt(["react-colorful__pointer",s.className]);return V.createElement("div",{className:l,style:{top:100*i+"%",left:100*a+"%"}},V.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},me=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=Math.pow(10,t)),Math.round(a*s)/a},Nc=function(s){return Ac(Tt(s))},Tt=function(s){return s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?me(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?me(parseInt(s.substring(6,8),16)/255,2):1}},Cc=function(s){return Ic(zc(s))},Fc=function(s){var t=s.s,a=s.v,r=s.a,i=(200-t)*a/100;return{h:me(s.h),s:me(i>0&&i<200?t*a/100/(i<=100?i:200-i)*100:0),l:me(i/2),a:me(r,2)}},Dt=function(s){var t=Fc(s);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},zc=function(s){var t=s.h,a=s.s,r=s.v,i=s.a;t=t/360*6,a/=100,r/=100;var l=Math.floor(t),o=r*(1-a),c=r*(1-(t-l)*a),m=r*(1-(1-t+l)*a),u=l%6;return{r:me(255*[r,c,o,o,m,r][u]),g:me(255*[m,r,r,c,o,o][u]),b:me(255*[o,o,m,r,r,c][u]),a:me(i,2)}},Gs=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},Ic=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=i<1?Gs(me(255*i)):"";return"#"+Gs(t)+Gs(a)+Gs(r)+l},Ac=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=Math.max(t,a,r),o=l-Math.min(t,a,r),c=o?l===t?(a-r)/o:l===a?2+(r-t)/o:4+(t-a)/o:0;return{h:me(60*(c<0?c+6:c)),s:me(l?o/l*100:0),v:me(l/255*100),a:i}},Pc=V.memo(function(s){var t=s.hue,a=s.onChange,r=Zt(["react-colorful__hue",s.className]);return V.createElement("div",{className:r},V.createElement(kn,{onMove:function(i){a({h:360*i.left})},onKey:function(i){a({h:Ds(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":me(t),"aria-valuemax":"360","aria-valuemin":"0"},V.createElement(Nn,{className:"react-colorful__hue-pointer",left:t/360,color:Dt({h:t,s:100,v:100,a:1})})))}),Ec=V.memo(function(s){var t=s.hsva,a=s.onChange,r={backgroundColor:Dt({h:t.h,s:100,v:100,a:1})};return V.createElement("div",{className:"react-colorful__saturation",style:r},V.createElement(kn,{onMove:function(i){a({s:100*i.left,v:100-100*i.top})},onKey:function(i){a({s:Ds(t.s+100*i.left,0,100),v:Ds(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+me(t.s)+"%, Brightness "+me(t.v)+"%"},V.createElement(Nn,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Dt(t)})))}),Cn=function(s,t){if(s===t)return!0;for(var a in s)if(s[a]!==t[a])return!1;return!0},Tc=function(s,t){return s.toLowerCase()===t.toLowerCase()||Cn(Tt(s),Tt(t))};function Dc(s,t,a){var r=Ts(a),i=d.useState(function(){return s.toHsva(t)}),l=i[0],o=i[1],c=d.useRef({color:t,hsva:l});d.useEffect(function(){if(!s.equal(t,c.current.color)){var u=s.toHsva(t);c.current={hsva:u,color:t},o(u)}},[t,s]),d.useEffect(function(){var u;Cn(l,c.current.hsva)||s.equal(u=s.fromHsva(l),c.current.color)||(c.current={hsva:l,color:u},r(u))},[l,s,r]);var m=d.useCallback(function(u){o(function(g){return Object.assign({},g,u)})},[]);return[l,m]}var Lc=typeof window<"u"?d.useLayoutEffect:d.useEffect,Mc=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},ya=new Map,qc=function(s){Lc(function(){var t=s.current?s.current.ownerDocument:document;if(t!==void 0&&!ya.has(t)){var a=t.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,ya.set(t,a);var r=Mc();r&&a.setAttribute("nonce",r),t.head.appendChild(a)}},[])},$c=function(s){var t=s.className,a=s.colorModel,r=s.color,i=r===void 0?a.defaultColor:r,l=s.onChange,o=ft(s,["className","colorModel","color","onChange"]),c=d.useRef(null);qc(c);var m=Dc(a,i,l),u=m[0],g=m[1],j=Zt(["react-colorful",t]);return V.createElement("div",Ns({},o,{ref:c,className:j}),V.createElement(Ec,{hsva:u,onChange:g}),V.createElement(Pc,{hue:u.h,onChange:g,className:"react-colorful__last-control"}))},Rc={defaultColor:"000",toHsva:Nc,fromHsva:function(s){return Cc({h:s.h,s:s.s,v:s.v,a:1})},equal:Tc},Vc=function(s){return V.createElement($c,Ns({},s,{colorModel:Rc}))},Oc=/^#?([0-9A-F]{3,8})$/i,Uc=function(s){var t=s.color,a=t===void 0?"":t,r=s.onChange,i=s.onBlur,l=s.escape,o=s.validate,c=s.format,m=s.process,u=ft(s,["color","onChange","onBlur","escape","validate","format","process"]),g=d.useState(function(){return l(a)}),j=g[0],v=g[1],y=Ts(r),w=Ts(i),_=d.useCallback(function(N){var I=l(N.target.value);v(I),o(I)&&y(m?m(I):I)},[l,m,o,y]),S=d.useCallback(function(N){o(N.target.value)||v(l(a)),w(N)},[a,l,o,w]);return d.useEffect(function(){v(l(a))},[a,l]),V.createElement("input",Ns({},u,{value:c?c(j):j,spellCheck:"false",onChange:_,onBlur:S}))},wa=function(s){return"#"+s},Hc=function(s){var t=s.prefixed,a=s.alpha,r=ft(s,["prefixed","alpha"]),i=d.useCallback(function(o){return o.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),l=d.useCallback(function(o){return function(c,m){var u=Oc.exec(c),g=u?u[1].length:0;return g===3||g===6||!!m&&g===4||!!m&&g===8}(o,a)},[a]);return V.createElement(Uc,Ns({},r,{escape:i,format:t?wa:void 0,process:wa,validate:l}))};const Bc=[{color:"rgb(255, 255, 255)",name:x("White")},{color:"rgb(239,245,245)",name:x("Solitude")},{color:"rgb(245,213,174)",name:x("Wheat")},{color:"rgb(253,227,167)",name:x("Cape Honey")},{color:"rgb(242,222,186)",name:x("Milk punch")},{color:"rgb(97,118,75)",name:x("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:x("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:x("Cosmic Latte")},{color:"rgb(233,119,119)",name:x("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:x("Sundown")},{color:"rgb(30,139,195)",name:x("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:x("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:x("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:x("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:x("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:x("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:x("Comet"),foreground:"rgb(255, 255, 255)"}];function Kc({onChange:s,value:t,colors:a}){const r=a.map(i=>{const l=t===i;return e.jsx(ot,{onClick:()=>{s==null||s(i)},className:b("relative block flex-shrink-0 w-26 h-26 border rounded",l&&"shadow-md"),style:{backgroundColor:i},children:l&&e.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return e.jsx("div",{className:"flex flex-wrap gap-6",children:r})}const Wc=Bc.map(({color:s})=>s).slice(0,14);function Gc({defaultValue:s,onChange:t,colorPresets:a,showInput:r}){const[i,l]=d.useState(s),o=a||Wc,c=Ot({size:"sm"});return e.jsxs("div",{children:[e.jsx(Vc,{className:"!w-auto",color:i,onChange:m=>{t==null||t(m),l(m)}}),e.jsxs("div",{className:"px-12 py-20",children:[o&&e.jsx(Kc,{colors:o,onChange:m=>{if(m){const u=Za(m).toString("hex");t==null||t(u),l(u)}},value:i}),r&&e.jsx("div",{className:"pt-20",children:e.jsx(Hc,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:i,onChange:m=>{t==null||t(m),l(m)}})})]})]})}function ea({hideFooter:s=!1,showInput:t=!0}){const{close:a,value:r,setValue:i,initialValue:l}=G();return e.jsxs(ee,{size:"2xs",children:[e.jsx(Gc,{showInput:t,defaultValue:l||"",onChange:o=>i(o)}),!s&&e.jsxs(xe,{dividerTop:!0,children:[e.jsx(f,{variant:"text",size:"xs",onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",size:"xs",onClick:()=>a(r),children:e.jsx(n,{message:"Apply"})})]})]})}const _a=[{label:x("Accent"),value:"primary",bgColor:"bg-primary",previewBgColor:"text-primary"},{label:x("Background"),value:"bg",bgColor:"bg-background",previewBgColor:"text-background"},{label:x("Background alt"),value:"bg-alt",bgColor:"bg-alt",previewBgColor:"text-background-alt"},{label:x("Transparent"),value:"transparent",bgColor:"bg-transparent",previewBgColor:"text-transparent"}];function Qc(){var o;const{themeIndex:s}=ge(),{watch:t,setValue:a}=C(),r=`appearance.themes.${s}.values.--be-navbar-color`,i=t(r),l=(o=_a.find(({value:c})=>c===i))==null?void 0:o.previewBgColor;return e.jsxs(We,{placement:"right",selectionMode:"single",selectedValue:i,onSelectionChange:c=>{a(r,c,{shouldDirty:!0})},children:[e.jsx(ye,{startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:b("icon-lg",l)}),children:e.jsx(n,{message:"Navbar"})}),e.jsx(Ge,{children:_a.map(({label:c,value:m,bgColor:u})=>e.jsx(h,{value:m,startIcon:e.jsx("div",{className:b("h-20 w-20 rounded border",u)}),children:e.jsx(n,{...c})},m))})]})}function Yc({children:s,marginTop:t="mt-22"}){return e.jsx("div",{className:b("mb-6 text-sm font-semibold",t),children:s})}const Jc=[{label:x("Background"),key:"--be-background"},{label:x("Background alt"),key:"--be-background-alt"},{label:x("Foreground"),key:"--be-foreground-base"},{label:x("Accent light"),key:"--be-primary-light"},{label:x("Accent"),key:"--be-primary"},{label:x("Accent dark"),key:"--be-primary-dark"},{label:x("Text on accent"),key:"--be-on-primary"},{label:x("Chip"),key:"--be-background-chip"}];function Xc(){const s=ls(),{themeIndex:t}=ge(),{getValues:a,watch:r}=C(),i=a(`appearance.themes.${+t}`),l=r(`appearance.themes.${+t}.font.family`);return d.useEffect(()=>{i||s("..",{relative:"path",replace:!0})},[s,i]),d.useEffect(()=>{let o=!1;return i!=null&&i.id&&Ql.then(()=>{o||O().preview.setActiveTheme(i.id)}),()=>{o=!0,O().preview.setActiveTheme(null)}},[i==null?void 0:i.id]),i?e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-10",children:[e.jsx(wc,{}),e.jsx(kc,{})]}),e.jsxs("div",{children:[e.jsx(ye,{elementType:B,to:"font",description:l||e.jsx(n,{message:"System"}),children:e.jsx(n,{message:"Font"})}),e.jsx(ye,{elementType:B,to:"radius",children:e.jsx(n,{message:"Rounding"})}),e.jsx(Yc,{children:e.jsx(n,{message:"Colors"})}),e.jsx(Qc,{}),Jc.map(o=>e.jsx(Zc,{colorName:o.key,label:e.jsx(n,{...o.label}),initialThemeValue:i.values[o.key],theme:i},o.key))]})]}):null}function Zc({label:s,theme:t,colorName:a,initialThemeValue:r}){const{setValue:i}=C(),{themeIndex:l}=ge(),[o,c]=d.useState(r),m=u=>{c(u),O().preview.setThemeValue(a,u)};return d.useEffect(()=>{c(r)},[r]),e.jsxs(E,{value:Qi(o),type:"popover",placement:"right",offset:10,onValueChange:u=>{m(fa(u))},onClose:(u,{valueChanged:g,initialValue:j})=>{u&&g?i(`appearance.themes.${+l}.values.${a}`,fa(u),{shouldDirty:!0}):m(j)},children:[e.jsx(ye,{className:"capitalize",startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:`rgb(${o})`}}),children:s}),e.jsx(ea,{})]})}const Us=V.createContext(null);function bt(s){const{size:t="md",children:a,className:r,isLazy:i,overflow:l="overflow-hidden"}=s,o=d.useRef([]),c=d.useId(),[m,u]=Ms(s.selectedTab,s.defaultSelectedTab||0,s.onTabChange),g=d.useMemo(()=>({selectedTab:m,setSelectedTab:u,tabsRef:o,size:t,isLazy:i,id:c}),[m,c,i,u,t]);return e.jsx(Us.Provider,{value:g,children:e.jsx("div",{className:b(r,l,"max-w-full"),children:a})})}function ed(){const{tabsRef:s,selectedTab:t}=d.useContext(Us),[a,r]=d.useState({width:void 0,transform:void 0,className:void 0});return Ua(()=>{if(t!=null&&s.current){const i=s.current[t];if(!i)return;r(l=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:l.width===void 0?"":"transition-all"}))}},[r,t,s]),e.jsx("div",{className:b("absolute bottom-0 left-0 h-2 bg-primary",a.className),role:"presentation",style:{width:a.width,transform:a.transform}})}function vt({children:s,center:t,expand:a,className:r,border:i="border-b"}){const l=d.Children.toArray(s);return e.jsx(La,{children:e.jsxs("div",{className:b("max-sm:hidden-scrollbar md:compact-scrollbar relative flex max-w-full overflow-auto",i,r),role:"tablist","aria-orientation":"horizontal",children:[l.map((o,c)=>d.isValidElement(o)?d.cloneElement(o,{index:c,className:b(o.props.className,a&&"flex-auto",t&&c===0&&"ml-auto",t&&c===l.length-1&&"mr-auto")}):null),e.jsx(ed,{})]})})}function Je({index:s,className:t,isDisabled:a,children:r,padding:i,elementType:l="button",to:o,relative:c,width:m="min-w-min",height:u}){const{selectedTab:g,setSelectedTab:j,tabsRef:v,size:y="md",id:w}=d.useContext(Us),_=s===g,S=Ma(),N=i||(y==="sm"?"px-12":"px-18"),I=b("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",m,sd({isDisabled:a,isSelected:_}),t,y==="md"&&`${N} ${u||"h-48"}`,y==="sm"&&`${N} ${u||"h-32"}`,a&&"pointer-events-none"),z=se=>{switch(se.key){case"ArrowLeft":S==null||S.focusPrevious();break;case"ArrowRight":S==null||S.focusNext();break;case"Home":S==null||S.focusFirst();break;case"End":S==null||S.focusLast();break}},J=_?0:-1,q=l;return e.jsx(q,{disabled:a,id:`${w}-${s}-tab`,"aria-controls":`${w}-${s}-tabpanel`,type:"button",role:"tab","aria-selected":_,tabIndex:a?void 0:J,onKeyDown:z,onClick:()=>{j(s)},to:o,relative:c,className:I,ref:se=>{v.current&&se&&(v.current[s]=se)},children:r})}function sd({isDisabled:s,isSelected:t}){return s?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function Fn({children:s,className:t}){const{selectedTab:a,isLazy:r}=d.useContext(Us),i=d.Children.toArray(s).filter(o=>!!o);let l;if(r){const o=i[a];l=d.isValidElement(o)?d.cloneElement(i[a],{index:a}):null}else l=i.map((o,c)=>{if(d.isValidElement(o)){const m=c===a;return d.cloneElement(o,{index:c,"aria-hidden":!m,className:m?o.props.className:b(o.props.className,"hidden")})}return null});return e.jsx("div",{className:t,children:l})}function Zs({className:s,children:t,index:a,...r}){const{id:i}=d.useContext(Us),[l,o]=d.useState(0),c=d.useRef(null);return Ua(()=>{if(c!=null&&c.current){const m=()=>{const g=qr(c.current,{tabbable:!0});o(g.nextNode()?void 0:0)};m();const u=new MutationObserver(m);return u.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{u.disconnect()}}},[c]),e.jsx("div",{tabIndex:l,ref:c,id:`${i}-${a}-tabpanel`,"aria-labelledby":`${i}-${a}-tab`,className:b(s,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:t})}function fe({children:s,name:t,separatorBottom:a=!0,separatorTop:r=!0}){const{formState:{errors:i}}=C(),l=d.useRef(null),o=i[t];return d.useEffect(()=>{var c;o&&((c=l.current)==null||c.scrollIntoView({behavior:"smooth"}))},[o]),e.jsxs("div",{className:b(a&&"border-b mb-20 pb-20",r&&"border-t mt-20 pt-20",o&&"border-y-error"),ref:l,children:[s(!!o),o&&e.jsx("div",{className:"text-danger text-sm mt-20",dangerouslySetInnerHTML:{__html:o.message}})]})}function Lt({children:s,...t}){const{field:{onChange:a,onBlur:r,value:i=[],ref:l},fieldState:{invalid:o,error:c}}=fs({name:t.name}),m=d.useMemo(()=>{const g=i;return typeof g=="string"?JSON.parse(g):g},[i]),u={onChange:a,onBlur:r,value:m,invalid:o,errorMessage:c==null?void 0:c.message};return e.jsx($i,{valueKey:"name",ref:l,...cs(u,t)})}function td(){return e.jsx(Se,{title:e.jsx(n,{message:"Subscriptions"}),description:e.jsx(n,{message:"Configure gateway integration, accepted cards, invoices and other related settings."}),children:s=>e.jsx(ad,{data:s})})}function ad({data:s}){var r,i,l,o,c,m,u,g,j,v,y,w,_,S,N,I,z;const{trans:t}=M(),a=P({defaultValues:{client:{billing:{enable:((r=s.client.billing)==null?void 0:r.enable)??!1,accepted_cards:((i=s.client.billing)==null?void 0:i.accepted_cards)??[],paypal_test_mode:((l=s.client.billing)==null?void 0:l.paypal_test_mode)??!1,paypal:{enable:((c=(o=s.client.billing)==null?void 0:o.paypal)==null?void 0:c.enable)??!1},stripe:{enable:((u=(m=s.client.billing)==null?void 0:m.stripe)==null?void 0:u.enable)??!1},invoice:{address:((j=(g=s.client.billing)==null?void 0:g.invoice)==null?void 0:j.address)??"",notes:((y=(v=s.client.billing)==null?void 0:v.invoice)==null?void 0:y.notes)??""}}},server:{paypal_client_id:((w=s.server)==null?void 0:w.paypal_client_id)??"",paypal_secret:((_=s.server)==null?void 0:_.paypal_secret)??"",paypal_webhook_id:((S=s.server)==null?void 0:S.paypal_webhook_id)??"",stripe_key:((N=s.server)==null?void 0:N.stripe_key)??"",stripe_secret:((I=s.server)==null?void 0:I.stripe_secret)??"",stripe_webhook_secret:((z=s.server)==null?void 0:z.stripe_webhook_secret)??""}}});return e.jsx(_e,{form:a,children:e.jsxs(bt,{children:[e.jsxs(vt,{children:[e.jsx(Je,{children:e.jsx(n,{message:"General"})}),e.jsx(Je,{children:e.jsx(n,{message:"Invoices"})})]}),e.jsxs(Fn,{className:"pt-30",children:[e.jsxs(Zs,{children:[e.jsx(D,{name:"client.billing.enable",description:e.jsx(n,{message:"Enable or disable all subscription related functionality across the site."}),children:e.jsx(n,{message:"Enable subscriptions"})}),e.jsx(Ae,{}),e.jsx(nd,{}),e.jsx(rd,{}),e.jsx(Ae,{}),e.jsx(Lt,{label:e.jsx(n,{message:"Accepted cards"}),name:"client.billing.accepted_cards",placeholder:t({message:"Add new card..."})})]}),e.jsxs(Zs,{children:[e.jsx(p,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice address"}),name:"client.billing.invoice.address",className:"mb-30"}),e.jsx(p,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice notes"}),description:e.jsx(n,{message:"Default notes to show under `notes` section of user invoice. Optional."}),name:"client.billing.invoice.notes"})]})]})]})})}function nd(){const{watch:s}=C(),t=s("client.billing.paypal.enable");return e.jsxs("div",{className:"mb-30",children:[e.jsx(D,{name:"client.billing.paypal.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable PayPal payment gateway integration."}),e.jsx(ks,{className:"mt-6",link:"https://support.vebto.com/hc/articles/147/configuring-paypal"})]}),children:e.jsx(n,{message:"PayPal gateway"})}),t?e.jsx(fe,{name:"paypal_group",children:a=>e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.paypal_client_id",label:e.jsx(n,{message:"PayPal Client ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(p,{name:"server.paypal_secret",label:e.jsx(n,{message:"PayPal Secret"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(p,{name:"server.paypal_webhook_id",label:e.jsx(n,{message:"PayPal Webhook ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(D,{name:"client.billing.paypal_test_mode",invalid:a,description:e.jsx("div",{children:e.jsx(n,{message:"Allows testing PayPal payments with sandbox accounts."})}),children:e.jsx(n,{message:"PayPal test mode"})})]})}):null]})}function rd(){const{watch:s}=C(),t=s("client.billing.stripe.enable");return e.jsxs(d.Fragment,{children:[e.jsx(D,{name:"client.billing.stripe.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable Stripe payment gateway integration."}),e.jsx(ks,{className:"mt-6",link:"https://support.vebto.com/hc/articles/148/configuring-stripe"})]}),children:e.jsx(n,{message:"Stripe gateway"})}),t?e.jsx(fe,{name:"stripe_group",separatorBottom:!1,children:a=>e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.stripe_key",label:e.jsx(n,{message:"Stripe publishable key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(p,{name:"server.stripe_secret",label:e.jsx(n,{message:"Stripe secret key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(p,{name:"server.stripe_webhook_secret",label:e.jsx(n,{message:"Stripe webhook signing secret"}),className:"mb-20",invalid:a})]})}):null]})}function id(){const s=Ee(["timezones","localizations"]);return e.jsx(Se,{title:e.jsx(n,{message:"Localization"}),description:e.jsx(n,{message:"Configure global date, time and language settings."}),isLoading:s.isLoading,children:t=>e.jsx(ld,{data:t,timezones:s.data.timezones,localizations:s.data.localizations})})}function ld({data:s,timezones:t,localizations:a}){var o;const r=Wi(),{trans:i}=M(),l=P({defaultValues:{client:{dates:{default_timezone:s.client.dates.default_timezone??"auto",format:s.client.dates.format??"auto"},locale:{default:((o=s.client.locale)==null?void 0:o.default)??"auto"},i18n:{enable:s.client.i18n.enable??!0}}}});return e.jsxs(_e,{form:l,children:[e.jsxs(K,{className:"mb-30",required:!0,name:"client.dates.default_timezone",showSearchField:!0,selectionMode:"single",label:e.jsx(n,{message:"Default timezone"}),searchPlaceholder:i(x("Search timezones")),description:e.jsx(n,{message:"Which timezone should be selected by default for new users and guests."}),children:[e.jsx(h,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries(t).map(([c,m])=>e.jsx(Va,{label:c,children:m.map(u=>e.jsx(h,{value:u.value,children:u.text},u.value))},c))]}),e.jsxs(K,{name:"client.locale.default",className:"mb-30",selectionMode:"single",label:e.jsx(n,{message:"Default language"}),description:e.jsx(n,{message:"Which localization should be selected by default for new users and guests."}),children:[e.jsx(h,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),a.map(c=>e.jsx(h,{value:c.language,capitalizeFirst:!0,children:c.name},c.language))]}),e.jsxs(Ut,{required:!0,className:"mb-30",size:"sm",name:"client.dates.format",orientation:"vertical",label:e.jsx(n,{message:"Date verbosity"}),description:e.jsx(n,{message:"Default verbosity for all dates displayed across the site. Month/day order and separators will be adjusted automatically, based on user's locale."}),children:[e.jsx(is,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries($r).map(([c,m])=>e.jsx(is,{value:c,children:e.jsx(ve,{date:r,options:m})},c))]}),e.jsx(D,{name:"client.i18n.enable",description:e.jsx(n,{message:"If disabled, site will always be shown in default language and user will not be able to change their locale."}),children:e.jsx(n,{message:"Enable translations"})})]})}function od(){return e.jsx(Se,{title:e.jsx(n,{message:"Authentication"}),description:e.jsx(n,{message:"Configure registration, social login and related 3rd party integrations."}),children:s=>e.jsx(cd,{data:s})})}function cd({data:s}){var a,r,i,l,o,c,m,u,g,j,v,y,w,_,S,N,I,z,J,q,se,ne,U;const t=P({defaultValues:{client:{require_email_confirmation:((a=s.client)==null?void 0:a.require_email_confirmation)??!1,registration:{disable:((r=s.client.registration)==null?void 0:r.disable)??!1},social:{requireAccount:((i=s.client.social)==null?void 0:i.requireAccount)??!1,compact_buttons:((l=s.client.social)==null?void 0:l.compact_buttons)??!1,envato:{enable:((c=(o=s.client.social)==null?void 0:o.envato)==null?void 0:c.enable)??!1},google:{enable:((u=(m=s.client.social)==null?void 0:m.google)==null?void 0:u.enable)??!1},facebook:{enable:((j=(g=s.client.social)==null?void 0:g.facebook)==null?void 0:j.enable)??!1},twitter:{enable:((y=(v=s.client.social)==null?void 0:v.twitter)==null?void 0:y.enable)??!1}},single_device_login:s.client.single_device_login??!1,auth:{domain_blacklist:((w=s.client.auth)==null?void 0:w.domain_blacklist)??""}},server:{envato_id:((_=s.server)==null?void 0:_.envato_id)??"",envato_secret:((S=s.server)==null?void 0:S.envato_secret)??"",envato_personal_token:((N=s.server)==null?void 0:N.envato_personal_token)??"",google_id:((I=s.server)==null?void 0:I.google_id)??"",google_secret:((z=s.server)==null?void 0:z.google_secret)??"",facebook_id:((J=s.server)==null?void 0:J.facebook_id)??"",facebook_secret:((q=s.server)==null?void 0:q.facebook_secret)??"",twitter_id:((se=s.server)==null?void 0:se.twitter_id)??"",twitter_secret:((ne=s.server)==null?void 0:ne.twitter_secret)??"",mail_setup:((U=s.server)==null?void 0:U.mail_setup)??!1}}});return e.jsxs(_e,{form:t,children:[e.jsx(ud,{}),e.jsx(D,{className:"mb-24",name:"client.registration.disable",description:e.jsx(n,{message:"All registration related functionality will be disabled and hidden from users."}),children:e.jsx(n,{message:"Disable registration"})}),e.jsx(D,{className:"mb-24",name:"client.social.requireAccount",description:e.jsx(n,{message:"If enabled, user will only be able to login via particular social site, if they have connected it from their account settings page."}),children:e.jsx(n,{message:"Social login requires existing account"})}),e.jsx(D,{className:"mb-24",name:"client.single_device_login",description:e.jsx(n,{message:"Only allow one device to be logged into user account at the same time."}),children:e.jsx(n,{message:"Single device login"})}),e.jsx(D,{name:"client.social.compact_buttons",description:e.jsx(n,{message:"Use compact design for social login buttons."}),children:e.jsx(n,{message:"Compact buttons"})}),e.jsx(md,{}),e.jsx(xd,{}),e.jsx(gd,{}),e.jsx(hd,{}),e.jsx(Ae,{}),e.jsx(p,{inputElementType:"textarea",rows:3,className:"mt-24",name:"client.auth.domain_blacklist",label:e.jsx(n,{message:"Domain blacklist"}),description:e.jsx(n,{message:"Comma separated list of domains. Users will not be able to register or login using any email adress from specified domains."})})]})}function dd(){const{watch:s}=C();return s("server.mail_setup")?null:e.jsx("p",{className:"mt-10 rounded-panel border p-10 text-sm text-danger",children:e.jsx(n,{message:"Outgoing mail method needs to be setup before enabling this setting. <a>Fix now</a>",values:{a:a=>e.jsx(f,{elementType:B,variant:"outline",size:"xs",display:"flex",className:"mt-10 max-w-max",to:"/admin/settings/outgoing-email",children:a})}})})}function ud(){return e.jsx(D,{className:"mb-30",name:"client.require_email_confirmation",description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Require newly registered users to validate their email address before being able to login."}),e.jsx(dd,{})]}),children:e.jsx(n,{message:"Require email confirmation"})})}function md(){var r;const{watch:s}=C(),t=je(),a=s("client.social.envato.enable");return(r=t.envato)!=null&&r.enable?e.jsx(fe,{separatorBottom:!1,name:"envato_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:i,name:"client.social.envato.enable",description:e.jsx(n,{message:"Enable logging into the site via envato."}),children:e.jsx(n,{message:"Envato login"})}),!!a&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_id",label:e.jsx(n,{message:"Envato ID"}),required:!0}),e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_secret",label:e.jsx(n,{message:"Envato secret"}),required:!0}),e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_personal_token",label:e.jsx(n,{message:"Envato personal token"}),required:!0})]})]})}):null}function xd(){const{watch:s}=C(),t=s("client.social.google.enable");return e.jsx(fe,{name:"google_group",children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.google.enable",description:e.jsx(n,{message:"Enable logging into the site via google."}),children:e.jsx(n,{message:"Google login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.google_id",label:e.jsx(n,{message:"Google client ID"}),required:!0}),e.jsx(p,{className:"mt-30",name:"server.google_secret",label:e.jsx(n,{message:"Google client secret"}),required:!0})]})]})})}function gd(){const{watch:s}=C(),t=s("client.social.facebook.enable");return e.jsx(fe,{name:"facebook_group",separatorTop:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.facebook.enable",description:e.jsx(n,{message:"Enable logging into the site via facebook."}),children:e.jsx(n,{message:"Facebook login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.facebook_id",label:e.jsx(n,{message:"Facebook app ID"}),required:!0}),e.jsx(p,{invalid:a,className:"mt-30",name:"server.facebook_secret",label:e.jsx(n,{message:"Facebook app secret"}),required:!0})]})]})})}function hd(){const{watch:s}=C(),t=s("client.social.twitter.enable");return e.jsx(fe,{name:"twitter_group",separatorTop:!1,separatorBottom:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.twitter.enable",description:e.jsx(n,{message:"Enable logging into the site via twitter."}),children:e.jsx(n,{message:"Twitter login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.twitter_id",label:e.jsx(n,{message:"Twitter ID"}),required:!0}),e.jsx(p,{invalid:a,className:"mt-30",name:"server.twitter_secret",label:e.jsx(n,{message:"Twitter secret"}),required:!0})]})]})})}const pd=["B","KB","MB","GB","TB","PB"];function Sa(s,t){if(s==null)return 0;switch(t){case"KB":return s*1024;case"MB":return s*1024**2;case"GB":return s*1024**3;case"TB":return s*1024**4;case"PB":return s*1024**5;default:return s}}const jd=0x630000000000,As=V.forwardRef(({name:s,...t},a)=>{const{field:{onChange:r,onBlur:i,value:l="",ref:o},fieldState:{invalid:c,error:m}}=fs({name:s}),[u,g]=d.useState(""),[j,v]=d.useState("MB");d.useEffect(()=>{if(l==null||l===""){g("");return}const{amount:_,unit:S}=fd({bytes:Math.min(l,jd)});v(S||"MB"),g(Number.isNaN(_)?"":_)},[l,j]);const y={onChange:_=>{const S=parseInt(_.target.value);if(Number.isNaN(S))r(S);else{const N=Sa(parseInt(_.target.value),j);r(N)}},onBlur:i,value:u,invalid:c,errorMessage:m==null?void 0:m.message,inputRef:o},w=e.jsx(hs,{minWidth:"min-w-80",selectionMode:"single",selectedValue:j,disabled:!l,inputRadius:"rounded-l-none rounded-r-input",onSelectionChange:_=>{const S=Sa(u||0,_);r(S)},children:pd.slice(0,5).map(_=>e.jsx(h,{value:_,children:_==="B"?"Bytes":_},_))});return e.jsx(He,{...cs(y,t),type:"number",ref:a,endAppend:w})}),fd=Rr(({bytes:s})=>{const t=Vr(s);if(!t)return{amount:"",unit:"MB"};let a=parseInt(t.split(" ")[0]);return a=Math.round(a),{amount:a,unit:t.split(" ")[1]}});function bd(){return A.get("uploads/server-max-file-size").then(s=>s.data)}function vd(){return Me({queryKey:["MaxServerUploadSize"],queryFn:()=>bd()})}function yd(){return $({mutationFn:s=>wd(s),onError:s=>ae(s)})}function wd(s){return A.post("settings/uploading/dropbox-refresh-token",s).then(t=>t.data)}function _d({isInvalid:s}){const{watch:t,setValue:a}=C(),r=t("server.storage_dropbox_app_key"),i=t("server.storage_dropbox_app_secret");return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_key",label:e.jsx(n,{message:"Dropbox application key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_secret",label:e.jsx(n,{message:"Dropbox application secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_refresh_token",label:e.jsx(n,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(E,{type:"modal",onClose:l=>{l&&a("server.storage_dropbox_refresh_token",l)},children:[e.jsx(f,{variant:"outline",color:"primary",size:"xs",disabled:!r||!i,children:e.jsx(n,{message:"Get dropbox refresh token"})}),e.jsx(Sd,{appKey:r,appSecret:i})]})]})}function Sd({appKey:s,appSecret:t}){const a=P(),{formId:r,close:i}=G(),l=yd();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Connected dropbox account"})}),e.jsx(te,{children:e.jsxs(oe,{id:r,form:a,onSubmit:o=>{l.mutate({app_key:s,app_secret:t,access_code:o.accessCode},{onSuccess:c=>{i(c.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 border-b pb-20",children:[e.jsx("div",{className:"mb-10 text-sm text-muted",children:e.jsx(n,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(f,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(n,{message:"Get access code"})})]}),e.jsx(p,{name:"accessCode",label:e.jsx(n,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{i()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",form:r,type:"submit",disabled:!s||!t||l.isPending,children:e.jsx(n,{message:"Connect"})})]})]})}function kd(){const{trans:s}=M();return $({mutationFn:()=>Nd(),onSuccess:()=>{R(s(x("CORS file updated")))},onError:t=>ae(t)})}function Nd(){return A.post("s3/cors/upload").then(s=>s.data)}function Cd(){return e.jsx(Se,{title:e.jsx(n,{message:"Uploading"}),description:e.jsx(n,{message:"Configure size and type of files that users are able to upload. This will affect all uploads across the site."}),children:s=>e.jsx(Fd,{data:s})})}function Fd({data:s}){const{trans:t}=M(),a=P({defaultValues:{client:{uploads:{max_size:s.client.uploads.max_size??0,chunk_size:s.client.uploads.chunk_size??0,available_space:s.client.uploads.available_space??0,allowed_extensions:s.client.uploads.allowed_extensions??[],blocked_extensions:s.client.uploads.blocked_extensions??[],s3_direct_upload:s.client.uploads.s3_direct_upload??!1}},server:{static_file_delivery:s.server.static_file_delivery??"",uploads_disk_driver:s.server.uploads_disk_driver??"local",public_disk_driver:s.server.public_disk_driver??"local",storage_s3_key:s.server.storage_s3_key??"",storage_s3_secret:s.server.storage_s3_secret??"",storage_s3_region:s.server.storage_s3_region??"",storage_s3_bucket:s.server.storage_s3_bucket??"",storage_s3_endpoint:s.server.storage_s3_endpoint??"",storage_digitalocean_key:s.server.storage_digitalocean_key??"",storage_digitalocean_secret:s.server.storage_digitalocean_secret??"",storage_digitalocean_region:s.server.storage_digitalocean_region??"",storage_digitalocean_bucket:s.server.storage_digitalocean_bucket??"",storage_backblaze_key:s.server.storage_backblaze_key??"",storage_backblaze_secret:s.server.storage_backblaze_secret??"",storage_backblaze_region:s.server.storage_backblaze_region??"",storage_backblaze_bucket:s.server.storage_backblaze_bucket??"",storage_ftp_host:s.server.storage_ftp_host??"",storage_ftp_username:s.server.storage_ftp_username??"",storage_ftp_password:s.server.storage_ftp_password??"",storage_ftp_root:s.server.storage_ftp_root??"",storage_ftp_port:s.server.storage_ftp_port??"21",storage_ftp_passive:s.server.storage_ftp_passive??!1,storage_ftp_ssl:s.server.storage_ftp_ssl??!1,storage_dropbox_app_key:s.server.storage_dropbox_app_key??"",storage_dropbox_app_secret:s.server.storage_dropbox_app_secret??"",storage_dropbox_refresh_token:s.server.storage_dropbox_refresh_token??""}}});return e.jsxs(_e,{form:a,children:[e.jsx(Id,{}),e.jsx(Ad,{}),e.jsx(Pd,{}),e.jsx(fe,{name:"static_delivery_group",children:r=>e.jsxs(Ut,{invalid:r,size:"sm",name:"server.static_file_delivery",orientation:"vertical",label:e.jsx(n,{message:"File delivery optimization"}),description:e.jsx(n,{message:"Both X-Sendfile and X-Accel need to be enabled on the server first. When enabled, it will reduce server memory and CPU usage when previewing or downloading files, especially for large files."}),children:[e.jsx(is,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(is,{value:"xsendfile",children:e.jsx(n,{message:"X-Sendfile (Apache)"})}),e.jsx(is,{value:"xaccel",children:e.jsx(n,{message:"X-Accel (Nginx)"})})]})}),e.jsx(As,{className:"mb-30",name:"client.uploads.chunk_size",min:1,label:e.jsx(n,{message:"Chunk size"}),placeholder:"Infinity",description:e.jsx(n,{message:"Size (in bytes) for each file chunk. It should only be changed if there is a maximum upload size on your server or proxy (for example cloudflare). If chunk size is larger then limit on the server, uploads will fail."})}),e.jsx(zd,{}),e.jsx(Ae,{}),e.jsx(As,{min:1,name:"client.uploads.max_size",className:"mb-30",label:e.jsx(n,{message:"Maximum file size"}),description:e.jsx(n,{message:"Maximum size (in bytes) for a single file user can upload."})}),e.jsx(As,{min:1,name:"client.uploads.available_space",className:"mb-30",label:e.jsx(n,{message:"Available space"}),description:e.jsx(n,{message:"Disk space (in bytes) each user uploads are allowed to take up. This can be overridden per user."})}),e.jsx(Lt,{name:"client.uploads.allowed_extensions",className:"mb-30",label:e.jsx(n,{message:"Allowed extensions"}),placeholder:t(x("Add extension...")),description:e.jsx(n,{message:"List of allowed file types (jpg, mp3, pdf etc.). Leave empty to allow all file types."})}),e.jsx(Lt,{name:"client.uploads.blocked_extensions",label:e.jsx(n,{message:"Blocked extensions"}),placeholder:t(x("Add extension...")),description:e.jsx(n,{message:"Prevent uploading of these file types, even if they are allowed above."})})]})}function zd(){const{data:s}=vd();return e.jsx(_s,{color:"warning",description:e.jsx(n,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:t=>e.jsx("b",{children:t})}})})}function Id(){const{watch:s,clearErrors:t}=C();return s("server.uploads_disk_driver")?e.jsxs(K,{className:"mb-30",selectionMode:"single",name:"server.uploads_disk_driver",label:e.jsx(n,{message:"User Uploads Storage Method"}),description:e.jsx(n,{message:"Where should user private file uploads be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(h,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(h,{value:"ftp",children:"FTP"}),e.jsx(h,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(h,{value:"backblaze_s3",children:"Backblaze"}),e.jsx(h,{value:"s3",children:"Amazon S3 (Or compatible service)"}),e.jsx(h,{value:"dropbox",children:"Dropbox"}),e.jsx(h,{value:"rackspace",children:"Rackspace"})]}):null}function Ad(){const{watch:s,clearErrors:t}=C();return s("server.public_disk_driver")?e.jsxs(K,{label:e.jsx(n,{message:"Public Uploads Storage Method"}),selectionMode:"single",name:"server.public_disk_driver",description:e.jsx(n,{message:"Where should user public uploads (like avatars) be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(h,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(h,{value:"s3",children:"Amazon S3"}),e.jsx(h,{value:"ftp",children:"FTP"}),e.jsx(h,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(h,{value:"backblaze_s3",children:"Backblaze"})]}):null}function Pd(){const{watch:s}=C(),t=[s("server.uploads_disk_driver"),s("server.public_disk_driver")];return t[0]==="local"&&t[1]==="local"?null:e.jsx(fe,{separatorBottom:!1,name:"storage_group",children:a=>{if(t.includes("s3"))return e.jsx(Ed,{isInvalid:a});if(t.includes("ftp"))return e.jsx(Ld,{isInvalid:a});if(t.includes("dropbox"))return e.jsx(_d,{isInvalid:a});if(t.includes("digitalocean_s3"))return e.jsx(Td,{isInvalid:a});if(t.includes("backblaze_s3"))return e.jsx(Dd,{isInvalid:a})}})}function Ed({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_key",label:e.jsx(n,{message:"Amazon S3 key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_secret",label:e.jsx(n,{message:"Amazon S3 secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_region",label:e.jsx(n,{message:"Amazon S3 region"}),placeholder:"us-east-1"}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_bucket",label:e.jsx(n,{message:"Amazon S3 bucket"}),required:!0}),e.jsx(p,{invalid:s,name:"server.storage_s3_endpoint",label:e.jsx(n,{message:"Amazon S3 endpoint"}),description:e.jsx(n,{message:"Only change endpoint if you are using another S3 compatible storage service."})}),e.jsx(sa,{invalid:s})]})}function Td({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_key",label:e.jsx(n,{message:"DigitalOcean key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_secret",label:e.jsx(n,{message:"DigitalOcean secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_region",label:e.jsx(n,{message:"DigitalOcean region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-east-1",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_bucket",label:e.jsx(n,{message:"DigitalOcean bucket"}),required:!0}),e.jsx(sa,{invalid:s})]})}function Dd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_key",label:e.jsx(n,{message:"Backblaze KeyID"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_secret",label:e.jsx(n,{message:"Backblaze applicationKey"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_region",label:e.jsx(n,{message:"Backblaze Region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-west-002",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_bucket",label:e.jsx(n,{message:"Backblaze bucket name"}),required:!0}),e.jsx(sa,{invalid:s})]})}function sa({invalid:s}){var i,l;const t=kd(),{data:a}=jt(),r=((i=a==null?void 0:a.server.uploads_disk_driver)==null?void 0:i.endsWith("s3"))||((l=a==null?void 0:a.server.public_disk_driver)==null?void 0:l.endsWith("s3"));return e.jsxs(d.Fragment,{children:[e.jsx(D,{className:"mt-30",invalid:s,name:"client.uploads.s3_direct_upload",description:e.jsxs("div",{children:[e.jsx("p",{children:e.jsx(n,{message:"Upload files directly from the browser to s3 without going through the server. It will save on server bandwidth and should result in faster upload times. This should be enabled, unless storage provider does not support multipart uploads."})}),e.jsx("p",{className:"mt-10",children:e.jsx(n,{message:"If s3 provider is not configured to allow uploads from browser, this can be done automatically via CORS button below, when valid credentials are saved."})})]}),children:e.jsx(n,{message:"Direct upload"})}),e.jsx(f,{variant:"flat",color:"primary",size:"xs",className:"mt-20",onClick:()=>{t.mutate()},disabled:!r||t.isPending,children:e.jsx(n,{message:"Configure CORS"})})]})}function Ld({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_host",label:e.jsx(n,{message:"FTP hostname"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_username",label:e.jsx(n,{message:"FTP username"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_password",label:e.jsx(n,{message:"FTP password"}),type:"password",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_root",label:e.jsx(n,{message:"FTP directory"}),placeholder:"/"}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_port",label:e.jsx(n,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(D,{invalid:s,name:"server.storage_ftp_passive",className:"mb-30",children:e.jsx(n,{message:"Passive"})}),e.jsx(D,{invalid:s,name:"server.storage_ftp_ssl",children:e.jsx(n,{message:"SSL"})})]})}function Md({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.mailgun_domain",label:e.jsx(n,{message:"Mailgun domain"}),description:e.jsx(n,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.mailgun_secret",label:e.jsx(n,{message:"Mailgun API key"}),description:e.jsx(n,{message:"Should start with `key-`"}),required:!0}),e.jsx(p,{invalid:s,name:"server.mailgun_endpoint",label:e.jsx(n,{message:"Mailgun endpoint"}),description:e.jsx(n,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function qd({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.mail_host",label:e.jsx(n,{message:"SMTP host"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.mail_username",label:e.jsx(n,{message:"SMTP username"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",type:"password",name:"server.mail_password",label:e.jsx(n,{message:"SMTP password"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",type:"number",name:"server.mail_port",label:e.jsx(n,{message:"SMTP port"})}),e.jsxs(K,{selectionMode:"single",invalid:s,className:"mb-30",name:"server.mail_encryption",label:e.jsx(n,{message:"SMTP encryption"}),children:[e.jsx(h,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(h,{value:"tls",children:e.jsx(n,{message:"TLS"})}),e.jsx(h,{value:"ssl",children:e.jsx(n,{message:"SSL"})})]})]})}function $d({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.ses_key",label:e.jsx(n,{message:"SES key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.ses_secret",label:e.jsx(n,{message:"SES secret"}),required:!0}),e.jsx(p,{invalid:s,name:"server.ses_region",label:e.jsx(n,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function Rd({isInvalid:s}){return e.jsx(p,{invalid:s,name:"server.postmark_token",label:e.jsx(n,{message:"Postmark token"}),required:!0})}const ka=T([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function Vd(){const{watch:s,setValue:t}=C(),{connectSocial:a}=Or(),r=s("server.connectedGmailAccount"),i=async()=>{const c=await a("secure/settings/mail/gmail/connect");if((c==null?void 0:c.status)==="SUCCESS"){const m=c.callbackData.profile.email;t("server.connectedGmailAccount",m),R(x("Connected gmail account: :email",{values:{email:m}}))}},l=e.jsx(f,{variant:"outline",color:"primary",startIcon:e.jsx(ka,{}),onClick:()=>i(),children:e.jsx(n,{message:"Connect gmail account"})}),o=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(ka,{size:"lg"}),r,e.jsx(f,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>i(),children:e.jsx(n,{message:"Reconnect"})})]});return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Gmail account"})}),r?o:l]})}function Od(){const{watch:s,clearErrors:t}=C(),a=s("server.mail_driver"),r=[];return a==="mailgun"&&r.push(Md),a==="smtp"&&r.push(qd),a==="ses"&&r.push($d),a==="postmark"&&r.push(Rd),a==="gmailApi"&&r.push(Vd),e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(K,{onSelectionChange:()=>{t()},invalid:i,selectionMode:"single",name:"server.mail_driver",label:e.jsx(n,{message:"Outgoing mail method"}),description:e.jsxs("div",{children:[e.jsx(n,{message:"Which method should be used for sending outgoing application emails (like registration confirmation)"}),e.jsx(ks,{className:"mt-8",link:"https://support.vebto.com/hc/articles/42/44/76/outgoing-emails"})]}),children:[e.jsx(h,{value:"mailgun",children:"Mailgun"}),e.jsx(h,{value:"gmailApi",children:"Gmail Api"}),e.jsx(h,{value:"smtp",children:"SMTP"}),e.jsx(h,{value:"postmark",children:"Postmark"}),e.jsx(h,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(h,{value:"sendmail",children:"SendMail"}),e.jsx(h,{value:"log",children:"Log (Email will be saved to error log)"})]}),r.length?e.jsx("div",{className:"mt-30",children:r.map((l,o)=>e.jsx(l,{isInvalid:i},o))}):null]})})}function Ud(){return e.jsx(Se,{title:e.jsx(n,{message:"Outgoing email settings"}),description:e.jsx(n,{message:"Change outgoing email handlers, email credentials and other related settings."}),children:s=>e.jsx(Hd,{data:s})})}function Hd({data:s}){var a;const t=P({defaultValues:{server:{mail_from_address:s.server.mail_from_address??"",mail_from_name:s.server.mail_from_name??"",mail_driver:s.server.mail_driver??"",mailgun_domain:s.server.mailgun_domain??"",mailgun_secret:s.server.mailgun_secret??"",mailgun_endpoint:s.server.mailgun_endpoint??"",mail_host:s.server.mail_host??"",mail_username:s.server.mail_username??"",mail_password:s.server.mail_password??"",mail_port:s.server.mail_port??"",mail_encryption:s.server.mail_encryption??"",ses_key:s.server.ses_key??"",ses_secret:s.server.ses_secret??"",ses_region:s.server.ses_region??"",postmark_token:s.server.postmark_token??"",connectedGmailAccount:s.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((a=s.client.mail)==null?void 0:a.contact_page_address)??""}}}});return e.jsxs(_e,{form:t,children:[e.jsx(p,{id:"outgoing-emails",className:"mb-30",type:"email",name:"server.mail_from_address",label:e.jsx(n,{message:"From address"}),description:e.jsx(n,{message:"All outgoing application emails will be sent from this email address."}),required:!0}),e.jsx(Bd,{}),e.jsx(p,{className:"mb-30",name:"server.mail_from_name",label:e.jsx(n,{message:"From name"}),description:e.jsx(n,{message:"All outgoing application emails will be sent using this name."}),required:!0}),e.jsx(_s,{color:"warning",description:e.jsx(n,{message:"Your selected mail method must be authorized to send emails using this address and name."})}),e.jsx(Ae,{}),e.jsx(Od,{})]})}function Bd(){const{base_url:s}=je(),t=`${s}/contact`,a=e.jsx(dt,{href:t,children:t});return e.jsx(p,{className:"mb-30",type:"email",name:"client.mail.contact_page_address",label:e.jsx(n,{message:"Contact page address"}),description:e.jsx(n,{values:{contactPageUrl:a},message:"Where emails from :contactPageUrl page should be sent to."})})}function Kd(){return A.post("cache/flush").then(s=>s.data)}function Wd(){return $({mutationFn:()=>Kd(),onSuccess:()=>{R(x("Cache cleared"))},onError:s=>ae(s)})}function Gd(){return e.jsx(Se,{title:e.jsx(n,{message:"Cache settings"}),description:e.jsx(n,{message:"Select cache provider and manually clear cache."}),children:s=>e.jsx(Qd,{data:s})})}function Qd({data:s}){const t=Wd(),a=P({defaultValues:{server:{cache_driver:s.server.cache_driver??"file",memcached_host:s.server.memcached_host??"",memcached_port:s.server.memcached_port??""}}});return e.jsxs(_e,{form:a,children:[e.jsx(Yd,{}),e.jsx(f,{type:"button",variant:"outline",size:"xs",color:"primary",disabled:t.isPending,onClick:()=>t.mutate(),children:e.jsx(n,{message:"Clear cache"})}),e.jsx(_s,{color:"warning",className:"mt-30",description:e.jsx(n,{message:'"File" is the best option for most cases and should not be changed, unless you are familiar with another cache method and have it set up on the server already.'})})]})}function Yd(){const{watch:s,clearErrors:t}=C(),a=s("server.cache_driver");let r=null;return a==="memcached"&&(r=Jd),e.jsx(fe,{separatorTop:!1,name:"cache_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(K,{invalid:i,onSelectionChange:()=>t(),selectionMode:"single",name:"server.cache_driver",label:e.jsx(n,{message:"Cache method"}),description:e.jsx(n,{message:"Which method should be used for storing and retrieving cached items."}),children:[e.jsx(h,{value:"file",children:e.jsx(n,{message:"File (Default)"})}),e.jsx(h,{value:"array",children:e.jsx(n,{message:"None"})}),e.jsx(h,{value:"apc",children:"APC"}),e.jsx(h,{value:"memcached",children:"Memcached"}),e.jsx(h,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function Jd({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.memcached_host",label:e.jsx(n,{message:"Memcached host"}),required:!0}),e.jsx(p,{invalid:s,type:"number",name:"server.memcached_port",label:e.jsx(n,{message:"Memcached port"}),required:!0})]})}function Xd(){return e.jsx(Se,{title:e.jsx(n,{message:"Error logging"}),description:e.jsx(n,{message:"Configure site error logging and related 3rd party integrations."}),children:s=>e.jsx(Zd,{data:s})})}function Zd({data:s}){const t=P({defaultValues:{server:{sentry_dsn:s.server.sentry_dsn??""}}});return e.jsxs(_e,{form:t,children:[e.jsx(eu,{}),e.jsx(_s,{className:"mt-30",color:"positive",description:e.jsx(n,{values:{a:a=>e.jsx(dt,{href:"https://sentry.io",children:a})},message:"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production."})})]})}function eu(){const{clearErrors:s}=C();return e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"logging_group",children:t=>e.jsx(p,{onChange:()=>s(),invalid:t,name:"server.sentry_dsn",type:"url",minLength:30,label:e.jsx(n,{message:"Sentry DSN"})})})}function su(){return Me({queryKey:["queue-stats"],queryFn:()=>tu(),refetchInterval:5e3})}function tu(){return A.get("horizon/api/stats").then(s=>s.data)}function au(){return e.jsx(Se,{title:e.jsx(n,{message:"Queue"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Queues allow to defer time consuming tasks, such as sending an email, until a later time. They are fully optional and do not provide any additional functionality."}),e.jsx(ks,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(nu,{data:s})})}function nu({data:s}){const t=P({defaultValues:{server:{queue_driver:s.server.queue_driver??"sync",sqs_queue_key:s.server.sqs_queue_key??"",sqs_queue_secret:s.server.sqs_queue_secret??"",sqs_queue_prefix:s.server.sqs_queue_prefix??"",sqs_queue_name:s.server.sqs_queue_name??"",sqs_queue_region:s.server.sqs_queue_region??""}}}),a=t.watch("server.queue_driver");return e.jsxs(_e,{form:t,children:[a!=="sync"&&e.jsx(ru,{}),e.jsx(iu,{})]})}function ru(){const{base_url:s}=je(),{data:t}=su(),a=t==null?void 0:t.status;return e.jsx("div",{className:"mb-30 flex h-32 items-center justify-between gap-14",children:a&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:b("min-w-108 flex w-max items-center gap-8 rounded-button px-10 py-4 text-sm capitalize",a==="running"&&"bg-positive-lighter",a==="inactive"&&"bg-danger-lighter",a==="paused"&&"bg-chip"),children:[e.jsx("div",{className:b("h-10 w-10 rounded-full",a==="running"&&"bg-positive",a==="inactive"&&"bg-danger",a==="paused"&&"bg-chip")}),e.jsx(n,{message:`Worker ${a}`})]}),e.jsx(f,{variant:"outline",size:"xs",elementType:"a",href:`${s}/horizon`,target:"_blank",endIcon:e.jsx(Ji,{}),children:e.jsx(n,{message:"Monitor"})})]})})}function iu(){const{watch:s,clearErrors:t}=C(),a=s("server.queue_driver");let r=null;return a==="sqs"&&(r=lu),e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(K,{invalid:i,onSelectionChange:()=>{t()},selectionMode:"single",name:"server.queue_driver",label:e.jsx(n,{message:"Queue method"}),required:!0,children:[e.jsx(h,{value:"sync",children:e.jsx(n,{message:"None (Default)"})}),e.jsx(h,{value:"beanstalkd",children:"Beanstalkd"}),e.jsx(h,{value:"database",children:e.jsx(n,{message:"Database"})}),e.jsx(h,{value:"sqs",children:e.jsx(n,{message:"SQS (Amazon simple queue service)"})}),e.jsx(h,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function lu({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_key",label:e.jsx(n,{message:"SQS queue key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_secret",label:e.jsx(n,{message:"SQS queue secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_prefix",label:e.jsx(n,{message:"SQS queue prefix"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_name",label:e.jsx(n,{message:"SQS queue name"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_region",label:e.jsx(n,{message:"SQS queue region"}),required:!0})]})}function ou(){return e.jsx(Se,{title:e.jsx(n,{message:"Websockets"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Configure websockets provider responsible for all realtime functionality on the site."}),e.jsx(ks,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(cu,{data:s})})}function cu({data:s}){const t=P({defaultValues:{server:{broadcast_driver:s.server.broadcast_driver??"null",pusher_app_id:s.server.pusher_app_id??"",pusher_app_key:s.server.pusher_app_key??"",pusher_app_secret:s.server.pusher_app_secret??"",pusher_app_cluster:s.server.pusher_app_cluster??"",reverb_app_id:s.server.reverb_app_id??"",reverb_app_key:s.server.reverb_app_key??"",reverb_app_secret:s.server.reverb_app_secret??"",reverb_host:s.server.reverb_host??"",reverb_port:s.server.reverb_port??"",reverb_scheme:s.server.reverb_scheme??"https",ably_app_id:s.server.ably_app_id??"",ably_app_key:s.server.ably_app_key??"",ably_app_secret:s.server.ably_app_secret??""}}});return e.jsx(_e,{form:t,children:e.jsx(du,{})})}function du(){const{clearErrors:s,control:t}=C(),a=Rs({control:t,name:"server.broadcast_driver"});let r=null;return a==="pusher"?r=uu:a==="ably"&&(r=mu),e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(K,{invalid:i,onSelectionChange:()=>s(),selectionMode:"single",name:"server.broadcast_driver",label:e.jsx(n,{message:"Websockets provider"}),required:!0,children:[e.jsx(h,{value:"null",children:e.jsx(n,{message:"None (Disabled)"})}),e.jsx(h,{value:"reverb",children:"Local"}),e.jsx(h,{value:"pusher",children:"Pusher"}),e.jsx(h,{value:"ably",children:e.jsx(n,{message:"Ably"})})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function uu({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.pusher_app_id",label:e.jsx(n,{message:"Pusher app ID"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_key",label:e.jsx(n,{message:"Pusher app key"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_secret",label:e.jsx(n,{message:"Pusher app secret"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_cluster",label:e.jsx(n,{message:"Pusher app cluster"}),className:"mb-30",placeholder:"mt1",required:!0})]})}function mu({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.ably_app_id",label:e.jsx(n,{message:"Ably app ID"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.ably_app_key",label:e.jsx(n,{message:"Ably app key"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.ably_app_secret",label:e.jsx(n,{message:"Ably app secret"}),className:"mb-30",required:!0})]})}function xu(){return e.jsx(Se,{title:e.jsx(n,{message:"Recaptcha"}),description:e.jsx(n,{message:"Configure google recaptcha integration and credentials."}),children:s=>e.jsx(gu,{data:s})})}function gu({data:s}){var r,i,l,o,c,m,u,g;const{settings:t}=d.useContext(ds),a=P({defaultValues:{client:{recaptcha:{enable:{link_creation:((i=(r=s.client.recaptcha)==null?void 0:r.enable)==null?void 0:i.link_creation)??!1,contact:((o=(l=s.client.recaptcha)==null?void 0:l.enable)==null?void 0:o.contact)??!1,register:((m=(c=s.client.recaptcha)==null?void 0:c.enable)==null?void 0:m.register)??!1},site_key:((u=s.client.recaptcha)==null?void 0:u.site_key)??"",secret_key:((g=s.client.recaptcha)==null?void 0:g.secret_key)??""}}}});return e.jsxs(_e,{form:a,children:[(t==null?void 0:t.showRecaptchaLinkSwitch)&&e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.link_creation",description:e.jsx(n,{message:"Enable recaptcha integration when creating links from homepage or user dashboard."}),children:e.jsx(n,{message:"Link creation"})}),e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.contact",description:e.jsx(n,{message:'Enable recaptcha integration for "contact us" page.'}),children:e.jsx(n,{message:"Contact page"})}),e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.register",description:e.jsx(n,{message:"Enable recaptcha integration for registration page."}),children:e.jsx(n,{message:"Registration page"})}),e.jsx(hu,{})]})}function hu(){const{clearErrors:s}=C();return e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"recaptcha_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"client.recaptcha.site_key",label:e.jsx(n,{message:"Recaptcha v3 site key"})}),e.jsx(p,{onChange:()=>{s()},invalid:t,name:"client.recaptcha.secret_key",label:e.jsx(n,{message:"Recaptcha v3 secret key"})})]})})}const pu=V.forwardRef((s,t)=>{const a=Ha(t),{fieldProps:r,inputProps:i}=Ur({...s,focusRef:a}),l=Ot(s);return e.jsx(Hr,{ref:t,fieldClassNames:l,...r,children:e.jsx("input",{type:"file",ref:a,...i,className:b(l.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})})});function ju({name:s,...t}){const{field:{onChange:a,onBlur:r,ref:i},fieldState:{invalid:l,error:o}}=fs({name:s}),[c,m]=V.useState(""),u={onChange:g=>{var j;a((j=g.target.files)==null?void 0:j[0]),m(g.target.value)},onBlur:r,value:c,invalid:l,errorMessage:o==null?void 0:o.message};return e.jsx(pu,{ref:i,...cs(u,t)})}function fu(){return e.jsx(Se,{title:e.jsx(n,{message:"Analytics"}),description:e.jsx(n,{message:"Configure google analytics integration and credentials."}),children:s=>e.jsx(bu,{data:s})})}function bu({data:s}){var a,r;const t=P({defaultValues:{files:{certificate:""},server:{analytics_property_id:s.server.analytics_property_id??""},client:{analytics:{tracking_code:((a=s.client.analytics)==null?void 0:a.tracking_code)??"",gchart_api_key:((r=s.client.analytics)==null?void 0:r.gchart_api_key)??""}}}});return e.jsx(_e,{form:t,children:e.jsx(vu,{})})}function vu(){const{clearErrors:s}=C();return e.jsx(fe,{separatorTop:!1,separatorBottom:!1,name:"analytics_group",children:t=>e.jsxs(d.Fragment,{children:[e.jsx(ju,{className:"mb-30",onChange:()=>s(),invalid:t,name:"files.certificate",accept:".json",label:e.jsx(n,{message:"Google service account key file (.json)"})}),e.jsx(p,{className:"mb-30",onChange:()=>s(),invalid:t,name:"server.analytics_property_id",type:"number",label:e.jsx(n,{message:"Google analytics property ID"})}),e.jsx(p,{className:"mb-30",onChange:()=>s(),invalid:t,name:"client.analytics.tracking_code",placeholder:"G-******",min:"1",max:"20",description:e.jsx(n,{message:"Google analytics measurement ID only, not the whole javascript snippet."}),label:e.jsx(n,{message:"Google tag manager measurement ID"})}),e.jsx(p,{name:"client.analytics.gchart_api_key",label:e.jsx(n,{message:"Google maps javascript API key"}),description:e.jsx(n,{message:"Only required in order to show world geochart on integrated analytics pages."})})]})})}function zn(){const[s,t]=d.useState(!1),a=d.useRef(),r=d.useCallback(i=>{var l;if(i){const o=new IntersectionObserver(([c])=>t(c.intersectionRatio<1),{threshold:[1]});a.current=o,o.observe(i)}else a.current&&((l=a.current)==null||l.disconnect())},[]);return{isSticky:s,sentinelRef:r}}function yt({onSubmit:s,form:t,title:a,subTitle:r,children:i,actions:l,backButton:o,isLoading:c=!1,disableSaveWhenNotDirty:m=!1,wrapInContainer:u=!0,submitButtonText:g,variant:j="sticky"}){const{isSticky:v,sentinelRef:y}=zn(),w=m?Object.keys(t.formState.dirtyFields).length:!0,_=e.jsx(f,{variant:"flat",color:"primary",type:"submit",disabled:c||!w,children:g??e.jsx(n,{message:"Save"})});return e.jsxs(oe,{onSubmit:s,onBeforeSubmit:()=>t.clearErrors(),form:t,className:"relative",children:[j==="sticky"&&e.jsx("div",{ref:y}),e.jsx(In,{wrapInContainer:u,startActions:o,subTitle:r,endActions:e.jsxs(d.Fragment,{children:[l,j==="sticky"&&_]}),className:b(v&&"bg shadow",j==="sticky"&&"sticky"),children:a}),e.jsx("div",{className:u?"container mx-auto px-24 pb-24":void 0,children:e.jsx("div",{className:"rounded",children:i})}),j==="popup"&&e.jsx(Pn,{saveButton:_,isLoading:c})]})}function In({className:s,wrapInContainer:t,children:a,subTitle:r,startActions:i,endActions:l}){return e.jsx("div",{className:b("top-0 z-10 my-12 transition-shadow md:my-24",s),children:e.jsxs("div",{className:b("flex items-center gap-24 py-14 md:items-start",t&&"container mx-auto px-24"),children:[i,e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis md:mr-64",children:[e.jsx("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-xl md:text-3xl",children:a}),r&&e.jsx("div",{className:"mt-4",children:r})]}),e.jsx("div",{className:"mr-auto"}),l]})})}function An({label:s,children:t,margin:a="mb-48",labelMargin:r="mb-16"}){return e.jsxs("section",{className:b(a),children:[e.jsx("div",{className:b(r,"text-lg font-semibold"),children:s}),t]})}function Pn({saveButton:s,isLoading:t}){const{formState:a,reset:r}=C();return e.jsx(Xe,{children:a.isDirty&&e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"invisible h-92"}),e.jsxs(Le.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.2},className:"fixed bottom-0 left-0 right-0 z-20 flex items-center justify-center gap-16 border-t bg px-12 py-28 shadow-[rgba(0,0,0,0.2)_0px_0px_10px]",children:[e.jsx(f,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),s??e.jsx(f,{variant:"flat",color:"primary",type:"submit",disabled:t,children:e.jsx(n,{message:"Save changes"})})]},"dirty-panel")]})})}function yu({user:s,badge:t}){var i,l;const a=s.banned_at!==null,r=(l=(i=s.bans)==null?void 0:i[0])==null?void 0:l.comment;return e.jsxs("div",{className:"container mx-auto mb-44 mt-38 px-24",children:[e.jsxs("div",{className:"flex gap-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wu,{user:s}),e.jsx("div",{className:"absolute right-0 top-2",children:t})]}),e.jsxs("div",{children:[!!s.roles.length&&e.jsx(lt,{radius:"rounded-panel",size:"sm",className:"mb-6 w-max",children:s.roles[0].name}),e.jsx("h1",{className:"text-2xl font-semibold",children:s.name}),e.jsx("div",{className:"mt-4 text-sm text-muted",children:s.email})]})]}),a&&e.jsxs("div",{className:"mt-24 flex w-max items-center gap-8 rounded-panel bg-danger-lighter px-10 py-6 text-sm text-danger-darker",children:[e.jsx(Br,{size:"sm"}),r?e.jsx(n,{message:"Suspended: :reason",values:{reason:r}}):e.jsx(n,{message:"Suspended"})]})]})}function wu({user:s}){const t=Kr({user:s}),a=Wr({user:s}),[r,i]=d.useState(s.image);return e.jsx(ps,{children:e.jsx(Gr,{value:r,diskPrefix:"avatars",variant:"avatar",stretchPreview:!0,previewSize:"w-90 h-90",placeholderIcon:e.jsx(it,{label:s.name,size:"w-full h-full text-2xl",circle:!0}),showRemoveButton:!0,onChange:l=>{const o={onSuccess:()=>i(l)};l?t.mutate({url:l},o):a.mutate(void 0,o)}})})}function _u(s){const{pathname:t}=Ke(),a=t.split("/").pop();return d.useState(()=>{const r=s.findIndex(i=>i.uri===a);return r===-1?0:r})}const Su=[{uri:"details",label:x("Details")},{uri:"permissions",label:x("Roles & permissions")},{uri:"security",label:x("Security")},{uri:"date",label:x("Date & time")},{uri:"api",label:x("API")}];function ku({user:s,tabs:t}){const{user:a,hasPermission:r}=st(),{api:i}=je(),l=(i==null?void 0:i.integrated)&&r("api.access"),o=d.useMemo(()=>t.filter(u=>!(u.uri==="api"&&!l||u.uri==="security"&&s.id!==(a==null?void 0:a.id))),[s.id,a==null?void 0:a.id,l,t]),[c,m]=_u(o);return e.jsx("div",{className:"container mx-auto px-24",children:e.jsxs(bt,{selectedTab:c,onTabChange:m,overflow:"overflow-visible",children:[e.jsx(vt,{className:"mb-24",children:o.map(u=>e.jsx(Je,{elementType:B,to:u.uri,children:e.jsx(n,{...u.label})},u.uri))}),e.jsx(es,{context:s})]})})}function Nu(){const{trans:s}=M();return $({mutationFn:t=>Cu(t.userId),onSuccess:async()=>{await L.invalidateQueries({queryKey:Y("users")}),R(s(x("User deleted")))},onError:t=>ae(t)})}function Cu(s){return A.delete(`users/${s}`).then(t=>t.data)}function Fu({user:s,children:t}){const a=dn(s.id),r=s.banned_at!==null,[i,l]=d.useState(!1);return e.jsxs(d.Fragment,{children:[e.jsx(E,{type:"modal",isOpen:i,onOpenChange:l,children:e.jsx(zu,{userId:s.id})}),e.jsxs(We,{children:[e.jsx(f,{className:"ml-auto",variant:"outline",size:"sm",endIcon:e.jsx(Ba,{}),children:e.jsx(n,{message:"Actions"})}),e.jsxs(Ge,{children:[t,e.jsx(h,{value:"toggleSuspension",onSelected:()=>{r?a.mutate():ut(cn,{user:s})},children:r?e.jsx(n,{message:"Unsuspend user"}):e.jsx(n,{message:"Suspend user"})}),e.jsx(h,{value:"delete",onSelected:()=>{l(!0)},children:e.jsx(n,{message:"Delete user"})})]})]})]})}function zu({userId:s}){const t=Nu(),{close:a}=G(),r=pe();return e.jsx(we,{isDanger:!0,isLoading:t.isPending,title:e.jsx(n,{message:"Delete user"}),confirm:e.jsx(n,{message:"Delete"}),body:e.jsx(n,{message:"Are you sure you want to delete this user?"}),onConfirm:()=>{t.mutate({userId:s},{onSuccess:()=>{a(),r("..",{relative:"path"})}})}})}function Iu(){var a;const{userId:s}=ge(),t=Qr(s,{with:["subscriptions","roles","permissions","bans"]});return e.jsxs(d.Fragment,{children:[e.jsx(qs,{children:e.jsx(n,{message:"Edit user"})}),(a=t.data)!=null&&a.user?e.jsx(Au,{user:t.data.user}):e.jsx(Ka,{query:t})]})}function Au({user:s}){return e.jsxs(d.Fragment,{children:[e.jsx(In,{wrapInContainer:!0,startActions:e.jsx(k,{elementType:B,to:"..",relative:"path",size:"sm",iconSize:"md",children:e.jsx(Xa,{})}),endActions:e.jsx(Fu,{user:s}),children:e.jsx(n,{message:"Edit user"})}),e.jsx(yu,{user:s}),e.jsx(ku,{tabs:Su,user:s})]})}const Pu=T(e.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"}),"TranslateOutlined"),ta=s=>{const t=["getLocaleWithLines"];return s!=null&&t.push(s),t};function Eu(s){return Me({queryKey:ta(s),queryFn:()=>Tu(s),staleTime:1/0})}function Tu(s){return A.get(`localizations/${s}`).then(t=>t.data)}function Du({id:s,...t}){return A.put(`localizations/${s}`,t).then(a=>a.data)}function En(s){return $({mutationFn:t=>Du(t),onSuccess:()=>{R(x("Localization updated")),L.invalidateQueries({queryKey:Y("localizations")}),L.invalidateQueries({queryKey:ta()})},onError:t=>s?Ce(t,s):ae(t)})}function Lu({localization:s}){const{trans:t}=M(),{formId:a,close:r}=G(),i=P({defaultValues:{id:s.id,name:s.name,language:s.language}}),{data:l}=Ee(["languages"]),o=(l==null?void 0:l.languages)||[],c=En(i);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Update localization"})}),e.jsx(te,{children:e.jsxs(oe,{form:i,id:a,onSubmit:m=>{c.mutate(m,{onSuccess:r})},children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(K,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:t(x("Search languages")),children:o.map(m=>e.jsx(h,{value:m.code,children:m.name},m.code))})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:r,children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",form:a,disabled:c.isPending,children:e.jsx(n,{message:"Save"})})]})]})}function Mu(s){return A.post("localizations",s).then(t=>t.data)}function qu(s){const t=et();return $({mutationFn:a=>Mu(a),onSuccess:()=>{R(x("Localization created")),t.invalidateQueries({queryKey:Y("localizations")})},onError:a=>Ce(a,s)})}function $u(){const{trans:s}=M(),{formId:t,close:a}=G(),r=P({defaultValues:{language:"en"}}),{data:i}=Ee(["languages"]),l=(i==null?void 0:i.languages)||[],o=qu(r);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Create localization"})}),e.jsx(te,{children:e.jsxs(oe,{form:r,id:t,onSubmit:c=>{o.mutate(c,{onSuccess:a})},children:[e.jsx(p,{autoFocus:!0,name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(K,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:s(x("Search languages")),children:l.map(c=>e.jsx(h,{value:c.code,children:c.name},c.code))})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:a,children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",form:t,disabled:o.isPending,children:e.jsx(n,{message:"Save"})})]})]})}const Ru=""+new URL("around-the-world-df9b11c5.svg",import.meta.url).href;function Tn(){return $({mutationFn:s=>Vu(s),onSuccess:async()=>{await L.invalidateQueries({queryKey:Y("localizations")}),await L.invalidateQueries({queryKey:ta()}),R(x("Translation file uploaded"))},onError:s=>ae(s)})}function Vu({localeId:s,file:t}){const a=new FormData;return a.append("file",t.native),A.post(`localizations/${s}/upload`,a).then(r=>r.data)}const Ou=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(n,{message:"Language code"}),body:s=>s.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(Z,{label:e.jsx(n,{message:"Translate"}),children:e.jsx(k,{size:"md",elementType:B,to:`${s.id}/translate`,children:e.jsx(Pu,{})})}),e.jsx(ps,{children:e.jsx(Bu,{locale:s})})]})}];function Uu(){return e.jsx($e,{endpoint:"localizations",title:e.jsx(n,{message:"Localizations"}),columns:Ou,actions:e.jsx(Hu,{}),selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:Ru,title:e.jsx(n,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching localizations"})})})}function Hu(){return e.jsx(d.Fragment,{children:e.jsxs(E,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(n,{message:"Add new localization"})}),e.jsx($u,{})]})})}function Bu({locale:s}){const t=Tn();return e.jsxs(We,{children:[e.jsx(k,{disabled:t.isPending,children:e.jsx(ht,{})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"translate",elementType:B,to:`${s.id}/translate`,children:e.jsx(n,{message:"Translate"})}),e.jsx(h,{value:"rename",onSelected:()=>ut(Lu,{localization:s}),children:e.jsx(n,{message:"Rename"})}),e.jsx(h,{value:"download",onSelected:()=>mt(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(h,{value:"upload",onSelected:async()=>{const a=await Wa({types:[Ht.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function Ku(){const{formId:s,close:t}=G(),a=P();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Add translation"})}),e.jsx(te,{children:e.jsxs(oe,{form:a,id:s,onSubmit:r=>{t(r)},children:[e.jsx(_s,{className:"mb-30",title:e.jsx(n,{message:"Add a new translation, if it does not exist already."}),description:e.jsx(n,{message:"This should only need to be done for things like custom menu items."})}),e.jsx(p,{inputElementType:"textarea",rows:2,autoFocus:!0,name:"key",label:e.jsx(n,{message:"Translation key"}),className:"mb-30",required:!0}),e.jsx(p,{inputElementType:"textarea",rows:2,name:"value",label:e.jsx(n,{message:"Translation value"}),required:!0})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:t,children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",form:s,children:e.jsx(n,{message:"Add"})})]})]})}function Wu(){const{localeId:s}=ge(),{data:t,isLoading:a}=Eu(s),r=t==null?void 0:t.localization;return a||!r?e.jsx(bs,{}):e.jsx(Gu,{localization:r})}function Gu({localization:s}){const[t,a]=d.useState(s.lines||{}),r=pe(),i=En(),[l,o]=d.useState("");return e.jsxs("form",{className:"flex h-full flex-col p-14 md:p-24",onSubmit:c=>{c.preventDefault(),i.mutate({id:s.id,lines:t},{onSuccess:()=>{r("/admin/localizations")}})},children:[e.jsx(Qu,{localization:s,setLines:a,lines:t,searchQuery:l,setSearchQuery:o,isLoading:i.isPending}),e.jsx(Yu,{lines:t,setLines:a,searchQuery:l})]})}function Qu({localization:s,searchQuery:t,setSearchQuery:a,isLoading:r,lines:i,setLines:l}){const o=pe(),c=qe(),{trans:m}=M();return e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs(Gi,{size:"lg",className:"mb-16",children:[e.jsx(da,{onSelected:()=>{o("/admin/localizations")},children:e.jsx(n,{message:"Localizations"})}),e.jsx(da,{children:e.jsx(n,{message:":locale translations",values:{locale:s.name}})})]}),e.jsxs("div",{className:"mb-24 flex items-center gap-32 md:gap-12",children:[e.jsx("div",{className:"max-w-440 flex-auto",children:e.jsx(He,{value:t,onChange:u=>a(u.target.value),startAdornment:e.jsx(tt,{}),placeholder:m({message:"Type to search..."})})}),e.jsxs(E,{type:"modal",onClose:u=>{if(u){const g={...i};g[u.key]=u.value,l(g)}},children:[!c&&e.jsx(f,{className:"ml-auto",variant:"outline",color:"primary",startIcon:e.jsx(Pe,{}),children:e.jsx(n,{message:"Add new"})}),e.jsx(Ku,{})]}),e.jsx(Ju,{locale:s}),e.jsx(f,{variant:"flat",color:"primary",type:"submit",disabled:r,children:c?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Save translations"})})]})]})}function Yu({searchQuery:s,lines:t,setLines:a}){const r=d.useMemo(()=>Object.entries(t).filter(([o,c])=>{const m=s==null?void 0:s.toLowerCase();return!m||(o==null?void 0:o.toLowerCase().includes(m))||(c==null?void 0:c.toLowerCase().includes(m))}),[t,s]),i=d.useRef(null),l=Ri({count:r.length,getScrollElement:()=>i.current,estimateSize:()=>123});return e.jsx("div",{className:"flex-auto overflow-y-auto",ref:i,children:e.jsx("div",{className:"relative w-full",style:{height:`${l.getTotalSize()}px`},children:l.getVirtualItems().map(o=>{const[c,m]=r[o.index];return e.jsx("div",{className:"absolute left-0 top-0 w-full",style:{height:`${o.size}px`,transform:`translateY(${o.start}px)`},children:e.jsxs("div",{className:"mb-10 rounded border md:mr-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-24 border-b px-10 py-2",children:[e.jsx("label",{className:"flex-auto text-xs font-semibold",htmlFor:c,children:c}),e.jsx(k,{size:"xs",className:"text-muted",onClick:()=>{const u={...t};delete u[c],a(u)},children:e.jsx(Be,{})})]}),e.jsx("div",{children:e.jsx("textarea",{id:c,name:c,defaultValue:m,className:"block w-full resize-none rounded bg-inherit p-10 text-sm outline-none focus-visible:ring-2",rows:2,onChange:u=>{const g={...t};g[c]=u.target.value,a(g)}})})]})},c)})})})}function Ju({locale:s}){const t=Tn();return e.jsxs(We,{children:[e.jsx(k,{variant:"outline",size:"sm",color:"primary",disabled:t.isPending,children:e.jsx(ht,{})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"download",onSelected:()=>mt(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(h,{value:"upload",onSelected:async()=>{const a=await Wa({types:[Ht.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function Xu(s){const{close:t}=G(),{image:a,images:r}=s,[i,l]=Ms(s.activeIndex,s.defaultActiveIndex,s.onActiveIndexChange),o=a||(r==null?void 0:r[i]);return e.jsx(ee,{size:"fullscreenTakeover",background:"bg-black/80",children:e.jsxs(te,{padding:"p-0",className:"h-full w-full",children:[e.jsx(k,{size:"lg",color:"paper",className:"absolute right-0 top-0 z-20 text-white",onClick:()=>{t()},children:e.jsx(Be,{})}),e.jsxs("div",{className:"relative flex h-full w-full items-center justify-center p-40",children:[r!=null&&r.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 left-20 top-0 my-auto",disabled:i<1,onClick:()=>{l(i-1)},children:e.jsx(Ls,{})}):null,e.jsx("img",{src:o,alt:"",className:"max-h-full w-auto object-contain shadow"}),r!=null&&r.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 right-20 top-0 my-auto",disabled:i+1===(r==null?void 0:r.length),onClick:()=>{l(i+1)},children:e.jsx(ws,{})}):null]})]})})}function Zu(){var t;const s=jt();return e.jsxs("div",{className:"container mx-auto p-12 md:p-24",children:[e.jsx(qs,{children:e.jsx(n,{message:"Ads"})}),e.jsx("h1",{className:"mb-20 text-2xl font-light md:mb-40 md:text-3xl",children:e.jsx(n,{message:"Predefined Ad slots"})}),s.isLoading?e.jsx($s,{isIndeterminate:!0}):e.jsx(em,{defaultValues:((t=s.data)==null?void 0:t.client.ads)||{}})]})}function em({defaultValues:s}){const{admin:{ads:t}}=d.useContext(ds),a=P({defaultValues:{client:{ads:s}}}),r=Sn(a);return e.jsxs(oe,{form:a,onSubmit:i=>{r.mutate(i)},children:[t.map(i=>e.jsx(sm,{adConfig:i},i.slot)),e.jsx(D,{name:"client.ads.disable",className:"mb-30",description:e.jsx(n,{message:"Disable all add related functionality across the site."}),children:e.jsx(n,{message:"Disable ads"})}),e.jsx(f,{type:"submit",variant:"flat",color:"primary",disabled:r.isPending,children:e.jsx(n,{message:"Save"})})]})}function sm({adConfig:s}){return e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(p,{className:"mb-30 flex-auto",name:`client.${s.slot}`,inputElementType:"textarea",rows:8,label:e.jsx(n,{...s.description})}),e.jsxs(E,{type:"modal",children:[e.jsx("button",{type:"button",className:"cursor-zoom-in overflow-hidden rounded outline-none transition hover:scale-105 focus-visible:ring max-md:hidden",children:e.jsx("img",{src:s.image,className:"h-[186px] w-auto border",alt:"Ad slot example"})}),e.jsx(Xu,{image:s.image})]})]})}function tm(){const s=ns(a=>{var r;return(r=a.config)==null?void 0:r.sections}),t=d.useMemo(()=>s?Object.entries(s||[]).map(([a,r])=>({...r,key:a})).sort((a,r)=>((a==null?void 0:a.position)||1)-((r==null?void 0:r.position)||1)):[],[s]);return e.jsx(Yt,{children:t.map(a=>e.jsx(ye,{to:a.key,elementType:$t,children:e.jsx(n,{...a.label})},a.key))})}const am=[{key:"type",label:x("Type"),description:x("Type of the role"),defaultOperator:le.ne,control:{type:ue.Select,defaultValue:"01",options:[{key:"01",label:x("Sitewide"),value:"sitewide"},{key:"02",label:x("Workspace"),value:"workspace"}]}},us({description:x("Date role was created")}),ys({description:x("Date role was last updated")})],nm=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Role"}),body:s=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(n,{message:s.name})}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.description?e.jsx(n,{message:s.description}):void 0})]})},{key:"type",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(B,{to:`${s.id}/edit`,children:e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(ss,{})})})}];function rm(){return e.jsx($e,{endpoint:"roles",title:e.jsx(n,{message:"Roles"}),columns:nm,filters:am,actions:e.jsx(im,{}),selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:Ps,title:e.jsx(n,{message:"No roles have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching roles"})})})}function im(){return e.jsxs(d.Fragment,{children:[e.jsx(ln,{endpoint:"roles/csv/export"}),e.jsx(Oe,{elementType:B,to:"new",children:e.jsx(n,{message:"Add new role"})})]})}const Dn=s=>`roles/${s}`;function lm(){const{roleId:s}=ge();return Me({queryKey:[Dn(s)],queryFn:()=>om(s)})}function om(s){return A.get(Dn(s)).then(t=>t.data)}const Ln=s=>`roles/${s}`;function cm(){const{trans:s}=M(),t=pe();return $({mutationFn:a=>dm(a),onSuccess:a=>{R(s(x("Role updated"))),L.invalidateQueries({queryKey:[Ln(a.role.id)]}),L.invalidateQueries({queryKey:Y("roles")}),t("/admin/roles")},onError:a=>ae(a)})}function dm({id:s,...t}){return A.put(Ln(s),t).then(a=>a.data)}function Mn({isInternal:s=!1}){const{trans:t}=M(),{workspaces:a}=je(),{watch:r,setValue:i}=C(),l=r("type");return e.jsxs(e.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Name"}),name:"name",className:"mb-20",required:!0}),e.jsx(p,{label:e.jsx(n,{message:"Description"}),name:"description",inputElementType:"textarea",placeholder:t(x("Role description...")),rows:4,className:"mb-20"}),a.integrated&&e.jsxs(K,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",className:"mb-20",description:e.jsx(n,{message:"Whether this role will be assigned to users globally on the site or only within workspaces."}),children:[e.jsx(h,{value:"sitewide",children:e.jsx(n,{message:"Sitewide"})}),e.jsx(h,{value:"workspace",children:e.jsx(n,{message:"Workspace"})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(D,{name:"default",className:"mb-20",description:e.jsx(n,{message:"Assign this role to new users automatically."}),children:e.jsx(n,{message:"Default"})}),l==="sitewide"&&e.jsx(D,{name:"guests",description:e.jsx(n,{message:"Assign this role to guests (not logged in users)."}),children:e.jsx(n,{message:"Guests"})})]}),e.jsxs("div",{className:"mb-14 mt-30 flex items-end justify-between gap-12",children:[e.jsx("h2",{className:"text-lg leading-tight",children:e.jsx(n,{message:"Permissions"})}),e.jsx(f,{variant:"outline",size:"xs",onClick:()=>i("permissions",[]),children:e.jsx(n,{message:"Remove all"})})]}),e.jsx(Gt,{name:"permissions",valueListKey:l==="sitewide"?"permissions":"workspacePermissions"})]})}function um({multiple:s=!1,endpoint:t="normalized-models/user"}){var j;const{close:a}=G(),[r,i]=d.useState(""),{trans:l}=M(),o=Ya(t,{query:r,perPage:14}),c=((j=o.data)==null?void 0:j.results)||[],[m,u]=d.useState([]),g=e.jsx(nt,{className:"pt-20",size:"sm",title:e.jsx(n,{message:"No matching users"}),description:e.jsx(n,{message:"Try another search query"}),image:e.jsx(rt,{src:Ps})});return e.jsxs(ee,{children:[e.jsx(re,{children:s?e.jsx(n,{message:"Select users"}):e.jsx(n,{message:"Select a user"})}),e.jsxs(te,{children:[e.jsx(He,{autoFocus:!0,size:"sm",className:"mb-20",startAdornment:e.jsx(tt,{}),placeholder:l(x("Search for user by name or email")),value:r,onChange:v=>{i(v.target.value)}}),!o.isLoading&&!c.length&&g,e.jsx("div",{className:"grid grid-cols-2 gap-x-10",children:c.map(v=>e.jsx(mm,{isSelected:!!m.find(y=>y.id===v.id),user:v,onSelected:y=>{s?m.find(w=>w.id===y.id)?u(m.filter(w=>w.id!==y.id)):u([...m,y]):a(y)}},v.id))})]}),s&&e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{variant:"flat",color:"primary",onClick:()=>a(m),disabled:!m.length,children:e.jsx(n,{message:"Select"})})]})]})}function mm({user:s,onSelected:t,isSelected:a}){return e.jsxs("div",{className:b("flex items-center gap-10 rounded border-1 p-10 outline-none ring-offset-4 focus-visible:ring",a?"border-primary bg-primary/5 hover:bg-primary/10":"border-transparent hover:bg-hover"),role:"button",tabIndex:0,onClick:()=>{t(s)},onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t(s))},children:[e.jsx(it,{src:s.image,label:s.name,circle:!0}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-hidden text-ellipsis text-muted",children:s.description})]})]},s.id)}function xm(s){return $({mutationFn:({userIds:t})=>gm({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{R(x("Removed [one 1 user|other :count users] from “{role}“",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>ae(t)})}function gm({roleId:s,userIds:t}){return A.post(`roles/${s}/remove-users`,{userIds:t}).then(a=>a.data)}function hm(s){return $({mutationFn:({userIds:t})=>pm({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{R(x("Assigned [one 1 user|other :count users] to {role}",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>ae(t)})}function pm({roleId:s,userIds:t}){return A.post(`roles/${s}/add-users`,{userIds:t}).then(a=>a.data)}const qn={key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(as,{image:s.image,label:s.name,description:s.email})},jm=[qn,{key:"first_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"First name"}),body:s=>s.first_name},{key:"last_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last name"}),body:s=>s.last_name},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Assigned at"}),body:s=>e.jsx(ve,{date:s.created_at})}],fm=[qn];function bm({role:s}){const t=qe();return s.guests||s.type==="workspace"?e.jsx("div",{className:"pb-10 pt-30",children:e.jsx(Ne,{image:Ps,title:e.jsx(n,{message:"Users can't be assigned to this role"})})}):e.jsx(rn,{endpoint:"users",columns:t?fm:jm,queryParams:{roleId:`${s.id}`},actions:e.jsx(vm,{role:s}),selectedActions:e.jsx(ym,{role:s}),emptyStateMessage:e.jsx(Ne,{image:Ps,title:e.jsx(n,{message:"No users have been assigned to this role yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})}function vm({role:s}){const t=hm(s);return e.jsxs(E,{type:"modal",onClose:a=>{a&&t.mutate({userIds:[a.id]},{onSuccess:()=>{L.invalidateQueries({queryKey:Y("users",{roleId:`${s.id}`})})}})},children:[e.jsx(f,{variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(n,{message:"Assign user"})}),e.jsx(um,{})]})}function ym({role:s}){const t=xm(s),{selectedRows:a}=pt();return e.jsxs(E,{type:"modal",onClose:r=>{r&&t.mutate({userIds:a},{onSuccess:()=>{L.invalidateQueries({queryKey:Y("users",{roleId:`${s.id}`})})}})},children:[e.jsx(f,{variant:"flat",color:"danger",disabled:t.isPending,children:e.jsx(n,{message:"Remove users"})}),e.jsx(we,{title:e.jsx(n,{message:"Remove [one 1 user|other :count users] from “:name“ role?",values:{count:a.length,name:s.name}}),body:e.jsx(n,{message:"This will permanently remove the users."}),confirm:e.jsx(n,{message:"Remove"}),isDanger:!0})]})}function wm(){const s=lm();return s.status!=="success"?e.jsx(bs,{}):e.jsx(_m,{role:s.data.role})}function _m({role:s}){const t=P({defaultValues:s}),a=cm();return e.jsx(yt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ role",values:{name:s.name}}),isLoading:a.isPending,children:e.jsxs(bt,{isLazy:!0,children:[e.jsxs(vt,{children:[e.jsx(Je,{children:e.jsx(n,{message:"Settings"})}),e.jsx(Je,{children:e.jsx(n,{message:"Users"})})]}),e.jsxs(Fn,{className:"pt-20",children:[e.jsx(Zs,{children:e.jsx(Mn,{isInternal:s.internal})}),e.jsx(Zs,{children:e.jsx(bm,{role:s})})]})]})})}const Sm="roles";function km(s){const{trans:t}=M();return $({mutationFn:a=>Nm(a),onSuccess:()=>{R(t(x("Created new role"))),L.invalidateQueries({queryKey:Y("roles")})},onError:a=>Ce(a,s)})}function Nm({id:s,...t}){return A.post(Sm,t).then(a=>a.data)}function Cm(){const s=P({defaultValues:{type:"sitewide"}}),t=km(s),a=pe();return e.jsx(yt,{form:s,onSubmit:r=>{t.mutate(r,{onSuccess:i=>{a(`/admin/roles/${i.role.id}/edit`)}})},title:e.jsx(n,{message:"Add new role"}),isLoading:t.isPending,children:e.jsx(Mn,{})})}const Fm=s=>[{key:"type",label:x("Type"),description:x("Type of the tag"),defaultOperator:le.ne,control:{type:ue.Select,defaultValue:s[0].name,options:s.map(t=>({key:t.name,label:x(t.name),value:t.name}))}},us({description:x("Date tag was created")}),ys({description:x("Date tag was last updated")})],$n=""+new URL("software-engineer-ba026106.svg",import.meta.url).href;function Rn({form:s,onSubmit:t,formId:a}){const{tags:{types:r}}=d.useContext(ds),i=s.watch("type"),l=!!r.find(o=>o.name===i&&o.system);return e.jsxs(oe,{id:a,form:s,onSubmit:t,children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),description:e.jsx(n,{message:"Unique tag identifier."}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(p,{name:"display_name",label:e.jsx(n,{message:"Display name"}),description:e.jsx(n,{message:"User friendly tag name."}),className:"mb-20"}),e.jsx(K,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",disabled:l,children:r.filter(o=>!o.system).map(o=>e.jsx(h,{value:o.name,children:e.jsx(n,{message:o.name})},o.name))})]})}var Vn={exports:{}};(function(s,t){(function(a,r,i){s.exports=i(),s.exports.default=i()})("slugify",Yr,function(){var a=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(l,o){if(typeof l!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var c=r[o.locale]||{},m=o.replacement===void 0?"-":o.replacement,u=o.trim===void 0?!0:o.trim,g=l.normalize().split("").reduce(function(j,v){var y=c[v];return y===void 0&&(y=a[v]),y===void 0&&(y=v),y===m&&(y=" "),j+y.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(g=g.replace(/[^A-Za-z0-9\s]/g,"")),u&&(g=g.trim()),g=g.replace(/\s+/g,m),o.lower&&(g=g.toLowerCase()),g}return i.extend=function(l){Object.assign(a,l)},i})})(Vn);var zm=Vn.exports;const Im=Jr(zm);function aa(s,t="-",a=!1){if(!s)return s;let r=Im(s,{lower:!0,replacement:t,strict:a,remove:/[*+~.()'"!:@?\|/\\#]/g});return r||(r=s.replace(/\s+/g,"-").toLowerCase()),r}function Am(s){const{trans:t}=M();return $({mutationFn:a=>Pm(a),onSuccess:()=>{R(t(x("Tag created"))),L.invalidateQueries({queryKey:Y("tags")})},onError:a=>Ce(a,s)})}function Pm(s){return s.name=aa(s.name),A.post("tags",s).then(t=>t.data)}function Em(){const{close:s,formId:t}=G(),{tags:{types:a}}=d.useContext(ds),r=P({defaultValues:{type:a[0].name}}),i=Am(r);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(te,{children:e.jsx(Rn,{formId:t,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{s()}})}})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{form:t,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}function Tm(s){const{trans:t}=M();return $({mutationFn:a=>Dm(a),onSuccess:()=>{R(t(x("Tag updated"))),L.invalidateQueries({queryKey:Y("tags")})},onError:a=>Ce(a,s)})}function Dm({id:s,...t}){return t.name&&(t.name=aa(t.name)),A.put(`tags/${s}`,t).then(a=>a.data)}function Lm({tag:s}){const{close:t,formId:a}=G(),r=P({defaultValues:{id:s.id,name:s.name,display_name:s.display_name,type:s.type}}),i=Tm(r);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Update “:name“ tag",values:{name:s.name}})}),e.jsx(te,{children:e.jsx(Rn,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const Mm=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"type",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>s.type},{key:"display_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Display name"}),body:s=>s.display_name},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(E,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(ss,{})}),e.jsx(Lm,{tag:s})]})}];function qm(){const{tags:s}=d.useContext(ds),t=d.useMemo(()=>Fm(s.types),[s.types]);return e.jsx($e,{endpoint:"tags",title:e.jsx(n,{message:"Tags"}),columns:Mm,filters:t,actions:e.jsx($m,{}),selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:$n,title:e.jsx(n,{message:"No tags have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching tags"})})})}function $m(){return e.jsx(e.Fragment,{children:e.jsxs(E,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(Em,{})]})})}const On=T(e.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),Rm=""+new URL("upload-cabfc914.svg",import.meta.url).href,Vm=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.file_name})]})},{key:"owner_id",allowsSorting:!0,width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Uploader"}),body:s=>{var a,r;const t=((a=s.users)==null?void 0:a.find(i=>i.owns_entry))??((r=s.users)==null?void 0:r[0]);return t?e.jsx(as,{image:t.image,label:t.name,description:t.email}):null}},{key:"type",width:"w-100 flex-shrink-0",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(Xr,{type:s.type,className:"h-24 w-24 overflow-hidden"}),e.jsx("div",{className:"capitalize",children:s.type})]})},{key:"public",allowsSorting:!0,width:"w-60 flex-shrink-0",header:()=>e.jsx(n,{message:"Public"}),body:s=>s.public?e.jsx(Ys,{className:"text-positive icon-md"}):e.jsx(Be,{className:"text-danger icon-md"})},{key:"file_size",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"File size"}),body:s=>e.jsx(en,{bytes:s.file_size})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(E,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(On,{})}),e.jsx(Oi,{entries:[s]})]})}];function Om(){return e.jsx($e,{endpoint:"file-entries",title:e.jsx(n,{message:"Uploaded files and folders"}),columns:Vm,filters:Vi,selectedActions:e.jsx(ms,{}),emptyStateMessage:e.jsx(Ne,{image:Rm,title:e.jsx(n,{message:"Nothing has been uploaded yet"}),filteringTitle:e.jsx(n,{message:"No matching files or folders"})})})}const Um=[{key:"ends_at",label:x("Status"),description:x("Whether subscription is active or cancelled"),defaultOperator:le.eq,control:{type:ue.Select,defaultValue:"active",options:[{key:"active",label:x("Active"),value:{value:null,operator:le.eq}},{key:"cancelled",label:x("Cancelled"),value:{value:null,operator:le.ne}}]}},{control:{type:ue.Select,defaultValue:"stripe",options:[{key:"stripe",label:x("Stripe"),value:"stripe"},{key:"paypal",label:x("PayPal"),value:"paypal"},{key:"none",label:x("None"),value:"none"}]},key:"gateway_name",label:x("Gateway"),description:x("With which payment provider was subscription created"),defaultOperator:le.eq},Ui({key:"renews_at",label:x("Renew date"),description:x("Date subscription will renew")}),us({description:x("Date subscription was created")}),ys({description:x("Date subscription was last updated")})],Hm=""+new URL("subscriptions-7eacea42.svg",import.meta.url).href;function Bm(s){const{trans:t}=M();return $({mutationFn:a=>Km(a),onSuccess:()=>{R(t(x("Subscription updated"))),L.invalidateQueries({queryKey:Y("billing/subscriptions")})},onError:a=>Ce(a,s)})}function Km({id:s,...t}){return A.put(`billing/subscriptions/${s}`,t).then(a=>a.data)}function Un({form:s,onSubmit:t,formId:a}){var o,c;const r=Zr(),i=s.watch("product_id"),l=(o=r.data)==null?void 0:o.products.find(m=>m.id===i);return e.jsxs(oe,{id:a,form:s,onSubmit:t,children:[e.jsx(Hi,{name:"user_id",className:"mb-20",endpoint:"normalized-models/user",label:e.jsx(n,{message:"User"})}),e.jsx(K,{name:"product_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Plan"}),children:(c=r.data)==null?void 0:c.products.filter(m=>!m.free).map(m=>e.jsx(h,{value:m.id,children:e.jsx(n,{message:m.name})},m.id))}),!(l!=null&&l.free)&&e.jsx(K,{name:"price_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Price"}),children:l==null?void 0:l.prices.map(m=>e.jsx(h,{value:m.id,children:e.jsx(Bt,{price:m})},m.id))}),e.jsx(p,{inputElementType:"textarea",rows:3,name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20"}),e.jsx(At,{className:"mb-20",name:"renews_at",granularity:"day",label:e.jsx(n,{message:"Renews at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})}),e.jsx(At,{className:"mb-20",name:"ends_at",granularity:"day",label:e.jsx(n,{message:"Ends at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})})]})}function Wm({subscription:s}){const{close:t,formId:a}=G(),r=P({defaultValues:{id:s.id,product_id:s.product_id,price_id:s.price_id,description:s.description,renews_at:s.renews_at,ends_at:s.ends_at,user_id:s.user_id}}),i=Bm(r);return e.jsxs(ee,{size:"md",children:[e.jsx(re,{children:e.jsx(n,{message:"Update subscription"})}),e.jsx(te,{children:e.jsx(Un,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const Hn="billing/subscriptions";function Gm(s){const{trans:t}=M();return $({mutationFn:a=>Qm(a),onSuccess:()=>{R(t(x("Subscription created"))),L.invalidateQueries({queryKey:Y(Hn)})},onError:a=>Ce(a,s)})}function Qm(s){return A.post(Hn,s).then(t=>t.data)}function Ym(){const{close:s,formId:t}=G(),a=P({}),r=Gm(a);return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(te,{children:e.jsx(Un,{formId:t,form:a,onSubmit:i=>{r.mutate(i,{onSuccess:()=>{s()}})}})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{form:t,disabled:r.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const Jm=T(e.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"PauseOutlined"),Xm=T(e.jsx("path",{d:"M10 8.64 15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"}),"PlayArrowOutlined"),wt="billing/subscriptions",Zm=[{key:"user_id",allowsSorting:!0,width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Customer"}),body:s=>s.user&&e.jsx(as,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"status",width:"w-100 flex-shrink-0",header:()=>e.jsx(n,{message:"Status"}),body:s=>e.jsx(lt,{size:"xs",color:s.valid?"positive":"danger",radius:"rounded",className:"w-max",children:s.gateway_status})},{key:"product_id",allowsSorting:!0,header:()=>e.jsx(n,{message:"Plan"}),body:s=>{var t;return(t=s.product)==null?void 0:t.name}},{key:"gateway_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Gateway"}),body:s=>e.jsx("span",{className:"capitalize",children:s.gateway_name})},{key:"renews_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Renews at"}),body:s=>e.jsx(ve,{date:s.renews_at})},{key:"ends_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Ends at"}),body:s=>e.jsx(ve,{date:s.ends_at})},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx(ve,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-[168px] flex-shrink-0",body:s=>e.jsx(tx,{subscription:s})}];function ex(){return e.jsx($e,{endpoint:wt,title:e.jsx(n,{message:"Subscriptions"}),columns:Zm,filters:Um,actions:e.jsx(sx,{}),enableSelection:!1,selectedActions:e.jsx(ms,{}),queryParams:{with:"product"},emptyStateMessage:e.jsx(Ne,{image:Hm,title:e.jsx(n,{message:"No subscriptions have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching subscriptions"})})})}function sx(){return e.jsx(e.Fragment,{children:e.jsxs(E,{type:"modal",children:[e.jsx(Oe,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(Ym,{})]})})}function tx({subscription:s}){return e.jsxs(d.Fragment,{children:[e.jsxs(E,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(ss,{})}),e.jsx(Wm,{subscription:s})]}),s.cancelled&&s.on_grace_period?e.jsx(nx,{subscription:s}):null,s.active?e.jsx(ax,{subscription:s}):null,e.jsx(rx,{subscription:s})]})}function ax({subscription:s}){const t=sn(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{L.invalidateQueries({queryKey:Y(wt)})}})};return e.jsxs(E,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Z,{label:e.jsx(n,{message:"Cancel subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(Jm,{})})}),e.jsx(we,{title:e.jsx(n,{message:"Cancel subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to cancel this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on grace period until their next scheduled renewal date. Subscription can be renewed until that date by user or from admin area."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function nx({subscription:s}){const t=Xi(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{L.invalidateQueries({queryKey:Y(wt)})}})};return e.jsxs(E,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Z,{label:e.jsx(n,{message:"Renew subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",onClick:a,disabled:t.isPending,children:e.jsx(Xm,{})})}),e.jsx(we,{title:e.jsx(n,{message:"Resume subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to resume this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on their original plan and billing cycle."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function rx({subscription:s}){const t=sn(),a=()=>{t.mutate({subscriptionId:s.id,delete:!0},{onSuccess:()=>{L.invalidateQueries({queryKey:Y(wt)})}})};return e.jsxs(E,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Z,{label:e.jsx(n,{message:"Delete subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(Be,{})})}),e.jsx(we,{isDanger:!0,title:e.jsx(n,{message:"Delete subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to delete this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will permanently delete the subscription and immediately cancel it on billing gateway. Subscription will not be renewable anymore."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}const ix=T(e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"SyncOutlined");function lx(){const{trans:s}=M();return $({mutationFn:()=>ox(),onSuccess:()=>{R(s(x("Plans synced")))},onError:t=>ae(t,x("Could not sync plans"))})}function ox(){return A.post("billing/products/sync").then(s=>s.data)}const cx=s=>`billing/products/${s}`;function dx(){const{trans:s}=M();return $({mutationFn:t=>ux(t),onSuccess:()=>{R(s(x("Plan deleted"))),L.invalidateQueries({queryKey:Y("billing/products")})},onError:t=>ae(t)})}function ux({productId:s}){return A.delete(cx(s)).then(t=>t.data)}const mx=[{key:"subscriptions",label:x("Subscriptions"),description:x("Whether plan has any active subscriptions"),defaultOperator:le.eq,control:{type:ue.Select,defaultValue:"01",options:[{key:"01",label:x("Has active subscriptions"),value:{value:"*",operator:le.has}},{key:"02",label:x("Does not have active subscriptions"),value:{value:"*",operator:le.doesntHave}}]}},us({description:x("Date plan was created")}),ys({description:x("Date plan was last updated")})],xx=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Name"}),body:s=>{const t=s.prices[0];return e.jsx(as,{label:s.name,description:s.free?e.jsx(n,{message:"Free"}):e.jsx(Bt,{price:t})})}},{key:"created_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Created"}),body:s=>e.jsx(ve,{date:s.created_at})},{key:"updated_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(ve,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),visibleInMode:"all",hideHeader:!0,align:"end",maxWidth:"max-w-84",body:s=>e.jsxs(d.Fragment,{children:[e.jsx(k,{size:"md",className:"text-muted",elementType:B,to:`/admin/plans/${s.id}/edit`,children:e.jsx(ss,{})}),e.jsx(hx,{product:s})]})}];function gx(){const s=pe();return e.jsx($e,{endpoint:"billing/products",title:e.jsx(n,{message:"Subscription plans"}),columns:xx,actions:e.jsx(px,{}),enableSelection:!1,filters:mx,onRowAction:t=>{s(`/admin/plans/${t.id}/edit`)},emptyStateMessage:e.jsx(Ne,{image:$n,title:e.jsx(n,{message:"No plans have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching plans"})})})}function hx({product:s}){const t=dx();return e.jsxs(E,{type:"modal",onClose:a=>{a&&t.mutate({productId:s.id})},children:[e.jsx(Z,{label:e.jsx(n,{message:"Delete plan"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(gt,{})})}),e.jsx(we,{title:e.jsx(n,{message:"Delete plan"}),body:e.jsx(n,{message:"Are you sure you want to delete this plan?"}),confirm:e.jsx(n,{message:"Delete"})})]})}function px(){const s=lx();return e.jsxs(d.Fragment,{children:[e.jsx(Z,{label:e.jsx(n,{message:"Sync plans with Stripe & PayPal"}),children:e.jsx(k,{color:"primary",variant:"outline",size:"sm",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(ix,{})})}),e.jsx(Oe,{elementType:B,to:"/admin/plans/new",children:e.jsx(n,{message:"Add new plan"})})]})}const Bn=s=>`billing/products/${s}`;function jx(){const{productId:s}=ge();return Me({queryKey:[Bn(s)],queryFn:()=>fx(s)})}function fx(s){return A.get(Bn(s)).then(t=>t.data)}const Mt=[{key:"day1",label:x("Daily"),interval:"day",interval_count:1},{key:"week1",label:x("Weekly"),interval:"week",interval_count:1},{key:"month1",label:x("Monthly"),interval:"month",interval_count:1},{key:"month3",label:x("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:x("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:x("Yearly"),interval:"year",interval_count:1},{key:"custom",label:x("Custom"),interval:null,interval_count:null}];function bx({index:s,onRemovePrice:t}){const{trans:a}=M(),r=Ee(["currencies"]),i=d.useMemo(()=>{var y;return(y=r.data)!=null&&y.currencies?Object.values(r.data.currencies):[]},[r.data]),{watch:l,getValues:o}=C(),c=!l("id"),m=l(`prices.${s}.id`)==null,u=l(`prices.${s}.subscriptions_count`)||0,[g,j]=d.useState(()=>{const y=o(`prices.${s}.interval`),w=o(`prices.${s}.interval_count`),_=Mt.find(S=>S.key===`${y}${w}`);return _?_.key:"custom"}),v=c||m||!u;return e.jsxs(d.Fragment,{children:[!v&&e.jsx("p",{className:"mb-20 max-w-500 text-sm text-muted",children:e.jsx(n,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:u}})}),e.jsx(p,{required:!0,disabled:!v,label:e.jsx(n,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${s}.amount`,className:"mb-20"}),e.jsx(K,{required:!0,disabled:!v,label:e.jsx(n,{message:"Currency"}),name:`prices.${s}.currency`,items:i,showSearchField:!0,searchPlaceholder:a(x("Search currencies")),selectionMode:"single",className:"mb-20",children:y=>e.jsx(h,{value:y.code,children:`${y.code}: ${y.name}`},y.code)}),e.jsx(vx,{disabled:!v,index:s,value:g,onValueChange:j}),g==="custom"&&e.jsx(yx,{disabled:!v,index:s}),e.jsx("div",{className:"text-right",children:e.jsx(f,{size:"xs",variant:"outline",color:"danger",disabled:!v,onClick:()=>{t()},children:e.jsx(n,{message:"Delete price"})})})]})}function vx({index:s,value:t,onValueChange:a,disabled:r}){const{setValue:i}=C();return e.jsx(hs,{label:e.jsx(n,{message:"Billing period"}),disabled:r,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:l=>{if(a(l),l!=="custom"){const o=Mt.find(c=>c.key===l);o&&(i(`prices.${s}.interval`,o.interval),i(`prices.${s}.interval_count`,o.interval_count))}},children:Mt.map(l=>e.jsx(h,{value:l.key,children:e.jsx(n,{...l.label})},l.key))})}function yx({index:s,disabled:t}){const{watch:a}=C(),r=a(`prices.${s}.interval`);let i;return r==="day"?i=365:r==="week"?i=52:i=12,e.jsxs("div",{className:"flex w-min rounded border",children:[e.jsx("div",{className:"flex items-center px-18 text-sm",children:e.jsx(n,{message:"Every"})}),e.jsx(p,{inputShadow:"shadow-none",inputBorder:"border-none",className:"w-80 border-l border-r",name:`prices.${s}.interval_count`,type:"number",min:1,max:i,disabled:t,required:!0}),e.jsxs(K,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${s}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(h,{value:"day",children:e.jsx(n,{message:"Days"})}),e.jsx(h,{value:"week",children:e.jsx(n,{message:"Weeks"})}),e.jsx(h,{value:"month",children:e.jsx(n,{message:"Months"})})]})]})}function Kn(){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(p,{name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(K,{name:"position",selectionMode:"single",label:e.jsx(n,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(h,{value:0,children:e.jsx(n,{message:"First"})}),e.jsx(h,{value:1,children:e.jsx(n,{message:"Second"})}),e.jsx(h,{value:2,children:e.jsx(n,{message:"Third"})}),e.jsx(h,{value:3,children:e.jsx(n,{message:"Fourth"})}),e.jsx(h,{value:4,children:e.jsx(n,{message:"Fifth"})})]}),e.jsx(As,{className:"mb-30",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:s=>e.jsx(B,{className:Rt,target:"_blank",to:"/admin/settings/uploading",children:s})},message:"Total storage space all user uploads are allowed to take up."})}),e.jsx(D,{name:"recommended",className:"mb-20",description:e.jsx(n,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(n,{message:"Recommend"})}),e.jsx(D,{name:"hidden",className:"mb-20",description:e.jsx(n,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(n,{message:"Hidden"})}),e.jsx(D,{name:"free",className:"mb-20",description:e.jsx(n,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(n,{message:"Free"})}),e.jsx(qt,{children:e.jsx(n,{message:"Feature list"})}),e.jsx(wx,{}),e.jsx(_x,{}),e.jsx(qt,{children:e.jsx(n,{message:"Permissions"})}),e.jsx(Gt,{name:"permissions"})]})}function qt({children:s}){return e.jsx("h2",{className:"mb-20 mt-40 text-base font-semibold",children:s})}function wx(){const{fields:s,append:t,remove:a}=os({name:"feature_list"});return e.jsxs("div",{children:[s.map((r,i)=>e.jsxs("div",{className:"mb-10 flex gap-10",children:[e.jsx(p,{name:`feature_list.${i}.value`,size:"sm",className:"flex-auto"}),e.jsx(k,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{a(i)},children:e.jsx(Be,{})})]},r.id)),e.jsx(f,{variant:"text",color:"primary",startIcon:e.jsx(Pe,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(n,{message:"Add another line"})})]})}function _x(){var l;const{watch:s,formState:{errors:t}}=C(),{fields:a,append:r,remove:i}=os({name:"prices",keyName:"key"});return s("free")?null:e.jsxs(d.Fragment,{children:[e.jsx(qt,{children:e.jsx(n,{message:"Pricing"})}),((l=t.prices)==null?void 0:l.message)&&e.jsx("div",{className:"mb-20 text-sm text-danger",children:t.prices.message}),e.jsx(ts,{variant:"outline",className:"mb-10",children:a.map((o,c)=>e.jsx(Ie,{label:e.jsx(Bt,{price:o}),children:e.jsx(bx,{index:c,onRemovePrice:()=>{i(c)}})},o.key))}),e.jsx(f,{variant:"text",color:"primary",startIcon:e.jsx(Pe,{}),size:"xs",onClick:()=>{r({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(n,{message:"Add another price"})})]})}const Wn=s=>`billing/products/${s}`;function Sx(s){const{trans:t}=M(),a=pe();return $({mutationFn:r=>kx(r),onSuccess:r=>{R(t(x("Plan updated"))),L.invalidateQueries({queryKey:[Wn(r.product.id)]}),L.invalidateQueries({queryKey:Y("billing/products")}),a("/admin/plans")},onError:r=>Ce(r,s)})}function kx({id:s,...t}){const a={...t,feature_list:t.feature_list.map(r=>r.value)};return A.put(Wn(s),a).then(r=>r.data)}function Nx(){const s=jx();return s.status!=="success"?e.jsx(bs,{}):e.jsx(Cx,{product:s.data.product})}function Cx({product:s}){const t=P({defaultValues:{...s,feature_list:s.feature_list.map(r=>({value:r}))}}),a=Sx(t);return e.jsx(yt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ plan",values:{name:s.name}}),isLoading:a.isPending,children:e.jsx(Kn,{})})}const Gn="billing/products";function Fx(s){const{trans:t}=M(),a=pe();return $({mutationFn:r=>zx(r),onSuccess:()=>{R(t(x("Plan created"))),L.invalidateQueries({queryKey:[Gn]}),L.invalidateQueries({queryKey:Y("billing/products")}),a("/admin/plans")},onError:r=>Ce(r,s)})}function zx(s){const t={...s,feature_list:s.feature_list.map(a=>a.value)};return A.post(Gn,t).then(a=>a.data)}function Ix(){const s=P({defaultValues:{free:!1,recommended:!1}}),t=Fx(s);return e.jsx(yt,{form:s,onSubmit:a=>{t.mutate(a)},title:e.jsx(n,{message:"Create new plan"}),isLoading:t.isPending,children:e.jsx(Kn,{})})}function Ax(){const s=Ee(["menuItemCategories"]);return e.jsx(Se,{title:e.jsx(n,{message:"GDPR"}),description:e.jsx(n,{message:"Configure settings related to EU General Data Protection Regulation."}),isLoading:s.isLoading,children:t=>e.jsx(Px,{data:t})})}function Px({data:s}){var a,r,i,l;const t=P({defaultValues:{client:{cookie_notice:{enable:((a=s.client.cookie_notice)==null?void 0:a.enable)??!1,button:((r=s.client.cookie_notice)==null?void 0:r.button)??{},position:((i=s.client.cookie_notice)==null?void 0:i.position)??"bottom"},registration:{policies:((l=s.client.registration)==null?void 0:l.policies)??[]}}}});return e.jsxs(_e,{form:t,children:[e.jsx(Ex,{}),e.jsx(Ae,{}),e.jsx(Tx,{})]})}function Ex(){const{watch:s}=C(),t=s("client.cookie_notice.enable");return e.jsxs("div",{children:[e.jsx(D,{name:"client.cookie_notice.enable",className:"mb-20",description:e.jsx(n,{message:"Whether cookie notice should be shown automatically to users from EU until it is accepted."}),children:e.jsx(n,{message:"Enable cookie notice"})}),t&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 border-b pb-6",children:[e.jsx("div",{className:"mb-20 border-b pb-10 text-sm font-medium",children:e.jsx(n,{message:"Information button"})}),e.jsx("div",{className:"mb-20",children:e.jsx(xs,{hideRoleAndPermissionFields:!0,formPathPrefix:"client.cookie_notice.button"})})]}),e.jsxs(K,{name:"client.cookie_notice.position",selectionMode:"single",label:e.jsx(n,{message:"Cookie notice position"}),className:"mb-20",children:[e.jsx(h,{value:"top",children:e.jsx(n,{message:"Top"})}),e.jsx(h,{value:"bottom",children:e.jsx(n,{message:"Bottom"})})]})]})]})}function Tx(){const{fields:s,append:t,remove:a}=os({name:"client.registration.policies"});return C(),e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Registration policies"})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(n,{message:"Create policies that will be shown on registration page. User will be required to accept them by toggling a checkbox."})}),e.jsx(ts,{className:"mt-16",variant:"outline",children:s.map((r,i)=>e.jsx(Ie,{label:r.label,chevronPosition:"left",endAppend:e.jsx(k,{variant:"text",color:"danger",size:"sm",onClick:()=>a(i),children:e.jsx(Be,{})}),children:e.jsx(xs,{hideRoleAndPermissionFields:!0,formPathPrefix:`client.registration.policies.${i}`})},r.id))}),e.jsxs(E,{type:"modal",onClose:r=>{r&&t(r)},children:[e.jsx(f,{className:"mt-12",variant:"link",color:"primary",startIcon:e.jsx(Pe,{}),size:"xs",children:e.jsx(n,{message:"Add another policy"})}),e.jsx(hn,{title:e.jsx(n,{message:"Add policy"})})]})]})}function Dx(s){const{pageId:t}=ge(),a=`${s||"custom-pages"}/${t}`;return $({mutationFn:r=>Lx(r,a),onError:r=>ae(r),onSuccess:async()=>{await L.invalidateQueries({queryKey:["custom-pages"]}),await L.invalidateQueries({queryKey:Y(a)}),R(x("Page updated"))}})}function Lx(s,t){return A.put(`${t}`,s).then(a=>a.data)}function Qn(){const[s,t]=d.useState(!1),{trans:a}=M(),i=C().watch("title"),l=a({message:"Title"});return s?e.jsx(p,{placeholder:l,autoFocus:!0,className:"mb-30",onBlur:()=>{t(!1)},name:"title",required:!0}):e.jsxs("h1",{tabIndex:0,onClick:()=>{t(!0)},onFocus:()=>{t(!0)},className:b("cursor-pointer rounded hover:bg-primary/focus",!i&&"text-muted"),children:[i||l,e.jsx(ss,{className:"mx-8 mt-8 align-top text-muted icon-sm"})]})}function Mx({host:s,value:t="",placeholder:a,onChange:r,className:i,inputRef:l,onInputBlur:o,showLinkIcon:c=!0,pattern:m,minLength:u,maxLength:g,hideButton:j,...v}){const{base_url:y}=je(),w=v.prefix?`/${v.prefix}`:"",_=v.suffix?`/${v.suffix}`:"",[S,N]=d.useState(!1),[I,z]=d.useState(t);s=s||y,d.useEffect(()=>{z(t)},[t]);const J=()=>{S?(N(!1),I&&(r==null||r(I))):N(!0)};let q="";return I?q=I:a&&(q=aa(a)),e.jsxs("div",{className:b("flex items-center",i),children:[c&&e.jsx(Vt,{className:"text-muted icon-md"}),e.jsxs("div",{className:"ml-6 mr-14 text-primary",children:[s,w,!S&&q&&e.jsxs(d.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium",children:q})]}),S?null:_]}),S&&e.jsx(He,{pattern:m,minLength:u,maxLength:g,onKeyDown:se=>{se.key==="Enter"&&J()},ref:l,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:I,onBlur:o,onChange:se=>{z(se.target.value)}}),!j&&e.jsx(f,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{J()},children:S?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Edit"})})]})}const qx=T(e.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),$x=T(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function Rx({editor:s}){return e.jsxs("span",{children:[e.jsx(k,{size:"md",disabled:!s.can().undo(),onClick:()=>{s.commands.focus(),s.commands.undo()},children:e.jsx(qx,{})}),e.jsx(k,{size:"md",disabled:!s.can().redo(),onClick:()=>{s.commands.focus(),s.commands.redo()},children:e.jsx($x,{})})]})}const Yn=T(e.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"CodeOutlined");function Vx({editor:s}){return e.jsxs(E,{type:"modal",onClose:t=>{t!=null&&(s==null||s.commands.setContent(t))},children:[e.jsx(f,{variant:"text",startIcon:e.jsx(Yn,{}),children:e.jsx(n,{message:"Source"})}),e.jsx(Jt,{title:e.jsx(n,{message:"Source code"}),defaultValue:s.getHTML()})]})}function gs(){return e.jsx("div",{className:"self-stretch mx-4 w-1 bg-divider flex-shrink-0"})}const Ox=T(e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),"FormatBoldOutlined"),Ux=T(e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),Hx=T(e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined");function Bx({editor:s,size:t}){return e.jsxs("span",{className:b("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(Z,{label:e.jsx(n,{message:"Bold"}),children:e.jsx(k,{size:t,color:s.isActive("bold")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBold()},children:e.jsx(Ox,{})})}),e.jsx(Z,{label:e.jsx(n,{message:"Italic"}),children:e.jsx(k,{size:t,color:s.isActive("italic")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleItalic()},children:e.jsx(Ux,{})})}),e.jsx(Z,{label:e.jsx(n,{message:"Underline"}),children:e.jsx(k,{size:t,color:s.isActive("underline")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleUnderline()},children:e.jsx(Hx,{})})})]})}const Kx=T(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulletedOutlined"),Wx=T(e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");function Gx({editor:s,size:t}){const a=s.isActive("bulletList"),r=s.isActive("orderedList");return e.jsxs("span",{className:b("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Z,{label:e.jsx(n,{message:"Bulleted list"}),children:e.jsx(k,{size:t,color:a?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBulletList()},children:e.jsx(Kx,{})})}),e.jsx(Z,{label:e.jsx(n,{message:"Numbered list"}),children:e.jsx(k,{size:t,color:r?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleOrderedList()},children:e.jsx(Wx,{})})})]})}function Qx(s,{text:t,target:a,href:r}){s.state.selection.empty&&t?s.commands.insertContent(`<a href="${r}" target="${a}">${t}</a>`):s.state.selection.empty||(r?s.chain().focus().extendMarkRange("link").setLink({href:r,target:a}).run():s.chain().focus().extendMarkRange("link").unsetLink().run())}function Yx({editor:s,size:t}){return e.jsxs(E,{type:"modal",children:[e.jsx(Z,{label:e.jsx(n,{message:"Insert link"}),children:e.jsx(k,{size:t,className:b("flex-shrink-0"),children:e.jsx(Vt,{})})}),e.jsx(Jx,{editor:s})]})}function Jx({editor:s}){const t=s.getAttributes("link").href,a=s.state.doc.textBetween(s.state.selection.from,s.state.selection.to,""),r=P({defaultValues:{href:t,text:a,target:"_blank"}}),{formId:i,close:l}=G();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(te,{children:e.jsxs(oe,{form:r,id:i,onSubmit:o=>{Qx(s,o),l()},children:[e.jsx(p,{name:"href",label:e.jsx(n,{message:"URL"}),autoFocus:!0,type:"url",className:"mb-20"}),e.jsx(p,{name:"text",label:e.jsx(n,{message:"Text to display"}),className:"mb-20"}),e.jsxs(K,{selectionMode:"single",name:"target",label:e.jsx(n,{message:"Open link in..."}),children:[e.jsx(h,{value:"_self",children:e.jsx(n,{message:"Current window"})}),e.jsx(h,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})]})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:l,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{type:"submit",form:i,variant:"flat",color:"primary",children:e.jsx(n,{message:"Save"})})]})]})}const Xx=T(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined"),Zx=2097152;function eg({editor:s,size:t,diskPrefix:a="page_media"}){const{selectAndUploadFile:r}=ei(),i=()=>{r({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[Ht.image],maxFileSize:Zx},metadata:{diskPrefix:a,disk:si.public},onSuccess:l=>{s.commands.focus(),s.commands.setImage({src:l.url})}})};return e.jsx(Z,{label:e.jsx(n,{message:"Insert image"}),children:e.jsx(k,{size:t,onClick:i,className:b("flex-shrink-0"),children:e.jsx(Xx,{})})})}const sg=T(e.jsx("path",{d:"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z"}),"FormatClearOutlined");function tg({editor:s,size:t}){return e.jsx(Z,{label:e.jsx(n,{message:"Clear formatting"}),children:e.jsx(k,{className:b("flex-shrink-0"),size:t,onClick:()=>{s.chain().focus().clearNodes().unsetAllMarks().run()},children:e.jsx(sg,{})})})}const ag=T(e.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined"),ng=T([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHighOutlined"),rg=T(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z"}),"NoteOutlined"),ig=T([e.jsx("path",{d:"M9.5 7.5v9l7-4.5z"},"0"),e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z"},"1")],"SmartDisplayOutlined");function lg({editor:s,size:t}){const[a,r]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(We,{onItemSelected:i=>{i==="hr"?(s.commands.focus(),s.commands.setHorizontalRule()):i==="embed"?r("embed"):(s.commands.focus(),s.commands.addInfo({type:i}))},children:[e.jsx(k,{variant:"text",size:t,className:b("flex-shrink-0"),children:e.jsx(ht,{})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"hr",startIcon:e.jsx(ag,{}),children:e.jsx(n,{message:"Horizontal rule"})}),e.jsx(h,{value:"embed",startIcon:e.jsx(ig,{}),children:e.jsx(n,{message:"Embed"})}),e.jsx(h,{value:"important",startIcon:e.jsx(ng,{}),children:e.jsx(n,{message:"Important"})}),e.jsx(h,{value:"warning",startIcon:e.jsx(ti,{}),children:e.jsx(n,{message:"Warning"})}),e.jsx(h,{value:"success",startIcon:e.jsx(rg,{}),children:e.jsx(n,{message:"Note"})})]})]}),e.jsx(E,{type:"modal",isOpen:!!a,onClose:()=>{r(!1)},children:e.jsx(og,{editor:s})})]})}function og({editor:s}){const t=s.getAttributes("embed").src,a=P({defaultValues:{src:t}}),{formId:r,close:i}=G();return e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(te,{children:e.jsx(oe,{form:a,id:r,onSubmit:l=>{s.commands.setEmbed(l),i()},children:e.jsx(p,{name:"src",label:e.jsx(n,{message:"Embed URL"}),autoFocus:!0,type:"url",required:!0})})}),e.jsxs(xe,{children:[e.jsx(f,{onClick:i,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(f,{type:"submit",form:r,disabled:!a.formState.isValid,variant:"flat",color:"primary",children:e.jsx(n,{message:"Add"})})]})]})}function Ve({children:s,modifier:t,separator:a="+"}){const r=ai()?e.jsx("span",{className:"text-base align-middle",children:"⌘"}):"Ctrl";return e.jsxs("kbd",{className:"text-xs text-muted",children:[t&&e.jsxs(e.Fragment,{children:[r,a]}),s]})}function cg({editor:s,size:t}){return e.jsxs(We,{floatingMinWidth:"w-256",onItemSelected:a=>{s.commands.focus(),typeof a=="string"&&a.startsWith("h")?s.commands.toggleHeading({level:parseInt(a.replace("h",""))}):a==="code"?s.commands.toggleCode():a==="strike"?s.commands.toggleStrike():a==="super"?s.commands.toggleSuperscript():a==="sub"?s.commands.toggleSubscript():a==="blockquote"?s.commands.toggleBlockquote():a==="paragraph"&&s.commands.setParagraph()},children:[e.jsx(f,{className:b("flex-shrink-0"),variant:"text",size:t,endIcon:e.jsx(Ba,{}),children:e.jsx(n,{message:"Format"})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"h1",endSection:e.jsx(Ve,{modifier:!0,children:"Alt+1"}),children:e.jsx(n,{message:"Heading :number",values:{number:1}})}),e.jsx(h,{value:"h2",endSection:e.jsx(Ve,{modifier:!0,children:"Alt+2"}),children:e.jsx(n,{message:"Heading :number",values:{number:2}})}),e.jsx(h,{value:"h3",endSection:e.jsx(Ve,{modifier:!0,children:"Alt+3"}),children:e.jsx(n,{message:"Heading :number",values:{number:3}})}),e.jsx(h,{value:"h4",endSection:e.jsx(Ve,{modifier:!0,children:"Alt+4"}),children:e.jsx(n,{message:"Heading :number",values:{number:4}})}),e.jsx(h,{value:"code",endSection:e.jsx(Ve,{modifier:!0,children:"E"}),children:e.jsx(n,{message:"Code"})}),e.jsx(h,{value:"strike",endSection:e.jsx(Ve,{modifier:!0,children:"Shift+X"}),children:e.jsx(n,{message:"Strikethrough"})}),e.jsx(h,{value:"super",endSection:e.jsx(Ve,{modifier:!0,separator:" ",children:"."}),children:e.jsx(n,{message:"Superscript"})}),e.jsx(h,{value:"sub",endSection:e.jsx(Ve,{modifier:!0,separator:" ",children:","}),children:e.jsx(n,{message:"Subscript"})}),e.jsx(h,{value:"blockquote",endSection:e.jsx(Ve,{modifier:!0,children:"Shift+B"}),children:e.jsx(n,{message:"Blockquote"})}),e.jsx(h,{value:"paragraph",endSection:e.jsx(Ve,{modifier:!0,children:"Alt+0"}),children:e.jsx(n,{message:"Paragraph"})})]})]})}const dg=T(e.jsx("path",{d:"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z"}),"FormatColorTextOutlined"),ug=T(e.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined");function mg({editor:s,size:t}){const[a,r]=d.useState(!1),i=s.getAttributes("textStyle").color,l=s.getAttributes("textStyle").backgroundColor;return e.jsxs(d.Fragment,{children:[e.jsxs("span",{className:b("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(k,{size:t,color:i?"primary":null,onClick:()=>{r("text")},children:e.jsx(dg,{})}),e.jsx(k,{size:t,color:l?"primary":null,onClick:()=>{r("bg")},children:e.jsx(ug,{})})]}),e.jsx(E,{defaultValue:a==="text"?"#000000":"#FFFFFF",type:"modal",isOpen:!!a,onClose:o=>{o&&(a==="text"?s.commands.setColor(o):s.commands.setBackgroundColor(o)),r(!1)},children:e.jsx(ea,{})})]})}const xg=T(e.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),gg=T(e.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),hg=T(e.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),pg=T(e.jsx("path",{d:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"}),"FormatAlignJustifyOutlined"),Qs={left:{icon:xg,label:x("Align left")},center:{icon:gg,label:x("Align center")},right:{icon:hg,label:x("Align right")},justify:{icon:pg,label:x("Justify")}};function jg({editor:s,size:t}){const a=Object.keys(Qs).find(i=>s.isActive({textAlign:i}))||"left",r=a?Qs[a].icon:Qs.left.icon;return e.jsxs(We,{floatingWidth:"auto",selectionMode:"single",selectedValue:a,onSelectionChange:i=>{s.commands.focus(),s.commands.setTextAlign(i)},children:[e.jsx(k,{size:t,color:a?"primary":null,className:b("flex-shrink-0"),children:e.jsx(r,{})}),e.jsx(Ge,{children:Object.entries(Qs).map(([i,l])=>{const o=l.icon;return e.jsx(h,{value:i,startIcon:e.jsx(o,{size:"md"}),capitalizeFirst:!0,children:e.jsx(n,{message:l.label.message})},i)})})]})}const fg=T(e.jsx("path",{d:"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentDecreaseOutlined"),bg=T(e.jsx("path",{d:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentIncreaseOutlined");function vg({editor:s,size:t}){return e.jsxs("span",{className:b("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Z,{label:e.jsx(n,{message:"Decrease indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.outdent()},children:e.jsx(fg,{})})}),e.jsx(Z,{label:e.jsx(n,{message:"Increase indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.indent()},children:e.jsx(bg,{})})})]})}function yg({editor:s,size:t}){const a=s.getAttributes("codeBlock").language||"";return e.jsxs(We,{selectionMode:"single",selectedValue:a,onSelectionChange:r=>{s.commands.toggleCodeBlock({language:r})},children:[e.jsx(Z,{label:e.jsx(n,{message:"Codeblock"}),children:e.jsx(k,{className:b("flex-shrink-0"),size:t,color:a?"primary":null,children:e.jsx(Yn,{})})}),e.jsxs(Ge,{children:[e.jsx(h,{value:"html",children:"HTML"}),e.jsx(h,{value:"javascript",children:"JavaScript"}),e.jsx(h,{value:"css",children:"CSS"}),e.jsx(h,{value:"php",children:"PHP"}),e.jsx(h,{value:"shell",children:"Shell"}),e.jsx(h,{value:"bash",children:"Bash"}),e.jsx(h,{value:"ruby",children:"Ruby"}),e.jsx(h,{value:"python",children:"Python"}),e.jsx(h,{value:"java",children:"Java"}),e.jsx(h,{value:"c++",children:"C++"})]})]})}const Na="flex items-center px-4 h-42 text-muted border-b overflow-hidden";function wg({editor:s,size:t="md",justify:a="justify-center",hideInsertButton:r=!1,imageDiskPrefix:i}){const l=qe(),[o,c]=d.useState(!1);return e.jsxs("div",{className:b(o?"h-84":"h-42"),children:[e.jsxs("div",{className:b(Na,a,"relative z-20"),children:[e.jsx(cg,{editor:s,size:t}),e.jsx(gs,{}),e.jsx(Bx,{editor:s,size:t}),e.jsx(gs,{}),e.jsx(jg,{editor:s,size:t}),e.jsx(vg,{editor:s,size:t}),e.jsx(gs,{}),l?e.jsx(k,{className:"flex-shrink-0",color:o?"primary":null,size:t,onClick:()=>{c(!o)},children:o?e.jsx(ni,{}):e.jsx(ri,{})}):e.jsx(Ca,{editor:s,size:t,hideInsertButton:r,imageDiskPrefix:i})]}),e.jsx(Xe,{children:o&&e.jsx(Le.div,{className:b(Na,a,"absolute flex h-full w-full"),initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},children:e.jsx(Ca,{editor:s,size:t,imageDiskPrefix:i})})})]})}function Ca({editor:s,size:t="md",hideInsertButton:a,imageDiskPrefix:r}){return e.jsxs(d.Fragment,{children:[e.jsx(Gx,{editor:s,size:t}),e.jsx(gs,{}),e.jsx(Yx,{editor:s,size:t}),e.jsx(eg,{editor:s,size:t,diskPrefix:r}),!a&&e.jsx(lg,{editor:s,size:t}),e.jsx(gs,{}),e.jsx(mg,{editor:s,size:t}),e.jsx(gs,{}),e.jsx(yg,{editor:s,size:t}),e.jsx(tg,{editor:s,size:t})]})}function Jn({editor:s,allowSlugEditing:t=!0,onSave:a,saveButton:r,isLoading:i=!1,backLink:l,slugPrefix:o="pages",imageDiskPrefix:c}){const{isSticky:m,sentinelRef:u}=zn(),g=qe();return e.jsxs(d.Fragment,{children:[e.jsx("div",{ref:u}),e.jsxs("div",{className:b("sticky top-0 z-10 mb-20 bg",m&&"shadow"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start",children:[!g&&e.jsxs(d.Fragment,{children:[e.jsx(f,{variant:"text",size:"sm",elementType:B,to:l,relative:"path",startIcon:e.jsx(Xa,{}),children:e.jsx(n,{message:"Back"})}),e.jsx("div",{className:"mr-auto",children:t&&e.jsx(Sg,{name:"slug",showLinkIcon:!1,prefix:o})})]}),s&&e.jsx(Rx,{editor:s}),!g&&e.jsx(Vx,{editor:s}),a&&e.jsx(_g,{onSave:()=>{a(s.getHTML())},isLoading:i}),r]}),e.jsx(wg,{editor:s,size:"sm",imageDiskPrefix:c})]})]})}function _g({onSave:s,isLoading:t}){const r=C().watch("title");return e.jsx(f,{variant:"flat",size:"sm",color:"primary",className:"min-w-90",disabled:t||!r,onClick:()=>s(),children:e.jsx(n,{message:"Save"})})}function Sg({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=fs({name:s}),o=d.useRef(!1),{watch:c,setValue:m}=C();return d.useEffect(()=>{const u=c((g,{name:j})=>{j==="title"&&!o.current&&m("slug",g.title)});return()=>u.unsubscribe()},[c,m]),e.jsx(Mx,{className:b(!i&&"invisible"),onChange:u=>{o.current=!0,a(u)},onInputBlur:r,value:i,inputRef:l,...t})}const kg=V.lazy(()=>ct(()=>import("./article-body-editor-b687bf7d.js"),["./article-body-editor-b687bf7d.js","./main-e798bedc.js","./main-7d4c83c3.css","./c-ca547487.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Ng(){const s=ii();return s.data?e.jsxs(d.Fragment,{children:[e.jsx(li,{query:s}),e.jsx(Cg,{page:s.data.page})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx(Ka,{query:s})})}function Cg({page:s}){const t=pe(),a=Dx(),r=P({defaultValues:{title:s.title,slug:s.slug,body:s.body}}),i=l=>{a.mutate({...r.getValues(),body:l},{onSuccess:()=>t("../..",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(bs,{}),children:e.jsx(kg,{initialContent:s.body,children:(l,o)=>e.jsx(ps,{children:e.jsxs(Ga,{...r,children:[e.jsx(Jn,{editor:o,backLink:"../..",isLoading:a.isPending,onSave:i}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Qn,{}),l]})})]})})})})}function Fg(s){const t=s||"custom-pages";return $({mutationFn:a=>zg(a,t),onError:a=>ae(a),onSuccess:async()=>{await L.invalidateQueries({queryKey:["custom-pages"]}),await L.invalidateQueries({queryKey:Y(t)}),R(x("Page created"))}})}function zg(s,t){return A.post(`${t}`,s).then(a=>a.data)}const Ig=V.lazy(()=>ct(()=>import("./article-body-editor-b687bf7d.js"),["./article-body-editor-b687bf7d.js","./main-e798bedc.js","./main-7d4c83c3.css","./c-ca547487.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Ag(){const s=pe(),t=Fg(),a=P(),r=i=>{t.mutate({...a.getValues(),body:i},{onSuccess:()=>s("../",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(bs,{}),children:e.jsx(Ig,{children:(i,l)=>e.jsx(ps,{children:e.jsxs(Ga,{...a,children:[e.jsx(Jn,{editor:l,isLoading:t.isPending,onSave:r,backLink:"../"}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Qn,{}),i]})})]})})})})}const Pg=""+new URL("font-a5a81d1a.svg",import.meta.url).href;function Eg({state:{filters:s,setFilters:t}}){const{trans:a}=M();return e.jsxs("div",{className:"mb-24 items-center gap-24 @xs:flex",children:[e.jsx(He,{className:"mb-12 flex-auto @xs:mb-0",value:s.query,onChange:r=>{t({...s,query:r.target.value})},startAdornment:e.jsx(tt,{}),placeholder:a(x("Search fonts"))}),e.jsxs(hs,{className:"flex-auto",selectionMode:"single",selectedValue:s.category,onSelectionChange:r=>{t({...s,category:r})},children:[e.jsx(h,{value:"",children:e.jsx(n,{message:"All categories"})}),e.jsx(h,{value:"serif",children:e.jsx(n,{message:"Serif"})}),e.jsx(h,{value:"sans-serif",children:e.jsx(n,{message:"Sans serif"})}),e.jsx(h,{value:"display",children:e.jsx(n,{message:"Display"})}),e.jsx(h,{value:"handwriting",children:e.jsx(n,{message:"Handwriting"})}),e.jsx(h,{value:"monospace",children:e.jsx(n,{message:"Monospace"})})]})]})}const Tg=[{label:x("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function Dg(s,t){return s.reduce((a,r,i)=>{const l=Math.floor(i/t);return a[l]||(a[l]=[]),a[l].push(r),a},[])}function Lg(s){const t=oi({usage:"search",...s});return d.useMemo(()=>({startsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(0,r.length),r)===0)},endsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(-r.length),r)===0)},contains(a,r){if(r.length===0)return!0;a=a.normalize("NFC"),r=r.normalize("NFC");let i=0;const l=r.length;for(;i+l<=a.length;i++){const o=a.slice(i,i+l);if(t.compare(r,o)===0)return!0}return!1}}),[t])}function Mg({value:s,onChange:t}){const{data:a,isLoading:r}=Ee(["googleFonts"]),[i,l]=d.useState(0),[o,c]=d.useState({query:"",category:(s==null?void 0:s.category)??""}),{contains:m}=Lg({sensitivity:"base"}),u=d.useMemo(()=>Tg.concat((a==null?void 0:a.googleFonts)??[]),[a==null?void 0:a.googleFonts]),g=d.useMemo(()=>u.filter(w=>{var _;return m(w.family,o.query)&&(!o.category||((_=w.category)==null?void 0:_.toLowerCase())===o.category.toLowerCase())}),[u,o,m]),j=d.useMemo(()=>Dg(g,20),[g]),v=j[i];d.useEffect(()=>{if(a&&(s!=null&&s.family)){const w=g.findIndex(_=>_.family===s.family);w>=0&&l(Math.floor(w/20))}},[a,g,s==null?void 0:s.family]),d.useEffect(()=>{const w="font-selector";v!=null&&v.length&&ci(v,{id:w})},[v,i]);const y=d.useCallback(w=>{c(w),l(0)},[]);return{fonts:v||[],currentPage:i,filteredFonts:g||[],setCurrentPage:l,isLoading:r,filters:o,setFilters:y,value:s,onChange:t,pages:j}}function qg({state:{currentPage:s=0,setCurrentPage:t,filteredFonts:a,pages:r}}){const i=(a==null?void 0:a.length)||0;return e.jsxs("div",{className:"mt-30 flex items-center justify-end gap-24 border-t pt-14 text-sm",children:[i>0&&e.jsx("div",{children:e.jsx(n,{message:":from - :to of :total",values:{from:s*20+1,to:Math.min((s+1)*20,i),total:i}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(k,{disabled:s<1,onClick:()=>{t(Math.max(0,s-1))},children:e.jsx(Ls,{})}),e.jsx(k,{disabled:s>=r.length-1,onClick:()=>{t(s+1)},children:e.jsx(ws,{})})]})]})}function $g(s){const t=Mg(s);return e.jsxs("div",{className:s.className,children:[e.jsx(Eg,{state:t}),e.jsx(Xe,{initial:!1,mode:"wait",children:e.jsx(Rg,{state:t})}),e.jsx(qg,{state:t})]})}function Rg({state:s}){const{isLoading:t,fonts:a}=s,r="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?e.jsx(Og,{className:r}):a!=null&&a.length?e.jsx(Le.div,{...Ze,className:r,children:a==null?void 0:a.map(i=>e.jsx(Vg,{font:i,state:s},i.family))},"font-list"):e.jsx(nt,{className:"mt-60",size:"sm",image:e.jsx(rt,{src:Pg}),title:e.jsx(n,{message:"No matching fonts"}),description:e.jsx(n,{message:"Try another search query or different category"})})}function Vg({font:s,state:{value:t,onChange:a}}){const r=(t==null?void 0:t.family)===s.family,i=s.family.split(",")[0].replace(/"/g,"");return e.jsxs(ot,{display:"block",onClick:()=>{a(s)},children:[e.jsx("span",{className:b("flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl",r&&"ring-2 ring-primary ring-offset-2"),children:e.jsx("span",{style:{fontFamily:s.family},children:"Aa"})}),e.jsx("span",{className:b("mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",r&&"text-primary"),children:s.label?e.jsx(n,{...s.label}):i})]},s.family)}function Og({className:s}){const t=Array.from(Array(20).keys());return e.jsx(Le.div,{...Ze,className:s,children:t.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square",children:e.jsx(X,{display:"block",variant:"rect"})}),e.jsx(X,{className:"mt-6 text-sm"})]},a))},"font-list-skeleton")}function Ug(){const{setValue:s,watch:t}=C(),{themeIndex:a}=ge(),r=`appearance.themes.${a}.font`;return e.jsx($g,{value:t(r),onChange:i=>{s(r,i,{shouldDirty:!0}),O().preview.setThemeFont(i)}})}const Hg={"rounded-none":{label:x("Square"),value:"0px"},rounded:{label:x("Small"),value:"0.25rem"},"rounded-md":{label:x("Medium"),value:"0.375rem"},"rounded-lg":{label:x("Large"),value:"0.5rem"},"rounded-xl":{label:x("Larger"),value:"0.75rem"},"rounded-full":{label:x("Pill"),value:"9999px"}};function Bg(){return e.jsxs("div",{className:"space-y-24",children:[e.jsx(zt,{label:e.jsx(n,{message:"Button rounding"}),name:"button-radius"}),e.jsx(zt,{label:e.jsx(n,{message:"Input rounding"}),name:"input-radius"}),e.jsx(zt,{label:e.jsx(n,{message:"Panel rounding"}),name:"panel-radius",hidePill:!0})]})}function zt({label:s,name:t,hidePill:a}){const{themeIndex:r}=ge(),{watch:i,setValue:l}=C(),o=`appearance.themes.${r}.values.--be-${t}`,c=i(o);return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10 text-sm font-semibold",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-10 text-sm",children:Object.entries(Hg).filter(([m])=>!a||!m.includes("full")).map(([m,{label:u,value:g}])=>e.jsx(Kg,{radius:m,isActive:g===c,onClick:()=>{l(o,g,{shouldDirty:!0}),O().preview.setThemeValue(`--be-${t}`,g)},children:e.jsx(n,{...u})},m))})]})}function Kg({radius:s,children:t,isActive:a,onClick:r}){return e.jsx(ot,{display:"block",className:b("h-36 border-2 hover:bg-hover",s,a&&"border-primary"),onClick:r,children:t})}const Fa=["schedule","error","outgoing-email"];function Wg(){const{pathname:s}=Ke(),t=s.split("/").pop(),a=Fa.includes(t)?Fa.indexOf(t):0;return e.jsxs(bt,{className:"p-12 md:p-24",selectedTab:a,children:[e.jsxs(vt,{className:"mb-24",children:[e.jsx(Je,{elementType:B,to:"/admin/logs/schedule",replace:!0,children:e.jsx(n,{message:"Schedule"})}),e.jsx(Je,{elementType:B,to:"/admin/logs/error",replace:!0,children:e.jsx(n,{message:"Error"})}),e.jsx(Je,{elementType:B,to:"/admin/logs/outgoing-email",replace:!0,children:e.jsx(n,{message:"Email"})})]}),e.jsx(es,{})]})}function Gg({value:s}){return s?e.jsx(Ys,{className:"text-positive icon-md"}):e.jsx(Be,{className:"text-danger icon-md"})}function Xn(){const{trans:s}=M();return $({mutationFn:t=>Qg(t),onSuccess:async(t,a)=>{await L.invalidateQueries({queryKey:Y("logs/schedule")}),R.positive(s(x("Command reran")))},onError:t=>ae(t)})}function Qg({id:s}){return A.post(`logs/schedule/rerun/${s}`).then(t=>t.data)}const Yg=T(e.jsx("path",{d:"M21 12V6c0-1.1-.9-2-2-2h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5V10h14v2h2zm-2-4H5V6h14v2zm-3.36 12c.43 1.45 1.77 2.5 3.36 2.5 1.93 0 3.5-1.57 3.5-3.5s-1.57-3.5-3.5-3.5c-.95 0-1.82.38-2.45 1H18V18h-4v-4h1.5v1.43c.9-.88 2.14-1.43 3.5-1.43 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.44-1.72-4.9-4h1.54z"}),"EventRepeatOutlined"),Jg=[{key:"command",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsx(as,{label:s.command,description:s.output})},{key:"ran_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last ran at"}),body:s=>e.jsx(Kt,{date:s.ran_at})},{key:"duration",allowsSorting:!0,header:()=>e.jsx(n,{message:"Duration"}),body:s=>`${s.duration}ms`},{key:"exit_code",allowsSorting:!0,header:()=>e.jsx(n,{message:"Completed"}),body:s=>e.jsx(Gg,{value:s.exit_code===0})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(Xg,{item:s})}];function Xg({item:s}){const t=Xn();return e.jsx(Z,{label:e.jsx(n,{message:"Rerun now"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(Yg,{})})})}const Zg=""+new URL("timeline-172fbeee.svg",import.meta.url).href,na=T(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"}),"DownloadOutlined");function eh(){return e.jsx($e,{padding:"pt-12 md:pt-24",endpoint:"logs/schedule",title:e.jsx(n,{message:"CRON schedule log"}),columns:Jg,actions:e.jsx(sh,{}),enableSelection:!1,emptyStateMessage:e.jsx(Ne,{image:Zg,title:e.jsx(n,{message:"No scheduled commands have ran yet"}),filteringTitle:e.jsx(n,{message:"No matching scheduled commands"})})})}function sh(){return e.jsx(Oe,{elementType:"a",href:"api/v1/logs/schedule/download",download:!0,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})}const th=""+new URL("bug-fixing-bd601a66.svg",import.meta.url).href,ah=[{key:"message",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Message"}),body:s=>s.message},{key:"datetime",header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Kt,{date:s.datetime})},{key:"severity",header:()=>e.jsx(n,{message:"Severity"}),body:s=>e.jsxs("span",{className:b("flex items-center gap-6 text-xs capitalize",s.level==="error"?"text-danger":"text-primary"),children:[s.level==="error"?e.jsx(Ta,{size:"sm"}):e.jsx(Bi,{size:"sm"}),s.level]})}];function nh({error:s}){return e.jsxs(ee,{size:"fullscreen",children:[e.jsx(re,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(f,{variant:"outline",size:"xs",onClick:()=>rh(s),children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Error details"})}),e.jsx(te,{children:e.jsx("pre",{className:"whitespace-pre-wrap break-words text-xs leading-5",children:s.exception})})]})}function rh(s){const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s.exception)),t.setAttribute("download",`error-${s.id}.log`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function ih(){const{trans:s}=M();return $({mutationFn:t=>lh(t),onSuccess:async()=>{await L.invalidateQueries({queryKey:Y("logs/error")}),R(s(x("Log file deleted")))},onError:t=>ae(t)})}function lh({identifier:s}){return A.delete(`logs/error/${s}`).then(t=>t.data)}function oh(){return e.jsx($e,{padding:"pt-12 md:pt-24",endpoint:"logs/error",title:e.jsx(n,{message:"Error log"}),onRowAction:s=>{ut(nh,{error:s})},columns:ah,actions:e.jsx(ch,{}),enableSelection:!1,emptyStateMessage:e.jsx(Ne,{image:th,title:e.jsx(n,{message:"No errors have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching error log entries"})})})}function ch(){var l,o,c;const{query:s,setParams:t}=pt(),a=d.useRef(!1),[r,i]=d.useState(null);return d.useEffect(()=>{var m,u;if((u=(m=s.data)==null?void 0:m.files)!=null&&u.length&&!a.current){a.current=!0;const g=s.data.files[0].identifier;i(s.data.files[0].identifier),g!==s.data.selectedFile&&t({file:s.data.files[0].identifier})}},[s.data,t,a]),e.jsxs(d.Fragment,{children:[e.jsx(dh,{files:((l=s.data)==null?void 0:l.files)??null,selectedFile:r,onSelected:m=>{i(m.identifier),t({file:m.identifier})}}),e.jsx(f,{variant:"outline",color:"danger",disabled:!r,onClick:()=>ut(uh,{identifier:r}),children:e.jsx(n,{message:"Delete"})}),r&&e.jsx(Oe,{elementType:"a",download:(c=(o=s.data)==null?void 0:o.files.find(m=>m.identifier===r))==null?void 0:c.name,href:`api/v1/logs/error/${r}/download`,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})]})}function dh({files:s,selectedFile:t,onSelected:a}){return s?s.length?e.jsx(hs,{selectionMode:"single",selectedValue:t,size:"sm",minWidth:"min-w-[210px]",children:s==null?void 0:s.map(r=>e.jsxs(h,{value:r.identifier,onSelected:()=>a(r),children:[r.name," (",e.jsx(en,{bytes:r.size}),")"]},r.identifier))}):null:e.jsx(X,{variant:"rect",className:"max-w-[210px]"})}function uh({identifier:s}){const t=ih();return e.jsx(we,{title:e.jsx(n,{message:"Delete log file"}),body:e.jsx(n,{message:"Are you sure you want to delete this log file?"}),confirm:e.jsx(n,{message:"Delete"}),onConfirm:()=>t.mutate({identifier:s},{onSuccess:()=>di()}),isLoading:t.isPending,isDanger:!0})}const mh=""+new URL("opened-4dded9dc.svg",import.meta.url).href;function xh(s){return Me({queryKey:["logs/outgoing-email",s],queryFn:()=>gh(s)})}function gh(s){return A.get(`logs/outgoing-email/${s}`).then(t=>t.data)}function hh({logItemId:s}){const{data:t}=xh(s),{base_url:a}=je();return e.jsxs(ee,{size:"fullscreen",children:[e.jsx(re,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(f,{variant:"outline",size:"xs",disabled:!t,type:"button",onClick:t?()=>mt(`${a}/api/v1/logs/outgoing-email/${s}/download`):void 0,children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Email preview"})}),e.jsx(te,{children:t?e.jsx("iframe",{srcDoc:t.logItem.parsed_message.body.html,className:"h-max w-full border-none",onLoad:r=>{const i=r.target;i.style.height=i.contentWindow.document.body.scrollHeight+"px"}}):e.jsx("div",{className:"flex min-h-200 items-center justify-center",children:e.jsx($s,{isIndeterminate:!0})})})]})}const ph=[{key:"message_id",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Subject"}),body:s=>e.jsx(as,{label:s.subject,description:s.message_id})},{key:"status",allowsSorting:!0,header:()=>e.jsx(n,{message:"Status"}),body:s=>{switch(s.status){case"sent":return e.jsx(It,{color:"positive",children:e.jsx(n,{message:"Sent"})});case"not-sent":return e.jsx(It,{color:void 0,children:e.jsx(n,{message:"Not sent"})});case"error":return e.jsx(It,{color:"danger",children:e.jsx(n,{message:"Error"})})}}},{key:"from",allowsSorting:!0,header:()=>e.jsx(n,{message:"From"}),body:s=>s.from},{key:"to",allowsSorting:!0,header:()=>e.jsx(n,{message:"To"}),body:s=>s.to},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Kt,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(jh,{item:s})}];function jh({item:s}){const t=Xn();return e.jsxs(E,{type:"modal",children:[e.jsx(Z,{label:e.jsx(n,{message:"Preview"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(On,{})})}),e.jsx(hh,{logItemId:s.id})]})}function It({color:s,children:t}){return e.jsx(lt,{color:s,size:"xs",className:"w-max min-w-50 text-center",children:t})}const fh=[{key:"status",label:x("Status"),description:x("Status of the outgoing email"),defaultOperator:le.eq,control:{type:ue.Select,defaultValue:"01",options:[{key:"01",label:x("Not sent"),value:"no-sent"},{key:"02",label:x("Sent"),value:"sent"},{key:"03",label:x("Error"),value:"error"}]}},us({description:x("Date email send was attempted")})];function bh(){return e.jsx($e,{padding:"pt-12 md:pt-24",endpoint:"logs/outgoing-email",title:e.jsx(n,{message:"Outgoing email"}),columns:ph,filters:fh,actions:e.jsx(vh,{}),enableSelection:!1,emptyStateMessage:e.jsx(Ne,{image:mh,title:e.jsx(n,{message:"No outgoing emails have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching emails"})})})}function vh(){return e.jsx(Oe,{elementType:"a",href:"api/v1/logs/outgoing-email/download",download:!0,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})}function Zn({endpoint:s}){const[t,a]=d.useState(""),{data:r}=Ya(s??"normalized-models/role",{query:t}),{hasPermission:i}=st();return e.jsx(An,{label:e.jsx(n,{message:"Roles"}),children:e.jsx(xt,{className:"mb-30",name:"roles",suggestions:r==null?void 0:r.results,inputValue:t,onInputValueChange:a,alwaysShowAvatar:!0,readOnly:!i("users.update"),children:l=>e.jsx(h,{value:l.id,startIcon:e.jsx(it,{label:l.name}),children:l.name},l.id)})})}function yh(s,t){const a=pe();return $({mutationFn:r=>wh(s,r),onSuccess:(r,i)=>{R(x("User updated")),L.invalidateQueries({queryKey:["users"]}),a("/admin/users")},onError:r=>Ce(r,t)})}function wh(s,t){return t.roles&&(t.roles=t.roles.map(a=>a.id)),A.put(`users/${s}`,t).then(a=>a.data)}function er({form:s,children:t}){const a=vs(),r=yh(a.id,s);return e.jsxs(oe,{onSubmit:i=>{r.mutate(i)},onBeforeSubmit:()=>s.clearErrors(),form:s,children:[t,e.jsx(Pn,{isLoading:r.isPending})]})}function _h(){const s=vs(),t=P({defaultValues:{first_name:s.first_name??"",last_name:s.last_name??"",roles:s.roles,email_verified_at:!!s.email_verified_at,available_space:s.available_space}});return e.jsxs(er,{form:t,children:[e.jsxs("div",{className:"mb-24 flex gap-44",children:[e.jsx(p,{name:"first_name",label:e.jsx(n,{message:"First name"}),className:"flex-auto"}),e.jsx(p,{name:"last_name",label:e.jsx(n,{message:"Last name"}),className:"flex-auto"})]}),e.jsx(As,{className:"mb-24",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:a=>e.jsx(B,{className:Rt,target:"_blank",to:"/admin/settings/uploading",children:a})},message:"Total storage space all user uploads are allowed to take up. If left empty, this value will be inherited from any roles or subscriptions user has, or from 'Available space' setting in <a>Uploading</a> settings page."})}),e.jsx(Sh,{user:s}),e.jsx(Zn,{})]})}function Sh({user:s}){const t=ui(),{require_email_confirmation:a}=je();return e.jsxs("div",{className:"mb-44",children:[e.jsx(D,{className:"mb-30",disabled:!a,name:"email_verified_at",description:e.jsx(n,{message:"Whether email address has been confirmed. User will not be able to login until address is confirmed, unless confirmation is disabled from settings page."}),children:e.jsx(n,{message:"Email confirmed"})}),e.jsx(f,{size:"xs",variant:"outline",color:"primary",disabled:!a||t.isPending||!!s.email_verified_at,onClick:()=>{t.mutate({email:s.email})},children:e.jsx(n,{message:"Resend email"})})]})}function kh(){const s=vs(),t=P({defaultValues:{permissions:s.permissions,roles:s.roles}});return e.jsxs(er,{form:t,children:[e.jsx(Zn,{}),e.jsx(An,{label:e.jsx(n,{message:"Permissions"}),children:e.jsx(Gt,{name:"permissions"})})]})}function Nh(){const s=vs();return e.jsx(mi,{user:s})}function Ch(){const s=vs();return e.jsx(xi,{user:s})}function Fh(){const s=vs();return e.jsxs("div",{children:[e.jsx(gi,{}),e.jsx(hi,{user:s}),e.jsx(pi,{user:s}),e.jsx(ji,{})]})}function zh(){const s=Vs(),t=P({defaultValues:{appearance:{themes:s.appearance.themes.filter(a=>a.type==="site")}}});return e.jsx(Os,{form:t,breadcrumb:e.jsx(Ih,{form:t}),blockerAllowedPath:"themes",children:e.jsx(es,{})})}function Ih({form:s,children:t}){const{pathname:a}=Ke(),r=a.split("/").pop(),{themeIndex:i}=ge(),l=Rs({control:s.control,name:"appearance.themes"}),o=i?l[i]:null;return e.jsxs(Ss,{children:[t,e.jsx(n,{message:"Themes"}),o&&e.jsx("span",{children:o.name}),r==="font"&&e.jsx(n,{message:"Font"}),r==="radius"&&e.jsx(n,{message:"Rounding"})]})}function Ah(){const s=Vs(),t=P({defaultValues:{settings:{menus:s.settings.menus}}});return e.jsx(Os,{form:t,breadcrumb:e.jsx(Ph,{form:t}),blockerAllowedPath:"menus",children:e.jsx(es,{})})}function Ph({form:s}){const{menuIndex:t,menuItemIndex:a}=ge(),r=Rs({control:s.control,name:"settings.menus"}),i=t?r[t]:null,l=a&&i?i.items[a]:null;return e.jsxs(Ss,{children:[e.jsx(n,{message:"Menus"}),i&&e.jsx("span",{children:i.name}),l&&e.jsx("span",{children:l.label})]})}function Eh(){return e.jsx(Se,{title:e.jsx(n,{message:"Drive"}),description:e.jsx(n,{message:"Configure defaults for drive user dashboard."}),children:s=>e.jsx(Th,{data:s})})}function Th({data:s}){var a,r,i;const t=P({defaultValues:{client:{drive:{default_view:((a=s.client.drive)==null?void 0:a.default_view)??"list",send_share_notification:((r=s.client.drive)==null?void 0:r.send_share_notification)??!1},share:{suggest_emails:((i=s.client.share)==null?void 0:i.suggest_emails)??!1}}}});return e.jsxs(_e,{form:t,children:[e.jsxs(Ut,{required:!0,className:"mb-30",size:"md",name:"client.drive.default_view",orientation:"vertical",label:e.jsx(n,{message:"Default view mode"}),description:e.jsx(n,{message:"Which view mode should user drive use by default."}),children:[e.jsx(is,{value:"list",children:e.jsx(n,{message:"List"})}),e.jsx(is,{value:"grid",children:e.jsx(n,{message:"Grid"})})]}),e.jsx(D,{className:"mb-30",name:"client.drive.send_share_notification",description:e.jsx(n,{message:"Send a notification to user when a file or folder is shared with them."}),children:e.jsx(n,{message:"Share notifications"})}),e.jsx(D,{name:"client.share.suggest_emails",description:e.jsx(n,{message:"Suggest email address of existing users when sharing a file or folder."}),children:e.jsx(n,{message:"Suggest emails"})})]})}function Dh(){const s=Vs(),t=P({defaultValues:{settings:{homepage:{appearance:{headerTitle:s.settings.homepage.appearance.headerTitle??"",headerSubtitle:s.settings.homepage.appearance.headerSubtitle??"",headerImage:s.settings.homepage.appearance.headerImage??"",headerImageOpacity:s.settings.homepage.appearance.headerImageOpacity??"",headerOverlayColor1:s.settings.homepage.appearance.headerOverlayColor1??"",headerOverlayColor2:s.settings.homepage.appearance.headerOverlayColor2??"",footerTitle:s.settings.homepage.appearance.footerTitle??"",footerSubtitle:s.settings.homepage.appearance.footerSubtitle??"",footerImage:s.settings.homepage.appearance.footerImage??"",primaryFeatures:s.settings.homepage.appearance.primaryFeatures??[],secondaryFeatures:s.settings.homepage.appearance.secondaryFeatures??[],actions:s.settings.homepage.appearance.actions??[]}}}}});return e.jsx(Os,{form:t,breadcrumb:e.jsx(Lh,{}),blockerAllowedPath:"landing-page",children:e.jsx(es,{})})}function Lh(){const{pathname:s}=Ke(),t=s.split("/").pop();return e.jsxs(Ss,{children:[e.jsx(n,{message:"Landing page"}),t==="action-buttons"&&e.jsx(n,{message:"Action buttons"}),t==="primary-features"&&e.jsx(n,{message:"Primary features"}),t==="secondary-features"&&e.jsx(n,{message:"Secondary features"})]})}function Mh(s){const{size:t="md",inline:a,label:r,showValueLabel:i=!!r,className:l,width:o="w-full",slider:c,children:m,trackColor:u="primary",fillColor:g="primary"}=s,{domProps:j,trackRef:v,getThumbPercent:y,getThumbValueLabel:w,labelId:_,groupId:S,thumbIds:N,isDisabled:I,numberFormatter:z,minValue:J,maxValue:q,step:se,values:ne,getValueLabel:U}=c;let W="",ie=Math.max([...z.format(J)].length,[...z.format(q)].length,[...z.format(se)].length);U?W=U(ne[0]):ne.length===1?W=w(0):ne.length===2&&(W=`${w(0)} – ${w(1)}`,ie=3+2*Math.max(ie,[...z.format(J)].length,[...z.format(q)].length));const Te=Ot({size:t,disabled:I,labelDisplay:"flex"}),ce=b("touch-none",l,o,{"flex items-center":a});return e.jsxs("div",{className:ce,role:"group",id:S,children:[(r||i)&&e.jsxs("div",{className:b(Te.label,"select-none"),children:[r&&e.jsx("label",{onClick:()=>{var De;(De=document.getElementById(N[0]))==null||De.focus()},id:_,htmlFor:S,children:r}),i&&e.jsx("output",{htmlFor:N[0],className:"ml-auto text-right","aria-live":"off",style:ie?{width:`${ie}ch`,minWidth:`${ie}ch`}:void 0,children:W})]}),e.jsxs("div",{ref:v,className:b("relative",qh(s)),...j,role:"presentation",children:[e.jsx("div",{className:b("absolute inset-0 m-auto rounded",$h(u,I),za(t))}),e.jsx("div",{className:b("absolute inset-0 my-auto rounded",Rh(g,I),za(t)),style:{width:`${Math.max(y(0)*100,0)}%`}}),m]})]})}function qh({size:s,wrapperHeight:t}){if(t)return t;switch(s){case"xs":return"h-14";case"sm":return"h-20";default:return"h-30"}}function za(s){switch(s){case"xs":return"h-2";case"sm":return"h-3";default:return"h-4"}}function $h(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return s}}function Rh(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return s}}function Vh({minValue:s=0,maxValue:t=100,isDisabled:a=!1,step:r=1,formatOptions:i,onChangeEnd:l,onPointerDown:o,label:c,getValueLabel:m,showThumbOnHoverOnly:u,thumbSize:g,onPointerMove:j,...v}){const[y,w]=d.useState(!1),_=Da(i),{addGlobalListener:S,removeGlobalListener:N}=Ja(),I=d.useRef(null),[z,J]=Ms(v.value?v.value:void 0,v.defaultValue??[s],v.onChange),q=d.useRef(null);q.current=z;const[se,ne]=d.useState(new Array(z.length).fill(!1)),U=d.useRef(null);U.current=se;function W(F){return _.format(F)}const ie=F=>{var Q;return((Q=U.current)==null?void 0:Q[F])||!1},Te=F=>W(z[F]),ce=F=>F===0?s:z[F-1],De=F=>F===z.length-1?t:z[F+1],de=(F,Q)=>{if(a||!_t(F)||!q.current)return;const Re=ce(F),Qe=De(F);Q=Yi(Q,Re,Qe,r),q.current=Ia(q.current,F,Q),J(q.current)},be=(F,Q)=>{var Qe;if(a||!_t(F))return;const Re=(Qe=U.current)==null?void 0:Qe[F];U.current=Ia(U.current||[],F,Q),ne(U.current),l&&Re&&!U.current.some(Boolean)&&l(q.current||[])},[Fe,he]=d.useState(void 0),Hs=F=>{const Q=Math.min(1,(F-s)/(t-s));return isNaN(Q)?0:Q},Bs=F=>Hs(q.current[F]),ke=(F,Q)=>{de(F,ra(Q))},sr=F=>Math.round((F-s)/r)*r+s,ra=F=>{const Q=F*(t-s)+s;return Js(sr(Q),s,t)},ia=d.useRef(new Array(z.length).fill(!0)),_t=F=>ia.current[F],tr=(F,Q)=>{ia.current[F]=Q},ze=d.useRef(null),la=d.useRef(void 0),ar=F=>{if(!(F.pointerType==="mouse"&&(F.button!==0||F.altKey||F.ctrlKey||F.metaKey))&&(o==null||o(),I.current&&!a&&z.every((Q,Re)=>!se[Re]))){const Q=I.current.offsetWidth,Re=I.current.getBoundingClientRect().left,kt=(F.clientX-Re)/Q,Ks=ra(kt);let Ue;const rs=z.findIndex(Nt=>Ks-Nt<0);if(rs===0)Ue=rs;else if(rs===-1)Ue=z.length-1;else{const Nt=z[rs-1],cr=z[rs];Math.abs(Nt-Ks)<Math.abs(cr-Ks)?Ue=rs-1:Ue=rs}Ue>=0&&_t(Ue)?(F.preventDefault(),ze.current=Ue,he(Ue),la.current=F.pointerId,be(ze.current,!0),de(Ue,Ks),S(window,"pointerup",oa,!1)):ze.current=null}},Cs=d.useRef(null),{domProps:nr}=Ki({onPointerDown:ar,onMoveStart(){Cs.current=null},onMove(F,Q){var Qe;const Re=((Qe=I.current)==null?void 0:Qe.offsetWidth)||0;if(Cs.current==null&&(Cs.current=Bs(ze.current||0)*Re),Cs.current+=Q,ze.current!=null&&I.current){const kt=Js(Cs.current/Re,0,1);ke(ze.current,kt)}},onMoveEnd(){ze.current!=null&&(be(ze.current,!1),ze.current=null)}}),rr=cs(nr,{onPointerEnter:()=>{w(!0)},onPointerLeave:()=>{w(!1)},onPointerMove:F=>{j==null||j(F)}}),oa=F=>{F.pointerId===la.current&&(ze.current!=null&&(be(ze.current,!1),ze.current=null),N(window,"pointerup",oa,!1))},St=d.useId(),ir=c?`${St}-label`:void 0,lr=`${St}-group`,or=[...Array(z.length)].map((F,Q)=>`${St}-thumb-${Q}`);return{domProps:rr,trackRef:I,isDisabled:a,step:r,values:z,minValue:s,maxValue:t,focusedThumb:Fe,labelId:ir,groupId:lr,thumbIds:or,numberFormatter:_,getThumbPercent:Bs,getThumbMinValue:ce,getThumbMaxValue:De,getThumbValueLabel:Te,isThumbDragging:ie,setThumbValue:de,updateDraggedThumbs:be,setThumbEditable:tr,setFocusedThumb:he,getValueLabel:m,isPointerOver:y,showThumbOnHoverOnly:u,thumbSize:g}}function Ia(s,t,a){return s[t]===a?s:[...s.slice(0,t),a,...s.slice(t+1)]}function Oh({index:s,slider:t,isDisabled:a,ariaLabel:r,inputRef:i,onBlur:l,fillColor:o="primary"}){const c=Ha(i),{addGlobalListener:m,removeGlobalListener:u}=Ja(),{step:g,values:j,focusedThumb:v,labelId:y,thumbIds:w,isDisabled:_,getThumbPercent:S,getThumbMinValue:N,getThumbMaxValue:I,getThumbValueLabel:z,setThumbValue:J,updateDraggedThumbs:q,isThumbDragging:se,setThumbEditable:ne,setFocusedThumb:U,isPointerOver:W,showThumbOnHoverOnly:ie,thumbSize:Te="w-18 h-18"}=t,ce=se(s),De=j[s];ne(s,!a);const de=a||_,be=d.useCallback(()=>{c.current&&c.current.focus({preventScroll:!0})},[c]),Fe=v===s;d.useEffect(()=>{Fe&&be()},[Fe,be]);const he=d.useRef(void 0),Hs=ke=>{ke.pointerId===he.current&&(be(),q(s,!1),u(window,"pointerup",Hs,!1))},Bs=b("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",Te,!de&&"shadow-md",Uh({fillColor:o,isDisabled:de,isDragging:ce}),!ie||ie&&ce||W?"visible":"invisible");return e.jsx("div",{role:"presentation",className:Bs,style:{left:`${Math.max(S(s)*100,0)}%`},onPointerDown:ke=>{ke.button!==0||ke.altKey||ke.ctrlKey||ke.metaKey||(be(),he.current=ke.pointerId,q(s,!0),m(window,"pointerup",Hs,!1))},children:e.jsx("input",{id:w[s],onKeyDown:ca(()=>{q(s,!0)}),onKeyUp:ca(()=>{q(s,!1)}),ref:c,tabIndex:de?void 0:0,min:N(s),max:I(s),step:g,value:De,disabled:de,"aria-label":r,"aria-labelledby":y,"aria-orientation":"horizontal","aria-valuetext":z(s),onFocus:()=>{U(s)},onBlur:ke=>{U(void 0),q(s,!1),l==null||l(ke)},onChange:ke=>{J(s,parseFloat(ke.target.value))},type:"range",className:"sr-only"})})}function Uh({isDisabled:s,isDragging:t,fillColor:a}){return s?"bg-slider-disabled cursor-default":a&&a!=="primary"?a:b("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function Hh({inputRef:s,onBlur:t,...a}){const{onChange:r,onChangeEnd:i,value:l,defaultValue:o,...c}=a,m={...c,value:l!=null?[l]:void 0,defaultValue:o!=null?[o]:void 0,onChange:g=>{r==null||r(g[0])},onChangeEnd:g=>{i==null||i(g[0])}},u=Vh(m);return e.jsx(Mh,{...m,slider:u,children:e.jsx(Oh,{fillColor:a.fillColor,index:0,slider:u,inputRef:s,onBlur:t})})}function Bh({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=fs({name:s}),o={onChange:a,onBlur:r,value:i||""};return e.jsx(Hh,{inputRef:l,...cs(o,t)})}function Kh(){return e.jsxs(d.Fragment,{children:[e.jsx(Wh,{}),e.jsxs("div",{className:"my-24 border-y py-24",children:[e.jsx(ye,{to:"action-buttons",elementType:B,className:"mb-20",children:e.jsx(n,{message:"Action buttons"})}),e.jsx(ye,{to:"primary-features",elementType:B,children:e.jsx(n,{message:"Primary features"})}),e.jsx(ye,{to:"secondary-features",elementType:B,children:e.jsx(n,{message:"Secondary features"})})]}),e.jsx(Gh,{})]})}function Wh(){const s=ns(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.headerImage});return e.jsxs(e.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Header title"}),className:"mb-20",name:"settings.homepage.appearance.headerTitle",onFocus:()=>{O().preview.setHighlight('[data-testid="headerTitle"]')}}),e.jsx(p,{label:e.jsx(n,{message:"Header subtitle"}),className:"mb-30",inputElementType:"textarea",rows:4,name:"settings.homepage.appearance.headerSubtitle",onFocus:()=>{O().preview.setHighlight('[data-testid="headerSubtitle"]')}}),e.jsx(js,{name:"settings.homepage.appearance.headerImage",className:"mb-30",label:e.jsx(n,{message:"Header image"}),defaultValue:s,diskPrefix:"homepage"}),e.jsx(Bh,{name:"settings.homepage.appearance.headerImageOpacity",label:e.jsx(n,{message:"Header image opacity"}),minValue:0,step:.1,maxValue:1,formatOptions:{style:"percent"}}),e.jsx("div",{className:"mb-20 text-xs text-muted",children:e.jsx(n,{message:"In order for overlay colors to appear, header image opacity will need to be less then 100%"})}),e.jsx(Aa,{formKey:"settings.homepage.appearance.headerOverlayColor1",label:e.jsx(n,{message:"Header overlay color 1"})}),e.jsx(Aa,{formKey:"settings.homepage.appearance.headerOverlayColor2",label:e.jsx(n,{message:"Header overlay color 2"})})]})}function Gh(){const s=ns(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.footerImage});return e.jsxs(d.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Footer title"}),className:"mb-20",name:"settings.homepage.appearance.footerTitle",onFocus:()=>{O().preview.setHighlight('[data-testid="footerTitle"]')}}),e.jsx(p,{label:e.jsx(n,{message:"Footer subtitle"}),className:"mb-20",name:"settings.homepage.appearance.footerSubtitle",onFocus:()=>{O().preview.setHighlight('[data-testid="footerSubtitle"]')}}),e.jsx(js,{name:"settings.homepage.appearance.footerImage",className:"mb-30",label:e.jsx(n,{message:"Footer background image"}),defaultValue:s,diskPrefix:"homepage"})]})}function Aa({label:s,formKey:t}){const a=t,{watch:r,setValue:i}=C(),l=r(a),o=c=>{i(t,c,{shouldDirty:!0})};return e.jsxs(E,{type:"popover",value:l,alwaysReturnCurrentValueOnClose:!0,onValueChange:c=>o(c),onClose:c=>o(c),children:[e.jsx(ye,{className:"capitalize",startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:l}}),children:s}),e.jsx(ea,{})]})}function Qh(){const[s,t]=d.useState(["cta1"]);return e.jsxs(ts,{variant:"outline",expandedValues:s,onExpandedChange:a=>{t(a),a.length&&O().preview.setHighlight(`[data-testid="${a[0]}"]`)},children:[e.jsx(Ie,{value:"cta1",label:e.jsx(n,{message:"Header button 1"}),children:e.jsx(xs,{formPathPrefix:"settings.homepage.appearance.actions.cta1"})}),e.jsx(Ie,{value:"ct2",label:e.jsx(n,{message:"Header button 2"}),children:e.jsx(xs,{formPathPrefix:"settings.homepage.appearance.actions.cta2"})}),e.jsx(Ie,{value:"cta3",label:e.jsx(n,{message:"Footer button"}),children:e.jsx(xs,{formPathPrefix:"settings.homepage.appearance.actions.cta3"})})]})}function Yh(){const{fields:s,remove:t,append:a}=os({name:"settings.homepage.appearance.primaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(ts,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&O().preview.setHighlight(`[data-testid="primary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(Ie,{value:o,label:e.jsx(n,{message:`Primary feature ${o+1}`}),children:[e.jsx(Jh,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(f,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(f,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(Pe,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function Jh({index:s}){const t=ns(a=>{var r,i,l;return(l=(i=(r=a.defaults)==null?void 0:r.settings.homepage.appearance)==null?void 0:i.primaryFeatures[s])==null?void 0:l.image});return e.jsxs(e.Fragment,{children:[e.jsx(js,{name:`settings.homepage.appearance.primaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:t,diskPrefix:"homepage"}),e.jsx(p,{name:`settings.homepage.appearance.primaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{O().preview.setHighlight(`[data-testid="primary-title-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.primaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{O().preview.setHighlight(`[data-testid="primary-subtitle-${s}"]`)}})]})}function Xh(){const{fields:s,remove:t,append:a}=os({name:"settings.homepage.appearance.secondaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(ts,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&O().preview.setHighlight(`[data-testid="secondary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(Ie,{value:o,label:e.jsx(n,{message:`Secondary feature ${o+1}`}),children:[e.jsx(Zh,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(f,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(f,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(Pe,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function Zh({index:s}){return e.jsxs(e.Fragment,{children:[e.jsx(js,{name:`settings.homepage.appearance.secondaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:ep(s),diskPrefix:"homepage"}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{O().preview.setHighlight(`[data-testid="secondary-title-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{O().preview.setHighlight(`[data-testid="secondary-subtitle-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.description`,label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{O().preview.setHighlight(`[data-testid="secondary-description-${s}"]`)}})]})}function ep(s){var t,a;return(a=((t=O().defaults)==null?void 0:t.settings.homepage.appearance).secondaryFeatures[s])==null?void 0:a.image}const lp=Object.freeze(Object.defineProperty({__proto__:null,AdminLayout:dl,AdminSettingsPage:oc,AdsPage:Zu,AppearanceEditorPage:eo,AppearanceMenuEditor:xo,AppearanceMenuItemEditor:Po,AuthenticationSettings:od,CacheSettings:Gd,CreateCustomPage:Ag,CreatePlanPage:Ix,CreateRolePage:Cm,CustomCodeSection:Zo,CustomPageDatablePage:ac,DriveSettings:Eh,EditCustomPage:Ng,EditPlanPage:Nx,EditRolePage:wm,ErrorLogDatatable:oh,FileEntryIndexPage:Om,GdprSettings:Ax,GeneralSection:Ro,GeneralSettings:hc,LandingPageAppearanceForm:Dh,LandingPageSecondaryFeatures:Xh,LandingPageSectionActionButtons:Qh,LandingPageSectionGeneral:Kh,LandingPageSectionPrimaryFeatures:Yh,LocalizationIndex:Uu,LocalizationSettings:id,LoggingSettings:Xd,LogsPage:Wg,MenuEditorForm:Ah,MenuList:to,OutgoingEmailLogDatatable:bh,OutgoingEmailSettings:Ud,PlansIndexPage:gx,QueueSettings:au,RecaptchaSettings:xu,ReportsSettings:fu,RolesIndexPage:rm,ScheduleLogDatatable:eh,SectionList:tm,SeoSection:Yo,SubscriptionSettings:td,SubscriptionsIndexPage:ex,TagIndexPage:qm,ThemeEditor:Xc,ThemeEditorForm:zh,ThemeFontPanel:Ug,ThemeList:Ho,ThemeRadiusPanel:Bg,TranslationManagementPage:Wu,UpdateUserApiTab:Ch,UpdateUserDatetimeTab:Nh,UpdateUserDetailsTab:_h,UpdateUserPage:Iu,UpdateUserPermissionsTab:kh,UpdateUserSecurityTab:Fh,UploadingSettings:Cd,UserDatatable:Hl,WebsocketSettings:ou},Symbol.toStringTag,{value:"Module"}));export{Yn as C,na as D,Yg as E,bl as F,ag as H,Xx as I,nl as K,rg as N,Jm as P,$x as R,ig as S,Pu as T,qx as U,On as V,no as a,gg as b,pg as c,xg as d,hg as e,Ox as f,sg as g,ug as h,dg as i,fg as j,bg as k,Ux as l,Kx as m,Wx as n,Hx as o,on as p,Xm as q,ng as r,Sc as s,ix as t,yc as u,Lg as v,Ft as w,lp as x};
//# sourceMappingURL=app-admin-routes.lazy-a739d92d.js.map
