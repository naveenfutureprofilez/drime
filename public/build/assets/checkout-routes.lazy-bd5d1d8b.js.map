{"version":3,"file":"checkout-routes.lazy-bd5d1d8b.js","sources":["../../../common/foundation/resources/client/billing/checkout/checkout-layout.jsx","../../../common/foundation/resources/client/billing/requests/use-checkout-product.jsx","../../../common/foundation/resources/client/billing/checkout/checkout-product-summary.jsx","../../../common/foundation/resources/client/billing/checkout/paypal/use-paypal.jsx","../../../common/foundation/resources/client/billing/checkout/checkout.jsx","../../../common/foundation/resources/client/billing/checkout/stripe/checkout-stripe-done.jsx","../../../common/foundation/resources/client/billing/checkout/paypal/checkout-paypal-done.jsx"],"sourcesContent":["import { Fragment, useEffect } from 'react';\nimport { Navbar } from '../../ui/navigation/navbar/navbar';\nimport { CustomMenu } from '../../menus/custom-menu';\nimport { LocaleSwitcher } from '@common/locale-switcher/locale-switcher';\nimport { removeFromLocalStorage } from '@ui/utils/hooks/local-storage';\nimport { StaticPageTitle } from '../../seo/static-page-title';\nimport { Trans } from '@ui/i18n/trans';\nexport function CheckoutLayout({\n  children\n}) {\n  const [left, right] = children;\n  useEffect(() => {\n    removeFromLocalStorage('be.onboarding.selected');\n  }, []);\n  return <Fragment>\n      <StaticPageTitle>\n        <Trans message=\"Checkout\" />\n      </StaticPageTitle>\n      <Navbar size=\"sm\" color=\"transparent\" className=\"z-10 mb-20 md:mb-0\" textColor=\"text-main\" logoColor=\"dark\" darkModeColor=\"transparent\" menuPosition=\"checkout-page-navbar\" />\n      <div className=\"mx-auto w-full justify-between px-20 md:flex md:max-w-950 md:px-0 md:pt-128\">\n        <div className=\"fixed right-0 top-0 hidden h-full w-1/2 bg-alt shadow-[15px_0_30px_0_rgb(0_0_0_/_18%)] md:block\" />\n        <div className=\"overflow-hidden md:w-400\">\n          {left}\n          <CustomMenu menu=\"checkout-page-footer\" className=\"mt-50 overflow-x-auto text-xs text-muted\" />\n          <div className=\"mt-40\">\n            <LocaleSwitcher />\n          </div>\n        </div>\n        <div className=\"hidden w-384 md:block\">\n          <div className=\"relative z-10\">{right}</div>\n        </div>\n      </div>\n    </Fragment>;\n}","import { keepPreviousData, useQuery } from '@tanstack/react-query';\nimport { apiClient } from '../../http/query-client';\nimport { useParams } from 'react-router';\nconst endpoint = productId => `billing/products/${productId}`;\nexport function useCheckoutProduct() {\n  const {\n    productId,\n    priceId\n  } = useParams();\n  const query = useQuery({\n    queryKey: [endpoint(productId)],\n    queryFn: () => fetchProduct(productId),\n    placeholderData: keepPreviousData,\n    enabled: productId != null && priceId != null\n  });\n  const product = query.data?.product;\n  const price = product?.prices.find(p => p.id === parseInt(priceId)) || product?.prices[0];\n  return {\n    status: query.status,\n    product,\n    price\n  };\n}\nfunction fetchProduct(productId) {\n  return apiClient.get(endpoint(productId)).then(response => response.data);\n}","import { Trans } from '@ui/i18n/trans';\nimport { FormattedPrice } from '@common/billing/formatted-price';\nimport { useCheckoutProduct } from '@common/billing/requests/use-checkout-product';\nimport { m } from 'framer-motion';\nimport { Skeleton } from '@ui/skeleton/skeleton';\nimport { ProductFeatureList } from '../pricing-table/product-feature-list';\nimport { opacityAnimation } from '@ui/animation/opacity-animation';\nimport { FormattedCurrency } from '@ui/i18n/formatted-currency';\nexport function CheckoutProductSummary({\n  showBillingLine = true\n}) {\n  const {\n    status,\n    product,\n    price\n  } = useCheckoutProduct();\n  if (status === 'error' || status !== 'pending' && (!product || !price)) {\n    return null;\n  }\n  return <div>\n      <h2 className=\"mb-30 text-2xl\">\n        <Trans message=\"Summary\" />\n      </h2>\n      {status === 'pending' ? <LoadingSkeleton key=\"loading-skeleton\" /> : <ProductSummary product={product} price={price} showBillingLine={showBillingLine} />}\n    </div>;\n}\nfunction ProductSummary({\n  product,\n  price,\n  showBillingLine\n}) {\n  return <m.div>\n      <div className=\"mb-6 text-xl font-semibold\">{product.name}</div>\n      {product.description && <div className=\"text-sm text-muted\">{product.description}</div>}\n      <FormattedPrice priceClassName=\"font-bold text-4xl\" periodClassName=\"text-muted text-xs\" variant=\"separateLine\" price={price} className=\"mt-32\" />\n      <ProductFeatureList product={product} />\n      {showBillingLine && <div className=\"mt-32 flex items-center justify-between gap-24 border-t pt-24 font-medium\">\n          <div>\n            <Trans message=\"Billed today\" />\n          </div>\n          <div>\n            <FormattedCurrency value={price.amount} currency={price.currency} />\n          </div>\n        </div>}\n    </m.div>;\n}\nfunction LoadingSkeleton() {\n  return <m.div {...opacityAnimation} className=\"max-w-180\">\n      <Skeleton className=\"mb-6 text-xl\" />\n      <Skeleton className=\"text-sm\" />\n      <Skeleton className=\"mt-32 text-4xl\" />\n    </m.div>;\n}","import { useEffect, useRef, useState } from 'react';\nimport { loadScript } from '@paypal/paypal-js';\nimport { useProducts } from '@common/billing/pricing-table/use-products';\nimport { useSettings } from '@ui/settings/use-settings';\nexport function usePaypal({\n  productId,\n  priceId\n}) {\n  const {\n    data\n  } = useProducts();\n  const paypalLoadStarted = useRef(false);\n  const paypalButtonsRendered = useRef(false);\n  const [paypalIsLoaded, setPaypalIsLoaded] = useState(false);\n  const paypalElementRef = useRef(null);\n  const {\n    base_url,\n    billing: {\n      stripe: {\n        enable: stripeEnabled\n      },\n      paypal: {\n        enable: paypalEnabled,\n        public_key\n      }\n    }\n  } = useSettings();\n  useEffect(() => {\n    if (!paypalEnabled || !public_key || paypalLoadStarted.current) return;\n    loadScript({\n      clientId: public_key,\n      intent: 'subscription',\n      vault: true,\n      disableFunding: stripeEnabled ? 'card' : undefined\n    }).then(() => {\n      setPaypalIsLoaded(true);\n    });\n    paypalLoadStarted.current = true;\n  }, [public_key, paypalEnabled, stripeEnabled]);\n  useEffect(() => {\n    if (!paypalIsLoaded || !window.paypal?.Buttons || !paypalElementRef.current || !data?.products.length || !productId || !priceId || paypalButtonsRendered.current) return;\n    const product = data.products.find(p => p.id === parseInt(productId));\n    const price = product?.prices.find(p => p.id === parseInt(priceId));\n    window.paypal.Buttons({\n      style: {\n        label: 'pay'\n      },\n      createSubscription: (data, actions) => {\n        return actions.subscription.create({\n          application_context: {\n            shipping_preference: 'NO_SHIPPING'\n          },\n          plan_id: price?.paypal_id\n        });\n      },\n      onApprove: (data, actions) => {\n        actions.redirect(`${base_url}/checkout/${productId}/${priceId}/paypal/done?subscriptionId=${data.subscriptionID}&status=success`);\n        return Promise.resolve();\n      },\n      onError: e => {\n        location.href = `${base_url}/checkout/${productId}/${priceId}/paypal/done?status=error`;\n      }\n    }).render(paypalElementRef.current).then(() => {\n      paypalButtonsRendered.current = true;\n    });\n  }, [productId, priceId, data, paypalIsLoaded, base_url]);\n  return {\n    paypalElementRef,\n    stripeIsEnabled: public_key != null && paypalEnabled\n  };\n}","import { Navigate, useParams } from 'react-router';\nimport { Trans } from '@ui/i18n/trans';\nimport { CheckoutLayout } from './checkout-layout';\nimport { CheckoutProductSummary } from './checkout-product-summary';\nimport { usePaypal } from './paypal/use-paypal';\nimport { StripeElementsForm } from './stripe/stripe-elements-form';\nimport { Fragment } from 'react';\nimport { useProducts } from '../pricing-table/use-products';\nimport { FullPageLoader } from '@ui/progress/full-page-loader';\nimport { useSettings } from '@ui/settings/use-settings';\nexport function Checkout() {\n  const {\n    productId,\n    priceId\n  } = useParams();\n  const productQuery = useProducts();\n  const {\n    paypalElementRef\n  } = usePaypal({\n    productId,\n    priceId\n  });\n  const {\n    base_url,\n    billing: {\n      stripe\n    }\n  } = useSettings();\n  if (productQuery.isLoading) {\n    return <FullPageLoader screen />;\n  }\n  const product = productQuery.data?.products.find(p => p.id === parseInt(productId));\n  const price = product?.prices.find(p => p.id === parseInt(priceId));\n\n  // make sure product and price exists in backend\n  if (!product || !price || productQuery.status === 'error') {\n    return <Navigate to=\"/pricing\" replace />;\n  }\n  return <CheckoutLayout>\n      <Fragment>\n        <h1 className=\"mb-40 text-4xl\">\n          <Trans message=\"Checkout\" />\n        </h1>\n        {stripe.enable ? <Fragment>\n            <StripeElementsForm productId={productId} priceId={priceId} submitLabel={<Trans message=\"Upgrade\" />} type=\"subscription\" returnUrl={`${base_url}/checkout/${productId}/${priceId}/stripe/done`} />\n            <Separator />\n          </Fragment> : null}\n        <div ref={paypalElementRef} />\n        <div className=\"mt-30 text-xs text-muted\">\n          <Trans message=\"You’ll be charged until you cancel your subscription. Previous charges won’t be refunded when you cancel unless it’s legally required. Your payment data is encrypted and secure. By subscribing your agree to our terms of service and privacy policy.\" />\n        </div>\n      </Fragment>\n      <CheckoutProductSummary />\n    </CheckoutLayout>;\n}\nfunction Separator() {\n  return <div className=\"relative my-20 text-center before:absolute before:left-0 before:top-1/2 before:h-1 before:w-full before:-translate-y-1/2 before:bg-divider\">\n      <span className=\"relative z-10 bg px-10 text-sm text-muted\">\n        <Trans message=\"or\" />\n      </span>\n    </div>;\n}","import { CheckoutLayout } from '../checkout-layout';\nimport { useParams, useSearchParams } from 'react-router';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useEffect, useRef, useState } from 'react';\nimport { message } from '@ui/i18n/message';\nimport { CheckoutProductSummary } from '../checkout-product-summary';\nimport { BillingRedirectMessage } from '../../billing-redirect-message';\nimport { useNavigate } from '@common/ui/navigation/use-navigate';\nimport { apiClient } from '@common/http/query-client';\nimport { useSettings } from '@ui/settings/use-settings';\nexport function CheckoutStripeDone() {\n  const {\n    productId,\n    priceId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    billing: {\n      stripe_public_key\n    }\n  } = useSettings();\n  const [params] = useSearchParams();\n  const clientSecret = params.get('payment_intent_client_secret');\n  const [messageConfig, setMessageConfig] = useState();\n  const stripeInitiated = useRef();\n  useEffect(() => {\n    if (stripeInitiated.current) return;\n    loadStripe(stripe_public_key).then(async stripe => {\n      if (!stripe || !clientSecret) {\n        setMessageConfig(getRedirectMessageConfig());\n        return;\n      }\n      stripe.retrievePaymentIntent(clientSecret).then(async ({\n        paymentIntent\n      }) => {\n        if (paymentIntent?.status === 'succeeded') {\n          await storeSubscriptionDetailsLocally(paymentIntent.id);\n          setMessageConfig(getRedirectMessageConfig('succeeded', productId, priceId));\n          window.location.href = '/billing';\n        } else {\n          setMessageConfig(getRedirectMessageConfig(paymentIntent?.status, productId, priceId));\n        }\n      });\n    });\n    stripeInitiated.current = true;\n  }, [stripe_public_key, clientSecret, priceId, productId]);\n  if (!clientSecret) {\n    navigate('/');\n    return null;\n  }\n  return <CheckoutLayout>\n      <BillingRedirectMessage config={messageConfig} />\n      <CheckoutProductSummary showBillingLine={false} />\n    </CheckoutLayout>;\n}\nfunction getRedirectMessageConfig(status, productId, priceId) {\n  switch (status) {\n    case 'succeeded':\n      return {\n        message: message('Subscription successful!'),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing'\n      };\n    case 'processing':\n      return {\n        message: message(\"Payment processing. We'll update you when payment is received.\"),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing'\n      };\n    case 'requires_payment_method':\n      return {\n        message: message('Payment failed. Please try another payment method.'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId)\n      };\n    default:\n      return {\n        message: message('Something went wrong'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId)\n      };\n  }\n}\nfunction errorLink(productId, priceId) {\n  return productId && priceId ? `/checkout/${productId}/${priceId}` : '/';\n}\nfunction storeSubscriptionDetailsLocally(paymentIntentId) {\n  return apiClient.post('billing/stripe/store-subscription-details-locally', {\n    payment_intent_id: paymentIntentId\n  });\n}","import { CheckoutLayout } from '../checkout-layout';\nimport { useParams, useSearchParams } from 'react-router';\nimport { useEffect, useRef, useState } from 'react';\nimport { message } from '@ui/i18n/message';\nimport { CheckoutProductSummary } from '../checkout-product-summary';\nimport { BillingRedirectMessage } from '../../billing-redirect-message';\nimport { apiClient } from '@common/http/query-client';\nexport function CheckoutPaypalDone() {\n  const {\n    productId,\n    priceId\n  } = useParams();\n  const [params] = useSearchParams();\n  const alreadyStoredLocally = useRef(false);\n  const [messageConfig, setMessageConfig] = useState();\n  useEffect(() => {\n    const subscriptionId = params.get('subscriptionId');\n    const status = params.get('status');\n    if (alreadyStoredLocally.current) {\n      return;\n    }\n    if (subscriptionId && status === 'success') {\n      storeSubscriptionDetailsLocally(subscriptionId).then(() => {\n        setMessageConfig(getRedirectMessageConfig('success', productId, priceId));\n        window.location.href = '/billing';\n      });\n    } else {\n      setMessageConfig(getRedirectMessageConfig(status, productId, priceId));\n    }\n    alreadyStoredLocally.current = true;\n  }, [priceId, productId, params]);\n  return <CheckoutLayout>\n      <BillingRedirectMessage config={messageConfig} />\n      <CheckoutProductSummary showBillingLine={false} />\n    </CheckoutLayout>;\n}\nfunction getRedirectMessageConfig(status, productId, priceId) {\n  switch (status) {\n    case 'success':\n      return {\n        message: message('Subscription successful!'),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing'\n      };\n    default:\n      return {\n        message: message('Something went wrong. Please try again.'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId)\n      };\n  }\n}\nfunction errorLink(productId, priceId) {\n  return productId && priceId ? `/checkout/${productId}/${priceId}` : '/';\n}\nfunction storeSubscriptionDetailsLocally(subscriptionId) {\n  return apiClient.post('billing/paypal/store-subscription-details-locally', {\n    paypal_subscription_id: subscriptionId\n  });\n}"],"names":["CheckoutLayout","children","left","right","useEffect","removeFromLocalStorage","Fragment","jsx","StaticPageTitle","Trans","Navbar","jsxs","CustomMenu","LocaleSwitcher","endpoint","productId","useCheckoutProduct","priceId","useParams","query","useQuery","fetchProduct","keepPreviousData","product","_a","price","p","apiClient","response","CheckoutProductSummary","showBillingLine","status","LoadingSkeleton","ProductSummary","m","FormattedPrice","ProductFeatureList","FormattedCurrency","opacityAnimation","Skeleton","usePaypal","data","useProducts","paypalLoadStarted","useRef","paypalButtonsRendered","paypalIsLoaded","setPaypalIsLoaded","useState","paypalElementRef","base_url","stripeEnabled","paypalEnabled","public_key","useSettings","loadScript","actions","e","Checkout","productQuery","stripe","FullPageLoader","Navigate","StripeElementsForm","Separator","CheckoutStripeDone","navigate","useNavigate","stripe_public_key","params","useSearchParams","clientSecret","messageConfig","setMessageConfig","stripeInitiated","loadStripe","getRedirectMessageConfig","paymentIntent","storeSubscriptionDetailsLocally","BillingRedirectMessage","message","errorLink","paymentIntentId","CheckoutPaypalDone","alreadyStoredLocally","subscriptionId"],"mappings":"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"}