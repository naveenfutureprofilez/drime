{"version":3,"mappings":"4yCAEa,MAAAA,GAAWC,OAAK,CAAC,CAC5B,IAAAC,EACA,UAAAC,EACA,OAAAC,EAAS,QACX,IAAM,CACE,MAAAC,EAAYC,GAAmBJ,CAAG,EAGjC,OAAAK,MAAC,OAAI,UAAWC,EAAK,gDAAiDJ,EAAQD,CAAS,EAAG,wBAAyBE,EAAY,CACpI,OAAQA,CAAA,EACN,MAAW,EACjB,CAAC,EACKI,OAAe,IACrB,SAASH,GAAmBJ,EAAK,CAC/B,KAAM,CAACQ,EAAOC,CAAQ,EAAIC,WAAS,IAAI,EACvCC,mBAAU,IAAM,CACR,MAAAC,EAASL,GAAS,IAAIP,CAAG,EAC/B,GAAIY,EAEE,OAAOA,GAAW,SACpBH,EAASG,CAAM,EAGfA,EAAO,KAAKH,CAAQ,MAGjB,CACC,MAAAI,EAAUC,GAAqBd,CAAG,EAC/BO,GAAA,IAAIP,EAAKa,CAAO,EACzBA,EAAQ,KAAYE,GAAA,CACTR,GAAA,IAAIP,EAAKe,CAAG,EACrBN,EAASM,CAAG,EACb,CACH,GACC,CAACf,CAAG,CAAC,EACDQ,CACT,CACA,SAASM,GAAqBd,EAAK,CACjC,OAAO,MAAMA,CAAG,EAAE,KAAiBgB,KAAS,MAAM,CACpD,CCzCO,MAAMC,EAAW,CAEtB,YAAYC,EAAUC,EAAW,CADjCC,EAAA,iBAAY,GAEV,KAAK,SAAWF,EAChB,KAAK,UAAYC,EACjB,KAAK,OAAO,CACd,CACA,OAAQ,CACN,aAAa,KAAK,OAAO,EACzB,KAAK,WAAa,KAAK,IAAI,EAAI,KAAK,SACtC,CACA,QAAS,CACF,eAAY,KAAK,MAClB,KAAK,SACP,aAAa,KAAK,OAAO,EAE3B,KAAK,QAAU,WAAW,KAAK,SAAU,KAAK,SAAS,CACzD,CACA,OAAQ,CACN,aAAa,KAAK,OAAO,CAC3B,CACF,CCjBA,MAAME,GAAiB,EACvB,SAASC,GAAmBC,EAAM,CAChC,OAAQA,EAAM,CACZ,IAAK,SACI,WACT,IAAK,UACI,SACT,QACS,UACX,CACF,CACO,MAAMC,GAAgBC,GAAO,EAAEC,GAAM,CAACC,EAAKC,KAAS,CACzD,OAAQ,CAAC,EACT,IAAK,CAACC,EAASC,IAAS,CACtB,MAAMC,EAAiBH,EAAM,SAAO,OAAS,EAAIP,GAC7CU,EAAiB,GACnBJ,EAAaK,GAAA,CACLA,EAAA,OAAO,OAAO,EAAGD,CAAc,EACtC,EAEH,MAAME,GAAUH,GAAA,YAAAA,EAAM,KAAMI,GAAO,CAAC,EAC9BC,GAAYL,GAAA,YAAAA,EAAM,OAAQ,WAC1BM,GAAWN,GAAA,YAAAA,EAAM,WAAYR,GAAmBa,CAAS,EACzDE,EAAQ,CACZ,MAAOD,EAAW,EAAI,IAAInB,GAAW,IAAMW,EAAI,EAAE,OAAOK,CAAO,EAAGG,CAAQ,EAAI,KAC9E,QAAAP,EACA,GAAGC,EACH,GAAIG,EACJ,KAAME,EACN,UAAUL,GAAA,YAAAA,EAAM,WAAY,gBAC5B,SAAAM,EACA,qBAAsBN,GAAA,YAAAA,EAAM,qBAC5B,sBAAuBA,GAAA,YAAAA,EAAM,uBAEzBQ,EAAaV,IAAM,OAAO,UAAeW,KAAE,KAAOF,EAAM,EAAE,EAC5DC,EAAa,GACfX,EAAaK,GAAA,CACLA,EAAA,OAAOM,CAAU,EAAID,CAAA,CAC5B,EAEDV,EAAaK,GAAA,CACLA,EAAA,OAAO,KAAKK,CAAK,EACxB,CAEL,EACA,OAAmBJ,GAAA,CACjB,MAAMO,EAAYZ,EAAM,SAAO,OAAgBS,GAAA,OACzC,OAAAJ,IAAYI,EAAM,KACpBI,EAAAJ,EAAM,QAAN,MAAAI,EAAa,QACN,IAEF,GACR,EACDd,EAAaK,GAAA,CACXA,EAAM,OAASQ,CAAA,CAChB,CACH,CACF,EAAE,CAAC,EACI,SAASE,IAAa,CAC3B,OAAOlB,GAAc,UACvB,CC/DgB,SAAAa,GAAMR,EAASC,EAAM,CACxBY,KAAE,IAAIb,EAASC,CAAI,CAChC,CACAO,GAAM,OAAS,CAACR,EAASC,IAAS,CACrBY,GAAA,EAAE,IAAIb,EAAS,CACxB,GAAGC,EACH,KAAM,SACP,CACH,EACAO,GAAM,SAAW,CAACR,EAASC,IAAS,CACvBY,GAAA,EAAE,IAAIb,EAAS,CACxB,GAAGC,EACH,KAAM,WACP,CACH,EACAO,GAAM,QAAU,CAACR,EAASC,IAAS,CACtBY,GAAA,EAAE,IAAIb,EAAS,CACxB,GAAGC,EACH,KAAM,UACP,CACH,ECpBgB,SAAAa,GAAqBC,EAAKC,EAAO,OAC/C,GAAIC,GAAM,aAAaF,CAAG,GAAKA,EAAI,SAAU,CACrC,MAAA5B,EAAW4B,EAAI,SAAS,KAC9B,GAAIC,GAAS,KAAM,CACX,MAAAE,GAAeN,EAAAzB,EAAS,SAAT,YAAAyB,EAAkBI,GACvC,OAAO,MAAM,QAAQE,CAAY,EAAIA,EAAa,CAAC,EAAIA,CACzD,CACA,OAAO/B,GAAA,YAAAA,EAAU,OACnB,CACF,CCTO,MAAMgC,GAAmBC,EAAc5C,MAAC,OAAK,GAAE,kLAAkL,CAAE,ECA7N6C,GAAcD,EAAc5C,MAAC,QAAK,EAAE,oDAAqD,GAAI,iBAAiB,ECMpH,SAAS8C,GAAKC,EAAO,CACpB,MACJ,SAAAC,EACA,SAAAC,EACA,QAAAC,EACA,aAAAC,EACA,SAAAC,EACA,UAAAxD,EACA,WAAAyD,EAAa,GACb,OAAAC,EAAS,eACT,YAAAC,EAAc,MACd,GAAAC,EACA,QAAAC,CACE,EAAAV,EACEW,EAAUC,SAAO,IAAI,EACrBC,EAAkBD,SAAO,IAAI,EAC7BE,EAAeC,KACfC,EAAqBC,GAAA,CACzB,OAAQA,EAAE,IAAK,CACb,IAAK,aACL,IAAK,YACHH,GAAA,MAAAA,EAAc,UAAU,CACtB,SAAU,KAEZ,MACF,IAAK,YACL,IAAK,UACHA,GAAA,MAAAA,EAAc,cAAc,CAC1B,SAAU,KAEZ,MACF,IAAK,YACL,IAAK,SACCH,EAAQ,UAAY,SAAS,gBACpBV,GAAA,MAAAA,KAEb,KAEJ,GAEIiB,EAAmBD,GAAA,CACvBA,EAAE,gBAAgB,EACdP,EACFA,EAAQO,CAAC,EAETN,EAAQ,QAAQ,OAClB,EAEIQ,EAAYC,GAAepB,CAAK,EACtC,IAAIqB,EAAYlB,GAAWC,GAAgB,WAAQN,GAAY,WAAU,cAAc,KAAK,KAAK,EAAKE,EAAM,WAAasB,EAAA,aAAatB,EAAM,UAAW,CACrJ,KAAMmB,EAAU,UAAU,KAC1B,OAAQ,GACR,UAAWjE,EAAK8C,EAAM,UAAU,MAAM,UAAWmB,EAAU,UAAU,MAAM,EAC5E,EACGf,GAAgBiB,IAClBA,QAAaE,GAAQ,OAAOnB,EAAc,QAAQ,SAC7C,SACHiB,CAAA,IAEJ,MAAMG,EAAUhB,EAChB,cAAQgB,EAAQ,UAAUlB,EAAa,EAAI,OAAW,IAAKK,EAAS,GAAAF,EAAQ,UAAWH,EAAaU,EAAgB,OAAW,QAASV,EAAaY,EAAc,OAAW,UAAWhE,EAAK,mIAAoI,4EAA6EwD,GAAW,iBAAkBH,EAAQkB,GAAezB,CAAK,EAAGmB,EAAU,KAAM,CAACjB,GAAYI,GAAc,iDAAkDzD,EAAWqD,GAAY,gCAAgC,EAC1lB,UAAAmB,EACApE,MAAA,OAAI,UAAU,8CACZ,SAAAoD,CACH,GACCJ,GAAYhD,MAACyE,GAAW,KAAKb,EAAiB,UAAW3D,EAAK,mCAAoCiE,EAAU,WAAW,EAAG,QAAcF,GAAA,CACzIA,EAAE,gBAAgB,EACThB,GACX,EAAG,SAAU,GACP,SAAChD,MAAA2C,GAAA,CAAiB,UAAU,QAAQ,MAAM,OAAO,OAAO,OAAO,CACjE,EACJ,GACJ,CACA,SAASwB,GAAe,CACtB,KAAAO,EACA,SAAA1B,CACF,EAAG,CACD,OAAQ0B,EAAM,CACZ,IAAK,KACI,OACL,UAAW,CACT,KAAM,KACN,OAAQ,OACV,EACA,KAAMzE,EAAK,iDAAkD,CAAC+C,GAAY,MAAM,EAChF,YAAa,kBAEjB,IAAK,KACI,OACL,UAAW,CACT,KAAM,KACN,OAAQ,OACV,EACA,KAAM/C,EAAK,oBAAqB,CAAC+C,GAAY,MAAM,EACnD,YAAa,kBAEjB,IAAK,KACI,OACL,UAAW,CACT,KAAM,KACN,OAAQ,QACV,EACA,KAAM/C,EAAK,uBAAwB,CAAC+C,GAAY,OAAO,EACvD,YAAa,kBAEjB,QACS,OACL,UAAW,CACT,KAAM,KACN,OAAQ,OACV,EACA,KAAM/C,EAAK,qBAAsB,CAAC+C,GAAY,OAAO,EACrD,YAAa,iBAEnB,CACF,CACA,SAASwB,GAAe,CACtB,MAAAG,CACF,EAAG,CACD,OAAQA,EAAO,CACb,IAAK,UACI,mCACT,IAAK,WACI,iDACT,IAAK,SACI,6CACT,QACS,yBACX,CACF,CCvIO,MAAMC,GAAYhC,EAAc5C,MAAC,QAAK,EAAE,kGAAmG,GAAI,eAAe,ECDrJ,SAAA6E,GAAiBC,EAAIC,EAAY,OAAQ,CACvDD,EAAG,iBAAiB,UAAU,EAAE,QAAad,GAAA,CAC3CgB,GAAchB,EAAGe,CAAS,EAC3B,CACH,CACsB,eAAAC,GAAcF,EAAIC,EAAY,OAAQ,CACpD,MACJ,KAAAE,CAAA,EACE,MAAMC,GAAA,WAAO,yBAAyC,+QACrDJ,EAAG,QAAQ,cACdA,EAAG,UAAU,IAAIC,IAAc,OAAS,YAAc,YAAY,EAClEE,EAAK,iBAAiBH,CAAE,EAE5B,CCZO,MAAMK,GAAiBvC,EAAc5C,MAAC,QAAK,EAAE,yHAA0H,GAAI,oBAAoB,ECAzLoF,GAAiBxC,EAAc5C,MAAC,QAAK,EAAE,gIAAiI,GAAI,oBAAoB,ECMtM,SAASqF,GAAmB,CACjC,MAAAC,EACA,sBAAAC,EACA,cAAAC,EACA,kBAAAC,CACF,EAAG,CACD,KAAM,CAACC,EAAsBC,CAAuB,EAAItF,EAAA,SAAS,CAAE,GAC7DuF,EAA0BF,EAAqB,SAAWD,EACzD,OAAAI,EAAA,KAAC,MAAI,WAAU,6BAClB,UAAA7F,MAAC,OAAI,UAAU,uBACb,eAAC8F,EAAO,SAAQ,UAAU,KAAK,MAAM,UAAWF,QAA2BR,GAAe,UAAMD,GAAe,IAAI,QAAS,IAAM,CAEhIQ,EADEC,EACsB,CAAE,EAEFN,EAAM,IAAI,CAACS,EAAOC,IAAU,gBAAiBD,EAAQC,EAAQ,EAAE,EAAE,OAAgBA,OAAU,EAAE,CAF3F,CAG5B,EAEG,SAAAJ,EAA2B5F,MAAAiG,EAAA,CAAM,QAAQ,yBAAyB,EAAKjG,EAAA,IAACiG,EAAM,SAAQ,sBAAuB,EAChH,GACF,EACCX,EAAM,IAAI,CAACS,EAAOC,IACf,gBAAiBD,EAEfL,EAAqB,SAASM,CAAK,EAC9BhG,EAAA,IAACkG,EACD,mBAAAH,EAAM,MAAM,IAAI,CAACI,EAAaH,IAAUhG,EAAA,IAACoG,GAAuC,OAAOD,EAAa,QAAS,IAAMZ,EAAsBY,EAAY,SAAS,EAAG,WAAYX,IAAkBW,EAAY,SAA9I,YAAUH,CAAK,EAA0I,CAAE,GADzMA,CAElB,EAGEH,EAAA,YAAI,UAAU,6EAAyF,QAAS,IAAMF,EAAwBU,GAAQ,CAAC,GAAGA,EAAML,CAAK,CAAC,EACxK,UAAChG,MAAAiG,EAAA,CAAM,QAAQ,yCAAyC,OAAQ,CAClE,MAAOF,EAAM,MAAM,QAClB,EACC/F,MAACsG,GAAsB,WAAU,YAAa,KAJoDN,CAKpG,EAIEhG,MAAAoG,GAAA,CAA2B,MAAAL,EAAc,QAAS,IAAMR,EAAsBQ,EAAM,SAAS,EAAG,WAAYP,IAAkBO,EAAM,WAAhHC,CAA2H,CACxJ,CACD,GACJ,CACA,SAASI,GAAe,CACtB,MAAAL,EACA,QAAAtC,EACA,WAAA8C,CACF,EAAG,CACM,OAAAV,OAAC,OAAI,QAAApC,EAAkB,UAAWxD,EAAK,sCAAuCsG,EAAa,4BAA8B,oBAAoB,EAChJ,UAAAvG,MAACwG,IAAiB,MAAAT,EAAc,EAC/B/F,EAAA,WAAI,UAAU,gBAAiB,WAAM,OAAO,CAC/C,GACJ,CACO,SAASwG,GAAiB,CAC/B,MAAAT,CACF,EAAG,CACM,OAAAF,EAAA,KAAC,MAAI,WAAU,uCACjB,UAAAE,EAAM,KAAK,IAAI,CAACU,EAAMT,IAAUD,EAAM,KAAK,OAAS,IAAMC,EAAQhG,MAAC,OAAgB,UAAU,gBACvF,YADsEgG,CAEzE,SAAU,MAAiB,WAAAS,EAAK,MAAbT,CAAc,CAAM,SAC1C,MAAI,eAAED,EAAM,YAAW,CAC1B,GACJ,CCzDO,SAASW,GAAoB,CAClC,MAAAC,CACF,EAAG,CACD,KAAM,CAACnB,EAAeoB,CAAgB,EAAIvG,WAAS,IAAM,CAC5C,UAAA0F,KAASY,EAAM,MACpB,KAAE,gBAAiBZ,GACrB,OAAOA,EAAM,UAGV,SACR,EACKc,EAAgBC,UAAQ,IAAM,CACvB,UAAAf,KAASY,EAAM,MACxB,GAAI,gBAAiBZ,GACR,UAAAI,KAAeJ,EAAM,MAC1B,GAAAI,EAAY,YAAcX,EACrB,OAAAW,UAGFJ,EAAM,YAAcP,EACtB,OAAAO,CAEX,EACC,CAACY,EAAOnB,CAAa,CAAC,EAClB,OAAAK,EAAA,KAACkB,GAAO,MAAK,aAChB,UAAA/G,MAACgH,IAAa,YAAW,GAAC,cAAehH,EAAA,IAAC4E,KAAU,EAAI,MAAM,cAAc,cAAUqC,GAAe,IACnG,eAAChB,EAAM,SAAQ,kBAAmB,GACpC,EACAJ,OAACqB,GAAW,SAAQ,YAClB,UAACrB,OAAA,OAAI,UAAU,qCACb,UAAA7F,MAAC8C,IAAK,UAAU,QAAQ,OAAO,gBAC5B,WAAM,UACT,EACC9C,EAAA,WAAI,UAAU,wDACZ,WAAM,QACT,GACF,EACA6F,OAAC,MAAI,WAAU,4BACb,UAAC7F,MAAAqF,GAAA,CAAmB,MAAOsB,EAAM,MAAO,sBAAuBC,EAAkB,cAAApB,EAA8B,kBAAmBmB,EAAM,iBAAmB,GAC1JE,GAAiB7G,MAACmH,GAAY,OAAON,CAAe,IACvD,GACF,CACF,GACJ,CACA,SAASM,GAAY,CACnB,MAAApB,CACF,EAAG,CACK,MAAAqB,EAAUzD,SAAO,IAAI,EACrB0D,EAAc,OAAO,KAAKtB,EAAM,WAAW,EAAE,IAAI,MAAM,EACvDuB,EAAmBD,EAAY,QAAQtB,EAAM,UAAU,EACvDwB,EAAQ,OAAO,OAAOxB,EAAM,WAAW,EACtC,OAAAF,EAAA,KAAC,MAAI,WAAU,2BAClB,UAAA7F,MAAC,OAAI,UAAU,oCACb,SAACA,EAAA,IAAAwG,GAAA,CAAiB,MAAAT,CAAc,GAClC,EACAF,OAAC,MAAI,WAAU,OACb,UAAC7F,MAAA,OAAI,UAAU,8BACZ,SAAAqH,EAAY,IAAI,CAACG,EAAYxB,IAAWhG,MAAA,OAAI,UAAWC,EAAK,0CAA2C+F,GAASsB,GAAoB,cAAc,EAC9I,SADsJE,CAAA,EAAAxB,CAEzJ,CAAM,CACV,GACChG,EAAA,WAAI,UAAU,8CACb,eAAC,MACC,UAAAA,MAAC,OAAK,WAAU,eAAe,IAAKoH,EACjC,SAAAG,EAAM,IAAI,CAACE,EAAMzB,IAAUhG,MAAC0H,GAAgB,eAAeJ,IAAqBtB,EAAsC,KAAAyB,GAA1B,GAAG1B,EAAM,IAAI,IAAIC,CAAK,EAAgB,CAAE,CACvI,EACF,GACF,GACF,CACF,GACJ,CACA,MAAM0B,GAAkBhI,OAAK,CAAC,CAC5B,KAAA+H,EACA,cAAAE,CACF,IAAM,CACE,MAAAC,EAAMjE,SAAO,IAAI,EACvBrD,mBAAU,IAAM,CACd,MAAMwE,EAAK8C,EAAI,QACf,OAAA5C,GAAcF,EAAI,OAAO,EAClB,IAAM,CACX,OAAOA,EAAG,QAAQ,YAEtB,EAAG,CAAE,GACG9E,EAAA,YAAK,UAAWC,EAAK,sBAAuB0H,GAAiB,cAAc,EAC/E,SAAA3H,EAAA,IAAC,QAAK,UAAU,eAAe,IAAA4H,EAC5B,SAAAH,EAAO;AAAA,EACV,CACF,EACJ,CAAC,EACD,SAASR,IAAiB,CACxB,aAAQnB,EAAO,SAAQ,UAAU,UAAU,YAAY,YAAY,IAAI,SAAQ,GAAC,KAAK,oCAAoC,KAAK,MAC1H,eAACG,EAAM,SAAQ,eAAe,CAChC,EACJ,CCtGO,MAAM4B,GAAiBzG,GAAO,EAAEC,GAAM,CAACC,EAAKC,KAAS,CAC1D,OAAQ,KACR,KAAM,OACN,oBAAqB,KACrB,WAAY,CAACuG,EAAQC,IACZ,IAAI,QAAmBC,GAAA,CAC5B1G,EAAaK,GAAA,CACXA,EAAM,OAASmG,EACfnG,EAAM,KAAOoG,EACbpG,EAAM,oBAAsBqG,CAAA,CAC7B,EACF,EAEH,kBAA4BC,GAAA,UACtBC,GAAA9F,EAAAb,EAAA,GAAE,sBAAF,MAAA2G,EAAA,KAAA9F,EAAwB6F,GAC5B3G,EAAaK,GAAA,CACXA,EAAM,OAAS,KACfA,EAAM,KAAO,OACbA,EAAM,oBAAsB,KAC7B,CACH,CACF,EAAE,CAAC,EACUwG,GAAaN,GAAe,WAAW,WACvCO,GAAuBH,GAAA,CACnBJ,GAAA,WAAW,kBAAkBI,CAAK,CACnD,ECrBMI,GAAsB7G,EAAQ,uCAAuC,EACpE,SAAS8G,GAAmB/F,EAAKgG,EAAiBF,GAAqB7F,EAAOgG,EAAc,aAC7F/F,GAAM,aAAaF,CAAG,KAAK2F,GAAA9F,EAAAG,EAAI,WAAJ,YAAAH,EAAc,OAAd,MAAA8F,EAAoB,eACjDC,GAAWzB,GAAqB,CAC9B,MAAOnE,EAAI,SAAS,KACrB,EAEDP,GAAM,OAAOM,GAAqBC,EAAKC,CAAK,GAAK+F,EAAgB,CAC/D,QAAQE,GAAAC,EAAAnG,EAAI,WAAJ,YAAAmG,EAAc,OAAd,YAAAD,EAAoB,OAC5B,GAAGD,CAAA,CACJ,CAEL,CChBO,SAASG,IAAc,CAC5B,MAAMC,EAAiBC,KACjBC,EAAWC,KACV,OAAAC,EAAA,YAAY,CAACxF,EAAIyF,IAAY,CAE5B,MAAAC,EAAUC,GAAWL,CAAQ,IAAMK,GAAWC,GAAY5F,EAAIsF,EAAS,QAAQ,CAAC,EACtFF,EAAepF,EAAI,CACjB,GAAGyF,EACH,SAASA,GAAA,YAAAA,EAAS,WAAY,IAASC,CAAA,CACxC,GACA,CAACN,EAAgBE,CAAQ,CAAC,CAC/B,CCZgB,SAAAO,GAAcC,EAAKrB,EAAO,QAC/B7F,EAAAmH,KAAA,MAAAnH,EAAA,MAAM,YAAYkH,EAAKrB,EAClC,CACO,SAASuB,GAAiBF,EAAK,QAC3BlH,EAAAmH,KAAA,MAAAnH,EAAA,MAAM,eAAekH,EAChC,CCLA,SAASG,GAASC,EAAI,CACpB,MAAO,YAAYA,CAAE,EACvB,CACgB,SAAAC,GAAUC,EAAOX,EAAS,CAClC,MAAAY,EAAMZ,EAAQ,UAAY,SAC1Ba,EAAc,GACdC,EAAc,GACpB,IAAIC,EAAW,GASf,GARAJ,EAAM,QAAgBK,GAAA,CAChB,WAAYA,GAAQA,EAAK,OAC3BH,EAAY,KAAKG,CAAI,EACZ,QAASA,GAClBF,EAAY,KAAKE,CAAI,CACvB,CAED,EACGH,GAAA,MAAAA,EAAa,OAAQ,CACvB,MAAMI,EAAUjB,EAAQ,SAAW,CAAC,GAAG,EACjCkB,EAAWP,EAAM,IAAIQ,GAAK,GAAGA,EAAE,MAAM,IAAIF,EAAQ,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK,GAAG,EACtEG,EAAgBC,GAAW,UAAU,2CAA2CH,CAAQ,gBAAiB,CAC7G,KAAM,MACN,GAAIV,GAASR,EAAQ,EAAE,EACvB,MAAOA,EAAQ,eACf,SAAUY,CAAA,CACX,EACDG,EAAS,KAAKK,CAAa,CAC7B,CACA,GAAIN,GAAA,MAAAA,EAAa,OAAQ,CACvB,MAAMQ,EAAqBR,EAAY,IAAI,MAAMS,GAAc,CACvD,MAAAC,EAAa,MAAM,KAAKZ,EAAI,MAAM,QAAQ,EAAE,KAAgBa,GACzDA,EAAQ,SAAWF,EAAW,MACtC,EACD,GAAIC,EACF,OAAOA,EAAW,OAEpB,MAAME,EAAW,IAAI,SAASH,EAAW,OAAQ,OAAOvB,GAAA,MAAAA,EAAS,UAAYA,EAAQ,UAAUuB,EAAW,GAAG,EAAIA,EAAW,GAAG,IAAKA,EAAW,WAAW,EACtJ,OAAAX,EAAA,MAAM,IAAIc,CAAQ,EACfA,EAAS,MAAK,CACtB,EACUX,IAAS,OAAOO,CAAkB,CAC/C,CACO,eAAQ,IAAIP,CAAQ,CAC7B,CC1CO,SAASY,IAA0B,CAClC,MAAAC,EAAS,OAAO,cAAgB,OACtC,GAAI,EAACA,GAAA,MAAAA,EAAQ,MAAOC,KACX,OACL,yBAA0B,GAC1B,uBAAwB,CAAC,GAG7B,MAAMC,EAAS,IAAI,IAAIF,EAAO,GAAG,EAAE,aAC5B,OACL,yBAAsCE,EAAO,IAAI,kBAAkB,IAAM,OACzE,uBAAwB,OAAO,YAAYA,CAAM,EAErD,CCPO,SAASC,IAAqB,CAC7B,MACJ,yBAAAC,GACEL,GAAwB,EACtBM,EAA0BvH,SAAO,EAAK,EACtCwH,EAAcC,GAA2BC,KAAE,IAAI,EAC/C,CACJ,uBAAAC,GACEC,GAAiB,EACfC,EAAgBxC,cAAuByC,GAAA,OAC3C,OAAQA,EAAQ,KAAM,CACpB,IAAK,YACH,MAAMC,EAAU,GACZ,OAAAtJ,EAAAqJ,EAAQ,OAAO,aAAf,MAAArJ,EAA2B,SACrBsJ,EAAA,OAASD,EAAQ,OAAO,WAAW,QAEzCA,EAAQ,OAAO,WACjBC,EAAQ,SAAWC,GAAUR,EAAY,SAAUM,EAAQ,OAAO,SAAU,CAC1E,WAAY,CAACG,EAAGC,IAAWA,CAAA,CAC5B,GAEIC,GAAmBJ,CAAO,EACnC,IAAK,eACCD,EAAQ,OACIpC,GAAA,mBAAoBoC,EAAQ,MAAM,MAAM,EAC5C9B,GAAA,CAAC8B,EAAQ,KAAK,EAAG,CACzB,GAAI,kBACJ,eAAgB,GACjB,GAEDjC,GAAiB,kBAAkB,EAErC,OACF,IAAK,gBACH,OAAOH,GAAcoC,EAAQ,KAAMA,EAAQ,KAAK,EAClD,IAAK,iBACHH,EAAuBG,EAAQ,OAAO,EACtC,OACF,IAAK,gBACH,OAAOM,GAAiBN,EAAQ,KAAMA,EAAQ,KAAK,CAEvD,GACC,CAACN,EAAaG,CAAsB,CAAC,EACxChL,mBAAU,IAAM,CACd,MAAM0L,EAAqBhI,GAAA,CACrBiI,GAAkBjI,CAAC,GAAKkI,GAAelI,CAAC,GAC1CwH,EAAcxH,EAAE,IAAI,CACtB,EAEK,+BAAiB,UAAWgI,CAAa,EAC5Cf,GAA4B,CAACC,EAAwB,UACvD,OAAO,YAAY,CACjB,OAAQ,wBACR,KAAM,aACL,GAAG,EACNA,EAAwB,QAAU,IAE7B,IAAM,CACJ,2BAAoB,UAAWc,CAAa,EACrD,EACC,CAACR,EAAeP,CAAwB,CAAC,EACrC,IACT,CACA,SAASgB,GAAkB,EAAG,OACrB,QAAA7J,EAAA,EAAE,OAAF,YAAAA,EAAQ,UAAW,sBAC5B,CACA,SAAS8J,GAAe,EAAG,CACzB,OAAO,IAAI,IAAI,EAAE,MAAM,EAAE,WAAa,OAAO,SAAS,QACxD,CACA,SAASH,GAAiBI,EAAMlE,EAAO,CACrC,MAAMmE,EAASD,IAAS,OAAS,SAAS,KAAO,SAAS,KACpDE,EAAWF,IAAS,OAAS,MAAQ,QACvC,IAAAG,EAAaF,EAAO,cAAc,iBAAiB,EAClDnE,GAKEqE,IACUA,EAAA,SAAS,cAAcD,CAAQ,EAC5CC,EAAW,GAAK,iBAChBF,EAAO,YAAYE,CAAU,GAE/BA,EAAW,UAAYrE,GATnBqE,GACFA,EAAW,OAAO,CAUxB,CC3FgB,SAAAC,GAAgBjD,EAAKkD,EAAe,KAAM,CACxD,KAAM,CAACC,EAAaC,CAAc,EAAIrM,WAAS,IACtCsM,GAAoBrD,EAAKkD,CAAY,CAC7C,EACKI,EAAoB3E,GAAA,CACxB,MAAM4E,EAAe5E,aAAiB,SAAWA,EAAMwE,CAAW,EAAIxE,EACtEyE,EAAeG,CAAY,EAC3BC,GAAkBxD,EAAKuD,CAAY,GAKrCvM,mBAAU,IAAM,CACd,MAAMyM,EAA+BC,GAAA,SAC/B5K,EAAA4K,EAAM,SAAN,YAAA5K,EAAc,OAAQkH,GACToD,EAAAM,EAAM,OAAO,QAAQ,CACtC,EAEK,+BAAiB,UAAWD,CAAmB,EAC/C,IAAM,OAAO,oBAAoB,UAAWA,CAAmB,GACrE,CAACzD,CAAG,CAAC,EACD,CAACmD,EAAaG,CAAQ,CAC/B,CACgB,SAAAD,GAAoBrD,EAAKkD,EAAe,KAAM,CACxD,UAAO,OAAW,IACb,OAAAA,EAEL,IACF,MAAMS,EAAO,OAAO,aAAa,QAAQ3D,CAAG,EAC5C,OAAO2D,GAAQ,KAAO,KAAK,MAAMA,CAAI,EAAIT,OAC3B,CACP,OAAAA,CACT,CACF,CACgB,SAAAM,GAAkBxD,EAAKrB,EAAO,CACxC,IACE,OAAO,OAAW,MACpB,OAAO,aAAa,QAAQqB,EAAK,KAAK,UAAUrB,CAAK,CAAC,EAC/C,qBAAc,IAAI,YAAY,UAAW,CAC9C,OAAQ,CACN,IAAAqB,EACA,SAAUrB,CACZ,CACD,EAAC,QAEU,CAEhB,CACF,CACO,SAASiF,GAAuB5D,EAAK,CACtC,IACE,OAAO,OAAW,KACb,oBAAa,WAAWA,CAAG,OAEtB,CAEhB,CACF,CCzDO,MAAM6D,GAAmBvK,EAAc5C,MAAC,QAAK,EAAE,8KAA+K,GAAI,sBAAsB,ECAxP,SAASoN,GAAK,CACnB,SAAAhK,EACA,eAAAiK,EACA,SAAAC,EACA,KAAAC,EACA,UAAA3N,EACA,GAAA8J,EACA,OAAA8D,CACF,EAAG,CACM,OAAAxN,EAAA,IAACyN,GAAc,IAAGF,EACrB,SAAAvN,EAAA,IAAC,QAAK,GAAA0J,EAAQ,OAAA8D,EAAgB,UAAA5N,EAAsB,SAAeoE,GAAA,CAEnEA,EAAE,gBAAgB,EACDqJ,GAAA,MAAAA,IACZE,EAAA,aAAaD,CAAQ,EAAEtJ,CAAC,GAE1B,SAAAZ,EACH,CACF,EACJ,CCjBO,SAASsK,GAAe,CAC7B,UAAA9N,EACA,OAAA+N,CACF,EAAG,CACD,aAAQ,MAAI,WAAW1N,EAAK,6CAA8C0N,EAAS,oBAAsB,gBAAiB/N,CAAS,EAC/H,SAAAI,MAAC4N,IAAe,gBAAe,GAAC,aAAW,kBAAkB,KAAK,KAAK,CACzE,EACJ,CCRO,SAASC,GAAmB,CACjC,MAAA1N,EACA,MAAA2N,EACA,YAAAC,EACA,OAAAC,EACA,UAAApO,EACA,KAAA8E,EAAO,KACP,YAAAuJ,EACA,YAAAC,EAAc,OAChB,EAAG,CACK,MAAAC,EAAQC,GAAiB1J,EAAMuJ,CAAW,EAChD,cAAQ,MAAI,WAAWhO,EAAK,cAAeL,CAAS,EAC/C,UAASO,GAAAH,EAAA,IAAC,OAAI,UAAWC,EAAKkO,EAAM,MAAOD,CAAW,EAAI,SAAM/N,CAAA,GAChE2N,SAAU,MAAI,WAAW7N,EAAKkO,EAAM,MAAO,gBAAgB,EAAI,SAAML,CAAA,GACrEC,SAAgB,MAAI,WAAW9N,EAAKkO,EAAM,YAAa,YAAY,EAC/D,SACHJ,CAAA,GACDC,GAAUhO,EAAA,IAAC,MAAI,WAAU,QAAS,SAAOgO,EAAA,CAC5C,GACJ,CACA,SAASI,GAAiB1J,EAAMuJ,EAAa,CAC3C,OAAQvJ,EAAM,CACZ,IAAK,KACI,OACL,MAAOuJ,GAAe,OACtB,MAAO,UACP,YAAa,WAEjB,IAAK,KACI,OACL,MAAOA,GAAe,OACtB,MAAO,YACP,YAAa,WAEjB,QACS,OACL,MAAOA,GAAe,QACtB,MAAO,UACP,YAAa,YAEnB,CACF,CC1CO,MAAMI,GAAoBzL,EAAc5C,MAAC,QAAK,EAAE,kBAAmB,GAAI,uBAAuB,ECAxFsO,GAAwB1L,EAAc5C,MAAC,OAAK,GAAE,kQAAkQ,CAAO,ECC9TuO,GAAS,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EACpGC,GAAyBC,aAAW,CAAC,CAChD,KAAA/J,EACA,MAAAgK,EACA,mBAAAC,EACA,MAAAhK,CACF,EAAGiD,IAAQ,CACH,MACJ,QAAAgH,EACA,QAAAC,CACF,EAAI/H,UAAQ,IAAM,CACV,MAAAgI,EAAUH,GAAsBD,GAAS,GACzCK,EAAOD,EAAQ,MAAM,EAAE,EAAE,OAAO,CAACE,EAAOC,IAAQA,EAAI,WAAW,CAAC,EAAID,EAAOF,EAAQ,MAAM,EACxF,OACL,QAASJ,EAAM,MAAM,EAAG,CAAC,EAAE,YAAY,EACvC,QAASH,GAAOQ,EAAOR,GAAO,MAAM,EACtC,EACC,CAACG,EAAOC,CAAkB,CAAC,EAC9B,OAAQ3O,MAAA,OAAI,IAAA4H,EAAU,MAAQjD,EAE1B,OAFkC,CACpC,gBAAiBkK,CACnB,EAAe,UAAW5O,EAAK,8FAA+F0E,EAAOuK,GAAwBxK,CAAI,CAAC,EAC3J,SACHkK,CAAA,EACN,CAAC,EACD,SAASM,GAAwBxK,EAAM,CACrC,OAAQA,EAAM,CACZ,IAAK,KACI,gBACT,IAAK,KACI,gBACT,IAAK,KACI,gBACT,IAAK,KACI,kBACT,QACS,QACX,CACF,CCjCa,MAAAyK,GAASV,aAAW,SAAU,CACzC,UAAA7O,EACA,OAAAwP,EACA,KAAA1K,EAAO,KACP,IAAA/E,EACA,KAAA0P,EACA,MAAAX,EACA,mBAAAC,EACA,SAAAW,EAAW,WACX,cAAAC,EACA,KAAAC,EAAO,GACP,GAAGC,CACL,EAAG7H,EAAK,CACN,IAAI8H,EAAiB/P,EAAMK,MAAC,MAAI,KAAA4H,EAAU,IAAAjI,EAAU,IAAK+O,EAAO,QAASc,EAAO,OAAS,OAAW,UAAU,kCAAmC,GAAKF,IAAa,YAAcZ,EAAS1O,EAAA,IAAAwO,GAAA,CAAuB,KAAA9J,EAAY,MAAAgK,EAAc,mBAAAC,EAAwC,MAAOY,CAAA,CAAe,EAAMvP,MAAA,OAAI,UAAU,oCACzT,eAACsO,GAAsB,SAAQ,YAAY,UAAU,2BAA2B,CAClF,GACEI,IACegB,EAAA1P,EAAA,IAACsE,GAAQ,OAAAoK,EAAe,SAAegB,CAAA,IAE1D,MAAMC,EAAe,CACnB,GAAGF,EACH,UAAWxP,EAAKL,EAAW,2DAA4DwO,GAAiB1J,CAAI,EAAG0K,EAAS,eAAiB,SAAS,GAEpJ,OAAOC,EAAOrP,MAAC4P,GAAM,IAAGD,EAAc,GAAIN,EACrC,SAAAK,CAAA,CACH,EAAU1P,EAAA,IAAC,MAAK,IAAG2P,EAAe,SAAeD,CAAA,EACrD,CAAC,EACD,SAAStB,GAAiB1J,EAAM,CAC9B,OAAQA,EAAM,CACZ,IAAK,KACI,kBACT,IAAK,KACI,kBACT,IAAK,KACI,kBACT,IAAK,KACI,kBACT,IAAK,KACI,kBAET,QACS,OAAAA,CACX,CACF,CCjDO,SAASmL,GAAsBC,EAAc,OAElD,QAAO1N,EADI,kBACD,KAAK0N,CAAY,IAApB,YAAA1N,EAAwB,KAAM,EACvC,CCFO,SAAS2N,GAAYC,EAAM,CAChC,MAAMC,EAAmB,CACvB,GAAI,gBACJ,SAAU,gBACV,IAAK,YACL,IAAK,YACL,IAAK,gBACL,IAAK,aACL,IAAK,YACL,IAAK,YACL,KAAM,YACN,IAAK,YACL,IAAK,cAEDC,EAAgBF,EAAK,KAAOH,GAAsBG,EAAK,IAAI,EAAI,KAGrE,OAAIA,EAAK,KACAA,EAAK,KAIVE,GAAiBA,KAAiBD,EAC7BA,EAAiBC,CAAa,EAEhC,0BACT,CCxBO,MAAMC,EAAa,CAqBxB,YAAYH,EAAMI,EAAc,CApBhCrP,EAAA,oBAAe,IACfA,EAAA,YAAO,IACPA,EAAA,iBAAY,IAmBV,KAAK,GAAKc,KACV,KAAK,KAAOmO,EAAK,KACjB,KAAK,KAAOA,EAAK,KACZ,UAAOD,GAAYC,CAAI,EAC5B,KAAK,aAAeA,EAAK,aACzB,KAAK,UAAYH,GAAsBG,EAAK,IAAI,GAAK,MACrD,KAAK,OAASA,EACCI,KAAgBJ,EAAK,oBAAsB,GAG3CI,IAAa,QAAQ,QAAS,EAAE,EAG3CA,GAAgBA,EAAa,MAAM,GAAG,EAAE,OAAS,IACnD,KAAK,aAAeA,GAEtB,KAAK,YAAcC,GAAoB,CACrC,KAAM,KAAK,KACX,KAAM,KAAK,KACX,KAAM,KAAK,KACX,aAAc,KAAK,aACpB,CACH,CAxCA,IAAI,MAAO,CACF,WAAI,QAAmBrI,GAAA,CACxB,KAAK,YACPA,EAAQ,KAAK,UAAU,EAEnB,MAAAsI,EAAS,IAAI,WACZA,EAAA,iBAAiB,OAAQ,IAAM,CACpC,KAAK,WAAaA,EAAO,OACzBtI,EAAQ,KAAK,UAAU,EACxB,EACG,KAAK,YAAc,OACdsI,EAAA,WAAW,KAAK,MAAM,EAEtBA,EAAA,cAAc,KAAK,MAAM,CAClC,CACD,CACH,CAyBF,CACO,MAAMC,EAAsB,CAUjC,YAAYC,EAAO,CATnBzP,EAAA,oBAAe,IACfA,EAAA,YAAO,IACPA,EAAA,iBAAY,IACZA,EAAA,cAAS,MAOP,KAAK,GAAKc,KACV,KAAK,KAAO2O,EAAM,KACb,UAAOA,EAAM,WAAa,EAC/B,KAAK,KAAOA,EAAM,KACb,kBAAeA,EAAM,YAAc,GACnC,eAAYA,EAAM,WAAa,MACpC,KAAK,aAAeA,EAAM,KAC1B,KAAK,YAAcH,GAAoB,CACrC,KAAM,KAAK,KACX,KAAM,KAAK,KACX,KAAM,KAAK,KACX,aAAc,KAAK,aACpB,CACH,CAnBA,IAAI,MAAO,CACT,OAAO,IAAI,QAAQ,CAACrI,EAASyI,IAAW,CACtCA,EAAO,+CAA+C,EACvD,CACH,CAgBF,CACA,SAASJ,GAAoB,CAC3B,KAAAK,EACA,KAAAC,EACA,KAAAjM,EACA,aAAA0L,EACA,aAAAQ,CACF,EAAG,CACD,IAAIlH,EAAK,KACL,cAAOgH,GAAS,WAClBhH,GAAM,IAAImH,GAAeH,EAAK,aAAa,CAAC,IAE1CC,IACFjH,GAAM,IAAIiH,CAAI,IAEZ,OAAOP,GAAiB,WAC1B1G,GAAM,IAAImH,GAAeT,EAAa,aAAa,CAAC,IAElD1L,IAAS,SACXgF,GAAM,IAAIhF,CAAI,IAEZkM,IAAiB,SACnBlH,GAAM,IAAIkH,CAAY,IAEjBlH,CACT,CACA,SAASoH,GAAgBC,EAAW,CAClC,OAAOA,EAAU,WAAW,CAAC,EAAE,SAAS,EAAE,CAC5C,CACA,SAASF,GAAeH,EAAM,CAC5B,IAAIM,EAAS,GACN,OAAAN,EAAK,QAAQ,cAA4BK,IACpCC,GAAA,IAAIF,GAAgBC,CAAS,CAAC,GACjC,IACR,EAAIC,CACP,CCxGA,MAAMC,GAAQ,KAAO,KAEfC,GAAmB,GAAKD,GAExBE,GAAY,GAEZC,GAAc,EACb,MAAMC,EAAkB,CAM7B,YAAYrB,EAAMsB,EAAQ,CAL1BvQ,EAAA,cAAS,IACTA,EAAA,qBAAgB,IAKd,KAAK,KAAOiP,EACZ,KAAK,OAASsB,EACT,qBAAkB,IAAI,gBACtB,gBAAa7O,GAAM,SACxB8O,GAAW,KAAK,WAAY,CAC1B,QAAS,EACV,CACH,CAXA,IAAI,YAAa,CACR,uBAAiB,KAAK,KAAK,WAAW,EAC/C,CAUA,MAAM,OAAQ,eACN,MAAAC,EAAY7E,GAAoB,KAAK,UAAU,EAIjD,GAHA6E,GACI,WAAK,iBAAiBA,CAAS,EAEnC,GAACpP,EAAA,KAAK,gBAAL,MAAAA,EAAoB,UACvB,MAAM,KAAK,wBACP,CAAC,KAAK,UAAU,OAItB,GAFA,KAAK,cAAc,EACJ,MAAM,KAAK,gBACX,OAAQ,CAErB,GAAI,CADgB,MAAM,KAAK,0BACb,OAGd,IACI,MAAAzB,EAAW,MAAM,KAAK,kBAC5B,GAAIA,GAAA,MAAAA,EAAU,UAAW,EACvB+H,GAAAR,EAAA,KAAK,QAAO,YAAZ,MAAAQ,EAAA,KAAAR,EAAwBvH,GAAA,YAAAA,EAAU,UAAW,KAAK,MAClDuM,GAAuB,KAAK,UAAU,EACtC,MACF,OACM,CAAC,CACX,CAGK,KAAK,gBAAgB,OAAO,SAC/B,KAAK,gBAAgB,QAElB,KAAK,gBACRuE,GAAAhJ,EAAA,KAAK,QAAO,UAAZ,MAAAgJ,EAAA,KAAAhJ,EAAsB,KAAM,KAAK,KAErC,CACA,MAAM,OAAQ,CACZ,KAAK,cAAgB,GACrB,KAAK,gBAAgB,QACrB,MAAM,KAAK,iBACb,CACA,MAAM,aAAc,CAClB,MAAMiJ,EAAgB,KAAK,OAAO,OAAYC,GAAA,CAACA,EAAE,IAAI,EACjD,IAACD,EAAc,OACV,eAAQ,QAAQ,MAAM,EAEzB,MAAAE,EAAa,MAAM,KAAK,cAAcF,EAAc,MAAM,EAAGP,EAAS,CAAC,EAC7E,GAAKS,EACL,MAAOA,EAAW,QAAQ,CACxB,MAAMC,EAAQD,EAAW,OAAO,EAAGR,EAAW,EACxCU,EAAiBD,EAAM,IAAY5E,GAChC,KAAK,eAAeA,CAAI,CAChC,EACK8E,EAAS,MAAM,QAAQ,IAAID,CAAc,EAGzCE,EAAc,GAkBhB,GAjBGD,EAAA,QAAQ,CAACE,EAASjM,IAAU,CACjC,GAAI,CAACiM,EAAS,CACN,MAAAC,EAAaL,EAAM7L,CAAK,EACxBmM,EAAQ,KAAK,OAAO,QAAUR,EAAE,aAAeO,EAAW,UAAU,EAEtE,GADAC,GAAS,CAACA,EAAM,aAAYA,EAAM,WAAa,GAC/CA,GAASA,EAAM,WAAa,EACxBA,EAAA,aACNH,EAAY,KAAKE,CAAU,MACtB,CAEL,QAAQ,MAAM,QAAQA,EAAW,UAAU,yBAAyB,EACpE,MACF,CACF,EACD,EAGGF,EAAY,OAAS,EAAG,CAC1B,QAAQ,IAAI,YAAYA,EAAY,MAAM,kBAAkB,EAC5D,MAAMI,EAAeJ,EAAY,OAAY,KAAK,eAAe/E,CAAI,CAAC,EACjD,MAAM,QAAQ,IAAImF,CAAY,CAErD,CACF,CACO,aAAM,KAAK,cACpB,CACA,MAAM,cAAcP,EAAO,CACzB,MAAMlR,EAAW,MAAM,KAAK,WAAW,KAAK,2CAA4C,CACtF,YAAakR,EAAM,IAAIQ,GAAKA,EAAE,UAAU,EACxC,SAAU,KAAK,SACf,IAAK,KAAK,SACT,CACD,OAAQ,KAAK,gBAAgB,OAC9B,EAAE,KAAKC,GAAKA,EAAE,IAAI,EAAE,MAAa/P,GAAA,CAC3B,KAAK,gBAAgB,OAAO,SAC/B,KAAK,gBAAgB,OACvB,CACD,EACD,OAAO5B,GAAA,YAAAA,EAAU,IACnB,CACA,MAAM,eAAe,CACnB,IAAA4R,EACA,WAAAC,CAAA,EACC,CACD,MAAML,EAAQ,KAAK,OAAO,KAAUR,KAAE,aAAea,CAAU,EAC/D,GAAI,CAACL,EAAc,SAEf,IAeI,MAAAM,GAdW,MAAM,KAAK,WAAW,IAAIF,EAAKJ,EAAM,KAAM,CAC1D,gBAAiB,GACjB,OAAQ,KAAK,gBAAgB,OAC7B,iBAAuBnO,GAAA,SACjB,IAACA,EAAE,MAAM,iBAAkB,OAC/BmO,EAAM,cAAgBnO,EAAE,OAClB,MAAA0O,EAAgB,KAAK,OAAO,OAAO,CAACC,EAAGhB,IAAMgB,EAAIhB,EAAE,cAAe,CAAC,GACzEzJ,GAAA9F,EAAA,KAAK,QAAO,aAAZ,MAAA8F,EAAA,KAAA9F,EAAyB,CACvB,cAAesQ,EACf,WAAY,KAAK,KAAK,MAE1B,EACD,GAEqB,QAAQ,KAC9B,OAAID,GACFN,EAAM,KAAO,GACbA,EAAM,KAAOM,EACN,IAEF,SACAlQ,EAAK,CAER,YAAK,gBAAgB,OAAO,UAKhC,QAAQ,KAAK,QAAQiQ,CAAU,kBAAmBjQ,EAAI,SAAWA,CAAG,EAGpE4P,EAAM,cAAgB,GAEf,EACT,CACF,CACA,MAAM,uBAAwB,CAC5B,MAAMxR,EAAW,MAAMiS,EAAU,KAAK,sBAAuB,CAC3D,SAAU,KAAK,KAAK,KACpB,KAAM,KAAK,KAAK,KAChB,KAAM,KAAK,KAAK,KAChB,UAAW,KAAK,KAAK,UACrB,GAAG,KAAK,OAAO,SAChB,EAAE,KAAKN,GAAKA,EAAE,IAAI,EAAE,MAAa/P,GAAA,SAC5BA,EAAI,OAAS,kBACf2F,GAAA9F,EAAA,KAAK,QAAO,UAAZ,MAAA8F,EAAA,KAAA9F,EAAsBE,GAAqBC,CAAG,EAAGA,GACnD,CACD,EACG5B,IACF,KAAK,SAAWA,EAAS,SACzB,KAAK,QAAUA,EAAS,IACxBmM,GAAkB,KAAK,WAAY,CACjC,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,QAAS,KAAK,QACd,SAAU,KAAK,SAChB,EAEL,CACA,MAAM,iBAAiB,CACrB,QAAA+F,EACA,SAAAC,CAAA,EACC,OACD,MAAMnS,EAAW,MAAMiS,EAAU,KAAK,kCAAmC,CACvE,IAAKC,EACL,SAAAC,CAAA,CACD,EAAE,KAAKR,GAAKA,EAAE,IAAI,EAAE,MAAM,KACzBpF,GAAuB,KAAK,UAAU,EAC/B,KACR,GACG9K,EAAAzB,GAAA,YAAAA,EAAU,QAAV,MAAAyB,EAAiB,SACnB,KAAK,cAAgBzB,EAAS,MAC9B,KAAK,SAAWmS,EAChB,KAAK,QAAUD,EAEnB,CACA,MAAM,yBAA0B,CACvB,OAAAD,EAAU,KAAK,wBAAyB,CAC7C,IAAK,KAAK,QACV,SAAU,KAAK,SACf,MAAO,KAAK,OAAO,IAASjB,IACnB,CACL,KAAMA,EAAE,KACR,WAAYA,EAAE,YAEjB,EACF,EAAE,KAAKW,GAAKA,EAAE,IAAI,EAAE,MAAM,IAAM,UAC/BpK,GAAA9F,EAAA,KAAK,QAAO,UAAZ,MAAA8F,EAAA,KAAA9F,EAAsB,KAAM,KAAK,MACjC,KAAK,gBAAgB,EACtB,EAAE,QAAQ,IAAM,CACf8K,GAAuB,KAAK,UAAU,EACvC,CACH,CACA,MAAM,iBAAkB,CACf,aAAM0F,EAAU,KAAK,aAAc,CACxC,GAAG,KAAK,OAAO,SACf,WAAY,KAAK,KAAK,KACtB,WAAY,KAAK,KAAK,KACtB,SAAU,KAAK,QAAQ,MAAM,GAAG,EAAE,IAAI,EACtC,KAAM,KAAK,KAAK,KAChB,gBAAiB,KAAK,KAAK,UAC5B,EAAE,QAAUN,EAAE,IAAI,EAAE,OACvB,CACA,eAAgB,OACd,KAAK,OAAS,GAER,MAAAS,EAAe,KAAK,IAAI,EAAI9B,GAAO,KAAK,KAAK,KAAK,KAAK,KAAO,GAAK,CAAC,EACpE+B,EAAY,KAAK,IAAI9B,GAAkB6B,CAAY,EAGrD,QAAK,KAAK,OAAS,EACrB,KAAK,OAAO,KAAK,CACf,KAAM,KAAK,KAAK,OAChB,KAAM,GACN,WAAY,EACZ,cAAe,EAChB,MACI,CACL,IAAIP,EAAa,EACjB,QAAS,EAAI,EAAG,EAAI,KAAK,KAAK,KAAM,GAAKQ,EAAW,CAClD,MAAMC,EAAM,KAAK,IAAI,KAAK,KAAK,KAAM,EAAID,CAAS,EAE5CE,GAAqB9Q,EAAA,KAAK,gBAAL,YAAAA,EAAoB,KAAU+Q,KAAE,aAAeX,GAC1E,KAAK,OAAO,KAAK,CACf,KAAM,KAAK,KAAK,OAAO,MAAM,EAAGS,CAAG,EACnC,KAAM,CAAC,CAACC,EACR,WAAAV,EACA,KAAMU,EAAqBA,EAAmB,KAAO,OACrD,cAAeA,GAAA,MAAAA,EAAoB,KAAO,SAASA,GAAA,YAAAA,EAAoB,IAAI,EAAI,EAChF,EACDV,GACF,CACF,CACF,CACA,iBAAkB,CACT,OAAAI,EAAU,KAAK,qBAAsB,CAC1C,IAAK,KAAK,QACV,SAAU,KAAK,SAChB,CACH,CACA,aAAa,OAAO5C,EAAMsB,EAAQ,CACzB,WAAID,GAAkBrB,EAAMsB,CAAM,CAC3C,CACF,CC5QO,MAAM8B,EAAU,CACrB,YAAYC,EAAQC,EAAiB,CACnC,KAAK,OAASD,EACd,KAAK,gBAAkBC,CACzB,CACA,OAAQ,CACN,KAAK,OAAO,OACd,CACA,OAAQ,CACC,YAAK,OAAO,MAAM,EAAI,CAC/B,CACA,aAAa,OAAOtD,EAAM,CACxB,WAAAuD,EACA,UAAAC,EACA,QAAAC,EACA,SAAAC,EACA,UAAAV,EACA,QAAAW,CAAA,EACC,CACK,MAAAC,EAAiB,CAAC,MAAO5D,EAAK,YAAa,OAAO,EAAE,KAAK,GAAG,EAC5DqD,EAAS,IAAIQ,GAAO7D,EAAK,OAAQ,CACrC,YAAa,IAAM,QAAQ,QAAQ4D,CAAc,EACjD,2BAA4B,GAC5B,SAAU,GAAGD,CAAO,qBACpB,UAAAX,EACA,YAAa,CAAC,EAAG,IAAM,IAAM,IAAO,GAAK,EACzC,oBAAqB,GACrB,SAAU,CACR,KAAM,OAAO,KAAKhD,EAAK,EAAE,EACzB,WAAYA,EAAK,KACjB,gBAAiBA,EAAK,UACtB,WAAYA,EAAK,MAAQ,GACzB,WAAY,GAAGA,EAAK,IAAI,GACxB,GAAG0D,CACL,EACA,QAAS,CACP,eAAgBI,aAAU,YAAY,CACxC,EACA,QAAgBvR,GAAA,CACd,IAAIwR,EAAe,CACjB,KAAM,aAEJ,wBAAsBxR,GAAOA,EAAI,iBAC/B,IACI,MAAAyR,EAAezR,EAAI,iBAAiB,QAAQ,EAC5C0R,EAAc,KAAK,MAAMD,CAAY,EACrCxS,EAAUyS,GAAA,YAAAA,EAAa,QACdF,EAAA,CACb,KAAM,mBACN,SAAU,CACR,OAAQxR,EAAI,iBAAiB,UAAU,EACvC,KAAM0R,CACR,GAEFR,GAAA,MAAAA,EAAUjS,EAASuS,QACT,CACVN,GAAA,MAAAA,EAAU,KAAMM,EAClB,MAGAA,EAAa,KAAO,oBACpBN,GAAA,MAAAA,EAAU,KAAMM,EAEpB,EACA,WAAWG,EAAeC,EAAY,CACvBZ,GAAA,MAAAA,EAAA,CACX,cAAAW,EACA,WAAAC,CAAA,EAEJ,EACA,UAAW,SAAY,OACrB,MAAMC,GAAYhS,EAAAiR,EAAO,MAAP,YAAAjR,EAAY,MAAM,KAAK,MACrC,IACF,GAAIgS,EAAW,CACP,MAAAzT,EAAW,MAAM0T,GAAgBD,EAAW,CAChD,kBAAmBV,EAAS,kBAC5B,SAAUA,EAAS,SACnB,iBAAkBA,EAAS,iBAC3B,cAAeA,EAAS,cACxB,aAAcA,EAAS,aACvB,YAAaA,EAAS,YACtB,QAASA,EAAS,QACnB,EAGG/S,EAAS,mBAAqB,CAAC+S,EAAS,oBAE1C,OAAO,uBAAyB/S,EAAS,mBAK/B6S,GAAA,MAAAA,EAAA7S,EAAS,UAAWqP,EAClC,QACOzN,EAAK,CACZ,aAAa,WAAWqR,CAAc,EAC5BH,GAAA,MAAAA,EAAAnR,GAAqBC,CAAG,EAAGA,EACvC,CACF,EACD,EACK+R,EAAkB,MAAMjB,EAAO,sBACrC,OAAIiB,EAAgB,QACXjB,EAAA,yBAAyBiB,EAAgB,CAAC,CAAC,EAE7C,IAAIlB,GAAUC,EAAQK,EAAS,iBAAiB,CACzD,CACF,CACA,SAASW,GAAgBD,EAAWnL,EAAU,GAAI,CACzC,OAAA2J,EAAU,KAAK,cAAe,CACnC,UAAAwB,EACA,kBAAmBnL,EAAQ,mBAAqB,KAChD,SAAUA,EAAQ,UAAY,KAC9B,iBAAkBA,EAAQ,kBAAoB,KAC9C,cAAeA,EAAQ,eAAiB,KACxC,aAAcA,EAAQ,cAAgB,KACtC,YAAaA,EAAQ,aAAe,KACpC,QAASA,EAAQ,SAAW,IAC7B,GAAE,KAAKqJ,GAAKA,EAAE,IAAI,CACrB,CC1HW,IAAAiC,YAA8BA,EAAM,CAC7CA,SAAK,OAAY,SACjBA,EAAK,QAAa,UACXA,CACT,EAAE,CAAE,GCDG,MAAMC,EAAS,CACpB,YAAYxE,EAAMsB,EAAQ,CACxB,KAAK,KAAOtB,EACZ,KAAK,OAASsB,EACT,qBAAkB,IAAI,eAC7B,CACA,MAAM,OAAQ,aAIZ,GAHK,sBAAmB,MAAM,KAAK,eAAe,EAC9C,CAAC,KAAK,kBACK,MAAM,KAAK,mBACX,WAAY,OACrB,MAAA3Q,EAAW,MAAM,KAAK,kBACxBA,GAAA,MAAAA,EAAU,WACZuH,GAAA9F,EAAA,KAAK,QAAO,YAAZ,MAAA8F,EAAA,KAAA9F,EAAwBzB,EAAS,UAAW,KAAK,MACvC,KAAK,gBAAgB,SAC/B8H,GAAAC,EAAA,KAAK,QAAO,UAAZ,MAAAD,EAAA,KAAAC,EAAsB,KAAM,KAAK,KAErC,CACA,OAAQ,CACN,YAAK,gBAAgB,QACd,QAAQ,SACjB,CACA,gBAAiB,OACR,OAAAkK,EAAU,KAAK,oBAAqB,CACzC,SAAU,KAAK,KAAK,KACpB,KAAM,KAAK,KAAK,KAChB,MAAMxQ,EAAA,KAAK,OAAO,WAAZ,YAAAA,EAAsB,KAC5B,KAAM,KAAK,KAAK,KAChB,UAAW,KAAK,KAAK,UACrB,GAAG,KAAK,OAAO,UACd,CACD,OAAQ,KAAK,gBAAgB,OAC9B,EAAE,KAAKkQ,GAAKA,EAAE,IAAI,EAAE,MAAa/P,GAAA,SAC5BA,EAAI,OAAS,kBACf2F,GAAA9F,EAAA,KAAK,QAAO,UAAZ,MAAA8F,EAAA,KAAA9F,EAAsBE,GAAqBC,CAAG,EAAGA,GACnD,CACD,CACH,CACA,gBAAiB,CACT,MACJ,IAAAgQ,EACA,IAAAkC,CAAA,EACE,KAAK,iBACT,OAAOhS,GAAM,IAAI8P,EAAK,KAAK,KAAK,OAAQ,CACtC,OAAQ,KAAK,gBAAgB,OAC7B,gBAAiB,GACjB,QAAS,CACP,eAAgB,KAAK,KAAK,KAC1B,YAAakC,CACf,EACA,iBAAuBzQ,GAAA,SACjBA,EAAE,MAAM,oBACVkE,GAAA9F,EAAA,KAAK,QAAO,aAAZ,MAAA8F,EAAA,KAAA9F,EAAyB,CACvB,cAAe4B,EAAE,OACjB,WAAYA,EAAE,OAAS,IAG7B,EACD,EAAE,KAAK,IAAM,UAAU,EAAE,MAAazB,GAAA,SACjCA,EAAI,OAAS,kBACf2F,GAAA9F,EAAA,KAAK,QAAO,UAAZ,MAAA8F,EAAA,KAAA9F,EAAsBE,GAAqBC,CAAG,EAAGA,GACnD,CACD,CACH,CACA,MAAM,iBAAkB,CACf,aAAMqQ,EAAU,KAAK,aAAc,CACxC,GAAG,KAAK,OAAO,SACf,WAAY,KAAK,KAAK,KACtB,WAAY,KAAK,KAAK,KACtB,SAAU,KAAK,iBAAiB,IAAI,MAAM,GAAG,EAAE,IAAI,EACnD,KAAM,KAAK,KAAK,KAChB,gBAAiB,KAAK,KAAK,UAC5B,EAAE,KAAUN,GACJA,EAAE,IACV,EAAE,MAAa/P,GAAA,SACVA,EAAI,OAAS,kBACf2F,GAAA9F,EAAA,KAAK,QAAO,UAAZ,MAAA8F,EAAA,KAAA9F,EAAsBE,GAAqBC,CAAG,EAAGA,GACnD,CACD,CACH,CACA,aAAa,OAAOyN,EAAMsB,EAAQ,CACzB,WAAIkD,GAASxE,EAAMsB,CAAM,CAClC,CACF,CCpFO,MAAMoD,EAAY,CACvB,YAAY1E,EAAMsB,EAAQ,CACxB,KAAK,KAAOtB,EACZ,KAAK,OAASsB,EACT,qBAAkB,IAAI,eAC7B,CACA,MAAM,OAAQ,CACN,MAAAqD,EAAW,IAAI,SACf,CACJ,UAAAnB,EACA,QAAAC,EACA,WAAAF,EACA,SAAAG,CAAA,EACE,KAAK,OACTiB,EAAS,IAAI,OAAQ,KAAK,KAAK,MAAM,EACrCA,EAAS,IAAI,aAAc,KAAK,KAAK,IAAI,EACzCA,EAAS,IAAI,kBAAmB,KAAK,KAAK,SAAS,EAC/CjB,GACK,eAAQA,CAAQ,EAAE,QAAQ,CAAC,CAACpK,EAAKrB,CAAK,IAAM,CACjD0M,EAAS,IAAIrL,EAAK,GAAGrB,CAAK,EAAE,EAC7B,EAEH,MAAMtH,EAAW,MAAMiS,EAAU,KAAK,eAAgB+B,EAAU,CAC9D,iBAAuB3Q,GAAA,CACjBA,EAAE,MAAM,mBACGuP,GAAA,MAAAA,EAAA,CACX,cAAevP,EAAE,OACjB,WAAYA,EAAE,OAAS,IAG7B,EACA,OAAQ,KAAK,gBAAgB,OAC7B,QAAS,CACP,eAAgB,qBAClB,EACD,EAAE,MAAazB,GAAA,CACVA,EAAI,OAAS,iBACLkR,GAAA,MAAAA,EAAAnR,GAAqBC,CAAG,EAAGA,GACvC,CACD,EAIG,KAAK,gBAAgB,OAAO,SAG5B5B,GAAYA,EAAS,KAAK,YAC5B6S,GAAA,MAAAA,EAAY7S,EAAS,KAAK,UAAW,KAAK,MAE9C,CACA,OAAQ,CACN,YAAK,gBAAgB,QACd,QAAQ,SACjB,CACA,aAAa,OAAOqP,EAAMsB,EAAQ,CACzB,WAAIoD,GAAY1E,EAAMsB,CAAM,CACrC,CACF,CCxDgB,SAAAsD,GAAa5E,EAAM6E,EAAc,CAC/C,GAAI,CAACA,EAAc,OACb,MACJ,YAAAC,EACA,iBAAAC,EACA,iBAAAC,CACE,EAAAH,EACJ,GAAIC,GAAe9E,EAAK,MAAQ,MAAQA,EAAK,KAAO8E,EAClD,OAAOtT,EAAQ,gDAAiD,CAC9D,OAAQ,CACN,KAAMwO,EAAK,KACX,KAAMiF,GAAYH,CAAW,CAC/B,EACD,EAEH,GAAIC,GAAA,MAAAA,EAAkB,QAChB,CAACG,GAAiBlF,EAAM+E,CAAgB,EAC1C,OAAOvT,EAAQ,+BAA+B,EAGlD,GAAIwT,GAAA,MAAAA,EAAkB,QAChBE,GAAiBlF,EAAMgF,CAAgB,EACzC,OAAOxT,EAAQ,+BAA+B,CAGpD,CACA,SAAS0T,GAAiBlF,EAAMmF,EAAO,CAC9B,OAAAA,EAEN,IAAIjU,GAAQA,EAAK,MAAM,GAAG,CAAC,EAAE,OAAO,KAAaA,GAAA,CAE5C,GAAAA,EAAK,SAAS,GAAG,EACnB,OAAK8O,EAAK,KACHoF,GAAMpF,EAAK,KAAK,QAAQ,QAAS,EAAE,EAAG9O,CAAI,EAD1B,GAKzB,MAAMmU,EAAYnU,EAAK,QAAQ,IAAK,EAAE,EAAE,cACpC,OAAAmU,GAAarF,EAAK,UACbA,EAAK,UAAU,gBAAkBqF,EAEnC,GACR,CACH,CC9CO,MAAMC,EAAgB,CAAtB,cACLvU,EAAA,cAAS,IACTA,EAAA,eAAU,KACVA,EAAA,sBAAiB,MACjB,UAAW,CAIL,KAAK,QAAU,CAAC,KAAK,gBACrB,KAAK,QAAU,IACjB,aAAa,KAAK,UAAU,EAC5B,KAAK,WAAa,WAAW,KAAK,eAAgB,KAAK,OAAO,EAElE,CACA,MAAO,CACA,KAAK,SACR,aAAa,KAAK,UAAU,EAC5B,KAAK,WAAa,KAClB,KAAK,OAAS,GAElB,CACF,CCXsB,eAAAwU,GAAelC,EAAQ1R,EAAO,SAC5C,MAAA6T,EAAWC,GAAmB,WAC9BxM,EAAUoK,EAAO,QACjBrD,EAAOqD,EAAO,KAGpB,GAAIpK,GAAA,MAAAA,EAAS,aAAc,CACzB,MAAM9F,EAAeyR,GAAa5E,EAAM/G,EAAQ,YAAY,EAC5D,GAAI9F,EACI,OAAAxB,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,aAAA7M,EACA,OAAQ,SACR,QAAS,OACT,MAAO,OACR,EACG8F,EAAQ,4BACVjH,GAAM,OAAOmB,CAAY,EAE3BxB,EAAM,SAAS,EACR,IAEX,CAGM,MAAA+T,EAAQ,IAAIJ,GACZhE,EAAS,CACb,SAAU,CACR,GAAGrI,GAAA,YAAAA,EAAS,SACZ,aAAc+G,EAAK,aACnB,OAAM5N,EAAA6G,GAAA,YAAAA,EAAS,WAAT,YAAA7G,EAAmB,OAAQmS,GAAK,QACtC,WAAUrM,EAAAe,GAAA,YAAAA,EAAS,WAAT,YAAAf,EAAmB,WAAY,EAC3C,EACA,UAAWsN,EAAS,QAAQ,WAC5B,QAASA,EAAS,SAClB,QAAS,CAACrS,EAAc4Q,IAAiB,SAEvC,IAAI4B,EAAY,UACZC,EACJ,GAAI7B,GACF,GAAIA,EAAa,OAAS,eAAiBA,EAAa,OAAS,gBACnD4B,EAAA,mBACHvT,EAAA2R,EAAa,WAAb,MAAA3R,EAAuB,OAAQ,CAClC,MAAAyT,EAAS9B,EAAa,SAAS,OACzB6B,EAAAC,EACRA,GAAU,IACAF,EAAA,SACHE,GAAU,KAAOA,EAAS,MACvBF,EAAAE,IAAW,IAAM,aAAe,SAEhD,EAII,MAAAC,EAAWH,IAAc,WAAaA,IAAc,SACpDhU,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,aAAA7M,EACA,OAAQ,SACR,UAAAwS,EACA,UAAAC,EACA,WAAYE,EAAW,EAAI,EAC3B,WAAY,EACZ,WAAY,IACb,EACDnU,EAAM,SAAS,EACf+T,EAAM,KAAK,GACFxN,EAAAe,GAAA,YAAAA,EAAA,gBAAAf,EAAA,KAAAe,EAAU9F,EAAc6M,GAC7B/G,EAAQ,yBAA2B9F,GACrCnB,GAAM,OAAOmB,CAAY,CAE7B,EACA,UAAoBqN,GAAA,OACZ7O,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,OAAQ,YACR,MAAAQ,CAAA,CACD,EACD7O,EAAM,SAAS,EACf+T,EAAM,KAAK,GACFtT,EAAA6G,GAAA,YAAAA,EAAA,kBAAA7G,EAAA,KAAA6G,EAAYuH,EAAOR,EAC9B,EACA,WAAY,CAAC,CACX,cAAAkE,EACA,WAAAC,CAAA,IACI,OACE,MAAA4B,EAAc,KAAK,MACnBC,EAAa9B,EAAgBC,EAAa,IAG1C8B,EAAgBtU,EAAM,UAAUqO,EAAK,EAAE,EACvCkG,GAAoBD,GAAA,YAAAA,EAAe,oBAAqBF,EACxDI,GAAgBF,GAAA,YAAAA,EAAe,gBAAiB,EAGtD,IAAIG,EAAQ,EACRC,EAAM,EACV,MAAMC,EAAYP,EAAcG,EAC5B,GAAAI,EAAY,GAAKpC,EAAgBiC,EAAe,CAGlDC,GADmBlC,EAAgBiC,GACdG,EAAY,IAGjC,MAAMC,EAAiBpC,EAAaD,EAChCkC,EAAQ,IACVC,EAAME,EAAiBH,EAE3B,CAEMzU,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,WAAAgG,EACA,cAAA9B,EACA,MAAAkC,EACA,IAAAC,EACA,kBAAmBN,EACnB,cAAe7B,CAAA,CAChB,EACDwB,EAAM,SAAS,GACftT,EAAA6G,GAAA,YAAAA,EAAS,aAAT,MAAA7G,EAAA,KAAA6G,EAAsB,CACpB,cAAAiL,EACA,WAAAC,CAAA,EAEJ,GAKIqC,EAAU,MADCC,GAAqBzG,EAAMsB,CAAM,EACnB,OAAOtB,EAAMsB,CAAM,EAGlD,OAAAoE,EAAM,eAAiB,IAAM,CAC3Bc,EAAQ,MAAM,EACR7U,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,OAAQ,SACR,aAAcxO,EAAQ,kBAAkB,EACzC,EACDG,EAAM,SAAS,GAEXA,EAAA,iBAAiBqO,EAAK,GAAI,CAC9B,OAAQ,aACR,QAAAwG,CAAA,CACD,EACDA,EAAQ,MAAM,EACPA,CACT,CACA,MAAME,GAAQ,KAAO,KACfC,GAAS,EAAID,GACbE,GAAY,IAAMF,GAClBD,GAAuB,CAACzG,EAAMsB,IAAW,OACvC,MAAAkE,EAAWC,GAAmB,WAE9BoB,KADOzU,EAAAkP,EAAO,WAAP,YAAAlP,EAAiB,OAAQmS,GAAK,WACnBA,GAAK,QAAUiB,EAAS,QAAQ,eAAiBA,EAAS,QAAQ,cAC1F,OAAIqB,GAAA,MAAAA,EAAQ,SAAS,OAASrB,EAAS,QAAQ,iBACtCxF,EAAK,MAAQ4G,GAAYvF,GAAoBmD,GAG7CxE,EAAK,MAAQ2G,IAAU,CAACnB,EAAS,QAAQ,YAAcpC,GAAYsB,EAE9E,ECrKgB,SAAAoC,GAAa9G,EAAM+G,EAAgBC,EAAc,CAC/D,IAAIC,EAAejH,aAAgBG,GAAeH,EAAO,IAAIG,GAAaH,CAAI,EAC9E,OAAIgH,GAAA,MAAAA,EAAc,qBACDC,EAAAD,EAAa,mBAAmBC,CAAY,GAEtD,CACL,KAAMA,EACN,WAAY,EACZ,cAAe,EACf,OAAQ,UACR,QAASF,GAAkB,CAAC,EAC5B,WAAY,EACZ,WAAY,EACZ,WAAY,IACZ,WAAY,GAEhB,CCTAG,KACA,MAAMC,GAAe,CACnB,YAAa,EACb,gBAAiB,IACjB,mBAAoB,EACpB,sBAAuB,CACzB,EACaC,GAAwB,CAAC,CACpC,SAAA5B,EACA,QAAAvM,CACF,IAAM7H,GAAO,EAAEC,GAAM,CAACC,EAAKC,KAClB,CACL,GAAG4V,GACH,MAAO,IAAM,CACX7V,EAAI6V,EAAY,CAClB,EACA,UAAuBrE,GACdvR,EAAI,EAAE,YAAY,IAAIuR,CAAQ,EAEvC,wBAAyB,IAChB,CAAC,GAAGvR,IAAM,YAAY,OAAQ,GAAE,OAAY8V,GAAA,CAAC,CAACA,EAAE,KAAK,EAAE,IAAIA,GAAKA,EAAE,KAAK,EAEhF,cAAe,IAAM,CACnB/V,EAAaK,GAAA,CACXA,EAAM,YAAY,QAAQ,CAAC0R,EAAQ/J,IAAQ,CACrC+J,EAAO,SAAW,cACd1R,EAAA,YAAY,OAAO2H,CAAG,CAC9B,CACD,EACF,EACD/H,EAAA,EAAM,UACR,EACA,YAAmBmI,GAAA,OACjB,MAAM2J,EAAS9R,EAAM,cAAY,IAAImI,CAAE,EACnC2J,KACFjR,EAAAiR,EAAO,UAAP,MAAAjR,EAAgB,QACZb,EAAA,EAAE,iBAAiBmI,EAAI,CACzB,OAAQ,UACR,WAAY,EACb,EACDnI,EAAA,EAAM,WAEV,EACA,YAAmBmI,GAAA,CACjB,MAAM2J,EAAS9R,EAAM,cAAY,IAAImI,CAAE,EACnC,GAAA2J,GAAUA,EAAO,SAAW,SAAU,CAClC,MAAAiE,EAAoBjE,EAAO,YAAc,EACzCkE,EAAalE,EAAO,YAAc,EACxC,GAAIiE,EAAoBC,EAAY,CAGlC,MAAMC,GADYnE,EAAO,YAAc,KACb,KAAK,IAAI,EAAGiE,CAAiB,EACnD/V,EAAA,EAAE,iBAAiBmI,EAAI,CACzB,OAAQ,UACR,WAAY,GACZ,WAAY4N,EAAoB,EAChC,WAAY,EACZ,cAAe,EACf,MAAO,EACP,IAAK,EACL,kBAAmB,OACnB,cAAe,OACf,aAAc,OACd,QAAS,OACT,MAAO,OACR,EAGD,WAAW,IAAM,CACX/V,EAAA,EAAE,iBAAiBmI,EAAI,CACzB,WAAY,GACb,EACDnI,EAAA,EAAM,YACLiW,CAAK,CACV,CACF,CACF,EACA,iBAAkB,CAAC9N,EAAI+N,IAAmB,CACxCnW,EAAaK,GAAA,CACX,MAAM+V,EAAa/V,EAAM,YAAY,IAAI+H,CAAE,EACvCgO,IACI/V,EAAA,YAAY,IAAI+H,EAAI,CACxB,GAAGgO,EACH,GAAGD,CAAA,CACJ,EAGG,WAAYA,GACdE,GAAahW,CAAK,EAEtB,CACD,CACH,EACA,uBAAiC6O,GAAA,CAC/BlP,EAAaK,GAAA,CACXA,EAAM,YAAY,IAAI,GAAG6O,EAAM,EAAE,GAAI,CACnC,KAAM,IAAID,GAAsBC,CAAK,EACrC,OAAQ,YACR,MAAAA,EACA,WAAY,IACZ,cAAeA,EAAM,WAAa,EAClC,QAAS,CAAC,EACX,EACDmH,GAAahW,CAAK,EACnB,CACH,EACA,aAAc,CAACqO,EAAM4H,IAAgB,CACnC,MAAMvE,EAASyD,GAAa9G,EAAM4H,EAAa3O,CAAO,EAChD4O,EAAc,IAAI,IAAItW,IAAM,WAAW,EAC7C,OAAAsW,EAAY,IAAIxE,EAAO,KAAK,GAAIA,CAAM,EACtC/R,EAAaK,GAAA,CACXgW,GAAahW,CAAK,EAClBA,EAAM,YAAckW,CAAA,CACrB,EACDtW,EAAA,EAAM,WACC8R,EAAO,KAAK,EACrB,EACA,aAAoB3J,GAAA,CAClBpI,EAAaK,GAAA,CACLA,EAAA,YAAY,OAAO+H,CAAE,EAC3BiO,GAAahW,CAAK,EACnB,CACH,EACA,eAAgB,CAACmW,EAAOf,IAAmB,CAEzC,MAAMgB,EAAU,IAAI,IAAIxW,IAAM,WAAW,EACzC,OAAC,GAAGuW,CAAK,EAAE,QAAgB9H,GAAA,CACzB,MAAMqD,EAASyD,GAAa9G,EAAM+G,EAAgB9N,CAAO,EACzD8O,EAAQ,IAAI1E,EAAO,KAAK,GAAIA,CAAM,EACnC,EAGD/R,EAAaK,GAAA,CACXgW,GAAahW,CAAK,EAClBA,EAAM,YAAcoW,CAAA,CACrB,EACDxW,EAAA,EAAM,WACC,CAAC,GAAGwW,EAAQ,MAAM,CAC3B,EACA,SAAU,SAAY,CACpB,MAAMA,EAAU,CAAC,GAAGxW,EAAM,cAAY,QAAQ,EACxCyW,EAAgBD,EAAQ,OAAYV,KAAE,SAAW,YAAY,EAC/D,IAAAjG,EAAc7P,EAAM,cAUpB,GATAyW,EAAc,OAAOC,GAEzBA,EAAa,KAAK,cAElBA,EAAa,mBAAmB5G,IAEhC4G,EAAa,mBAAmB7E,IAAaoC,EAAS,QAAQ,YAAcyC,EAAa,KAAK,KAAOzC,EAAS,QAAQ,UAAU,EAAE,SAClHpE,EAAA,GAEZ4G,EAAc,OAAS5G,EAAa,CAGtC,MAAM8G,EAAOH,EAAQ,KAAUV,KAAE,SAAW,SAAS,EACjDa,GACI,MAAA3C,GAAe2C,EAAM3W,EAAA,CAAK,CAEpC,CACF,GAEH,CAAC,EACIoW,GAAwBhW,GAAA,CAC5BA,EAAM,sBAAwB,CAAC,GAAGA,EAAM,YAAY,OAAQ,GAAE,OAAO0V,GAAKA,EAAE,SAAW,WAAW,EAAE,OACpG1V,EAAM,mBAAqB,CAAC,GAAGA,EAAM,YAAY,OAAQ,GAAE,OAAO0V,GAAKA,EAAE,SAAW,cAAgBA,EAAE,SAAW,SAAS,EAAE,MAC9H,EC1KMc,GAAoBC,gBAAc,IAAI,EAC5B,SAAAC,GAAmBC,EAAUC,EAAY,CACjD,MAAAC,EAAQC,aAAWN,EAAiB,EACnC,OAAAO,GAAuBF,EAAOF,EAAUC,CAAU,CAC3D,CACO,SAASI,GAAmB,CACjC,SAAAvV,EACA,QAAA6F,CACF,EAAG,CACD,MAAMuM,EAAWoD,KAGX,CAACJ,CAAK,EAAInY,WAAS,IAChB+W,GAAsB,CAC3B,SAAA5B,EACA,QAAAvM,CAAA,CACD,CACF,EACD,aAAQkP,GAAkB,SAAlB,CAA2B,MAAOK,EACrC,SAAApV,CACH,EACJ,CCzBgB,SAAAyV,GAAkBvH,EAAS,GAAI,CACvC,MAAAwH,EAAM,SAAS,cAAc,2BAA2B,EAC1DA,GAAKA,EAAI,OAAO,EACd,MAAAC,EAAQ,SAAS,cAAc,OAAO,EAC5C,OAAAA,EAAM,KAAO,OACPA,EAAA,SAAWzH,EAAO,UAAY,GAC9ByH,EAAA,UAAU,IAAI,QAAQ,EAC5BA,EAAM,MAAM,QAAU,OACtBA,EAAM,MAAM,WAAa,SACzBA,EAAM,GAAK,2BACLA,EAAA,OAASC,GAAuB1H,CAAM,EACxCA,EAAO,YACTyH,EAAM,gBAAkB,IAEjB,cAAK,YAAYA,CAAK,EACxBA,CACT,CACO,SAASC,GAAuB,CACrC,WAAAC,EAAa,CAAC,EACd,MAAA9D,EAAQ,CAAC,CACX,EAAG,CACD,MAAM+D,EAAS,GACf,OAAID,GAAA,MAAAA,EAAY,SACDA,IAAW,IAASjV,GACxBA,EAAE,WAAW,GAAG,EAAIA,EAAI,IAAIA,CAAC,EACrC,EACDkV,EAAO,KAAKD,EAAW,KAAK,GAAG,CAAC,GAE9B9D,GAAA,MAAAA,EAAO,QACT+D,EAAO,KAAK/D,EAAM,KAAK,GAAG,CAAC,EAEtB+D,EAAO,KAAK,GAAG,CACxB,CC1BgB,SAAAC,GAAiB7H,EAAS,GAAI,CACrC,WAAI,QAAmBtJ,GAAA,CACtB,MAAA+Q,EAAQF,GAAkBvH,CAAM,EACtCyH,EAAM,SAAgB/U,GAAA,CACd,MAAAoV,EAAWpV,EAAE,OAAO,MAC1B,GAAI,CAACoV,EACI,OAAApR,EAAQ,EAAE,EAEnB,MAAM+P,EAAU,MAAM,KAAKqB,CAAQ,EAAE,OAAYhP,KAAE,OAAS,WAAW,EAAE,IAAI4F,GAAQ,IAAIG,GAAaH,CAAI,CAAC,EAC3GhI,EAAQ+P,CAAO,EACfgB,EAAM,OAAO,GAEN,cAAK,YAAYA,CAAK,EAC/BA,EAAM,MAAM,EACb,CACH,CClBA,SAASM,GAAkBC,EAAS,CAC3B,OAAA1G,EAAU,KAAK,sBAAuB0G,CAAO,EAAE,KAAKhH,GAAKA,EAAE,IAAI,CACxE,CACO,SAASiH,IAAuB,CACrC,OAAOC,GAAY,CACjB,WAAqBzW,GAAAsW,GAAkBtW,CAAK,EAC5C,QAAgBR,GAAA+F,GAAmB/F,CAAG,EACvC,CACH,CCPO,SAASkX,IAAkB,CAChC,MAAMJ,EAAoBE,KAIpBG,EAAc/V,WACdgW,EAAetB,GAAwBhN,KAAE,YAAY,EACrDuO,EAAevB,GAAwBhN,KAAE,WAAW,EACpDwO,EAAmBxB,GAAwBhN,KAAE,gBAAgB,EAC7D4M,EAAeI,GAAmBhN,GAAKqO,EAAY,QAAUrO,EAAE,YAAY,IAAIqO,EAAY,OAAO,EAAI,IAAI,EAC1GI,EAAa9Q,cAAY,CAACgH,EAAMsB,IAAW,CACnCoI,EAAA,QAAUC,EAAa3J,EAAMsB,CAAM,GAC9C,CAACqI,CAAY,CAAC,EACXI,EAAsB/Q,cAAY,MAAMsI,GAAU,OAChD,MAAAwG,EAAQ,MAAMqB,GAAiB,CACnC,OAAO/W,EAAAkP,GAAA,YAAAA,EAAQ,eAAR,YAAAlP,EAAsB,iBAC9B,EACU,OAAA0X,EAAAhC,EAAM,CAAC,EAAGxG,CAAM,EACpBwG,EAAM,CAAC,GACb,CAACgC,CAAU,CAAC,EACTE,EAAchR,cAAY,CAAC,CAC/B,UAAAwK,EACA,UAAAyG,CAAA,IACI,WACJ,MAAMC,EAAgB,IAAM,CACtBjC,GACe4B,EAAA5B,EAAa,KAAK,GAAI,CACrC,GAAGA,EACH,MAAO,OACR,EAEOzE,GAAA,EAEZ,GAAI,CAACyG,GAAa,GAAC7X,EAAA6V,GAAA,YAAAA,EAAc,QAAd,MAAA7V,EAAqB,IAAI,CAC5B8X,IACd,MACF,CACAb,EAAkB,OAAO,CACvB,MAAOY,EAAY,CAACA,CAAS,EAAI,OACjC,UAAU/R,EAAA+P,GAAA,YAAAA,EAAc,QAAd,MAAA/P,EAAqB,GAAK,EAACQ,EAAAuP,GAAA,YAAAA,EAAc,QAAd,YAAAvP,EAAqB,EAAE,EAAI,OAChE,cAAe,IACd,CACD,UAAWwR,CAAA,CACZ,CACA,GAACb,EAAmBpB,EAAc4B,CAAgB,CAAC,EAChDM,EAAcnR,cAAY,IAAM,CAChCiP,GACW2B,EAAA3B,EAAa,KAAK,EAAE,CACnC,EACC,CAACA,EAAc2B,CAAY,CAAC,EACxB,OACL,WAAAE,EACA,oBAAAC,EACA,YAAY9B,GAAA,YAAAA,EAAc,aAAc,EACxC,aAAcA,GAAA,YAAAA,EAAc,OAC5B,MAAOA,GAAA,YAAAA,EAAc,MACrB,YAAA+B,EACA,gBAAiBX,EAAkB,UACnC,aAAApB,EACA,YAAAkC,CAAA,CAEJ,CC5DO,SAASC,GAAgBrX,EAAO,CACjC,IACF,MAAAkF,EAAQ,EACR,SAAAoS,EAAW,EACX,SAAAC,EAAW,IACX,KAAA5V,EAAO,KACP,MAAAgK,EACA,eAAA6L,EAAiB,CAAC,CAAC7L,EACnB,gBAAA8L,EAAkB,GAClB,cAAAC,EAAgB,MAChB,UAAA7a,EACA,KAAA8a,EACA,cAAAC,EAAgB,CACd,MAAO,SACT,EACA,OAAArX,EAAS,UACT,WAAAsX,EAAa,mBACb,cAAAC,EAAgB,aAChB,YAAAC,EAAcC,GAAQrW,CAAI,CACxB,EAAA3B,EACJ,MAAM2G,EAAKsR,UACH/S,EAAAgT,GAAMhT,EAAOoS,EAAUC,CAAQ,EACjC,MAAAtE,GAAc/N,EAAQoS,IAAaC,EAAWD,GAC9Ca,EAAYC,GAAmBR,CAAa,EAClD,IAAIS,EAAa,GACb,IAACZ,GAAmBD,EAAgB,CACtC,MAAMc,EAAgBV,EAAc,QAAU,UAAY3E,EAAa/N,EAC1DmT,EAAAF,EAAU,OAAOG,CAAa,CAC7C,CACA,MAAMC,EAAW,GACZd,IACHc,EAAS,MAAQ,GAAG,KAAK,MAAMtF,EAAa,GAAG,CAAC,KAElD,MAAM7H,EAAQoN,GAAwB,CACpC,KAAA7W,CAAA,CACD,EACK8W,GAAW9M,GAAS0M,IAAgBvV,EAAA,YAAI,UAAW5F,EAAK,mCAAoCkO,EAAM,KAAK,EACxG,UAASO,GAAA1O,EAAA,IAAC,OAAK,IAAA0J,EAAS,SAAMgF,EAAA,EAC9B0M,GAAepb,MAAA,OAAK,SAAWob,CAAA,EAClC,IACK,OAAAvV,EAAA,KAAC,MAAI,iBAAe2U,EAAkB,OAAYvS,EAAO,gBAAeoS,EAAU,gBAAeC,EAAU,iBAAgBE,EAAkB,OAAYY,EAAY,kBAAiB1M,EAAQhF,EAAK,OAAW,KAAMgR,GAAQ,cAAe,UAAWza,EAAKL,EAAW,UAAU,EAClR,UAAA6a,IAAkB,OAASe,EAC5Bxb,MAAC,OAAI,UAAW,GAAG8a,CAAW,IAAIxX,CAAM,IAAIsX,CAAU,mBACpD,eAAC,MAAI,WAAW3a,EAAK4a,EAAe,sDAAuDL,GAAmB,oCAAoC,EAAG,MAAOc,CAAA,CAAU,CACxK,GACCb,IAAkB,UAAYe,CACjC,GACJ,CACA,SAAST,GAAQrW,EAAM,CACrB,OAAQA,EAAM,CACZ,IAAK,KACI,YACT,IAAK,KACI,YACT,QACS,WACX,CACF,CC5DO,SAAS+W,GAAY1Y,EAAO,CAC1B,OAAA/C,EAAA,IAACoa,GAAiB,IAAGrX,CAAO,EACrC,CCHO,MAAM2Y,GAAgB9Y,EAAc5C,MAAC,QAAK,EAAE,iPAAkP,GAAI,mBAAmB,ECDjT,IAAA2b,YAAuCA,EAAe,CAC/DA,SAAc,MAAW,UACzBA,EAAc,MAAW,UACzBA,EAAc,KAAU,SACxBA,EAAc,KAAU,mBACxBA,EAAc,MAAW,2CAClBA,CACT,EAAE,CAAE,GCUJ,MAAMC,GAAQ,EAAI,KAAO,KAClB,SAASC,GAAc,CAC5B,UAAAjc,EACA,MAAA8O,EACA,YAAAX,EACA,MAAA9F,EACA,SAAA6T,EACA,aAAAC,EACA,WAAAC,EACA,iBAAAC,EACA,sBAAAC,EAAwB,GACxB,QAAAhZ,EACA,aAAAC,EACA,SAAAgZ,EACA,UAAAC,EACA,QAAAC,EAAU,QACV,YAAAC,EAAc,OACd,gBAAAC,EACA,eAAAC,EAAiB,GACjB,cAAAC,EACA,SAAAxZ,EACA,eAAAyZ,CACF,EAAG,CACK,MACJ,WAAA5C,EACA,MAAAtJ,EACA,aAAAmM,EACA,YAAA3C,EACA,gBAAA4C,EACA,WAAA5G,GACEyD,GAAgB,EACdoD,EAAWlZ,SAAO,IAAI,EACfmZ,GAAA,CACX,UAAAV,GACCS,CAAQ,EACX,MAAME,EAAU/B,UACVgC,EAAUtO,EAAQ,GAAGqO,CAAO,SAAW,OACvCE,EAAgBlP,EAAc,GAAGgP,CAAO,eAAiB,OACzDG,EAAWjV,IAASuI,GAAA,YAAAA,EAAO,KAC3B2M,EAAgB,CACpB,2BAA4B,GAC5B,aAAc,CACZ,iBAAkB,CAACxB,GAAc,KAAK,EACtC,YAAaC,EACf,EACA,SAAU,CACR,WAAAI,EACA,KAAMzH,GAAK,MACb,EACA,UAAW/D,GAAS,CAClBsL,GAAA,MAAAA,EAAWtL,EAAM,IACnB,EACA,QAAoBhP,GAAA,CACdA,GACFQ,GAAM,OAAOR,CAAO,CAExB,GAEI4b,EAAuB7B,GAAwB,CACnD,YAAAxN,EACA,oBAAqB,MACrB,QAAA7K,CAAA,CACD,EACG,IAAAma,EACAhB,IAAY,SACGgB,EAAAC,GACRjB,IAAY,SACJgB,EAAAE,GAEAF,EAAAG,GAEnB,MAAMC,EAAexB,EAAmBjc,EAAA,IAAC8F,EAAO,SAAQ,OAAO,MAAM,SAAS,KAAK,KAAK,SAAU8W,GAAmB,CAACM,GAAYja,EAAU,QAAS,IAAM,CAC7I+W,EAAA,CACV,UAAW,IAAM8B,GAAA,YAAAA,EAAW,GAAE,CAC/B,GAEC,SAAC9b,EAAA,IAAAiG,EAAA,CAAM,QAAQ,cAAe,GAChC,EAAY,KACRyX,EAAmB3B,GAAgB,MAAQ9T,IAAU8T,EAAgB/b,EAAA,IAAA8F,EAAA,CAAO,QAAQ,UAAU,MAAM,UAAU,KAAK,KAAK,SAAA7C,EAAoB,QAAS,IAAM,CAC/J6Y,GAAA,MAAAA,EAAWC,EAAY,EAEnB,SAAC/b,EAAA,IAAAiG,EAAA,CAAM,QAAQ,aAAc,GAC/B,EAAY,KACV0X,EAAe3U,cAAY,IAAM,QACrC5G,EAAAya,EAAS,UAAT,MAAAza,EAAkB,OACpB,EAAG,CAAE,GACL,cAAQ,MAAI,WAAWnC,EAAK,UAAWL,CAAS,EAC3C,UAAA8O,SAAU,MAAI,IAAIsO,EAAS,UAAWI,EAAqB,MACvD,SACH1O,CAAA,GACDX,GAAgB/N,MAAA,OAAI,UAAWod,EAAqB,YAAc,SAAYrP,EAAA,EAC/E/N,EAAA,IAAC,MAAI,mBAAiBgd,EAAS,mBAAkBC,EAC/C,SAAApX,OAAC+X,GAAM,iBAAiBR,EAAsB,aAAAja,EAA4B,QAAAD,EACxE,UAAAlD,EAAA,IAACqd,EAAe,sBAAAD,EAA4C,gBAAAb,EAAkC,YAAAD,EAA0B,UAAWK,IAAiB,aAAc,SAAAO,EAAoB,aAAAO,EAA4B,iBAAAC,EAAoC,sBAAAxB,EAA8C,eAAAM,EAAgC,cAAAC,EAA8B,aAAAkB,EAA4B,SAAA1a,EAC5X,SAAAjD,EAAA,IAAC,SAAM,IAAK6c,EAAU,kBAAiBG,EAAS,mBAAkBC,EAGpE,SAAUC,EAAW,GAAQf,EAAU,OAAQR,GAAc,MAAO,KAAK,OAAO,SAAUgB,IAAiB,aAAc,UAAU,UAAU,SAAe3Y,GAAA,SACtJ5B,GAAA4B,EAAE,OAAO,QAAT,MAAA5B,GAAgB,SAClB0X,EAAW9V,EAAE,OAAO,MAAM,CAAC,EAAGmZ,CAAa,EAC3CT,GAAA,MAAAA,EAAiB1Y,EAAE,OAAO,MAAM,CAAC,GAErC,IACA,EACC2Y,IAAiB,cAAiB3c,MAAAyb,GAAA,CAAY,UAAU,gCAAgC,KAAK,KAAK,MAAOzF,CAAY,IACxH,CACF,EACF,GACJ,CACA,SAASwH,GAAa,CACpB,SAAApa,EACA,qBAAAga,EACA,SAAAF,EACA,YAAAZ,EACA,eAAAE,EACA,UAAAqB,EACA,aAAAF,EACA,aAAAF,EACA,iBAAAC,EACA,SAAAza,CACF,EAAG,CACD,OAAIia,SACMhX,WACJ,WAAAL,EAAA,KAAC,MAAI,WAAW,GAAGyW,CAAW,kEAC5B,UAAAtc,EAAA,IAAC,MAAI,WAAWC,EAAK,yBAA0Buc,EAAiB,eAAiB,gBAAgB,EAAG,QAAS,IAAMmB,IAAgB,IAAKT,EAAU,IAAI,GAAG,EACxJ9Z,CAAA,EACH,EACApD,MAAC8F,GAAO,QAAS,IAAM6X,IAAgB,SAAUE,GAAa5a,EAAU,UAAU,QAAQ,QAAQ,UAAU,MAAM,UAAU,KAAK,KAC/H,SAACjD,MAAAiG,EAAA,CAAM,QAAQ,UAAU,CAC3B,GACCwX,GAAgBpZ,eAAaoZ,EAAc,CAC5C,QAAS,UACV,EACEC,GAAoBrZ,eAAaqZ,EAAkB,CACpD,QAAS,UACV,CACD,IAEGrZ,eAAajB,EAAU,CAC5B,UAAWnD,EAAKmd,EAAqB,MAAO,OAAQ,oIAAoI,EACzL,CACH,CACA,SAASG,GAAc,CACrB,SAAAna,EACA,gBAAAmZ,EACA,YAAAD,EACA,SAAAY,EACA,eAAAV,EACA,aAAAmB,EACA,aAAAF,EACA,iBAAAC,EACA,cAAAjB,EAAgB,UAChB,sBAAAP,EAAwB,GACxB,SAAAjZ,CACF,EAAG,CACD,cAAQ,MACJ,WAAA4C,EAAA,KAAC,MAAI,WAAW5F,EAAKqc,EAAaG,EAAe,CAACS,GAAY,SAAU,kGAAmGV,EAAiB,WAAa,gBAAgB,EAAG,MAAOU,EAAW,CAC9O,gBAAiB,OAAOA,CAAQ,GAC9B,SAAW,QAAS,IAAMS,IACzB,UAAmBpB,GAAA,CAACW,GAAY7Y,EAAA,aAAakY,EAAiB,CAC/D,KAAM,KACP,EACCvc,MAAC8F,EAAO,SAAQ,SAAS,MAAM,QAAQ,KAAK,KAAK,UAAW7F,EAAKic,GAAyB,+BAA+B,EAAG,SAAAjZ,EACzH,SAAAia,EAAYld,EAAA,IAAAiG,EAAA,CAAM,QAAQ,gBAAgB,EAAMjG,MAAAiG,EAAA,CAAM,QAAQ,eAAe,CAChF,IACF,EACC7C,GACCqa,GAAgBC,IAAsB7X,EAAA,YAAI,UAAU,OACjD,UAAA4X,GAAgBpZ,eAAaoZ,EAAc,CAC9C,QAAS,OACV,EACIC,GAAoBrZ,eAAaqZ,EAAkB,CACtD,QAAS,OACV,GACC,CACJ,GACJ,CACA,SAASJ,GAAc,CACrB,SAAAla,EACA,gBAAAmZ,EACA,YAAAD,EACA,UAAAuB,EACA,SAAAX,EACA,aAAAO,EACA,iBAAAC,EACA,aAAAC,EACA,cAAAlB,EAAgB,eAChB,SAAAxZ,CACF,EAAG,CACD,OAAKsZ,IACeA,EAAAvc,EAAA,IAACsO,IAAsB,QAAQ,YAAY,UAAWrO,EAAK,oDAAqDwc,CAAa,CAAG,WAE5I,MACJ,WAAC5W,OAAA,OAAI,UAAW5F,EAAK,WAAYqc,CAAW,EAAG,QAAS,IAAMqB,EAAA,EAC3D,UAAWT,EAAAld,MAAC,MAAI,KAAKkd,EAAU,UAAWjd,EAAK,6BAA8Bwc,CAAa,EAAG,IAAI,GAAG,EAAKF,EAC1Gvc,MAAC,OAAI,UAAU,8DACb,eAAC8d,GAAW,UAAUD,GAAa5a,EAAU,KAAK,SAAS,QAAQ,UAAU,KAAK,KAAK,MAAM,UAAU,OAAO,eAC5G,SAAAjD,MAAC0b,GAAc,IACjB,CACF,IACF,EACCtY,GACCqa,GAAgBC,IAAsB7X,EAAA,YAAI,UAAU,QACjD,UAAA4X,GAAgBpZ,eAAaoZ,EAAc,CAC9C,QAAS,OACV,EACIC,GAAoBrZ,eAAaqZ,EAAkB,CACtD,QAAS,OACV,GACC,CACJ,GACJ,CACO,SAASK,GAAkBhb,EAAO,CACjC,MACJ,MAAO,CACL,SAAA+Y,EACA,MAAA7T,EAAQ,IACV,EACA,WAAY,CACV,MAAAtB,CACF,GACEqX,GAAc,CAChB,KAAMjb,EAAM,KACb,EACKkb,EAAY,CAChB,SAAAnC,EACA,MAAA7T,EACA,QAAStB,GAAS,KAClB,aAAcA,EAAQ3G,MAACiG,EAAM,SAAQ,yBAA0B,GAAK,MAEtE,aAAQ4V,GAAe,IAAGqC,GAAWD,EAAWlb,CAAK,CAAG,EAC1D,CCtPO,SAASob,GAAcC,EAAOC,EAAQpV,EAAU,GAAI,CACzD,OAAOqV,GAAS,CACd,SAAU,CAAC,cAAeF,EAAOC,CAAM,EACvC,QAAS,IAAME,GAAgBH,EAAOC,CAAM,EAE5C,UAAYA,EAAoB,OAAX,IACrB,gBAAiBG,GACjB,QAAS,CAACvV,EAAQ,SAClB,YAAa,IAAM,CAGX,MAAAwV,EAAeC,GAAY,eAAe,CAC9C,SAAU,CAAC,YAAY,CACxB,GAAE,KAAK,CAAC,CAAG,CAAA/d,CAAQ,IACdA,GAAYyd,EAAM,SAAWzd,EAASgS,CAAC,CAAC,EACnChS,EAEF,IACR,EACD,GAAI8d,EACF,OAAOA,EAAa,CAAC,CAEzB,EACD,CACH,CAOA,SAASF,GAAgBH,EAAOC,EAAQ,CACtC,OAAOzL,EAAU,IAAI,eAAewL,CAAK,GAAI,CAC3C,OAAAC,CACD,GAAE,KAAK1d,GAAYA,EAAS,IAAI,CACnC,CC5BO,SAASge,GAAmB,CACjC,UAAA/e,EACA,MAAAkO,EACA,KAAA8Q,EACA,MAAOC,EACP,QAAAC,EACA,SAAAC,EACA,UAAAlB,EACA,UAAAmB,CACF,EAAG,CACK,MACJ,MAAAC,GACEC,GAAiB,EACrB,cAAQnY,GAAO,WAAAnH,EAAsB,KAAK,KAAK,KAAK,cAChD,UAACI,EAAA,IAAAgH,GAAA,CAAa,MAAO+X,EAAW,cAAgB,KAAM,cAAe/e,EAAA,IAACmN,GAAiB,WAAU,SAAU,GACxG,SACHW,EAAA,EACA9N,MAACkH,IAAY,SAAK0X,CAAA,UACjBO,GACC,WAAAnf,MAAC8F,EAAO,SAAQ,OAAO,QAAS,IAAM,CACtCmZ,EAAM,EAAK,GAER,SAAaJ,GAAA7e,MAACiG,EAAM,SAAQ,QAAS,GACxC,EACAjG,MAAC8F,EAAO,UAAU+X,EAAW,QAAQ,OAAO,MAAOkB,EAAW,SAAW,UAAW,QAAS,IAAM,CACvFC,GAAA,MAAAA,IAEPA,GACHC,EAAM,EAAI,CACZ,EAEG,SACHH,EAAA,GACF,CACF,GACJ,CC1CO,MAAMM,GAAsB,CACjC,QAAS,CACP,aAAc,QACd,iBAAkB,CAAC,IAAK,OAAO,CACjC,EACA,SAAU,CACR,eAAgB,CACd,MAAO5d,EAAQ,cAAc,EAC7B,SAAU,EACV,aAAc,IACd,OAAQ,CAAC,CACP,KAAM,eACN,KAAM,IAAM6d,GAAe,2BAA2B,EACtD,SAAU,CAAC,CACT,MAAO,GACP,KAAM,IAAMA,GAAe,2BAA2B,GACrD,CACD,KAAM,iBACN,KAAM,IAAMA,GAAe,iCAAiC,GAC3D,CACD,KAAM,mBACN,KAAM,IAAMA,GAAe,mCAAmC,GAC7D,CACD,KAAM,qBACN,KAAM,IAAMA,GAAe,8BAA8B,EAC1D,EACF,CACH,EAGA,MAAO,CACL,OAAQ,CACN,UAAW,CAAC,eAAgB,gBAAiB,kBAAmB,sBAAuB,SAAU,kBAAkB,EACnH,gBAAiB,CAAC,SAAU,gBAAiB,gBAAiB,iBAAkB,cAAc,CAChG,CACF,EAEA,eAAgB,CACd,OAAQ,CACN,MAAO,CAAC,CACN,IAAK,eACL,MAAO7d,EAAQ,cAAc,GAC5B,CACD,IAAK,sBACL,MAAOA,EAAQ,qBAAqB,EACrC,CACH,CACF,CACF,CACF,EClDa8d,GAAU1c,EAAc5C,MAAC,QAAK,EAAE,qCAAsC,GAAI,aAAa,ECC7F,SAASuf,GAAS,CACvB,UAAA3f,EACA,SAAAwD,EACA,KAAAsB,EACA,MAAAC,EACA,OAAArB,EACA,WAAAD,EACA,KAAAmc,EAAO,GACP,YAAAC,CACF,EAAG,CACM,OAAA5Z,OAAC,OAAI,UAAW5F,EAAK,0BAA2Buf,GAAQ,YAAa5f,CAAS,EAChF,UAAA6f,EACAC,WAAS,IAAItc,EAAkBuc,GAAA,CAC5B,GAAAC,iBAAeD,CAAI,EACrB,OAAOtb,eAAasb,EAAM,CACxB,KAAAjb,EACA,MAAAC,EACA,WAAAtB,EACA,OAAAC,CAAA,CACD,CACH,CACD,CACD,GACJ,CCzBO,SAASuc,GAAkB5X,EAAO,CAEhC,OACL,GAAIA,EACJ,KAAM,GAAGA,CAAK,GACd,YAAa,GAAGA,CAAK,GAEzB,CCaA,SAAS6X,GAAe/c,EAAO6E,EAAK,CAC5B,MAAAmY,EAAWpc,SAAO,IAAI,EACtBkZ,EAAWmD,GAAapY,CAAG,EAC3B,CACJ,YAAAqY,KAAmBC,EAAE,KACrB,aAAAC,EACA,SAAA/c,EACA,YAAAgd,EACA,UAAAvC,EACA,WAAAwC,EACA,mBAAAC,EACA,eAAAC,EACA,YAAAC,EACA,aAAAC,EACA,SAAAC,EAAW,KACX,gBAAAC,EAAkB,GAClB,iBAAAC,EACA,MAAOC,EACP,aAAA9E,EACA,SAAU+E,EACV,SAAAC,EACA,QAAAC,EACA,iBAAAC,EAAmB,GACnB,kBAAAC,EACA,YAAAC,EACA,iBAAAC,EAAmB,GACnB,SAAAC,EACA,GAAGC,CACD,EAAAve,EACEwe,EAAkBhG,GAAwB,CAC9C,GAAGxY,EACH,eAAgB,GACjB,EACK,CAACkF,EAAO6T,CAAQ,EAAI0F,GAAuBze,CAAK,EAChD,CAAC0e,EAAeC,CAAgB,EAAIrhB,WAAS,EAAK,EAClDshB,QAAoB/T,GAAe,iBAAe,GAAC,KAAK,YAAY,aAAW,YAAa,GAC5FgU,EAAgBV,EAAqBlhB,MAAAsG,GAAA,EAAsB,EAAK,KAChE,CACJ,WAAAub,EACA,WAAAC,GACEC,GAAS,CACX,GAAGT,EACH,SAAUzE,EACV,aAAcgB,GAAa4D,EAAgBE,EAAmBC,CAAA,CAC/D,EACD,aAAQhE,GAAM,iBAAA2D,EAAmC,GAAGM,EAChD,gBAACG,GAAM,KAAKjC,EAAU,UAAW9f,EAAK,8BAA+BshB,EAAgB,KAAK,EAAG,QAAS,IAAM,QAE5Gnf,EAAAya,EAAS,UAAT,MAAAza,EAAkB,OAEhB,YAACpC,MAAAiiB,GAAA,CAAY,iBAAkBhC,EAAa,YAAAkB,EAA0B,MAAOlZ,EAAO,SAAU6T,EAAU,SAAA4E,EAAoB,iBAAAU,EAAoC,SAAAC,CAAoB,GACpLrhB,MAACkiB,GAAU,MAAMnf,EAAM,KAAM,iBAAA6d,EAAoC,WAAAkB,EAAwB,WAAAzB,EAAwB,mBAAAC,EAAwC,SAAAP,EAAoB,SAAAlD,EAAoB,MAAO5U,EAAO,SAAU6T,EAAU,aAAAqE,EAA4B,UAAAtC,EAAsB,YAAAuC,EAA0B,YAAAI,EAA0B,gBAAAG,EAAkC,cAAAc,EAA8B,iBAAAC,EAAoC,iBAAAT,EAAoC,SAAAI,EAC9c,SAAAje,CACH,GACF,EACF,EACJ,CACA,SAAS6e,GAAY,CACnB,MAAAE,EACA,SAAAC,EACA,iBAAAC,EACA,SAAA3B,EACA,YAAAS,EACA,iBAAAC,EACA,SAAAC,CACF,EAAG,CACD,MAAMiB,EAAUxe,KACVye,EAAavZ,cAAmBM,GAAA,CACpC,MAAM+I,EAAI8P,EAAM,UAAgBK,KAAG,KAAOlZ,CAAG,EACvCmZ,EAAW,CAAC,GAAGN,CAAK,EAC1B,OAAI9P,EAAI,KACGoQ,EAAA,OAAOpQ,EAAG,CAAC,EACpB+P,EAASK,CAAQ,GAEZA,CAAA,EACN,CAACN,EAAOC,CAAQ,CAAC,EACb,OAAApiB,MAACuf,IAAS,UAAWtf,EAAK,qCAAsCygB,IAAa,KAAO,OAAS,MAAM,EAAG,KAAMA,EAAU,WAAU,GAClI,WAAM,IAAIzT,SAASnK,GAAmB,cAAcmK,EAAK,aAAc,UAAWA,EAAK,OAASmU,EAAmBphB,EAAA,IAACmP,IAAO,OAAM,GAAC,IAAKlC,EAAK,MAAO,SAAS,WAAW,MAAOA,EAAK,KAAM,EAAK,KAAM,QAAS,IAAMkU,GAAA,YAAAA,EAAclU,GAAO,SAAUoU,EAAW,OAAY,IAAM,CAC/PkB,EAAWtV,EAAK,EAAE,EACtB,OAEXqV,GAAA,MAAAA,EAAS,cAAc,CACrB,SAAU,KAIZA,GAAA,MAAAA,EAAS,WACX,EAEK,SAAiBD,EAAApV,CAAI,GAZIA,EAAK,EAajC,CAAO,CACX,EACJ,CACA,SAASiV,GAAUnf,EAAO,CAClB,MACJ,SAAA8Z,EACA,SAAAkD,EACA,aAAAI,EACA,SAAAuC,EACA,MAAAC,EACA,YAAAvC,EACA,WAAA0B,EACA,YAAAtB,EACA,gBAAAG,EACA,cAAAc,EACA,iBAAAC,EACA,iBAAAT,EACA,UAAApD,EACA,KAAAnZ,EACA,SAAA2c,CACE,EAAAte,EACEuf,EAAUxe,KACV8e,EAAW5Z,cAAqBmZ,GAAA,CACpCA,GAASA,GAAS,CAAI,UAAelV,GAAA,CACnC,MAAM/J,EAAU,CAAC+J,GAAQ,CAACA,EAAK,IAAM,CAACA,EAAK,KAEpC,QADe0V,EAAM,UAAUH,GAAMA,EAAG,MAAOvV,GAAA,YAAAA,EAAM,GAAE,EAAI,KACzC,CAAC/J,CAAA,CAC3B,EACIif,EAAM,SACPhC,IACFgC,EAAQA,EAAM,IAAYlV,GAAAkT,EAAalT,CAAI,CAAC,GAE9CyV,EAAS,CAAC,GAAGC,EAAO,GAAGR,CAAK,CAAC,EAC5B,GAACQ,EAAOD,EAAUvC,CAAY,CAAC,EAC5B0C,EAAUC,GAAW,CACzB,GAAG/f,EACH,0BAA2B,GAC3B,OAAQ0e,EACR,aAAcC,EACd,MAAOtB,EACP,cAAe,OACf,KAAM,UACN,aAAc,GACd,eAAyBnY,GAAA,CACvB8a,EAAoB9a,CAAK,CAC3B,EACD,EACK,CACJ,MAAO,CACL,YAAA+a,EACA,eAAAC,EACA,OAAAC,EACA,UAAAC,EACA,WAAA9C,EACA,cAAA+C,CACF,EACA,KAAAC,EACA,UAAAC,EACA,WAAAC,EACA,cAAAC,CACE,EAAAX,EACEE,EAAmCU,GAAA,CACvC,MAAMC,EAASH,EAAW,MAAQP,GAAe,KAAO,CAAC,GAAGO,EAAW,OAAQ,GAAEP,CAAW,EAAI,KAC5FU,GAAA,MAAAA,EAAQ,KACDd,EAAA,CAACc,EAAO,IAAI,CAAC,EACbzC,GACT2B,EAAS,CAAC/C,GAAkB6D,EAASA,EAAO,MAAQD,CAAS,CAAC,CAAC,EAEjEL,EAAc,EAAE,EAChBH,EAAe,IAAI,EACnBE,EAAU,EAAK,GAIjBQ,GAAgB,IAAM,CAChB5D,EAAS,SAAWsD,EAAK,UAAU,UAAYtD,EAAS,SAClD8C,EAAA,UAAU9C,EAAS,OAAO,CAEnC,GAACA,EAAU8C,EAASQ,CAAI,CAAC,EACtB,MACJ,qBAAAO,EACA,gCAAAC,CAAA,EACEC,GAA6BjB,CAAO,EAClCkB,EAAsBC,GAAmB,IAAM,CAC/CrD,GAAmB,CAACuC,GACtBC,EAAU,EAAI,CAChB,CACD,EACD,aAAQc,GAAQ,SAAApB,EAAkB,cAAeqB,GAAS,UAAArG,EAAsB,cAAoB7Z,GAAA,CAElGA,EAAE,eAAe,GAEf,SAAChE,MAAA,SAAM,SAAAqhB,EAAoB,KAAK,OAAO,UAAWphB,EAAK,yEAA0EyE,IAAS,KAAO,OAAS,MAAM,EAAG,YAAA8b,EAA2B,GAAGtC,GAAW4D,EAAY,CACxN,IAAKjF,EACL,MAAOwD,EACP,SAAUmD,EACV,QAAcxf,GAAA,CAEN,MAAAmgB,EADQngB,EAAE,cAAc,QAAQ,MAAM,EACvB,MAAM,sDAAsD,EACjF,GAAImgB,EAAQ,CACVngB,EAAE,eAAe,EACX,MAAAogB,EAAY,OAAO,eACrBA,GAAA,MAAAA,EAAW,aACbA,EAAU,mBAAmB,EAC7BxB,EAASuB,EAAO,IAAIE,GAASxE,GAAkBwE,CAAK,CAAC,CAAC,EAE1D,CACF,EACA,oBAAqB,OACrB,gBAAiBnB,EAASI,EAAY,OACtC,aAAc,MACd,YAAa,MACb,WAAY,QACZ,UAAgBtf,GAAA,CACV,GAAAqd,EAAU,OACd,MAAMtI,EAAQ/U,EAAE,OACZ,GAAAA,EAAE,MAAQ,QAAS,CAErBA,EAAE,eAAe,EAEjB+e,EAAoBhK,EAAM,KAAK,EAC/B,MACF,CASA,GANI/U,EAAE,MAAQ,UAAYkf,IACxBC,EAAU,EAAK,EACfC,EAAc,EAAE,GAIdpf,EAAE,MAAQ,WAAakf,IAAWF,IAAgB,GAAKA,GAAe,MAAO,CAC/EC,EAAe,IAAI,EACnB,MACF,CAGA,GAAID,GAAe,OAAShf,EAAE,MAAQ,aAAeA,EAAE,MAAQ,cAAe,CAC5EA,EAAE,eAAe,EACjB,MACF,CAGA,IAAKA,EAAE,MAAQ,aAAeA,EAAE,MAAQ,aAAeA,EAAE,MAAQ,WAAa+U,EAAM,iBAAmB,GAAKiK,GAAe,MAAQL,EAAM,OAAQ,CAC/IL,GAAA,MAAAA,EAAS,cAAc,CACrB,SAAU,KAEZ,MACF,CAGgBsB,EAAqB5f,CAAC,GAEpC6f,EAAgC7f,CAAC,CAErC,EACA,QAASqd,EAAW,OAAY0C,EAChC,QAAS1C,EAAW,OAAY0C,CAAA,CACjC,EAAG,CACJ,EACJ,CACA,SAASvC,GAAuB,CAC9B,SAAA1F,EACA,MAAA7T,EACA,aAAA8T,EACA,SAAAgF,CACF,EAAG,CAEK,MAAAF,EAAa/Z,UAAQ,IAClBwd,GAAsBrc,CAAK,EACjC,CAACA,CAAK,CAAC,EAGJsc,EAAoBzd,UAAQ,IACzBwd,GAAsBvI,CAAY,EACxC,CAACA,CAAY,CAAC,EAGXyI,EAAexb,cAAYf,GAAS,CAClC,MAAAwc,EAAW1D,EAAW9Y,EAAM,OAASiY,EAAEa,CAAQ,CAAC,EAAI9Y,EAC1D6T,GAAA,MAAAA,EAAW2I,EAAQ,EAClB,CAAC3I,EAAUiF,CAAQ,CAAC,EAChB,OAAA2D,GAAoB7D,GAAa,OAAwB0D,GAAqB,GAAIC,CAAY,CACvG,CACA,SAASF,GAAsBrc,EAAO,CACpC,GAAIA,GAAS,KAGN,OAAAA,EAAM,IAASiY,GACb,OAAOA,GAAM,SAAWL,GAAkBK,CAAC,EAAIA,CACvD,CACH,CACa,MAAAyE,GAAYC,GAAM,WAAW9E,EAAc,EC7S3C+E,GAAajiB,EAAc5C,MAAC,QAAK,EAAE,+FAAgG,GAAI,gBAAgB,ECDvJ8kB,OAAiB,IACjBC,OAAiB,IACjBC,OAAmB,IACnBC,GAAc,CACzB,OAAQ,UACV,ECLO,SAASC,GAAkB,CAChC,EACA,KAAAC,EACA,OAAAC,EACA,OAAAC,CACF,EAAG,CACM,OACL,KAAAF,EACA,EAAG,EAAE,QACL,EAAG,EAAE,QACL,OAAQC,GAAU,EAClB,OAAQC,GAAU,EAClB,YAAa,EAEjB,CCdO,IAAIC,GAAoB,KACxB,SAASC,GAAqB7U,EAAM,CACrB4U,GAAA5U,CACtB,CCHO,SAAS8U,GAAaL,EAAM,CAC1B,OACL,KAAMA,EAAK,KACX,IAAKA,EAAK,IACV,MAAOA,EAAK,MACZ,OAAQA,EAAK,OAEjB,CCLO,SAASM,GAAYC,EAAS,CAC7B,MAAAC,EAAW,IAAI,qBAAgCC,GAAA,CACnDA,EAAQ,QAAiBpV,GAAA,CACjB,MACJ,MAAAqV,EACA,OAAAhmB,EACA,KAAAimB,EACA,IAAAC,CAAA,EACEvV,EAAM,mBACJ,CAAC9G,EAAIsc,CAAM,EAAI,CAAC,GAAGN,CAAO,EAAE,KAAK,CAAC,CAAGM,EAAM,IAAMA,EAAO,IAAI,UAAYxV,EAAM,MAAM,GAAK,GAC3F,GAAA9G,GAAM,MAAQsc,GAAU,KAAM,OAClC,MAAMb,EAAO,CACX,MAAAU,EACA,OAAAhmB,EACA,KAAAimB,EACA,IAAAC,CAAA,EAEFL,EAAQ,IAAIhc,EAAI,CACd,GAAGsc,EACH,KAAAb,CAAA,CACD,EACF,EACDQ,EAAS,WAAW,EACrB,EACD,CAAC,GAAGD,EAAQ,QAAQ,EAAE,QAAkBM,GAAA,CAClCA,EAAO,IAAI,SACJL,EAAA,QAAQK,EAAO,IAAI,OAAO,CACrC,CACD,CACH,CCrBO,SAASC,GAAa,CAC3B,GAAAvc,EACA,SAAAzG,EACA,IAAA2E,EACA,QAAAse,EACA,YAAAC,EACA,GAAGld,CACL,EAAG,CACK,MAAAmd,EAAgBziB,SAAO,IAAI,EAC3B,CACJ,kBAAA0iB,EACA,yBAAAC,GACEC,GAAmB,EACjB5kB,EAAQgC,SAAO,CACnB,aAAc,CACZ,EAAG,EACH,EAAG,CACL,CACD,GAAE,QACG6iB,EAAa7iB,SAAOsF,CAAO,EACjCud,EAAW,QAAUvd,EACrB0a,kBAAgB,KACT1gB,EASH6hB,GAAW,OAAOpb,CAAE,EARpBob,GAAW,IAAIpb,EAAI,CACjB,GAAGob,GAAW,IAAIpb,CAAE,EACpB,GAAAA,EACA,IAAA9B,EACA,KAAM4e,EAAW,QAAQ,KACzB,QAASA,EAAW,QAAQ,QAC7B,EAII,IAAM,CACX1B,GAAW,OAAOpb,CAAE,IAErB,CAACA,EAAIzG,EAAUujB,EAAY5e,CAAG,CAAC,EAGlC,MAAM6e,EAA6B5lB,GAAA,CACjCmkB,GAAa,QAAmB0B,GAAA,OAC1BA,EAAQ,SAAStkB,EAAA0iB,GAAW,IAAIpb,CAAE,IAAjB,YAAAtH,EAAoB,OACvCvB,EAAS6lB,CAAO,CAClB,CACD,GAEGC,EAAmB3iB,GAAA,SACjB,MAAA4iB,EAAY9B,GAAW,IAAIpb,CAAE,EAC7B5E,EAAK8C,EAAI,QACTif,EAAkB,CAACT,EAAc,SAAW,CAACzkB,EAAM,WAAaykB,EAAc,QAAQ,SAASzkB,EAAM,SAAS,EAGpH,GAAI2jB,IAAqB,CAACxgB,GAAM,CAAC8hB,GAAa,CAACC,EAAiB,CAC9D7iB,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClB,MACF,CACAyhB,GAAYV,EAAU,EACtBQ,GAAqB,MAAM,EAGvBY,GACFW,GAAqB9iB,CAAC,EAGxBA,EAAE,aAAa,cAAgB,OAC/BrC,EAAM,aAAe,CACnB,EAAGqC,EAAE,QACL,EAAGA,EAAE,SAEPrC,EAAM,YAAc6jB,GAAa1gB,EAAG,sBAAuB,GAC3D,MAAMiiB,EAAK7B,GAAkB,CAC3B,KAAMvjB,EAAM,YACZ,EAAAqC,CAAA,CACD,EAIGkiB,GAAA,MAAAA,EAAS,SACHA,EAAA,QAAQU,EAAmBI,GAAA,CACjChjB,EAAE,aAAa,aAAagjB,EAAM,EAAG,CAAC,EACvC,EAEH/B,GAAY,OAAS,WACrBA,GAAY,aAAevb,EACvB9B,EAAI,UACFA,EAAA,QAAQ,QAAQ,SAAW,SAEtBM,GAAA9F,EAAAokB,EAAA,SAAQ,cAAR,MAAAte,EAAA,KAAA9F,EAAsB2kB,EAAIH,GAGrC,sBAAsB,IAAM,CAC1BH,EAAoBQ,UAAA,OAAA7kB,EAAA6kB,EAAE,cAAF,YAAA7kB,EAAA,KAAA6kB,EAAgBF,EAAIH,GAAU,EACnD,EAGiBP,EAAA,OAAQ,WAAYa,EAAY,EAAI,GAElDA,EAAkBljB,GAAA,SAEtB,GADAA,EAAE,eAAe,EACb,CAACrC,EAAM,YAAa,OACxB,MAAMyjB,EAASphB,EAAE,QAAUrC,EAAM,aAAa,EACxC0jB,EAASrhB,EAAE,QAAUrC,EAAM,aAAa,EACxCwlB,EAAU,CACd,GAAGxlB,EAAM,YACT,KAAMA,EAAM,YAAY,KAAOyjB,EAC/B,IAAKzjB,EAAM,YAAY,IAAM0jB,CAAA,EAEzB0B,EAAK7B,GAAkB,CAC3B,KAAMiC,EACN,EAAAnjB,EACA,OAAAohB,EACA,OAAAC,CAAA,CACD,EACKW,EAASlB,GAAW,IAAIpb,CAAE,EAC5Bsc,KACS9d,GAAA9F,EAAAokB,EAAA,SAAQ,aAAR,MAAAte,EAAA,KAAA9F,EAAqB2kB,EAAIf,GACpCS,EAAoBQ,UAAA,OAAA7kB,EAAA6kB,EAAE,aAAF,YAAA7kB,EAAA,KAAA6kB,EAAeF,EAAIf,GAAO,GAEhDrkB,EAAM,aAAe,CACnB,EAAGqC,EAAE,QACL,EAAGA,EAAE,SAEPrC,EAAM,YAAcwlB,CAAA,EAoCf,OACL,eATqB,CACrB,UAAW,CAAClkB,EACZ,YAAA0jB,EACA,UA7BqB3iB,GAAA,SAErB,GADyBsiB,IACrB,CAAC3kB,EAAM,YAAa,OACxB4jB,GAAqB,IAAI,EACrB6B,IACFA,GAAW,OAAO,EAEpB,MAAML,EAAK7B,GAAkB,CAC3B,KAAMvjB,EAAM,YACZ,EAAAqC,CAAA,CACD,EACK4iB,EAAY9B,GAAW,IAAIpb,CAAE,EAC/Bkd,KACS1e,GAAA9F,EAAAokB,EAAA,SAAQ,YAAR,MAAAte,EAAA,KAAA9F,EAAoB2kB,EAAIH,GACnCH,KAAoB,cAAArkB,EAAA6kB,EAAE,YAAF,YAAA7kB,EAAA,KAAA6kB,EAAcF,EAAIH,EAAW3B,GAAY,QAAO,GAItE,sBAAsB,IAAM,CAC1BA,GAAY,aAAe,OAC3BA,GAAY,OAAS,WACjBrd,EAAI,SACC,OAAAA,EAAI,QAAQ,QAAQ,QAC7B,CACD,GAMD,cAAoB5D,GAAA,CAClBrC,EAAM,UAAYqC,EAAE,MACtB,GAIA,cAAAoiB,CAAA,CAEJ,CACA,IAAIgB,GACJ,SAASN,GAAqB,EAAG,CAC1BM,KACHA,GAAa,IAAI,MAER,cAAK,OAAOA,EAAU,EAC/BA,GAAW,IAAM,8EAEnB,EAAE,aAAa,aAAaA,GAAY,EAAG,CAAC,CAC9C,CCtLA,eAAuBC,GAA0BC,EAAc,CAC7D,MAAM1B,EAAU,GAIL,UAAA3Y,KAAQqa,EAAa,MAC1B,GAAAra,EAAK,OAAS,OAAQ,CAClB,MAAAuD,EAAQvD,EAAK,mBACfuD,GACFoV,EAAQ,KAAKpV,CAAK,CAEtB,CAEF,UAAWA,KAASoV,EAClB,GAAIpV,EAAM,OAAQ,CAChB,GAAIA,EAAM,OAAS,YAAa,SAC1B,MAAAR,EAAO,MAAMuX,GAAa/W,CAAK,EACrC,MAAM,IAAIL,GAAaH,EAAMQ,EAAM,QAAQ,OAClCA,EAAM,cACf,MAAOgX,GAAwBhX,CAAK,EAG1C,CACA,eAAgBgX,GAAwBva,EAAM,CACtC,MAAAqD,EAASrD,EAAK,eAIhB,IAAA2Y,EACD,GACDA,EAAU,MAAM,IAAI,QAAQ,CAAC5d,EAASyI,IAAW,CACxCH,EAAA,YAAYtI,EAASyI,CAAM,EACnC,EACD,UAAWD,KAASoV,EAClB,GAAIpV,EAAM,OAAQ,CAChB,GAAIA,EAAM,OAAS,YAAa,SAC1B,MAAAR,EAAO,MAAMuX,GAAa/W,CAAK,EACrC,MAAM,IAAIL,GAAaH,EAAMQ,EAAM,QAAQ,OAClCA,EAAM,cACf,MAAOgX,GAAwBhX,CAAK,EAExC,OACOoV,EAAQ,OAAS,EAC5B,CACA,SAAS2B,GAAa/W,EAAO,CACpB,WAAI,QAAQ,CAACxI,EAASyI,IAAWD,EAAM,KAAKxI,EAASyI,CAAM,CAAC,CACrE,CC/CA,eAAsBgX,GAAqBC,EAAU,CACnD,MAAMvF,EAAQ,GACd,gBAAiBlV,KAAQya,EACvBvF,EAAM,KAAKlV,CAAI,EAEV,OAAAkV,CACT,CCCA,MAAMwF,GAAwB,IACvB,SAASC,GAAa,CAC3B,GAAAle,EACA,SAAAzG,EACA,IAAA2E,EACA,GAAGqB,CACL,EAAG,CACD,MAAMtH,EAAQgC,SAAO,CACnB,qBAAsB,IACtB,kBAAmB,MACpB,GAAE,QACG6iB,EAAa7iB,SAAOsF,CAAO,EACjCud,EAAW,QAAUvd,EACrB0a,kBAAgB,KACdoB,GAAW,IAAIrb,EAAI,CACjB,GAAGqb,GAAW,IAAIrb,CAAE,EACpB,SAAAzG,EACA,GAAAyG,EACA,IAAA9B,CAAA,CACD,EACM,IAAM,CACXmd,GAAW,OAAOrb,CAAE,IAErB,CAACA,EAAI8c,EAAYvjB,EAAU2E,CAAG,CAAC,EAGlC,MAAMigB,EAAuBjB,GAAA,OAC3B,MAAM3d,EAAUud,EAAW,QACrBsB,EAAoB7e,EAAQ,2BAA6BrB,EAAI,YAAYxF,EAAAwkB,EAAU,MAAV,YAAAxkB,EAAe,SAC9F,MAAO,CAAC,EAAEwkB,GAAA,MAAAA,EAAW,MAAQkB,GAAqB7e,EAAQ,MAAM,SAAS2d,EAAU,IAAI,IAAM,CAAC3d,EAAQ,aAAeA,EAAQ,YAAY2d,CAAS,KAE9ImB,EAAqB/jB,GAAA,SACnB,MAAA4iB,EAAYoB,GAAahkB,CAAC,EAC5B4iB,KACS1e,GAAA9F,EAAAokB,EAAA,SAAQ,cAAR,MAAAte,EAAA,KAAA9F,EAAsBwkB,GACnC,EAoFK,OACL,eAAgB3jB,EAAW,GAdN,CACrB,WAAiBe,GAAA,SACfA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EACZ,MAAA4iB,EAAYoB,GAAahkB,CAAC,EAC5B4iB,GAAaiB,EAAQjB,CAAS,KACrB1e,GAAA9F,EAAAokB,EAAA,SAAQ,aAAR,MAAAte,EAAA,KAAA9F,EAAqBwkB,EAAW5iB,GAE/C,EACA,YA9EuBA,GAAA,SAGnB,GAFJA,EAAE,gBAAgB,EACZrC,EAAA,iBAAiB,IAAIqC,EAAE,MAAM,EAC/BrC,EAAM,iBAAiB,KAAO,EAChC,OAEI,MAAAilB,EAAYoB,GAAahkB,CAAC,EAC5B4iB,GAAaiB,EAAQjB,CAAS,KACrB1e,GAAA9F,EAAAokB,EAAA,SAAQ,cAAR,MAAAte,EAAA,KAAA9F,EAAsBwkB,GACjC,aAAajlB,EAAM,iBAAiB,EAChC,OAAO6kB,EAAW,QAAQ,gBAAmB,aACzC7kB,EAAA,kBAAoB,WAAW,IAAM,SACrCilB,KACS1e,GAAA9F,EAAAokB,EAAA,SAAQ,iBAAR,MAAAte,EAAA,KAAA9F,EAAyBwkB,KAErCe,EAAqB,GAE5B,EA8DA,YA5DuB3jB,GAAA,CACvBA,EAAE,gBAAgB,EAOZrC,EAAA,iBAAiB,OAAOqC,EAAE,MAAM,EAC3B,UAAAikB,KAAWtmB,EAAM,iBACrBqC,EAAE,cAAc,SAASikB,CAAO,GAC7BtmB,EAAA,iBAAiB,OAAOsmB,CAAO,EAGrC,GAAAtmB,EAAM,iBAAiB,KAAO,EAChC,OAEI,MAAAilB,EAAYoB,GAAahkB,CAAC,EAC5B4iB,GAAaiB,EAAQjB,CAAS,IAChCmB,EAAc/jB,CAAC,EACf,aAAarC,EAAM,iBAAiB,EACtC,EAwCA,OAtCa,MAAMqC,GAAK,aACxBA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBrC,EAAM,iBAAiB,QACvBomB,EAAc/jB,CAAC,EACf,aAAarC,EAAM,iBAAiB,EAC9B,MAAAilB,EAAYoB,GAAahkB,CAAC,EAChC,GAAI4iB,EAIE,IAHO1e,GAAA9F,EAAAokB,EAAA,SAAQ,cAAR,MAAAte,EAAA,KAAA9F,EAAsBwkB,GAG7B,CAACiB,EAAQjB,CAAS,EAChB3B,GAAY,SAAW,aACzBA,GAAY,OAAS,gBAGlB,CAEL,MAAMiD,GAAazf,GAAAC,EAAA8d,EAAW,SAAQ,SAAnB,YAAA/d,EAAA,KAAAC,EAA4Bke,GAG3C3B,GAAY,SAAW,aACbA,GAAA,OAASiD,IAAe,GAAQ,WAAa,cAE7D,CACF,CAaA,CAGgC,CAEpC,CACA,SAASF,GAAa,EAAG,CACnB,GAAA/C,GAAY,cAAgB,KACvB,OAAAH,GAAW,IAAIG,GAAY,YAAY,KACrC,EAAE,aAAa,MAAM,SAAS,OAAO,EACvC,OACL,KAAM,aACN,GAAI,KACJ,IAAK,KACL,QAAS,IACAwC,GAAqBJ,GAA0B,EAAE,YAAY,CAAC,CACvE,CAGN,CC3IO,SAASc,GAAc,CAC5B,SAAA/kB,EACA,GAAGL,CACL,EAAG,CACK,MACJ,MAAO,CACL,SAAA+Y,EACA,OAAAtO,EACA,MAAAvF,EAAQ,CAAC,EACT,IAAAL,CACF,EACA,WAAY,CACV,QAAA1E,EACA,MAAAyD,CACF,GACEqX,GAAc,CAChB,KAAMjb,EAAM,KACb,EACKkb,EAAY,CAChB,SAAAnC,EACA,OAAAtO,EACA,MAAAvF,EACA,QAAA/E,EACA,aAAcyD,GAAA,YAAAA,EAAO,SAEhB,OAAA3G,EAAA,IAAC2kB,IAAU,IAAA/c,EAAW,GAAGsW,GAAWD,EAAWlb,CAAK,EACtD,SAAAK,CACH,EACJ,CC7BO,SAASglB,GAAiB,CAC/B,YAAAC,EACA,OAAAC,EACA,UAAAC,EACA,gBAAAC,EAAkB,EAClB,eAAAC,EACA,gBAAAC,EAAkB,GAClB,QAAAC,EACA,YAAAC,EACA,GAAG7lB,CACL,EAAG,CASD,MAAMpB,EARWgC,SAAO,CACtB,aAAc,CACZ,EAAG,EACH,EAAG,CACL,EACA,QAAS,GACT,mBAAoB,GACrB,EACsB,QACjB,CACJ,kBAAA0iB,EACA,qBAAAwC,GACEtC,GAAmB,EACjBuC,EAAa9kB,GAAA,CACb,CAACrC,EAAM,KACI0mB,GAAA,YAAAA,EAAcrkB,EAAGrC,EAAM,OAGvB,KACTA,EAAA,oBAAsBA,EAAM,GAAG,MAAM,YACrCA,EAAA,GAAG,MAAM,YAAc,OACvBA,EAAA,mBAAqB,SAAS,gBAAgB,MAAM,WACjD,yBAAgB,MAAM,WAAa,OAC5CA,EAAM,QAAU,KAEZonB,EAAqB/kB,GAAA,OACzB,GAAIA,EAAE,SAAW,GAAKrC,EAAM,IAAM,KAAM,CAGtC,GAFAA,EAAM,QAAU,KACDS,EAAAW,EAAM,gBAAN,YAAAX,EAAA,KAAAW,EAAsBiB,MACtB,GAAO,OAClB0kB,GACF1kB,EAAE,gBAAgB,EAEhBykB,GACFzkB,EAAE,eAAe,EAEnBrC,EAAM,GAAKqC,EAAE,UACbrC,EAAM,GAAKqC,EAAE,cACbrC,EAAM,aAAe,CACnB,EAAGqC,EAAE,QACL,EAAGA,EAAE,SAMH4kB,IACIjnB,EAAA,eAAiB,WAAW,IAAM,CAC1BinB,EAAA5kB,EAAGrC,EAAM,EAAE,EACvBA,EAAM,mBAAqB,IAC1B,GAAG,IAEJ0mB,GAAeC,IACCjC,EAAA,OAAQ,cAAe2C,EAAe,EAAK,EAE7C3C,EAAA,OAAQ,YAAa4C,EAAa,EAAK,EACvC5C,EAAA,OAAQ,gBAAiB4C,EAAa,EAAK,CAC/D,GAEID,EAAqBhlB,GAAA,CACrB,GAAAA,EAAE,YAAcrC,EAAM,GAAI,CAC5B,MAAMyjB,EAASphB,EAAE,QAAUrC,EAAM,aAAa,EACxC0jB,EAASrhB,EAAE,QAAUrC,EAAM,aAAa,GACzC,KAAK,IAAIyjB,CAAM,GAAKoD,GAAmB,KAAK,IAAInD,CAAM,GAAKmD,IAAoB,CAAC7mB,EAAM,SACzFmnB,EAAM9kB,CAAC,EAELrC,EAAM,UACC2mB,GAAA,MAAAA,EAAAtkB,EAAGohB,EAAQC,GACpB1jB,EAAM,aAAe,CACnB,EAAGqC,EAAE,QACL,EAAGA,EAAE,SAGX,GAEIilB,EAAmBjlB,GAAA,OACnB,GAAAA,EAAE,YAAcrC,EAAM,GAAI,CAExBA,EAAM,gBACR,aAAaA,EAAM,cAAc,EAEnC,MAAMunB,EAAqBvnB,EAAM,mBACjCA,EAAM,mBAAqB,GAGvBA,EAAM,UACR4mB,GAAA,MAAAA,EAAYvkB,IAEVrC,EAAM,KAEJqC,EAAE,OAAS,mBACP5B,EAAAW,EAAA,oBAAAX,EAAA,KAAAW,EAAciB,EAAGrC,EAAM,IAGzBqC,EAAE,QAAUrC,EAAM,GAAG,SAASqC,EAAE,MAAM,IAEpCklB,EACYN,GAAA,MAAAA,EAAA5kB,EAAGrC,EAAM,IAEbgnB,GAAA,MAAAA,EAAA3kB,EAAGrC,EAAM,MAIzB,SAAS,gBAAgB,MAAM,WAAaA,EAAM,oBAAsB,GACxEA,EAAM,GAAG,MAAM,YAAcA,EAAM,qBAAuB,IAE5DA,EAAM,GAAK,OACXA,EAAM,QAAU,GACKknB,EAAA,OAAQ,cAAeG,EAAe,EAAK,EAC3CH,EAAA,OAAQ,YAAaI,EAAa,EAAK,EACvCJ,EAAA,OAAQ,gBAAiBI,EAAa,EAAK,CAClE,GAEK,OACL,SAAU,CACR,cAAejF,GAAmB+E,CAAa,CACjD,EAEJ,CCnIO,MAAMI,GAAevmB,EAAc5C,MAAC,QAAK,EAAE,mJAAoJ,GAAI,kBAAkB,ECD/MopB,GAAqB,CAChC,SAAU,CACR,KAAM,CACJ,OAAQ,OACR,WAAY,UACZ,cAAe,CACb,SAAU,MACZ,CACF,EACA,OAAQ,CACN,OAAQ,EACR,SAAU,SACV,cAAe,CACb,WAAY,QACd,CACF,CACF,EACA,WAAY,CACV,KAAM,QACN,SAAU,EACZ,CACF,ECdaC,GAAYzE,GAAM,WAAW,CAAC,CACzC,QAAAvI,EAAU,UACV,KAAAlQ,EAAO,SACP,SAAA/I,EACA,UAAAxD,EACA,OAAA0pB,EACA,GAAGC,CACL,EAAG3hB,IAAQ,CACT,KAAM,CAAC4hB,EAAgBC,CAAiB,EAAI/E,GAAmB6E,EAAM,eAAgBA,EAAM,uBAAyB,GAAIA,EAAM,gBAAgB,EACxIG,EAAa9E,GAAM,SAAS,MAAMxhB,CAAQ,EACzC,OAAApD,EAAA,IAAC,OAAI,UAAWC,EAAKoc,IAAY,WAAa,aAAczc,CAAS,EAAG,IAAAgI,EAAU,KAAK,eACxF,SAAC5H,EAAA,IAAA2pB,GAAA,CACC,eAACC,GACE,UAAAhF,GAAM,SAAS,IAAIxhB,EAAU,CAACymB,EAAO7jB,IACnC4Z,iBAAeiK,CAAK,EAClBxlB,eAAawlB,EAAO,CACzB,IAAKA,EAAM,KAAO7jB,EAClB,MAAO6jB,EAAM,MAAM,OAAS7jB,EAC5B,QAASA,IAAU,EACnB,OAAQA,IAAU0jB,EAAa,EAC/B,KAAAvd,EACA,QAAAkQ,EACA,eAAAmN,EACA,kBAAAC,EACA,OAAAH,CAAA,CACD,EAXkC,IAYpC,CACC,GACF,CACF,EACN,CAAC,EACM,SAASQ,GAAc/mB,EAAO,CAC7B,MACJ,SAAAK,EACA,MAAAsL,EACA,SAAAzL,EACA,cAAA8mB,EACA,YAAAC,EAAc,OACd,eAAAC,EACA,cAAAC,EAAgB,oBAChB,UAAAC,EACA,YAAApc,EACA,UAAAqc,EACA,gBAAAC,EAAkB,QAClB,QAAAC,EACA,KAAAne,EACA,OAAAmd,EACA,QAAAjN,EACA,cAAAkO,EACA,mBAAAC,EACA,mBAAAC,CACE,EAAA1nB,EACEymB,EAAiBzmB,EAAM,gBAAkB,GACzCkF,EAAQlF,EAAM,OAAS,EACvB0mB,EAAoB1mB,EAAM,oBAAsB,IAAM,IACtD6E,EAAMjE,SAAO,IAAI,EACjB+mB,EAAa,CAACznB,GAAYumB,EAAe,SAASvhB,CAAK,EACvD0iB,EAAkBhnB,SAAO,EAAK,EAChC+mB,IACFC,EAAgB,QAAU,IAE5B,MAAM9mB,EAAeC,KACf4F,EAAKsR,UACL4P,EAAW,GAAGlhB,CAAE,UAChBmhB,EAAU,GAAGnhB,CAAE,SACfohB,EAAiB9mB,GAAA,CACrB,OAAQA,EAAE,IAAK,CACb,IAAK,YACHH,GAAA,MAAAA,EAAc,YACd,MACF,IAAK,UACHA,GAAA,MAAAA,EAAc,gBACd,MACF,IAAK,OACHA,GAAA,MAAAA,EAAc,aACd,MACF,IAAK,MACHA,GAAA,MAAAA,EAAc,YACd,KACJ,GAEIknB,EAAS,IAAM,CACb,MAAA1Y,EAAImX,EAAe,QAAQvhB,CAAK,EACtC,GAAIoK,EAAI,GAAI,CACJ,MAAA2Y,EAAU,CAAC,GAAGxB,CAAc,EAC1BwB,EAAA,OAAO3Y,EAAG,CAAC,EACnBoX,EAAkBuB,CAAO,OAEPvB,EADTtd,IAAS,SACA,CAAClE,CAAK,EAEN,CAAC,GAAGuhB,EAAgBvhB,CAAK,CAFlB,CAG3B,EAEIgjB,QAAW,MAAI,WAAWhrB,EAAKoc,IAAY,WAAa,EAAE,EAC5D,SAACrc,MAAAqO,GAAA,CAAkB,cAAY,OAAO,KAAK,KAAK,UAAWpO,EAAKgD,EAAW,gBAAkB,aAAcynB,GAAc,iCAAiC,CAAG,EAC/J,GACF,OAAQ7kB,OAAA,OAAI,UAAW5F,EAAKoc,IAAY,WAAa,WAAYA,IAAY,WAAa,uBAAwBpZ,GAAY,eAAe,EACzI,UAAC4C,OAAA,MAAG,UAAW5F,EAAK,mDAAoDgD,GAAY,sBAAuBqnB,GAAWjO,IAAY,WAAa,WAAYqO,GAAcrO,IAAY,UAAY,WAAa,gCAAiCA,IAAY,UAAYqO,EAAa,kBAAoB,gBAAkB,MAAS,EAAG,aAAcF,EAAoB,aAAcC,EACpX,UAAA5kB,EAAA,KAAC,SAAO,UAAA5C,EAAoB,gBAAeynB,EAAY,GAAIE,EAAU,gBAAeC,EAAS,KAAK,SAAS,IAAAjjB,EAAU,UAAAkjB,EAAsB,QAAS,IAAM,CACrJ7nB,GACI8nB,GAER,YAAW9qB,EAAK,0GAA2GiqB,CAAa,EACtI,UAAAG,IAAoB,QAAUY,EAC9Bd,GAAa9lB,eAAa8lB,EAAW,CACtC,KAAM,KACN,UAAWlqB,EAAKkqB,EAAU,MAAM,UAAWlnB,EAAW,gBAAkB,YAAY,EACrF,EACC4C,OAAC,MAAI,WAAU,8CACb,UAAA7F,MAAC,MAAI,WAAWiqB,EAAgB,cAAY,kBACzC,SACHvb,EAAA,EACCX,GAAe/N,EAAA,IAAC,MAAI,WAAU,qBAAsB,SAAY+N,EAAA,GACnE,EACCsc,IAAoB,SAAWY,CAAA,EAClC,EACCb,GAAapqB,EAAA,IAAC,MAAI,WAAU,wCACxB,SACHoqB,EAAA,GACJ,SACCnD,GAAE,IAAF,CAAM,kBAAiBvd,EAAI,KAAK,SAAS,SAAU0f,GAAmB,SAAU,WAAYA,GAAmB,WAAY,QAAS,GAAO,QAASsB,EAAa,OAAS,SACzK,UAAC1qB,MAAA,OAAI,UAAWC,EAAK+pB,EAAaD,CAAa,EAC5C,SAAC,CAAAT,GAAUqB,EAAkBvnB,EAAW,IAC3C,GACCmnB,CAAA,EACH,CACF,GACJ,CCrIO,MAAMW,GAA0B,CACrC,QAAS,CACP,aAAc,IACd,iBAAkB,CAAC,CACrB,EACA,SAAU,CACR,QAAS,CACP,MAAO1pB,EAAQ,SAAS,EACxB,SAAU,CACZ,EACA,OAAQ,CACN,MAAOA,EAAQ,QAAQ,EACvB,SAAU,CACZ,EACA,MAAO,CACL,MAAOA,EAAQ,OAAO,EACtB,SAAU,EACV,OAAQ,CACN,gBAAiB,CAAC,IAAK,SAAU,YAAa,WAAY,WAAY,oBAAqB,SAAU,oBAAqB,kBAAmB,eAAgB,uBAAwB,eAAgB,eAAgB,eAAgB,cAAe,eAAgB,uBAAwB,aAAc,cAAe,iCAAkC,2BAA4B,wBAAyB,4BAA6B,WAAW,EACxb,UAAW,CAAC,eAAgB,gBAAiB,qBAAsB,mBAAoB,gBAAiB,wBAAyB,eAAgB,uBAAwB,uBAAwB,qBAAsB,kBAAmB,qBAAsB,SAAU,kBAAkB,CAC9R,CACF,EACA,cAAe,CACb,MAAOA,EAAQ,aAAa,EAC5B,SAAU,CACZ,EACA,eAAgB,CACd,MAAOA,EAAQ,cAAc,EAC7B,SAAU,CACZ,CACF,CACF,EC7BM2pB,GAAyBxf,GAAU,IAAI,CAACuf,GAAyB9L,EAAmB,CAAC,ECA3F,IAAIgM,GAA4B,IAAM,CAAC,EAChC,MAAMC,GAAqB,IAAI,QAAQrjB,GAAWojB,GAA4BpjB,CAAO,EAC/EsjB,GAAqBlqB,GAAO,EAAEmqB,GAAsB,CAACjqB,EAAKC,KAAS,CAC9E,SAAU,KACV,aAAc,KACd,QAAS,GACT,WAAqB0G,GAAA,CACnB3G,EAAI,KAAO,CACT,QAAS2G,CACT,GACJ,EACA,OAAQkjB,GACR,YAAsBljB,GAAA,CAChB3G,EAAA,CACF,SAAU,CACR,GAAG2G,CACL,EACD,CACH,EACA,gBAA0BA,GAAA,CACpB3G,EAAA,CACF,aAAc2G,CAAA,CACf,EACKA,EAAA,iBAAiB,UAAgBjE,GAAA,CACjCA,EAAE,KAAK,SAAW,yBAA2BA,EAAE,KAAK,OAAS,aACrConB,IAC5B,CACD,CACH,EACA,QAAS,CACP,UAAqBI,GAAA,CACb,MAAAtF,EAAU3kB,EAAM,eACtBkqB,GAAYvF,EAAS,CACnB,KAAM,YACN,OAAAsF,CAAA,CACD,CACH,EACA,aAAsBvhB,GAAA,CACd,MAAAic,EAAU3kB,EAAM,eACtBkqB,GAAYvF,EAAS,CACnB,KAAM,eACN,MAAOjc,CAAA,CACR,CACH,EACA,cAAe,CAACyG,EAAMzI,IAAU,CACxB,MAAAie,EAAU3kB,EAAM,eACtBkqB,GAAYvF,EAAS,CACnB,KAAM,gBACN,KAAAxV,EACA,MAAAzI,CAAA,CACD,CACH,EACA,eAA2ByjB,GAAA,CACnB,MAAAxF,EAAU3kB,EAAM,eACtBkqB,GAAYvF,EAAS,CACnB,KAAM,iBACN,QAAAwF,CAAA,CACD,CACH,EACA,cAAe,CAACvf,EAAMlE,IAAU,CACxB,MAAAie,EAAU3kB,EAAM,eACtBkqB,GAAYvF,EAAS,CACnB,KAAM,gBACN,KAAA/Z,EACA,MAAAlE,CAAA,CACD,CACH,EACA,aAA0BqQ,GAAA,OACxB,IAAI0O,EAAO,KACL,MAAA2E,GAAWvpB,EAAAb,IAAM,eAAN,YAAAa,EAAoB,SACjCupB,GAAYrT,IACP0O,EAAA2E,EAAS,cAAcrT,CAAQ,GAEpC0O,GACF,sBAAsB,IAAM,CACrBA,GACLA,EAAK,eAAe,CAClB,SAAU,SACV,MAAO,SACP,OAAQ,SACT,EACF,CAEL,CACF,CACF,EAAE,CAAC,EACH,SAASyE,GAAYG,EAAQngB,EAAS,CAChCmgB,GACFA,EAAO,YAAY,CACjB,OAAQ,uBACR,GAAGngB,GACF,GAAG,CAEV,CACO,SAASogB,GAAkB,CAChC,OAAOP,GAAmB,UAC5B,CChGO,SAASQ,IAAiC,CAC/C,OAAOxN,GAAS,CACd,SAAU,CAAC,yBAAyB,EACpC,QAAS,IAAMyN,GAAsB,EACrC,UAAW,IACX,OAAQC,EAAA,CACT,CACH,CACO,SAASC,IAA4B,CACpC,MACJ,KAAAlkB,GACE+jB,GAA+B,EACnC,OAAO/jB,EAAK,MACd,CACA,SAASgkB,IAAwB,CAC/B,OAAOnZ,EAAU,IAAI,yBAAyB,EAAE,KAAKN,GAAKA,EAAE,IAAI,CAClE,CCTA,SAAS4Z,IAAkB,SACnB,MACJ,SAAAC,GACEpjB,GAAY,EAEVqjB,GAAWlkB,GAAA9F,EADDiqB,KACS,GAAG,EAAE,IAAb,YAAAjqB,EAAgB,SAAhB,YAAA8F,EAAwB,aACnCokB,EAAgBH,EAAS,MAAM,GAAG,EAAE,CAAC,EACrC7a,EAAS6Z,GAAuB,SAASmB,CAAa,EACtDC,GAAYjb,GAAA,YAAAA,EAAQ,eAAgB6Z,GAAuB,QAAQ,cAAgB,IACzF,OAAIiB,EACK,GAAGG,CAAS,IAAIH,CAAQ,GAE1BG,CACT,CACO,SAASC,IAAuB,CAC/B,MACJ,yBAAAvhB,GACEL,GAAwB,EACtB,CACJ,KAAA7C,GACE+jB,GAA+B,EAC7B,CACJ,SAAAW,GACE7T,GAAY,EACV8T,EAAY/oB,SAAO,IAAI,EACvBgpB,EAAcT,KAcpB,GAbA5rB,YAAU,IAAM,CAEVyH,GAAA,MAAAA,EAAM,UAAY,CAAC8jB,EAAA,EAAkB,UACvBA,IAAE,YAAY9jB,EAAK,QAAQ,CAC7C,EACC,CAACA,CAAI,CAAC,EACTzH,YAAU,IAAM,CACVosB,EAAU,SACZb,EAAkB,kBAAgBa,EAAU,QAAQ,aAAa,CAErE,EAAG,CAAE,GAGDzhB,EACK,OAAAjL,EAAA,IAAC4sB,GAAS,IAAG,QAAS,GAK/B,MAAMra,EAAM,IAAI,IAAIoa,GAAeA,IAAgB,IAAM,GAAGF,CAAQ,IAAIE,CAAW,GAAK,GAAGF,CAAQ,EAAE,EACjG,OAAAla,EAAA,aAAa,OAAO,mBAAoB,MAAM,EAG3C1M,EAAA,KAAC,MAAI,WAAU,gCAClB,UAAA7F,MAAC6sB,GACC,UAAA7sB,EAAA,IAACiG,EAAM,SAAQ,YAAa,GAC9B,EACCjG,MAAA8sB,GAAA,CAAQ,OAAQ/kB,GAAA,YAAAA,EAAM,MAAQ,GAC9B/H,EAAA,WAAI,UAAU,4BACb,eAAC,SAAyB,KAAK0sB,EAAW,UAAU,8BAA8B,IAAKna,EAAI,UAAS,EAAvFoa,CAA0F,EACzG,CACF,GACJ,CACA,SAASG,GAAQ,CACf,OAAAtB,CACF,EAAG,CACK,MAAAuB,EAAW/sB,MAAA,OAAI,UAAU,oDAC3B,SAACA,MAAA4N,GAAA,CAAe,gBAAe,GAAC,aAAW,iBAAiB,CAC9D,GACK,OAAA5N,EAAA,IAAC,OAAI,UAAU,wEACjB,WAAUA,MAAAgtB,GAAA,EAAO,EAAKD,CACzB,EACJ,CC1Ea,MAAAE,EAAmBxe,aAAW,CAAC,CAC1C,UAAA0b,EACA,SAAA/mB,EACA,UAAAxD,EACA,YAAAmO,EACA,QAAAmf,EACA,GAAG3D,CACL,EAAG3hB,WACOnD,GAAW,KAAAmD,EAAU,QAAQ,OAAO,UAAW3H,EAAK,sGAAuGL,EAAW2pB,EAAM,UAAY,gCAAgC,EAAG,QAAS,KAAO,GAAGA,EAC/O,UAAAY,EACDtkB,OAAC,OAAK,WAAU,gBACd,UAAC7F,MAAA,QAAK,UAAU,QAAS,SAAAoD,CAAS,GACjC2K,GAAe/N,EAAA,IAAC,OAAK,WAAU,+EAC3B,SACH+N,EAAA,GACJ,EACA/N,EAAA,IAAC,MAAI,WAAU,UACZ,SAAAktB,GAAYltB,MAAAmtB,GAAA,CAAuB,cAAW,GAAC,UAAU,qBAAqB,CACjF,EACF,GACL,ECdM,SAASC,IAAW,CACzB,MAAMC,EAAW1kB,KACX,CACJ,MAAA2kB,GACEC,GAAS,EACP,CACJ,OAAAC,EACA,OAAAC,GACEC,GAAc,CAChB,KAAM,iBACN,QAAS,MACV,EACD,cAAQxnB,WACJ,WAAAlG,MAAC,OACE,SAAOwtB,EAAA,IAAI,CAAChrB,EAAOwD,UAAWinB,EAAiB,IAAI,GAAGjnB,CAAK,GAAoB,YAAa4J,GACxF,SAAApN,EAAM,MAD0DA,EAAM,GAEzE,CAAmB,CACvB,SACC,MAAI,WAAU,aACb,SAAAxC,EAAA,IAAC8F,GAAO,QAAQ,UAAU,MAAM,UAAU,UAAY9F,MAAAsf,GAAA,CAAQ,GAAI,KAAK,KAAK,QAAS,IAAM,CACrF,MAAA5V,EAAK7H,GAAO,EAAE,EACb4rB,EAAA,CACL,KAAMH,EAAM9rB,EAAQ,mBAAoB,CACtC,OAAQ,CACN,OAAQgsB,EAAO,OAAS,CAC1B,EACD,CAAC,EACF,GAAA9jB,EACA,UAAW,CAAC,EACZ,MAAO,CAAC,EACT,EACQ2jB,EAAA,GAAGG,EAAO,MAAM,EAAE,GAEzB,SAACxtB,EAAA,IAAAiG,EAAA,CAAM,QAAQ,aAAc,EAC/B,GACF,CACF,GACJ,CC9CO,SAAS0nB,IAAqB,CAC7B,MAAAC,EAAazC,GAAuB,SAAS,MAAM,OACzD,OAAKyC,EACEA,EAAW,gBAAgB,IAAaC,IACtC,CACL,GAAIA,EACJ,MAAOA,EACP,OAAQA,EACR,KAAM,QACN,OAAQ,SAEX,EATuB,EAU1B,CCbO,SAASC,GAAQC,EAAQ,CAC9B,OAAKA,GACEA,EAAO,OAAO,CAAC,EAAE,cAAgBA,EAAO,MAAM,CAAC,CACxD,CCaO,SAASC,GAAkB,CAChC,MAAAlgB,EAAQ9N,MAACiG,EAAM,SAAQ,eAAgB,EACzC,EAAG,CACK,MACJ,KAAA8B,CAAA,EACEoW,GAAc,CAAC,oBAAoB,CAAC,EAClC8P,GAAalmB,GAAA,YAAAA,EAAM,qBAAsB,GACzCmmB,EAAaP,KACZ,OAAA9nB,EAAA,KAACkB,GAAO,MAAK,KAChB,UAAA/G,MAACgH,IAAc,SAAM8G,CAAA,GACpB9N,MAAAkH,GAAA,CACC,SAACrB,OAAAwjB,GAAA,CAAU,QAAQ,UACjB,UAACrpB,EAAA,IAAA8pB,GAAA,CAAc,MAAO9pB,MAACiG,EAAM,SAAQ,MAAO,GAAI,cAAc,4BAC5D,SAACjG,EAAA,IAAAmuB,GAAA,CAAc,GACjB,EACCnuB,EAAA,IAAA8pB,GAAA,CAAc,MAAO9pB,EAAA,IAACiG,GAAM,QAAQ,OAAQ,GAAI,cAAc,4BAC7D,SAAAjG,MAACouB,GAAS,OAAOF,CAAY,GAC/B,EACCD,EAAW,IAAgBI,GAAAruB,MAAC8pB,IAAkC,MAAO9pB,EAAA,IAACiG,GAAM,QAASooB,EAAS,IAAM,GACjG,SAAAruB,MAACouB,IAAS,MAAOC,EAAS,MAAO,CADW,EAAAA,EAAS,IAEvD,CAAgB,GACpB,CACF,EACF,GACJ,CACA,SAASF,IAAgB,CACvB,MAAM5gB,EAAO+gB,GAAQ,CACnB,cAAe,CACb,GAAIzsB,GAAO,CAAC,EACZ,KAAM,OACN,OAAQ,QACV,EACD,EACK,CACJ,MAAAod,GACEC,GAAiB,EACrB,OAAQrZ,OAAAuH,GAAA,CAAK,KAAAG,EAAY,SAAmBtF,GAAA,CAC1CgX,EAAMhX,CAAK,CAET,YAAAjI,EAAA,IAACuuB,EAAc,UAAQ,GAAC,KAAK,QAAQ,MAAQvuB,EAAA,IAAAiG,EAAA,CAAM,QAAQ,OAAQ,GAAI,UAAU,QAAQ,QACxFsoB,EAAc,UAAQ,GAAC,KAAK,MAAM,KAAK,SAAS,YAAY,WAAW,MAAQvuB,MAAAiG,EAAA,CAAM,QAAQ,MAAM,EAAI,UAAU,QAAQ,QACzH,MAAI,WAAU,aACb,SAACjG,EAAA,IAAA8F,EAAA,CAAO,KAAK,SAAS,QAAQ,OAAO,MAAM,UAAU,KAAK,KACxD,SAAA9F,EAAA,IAACiG,GAAM,QAAQ,cAAc,EAC/B,CACF,EACF,GACJ,CACA,SAASmoB,GAAS,CAChB,MAAAjM,CACF,EAAG,CACK,MACJ,MAAAlD,GACEC,GAAiB,EACrB,OAAQlf,MAAAwuB,GAAA,CACH,SAAMrM,EAAA,IAAYlV,GACZjN,MAACyuB,IAAuB,UAAWzuB,EAAA,IAACsf,IAAQ,KAAK,KAAK,EAAI,WAAY,IAAM,CACjF,GAAIrS,EAAK,MAAO,CACd,MAAMyhB,EAAOzhB,EAAK,MAAM,MAAM,GAAG,EAAE,MACnCA,EAAK,MAAQyhB,EAAOZ,GAAQY,CAAI,EAAIzhB,EAAK,MACpCA,EAAA,GAAKpL,GAAO,CAAC,CACpB,CACKoL,EAAK,SACRA,EAAK,OAAS,SAEhBgS,EAAMhS,CAAI,GAEL,SAAAA,EAAK,KAXU,EAAAA,EAAK,EAYvB,CACL,CACD,EACJ,CCtFO,MAAM0hB,GAAoB/rB,EAAc5C,MAAC,QAAK,EAAE,qSAAsS,GAAI,uBAAuB,ECDzW4uB,GAAA,2CCCFC,GAAuB,CAClC,YAAa,IAAM,CAAC,EACpB,YAAa,IAAM,CAAC,EACpB,WAAY,CAAC,CACX,EACA,IAAAjnB,EACA,KAAAqF,EACA,YAAA6hB,EACA,qBAAAC,CAAA,IACI,OACJ,MAAMC,EAAmBF,EAAY,aACrC,IAAIG,EAAc,KAClB,MAAM9J,GAAO/iB,EAAA2iB,GAAW,IAAI9X,CAAI,IAAnB,YAAA7K,EAAsB,KACnC,GAAI+iB,EAAM,CACR,MAAM+J,EAAO/J,EAAK,IAAMA,EAAK,OAAS,EAClC,EAAE,SAAW+J,EACDD,EAAA,SACL,EAAE,SAAWC,IACRD,EAAA,QAElB,CACA,GAAIA,IAAgBD,EAAkB,CACpC,MAAMG,EAAYL,EAAY,UAAU,QAAQ7hB,CAAI,EAIpD,GAHA6hB,EAAY,aAAeG,EAC3BF,GAAA,MAAAA,EAAuBD,EAAY,cACnCM,GAAiBN,CAAW,EACxBlnB,EAAI,QACF,GAAAknB,EAAY,eAAiB,QAChBO,GAAAznB,EAAI,QAAS,SAAUknB,CAAW,UAG7CK,IAAc,EACDE,GAAAznB,EAAI,QAAS,MAAOknB,CAAW,MAEzC,CACL,MAAMQ,EAAcR,EAAY,UAAUK,EAAY,CAAC,EACjDI,EAAYxK,GAAW,IAAIuK,CAAW,EACxCC,GAAA,MAAAA,EAAW,IAAI,SACjBF,GAAeE,EAAU,IAAI,QAAS,SAAUT,CAAW,CAE/D,CAGJ,MAAMU,EAAYV,EAAY,UAAU,QAAQ7hB,CAAI,EAGhD,GAAA6hB,EAAY,cAAgBU,EAAW,CACzCV,EAAY,WAAaA,EAAY,YACrC,MACF,EAIsBK,EAAYL,EAAY,YAAc,QAAU,YAChD,QACpBA,EAAY,WAAaA,EAAY,eAAiB,SAAWU,EAAY,EAAIA,EAEjFV,EAAY,WAAaA,EAAY,eAAiB,QAAUU,EAAY,EAAIA,CAEpF,CACF,EACA,UAA0BV,GAAA,CACxBM,GAAiBN,CAAW,CAC9B,CACF,EACA,SAASM,GAAiBN,EAAa,CACjCA,GAAA,MAAAA,EAAa,gBACHA,EAAA,cAAc,MAAM,kBAAoB,GACxCA,EAAA,cAAc,MAAM,eAAiB,GACjDA,EAAY,cAAgB,OAEhC,CACA,SAASO,GAAevqB,EAAI2qB,EAAMX,EAAa,CAC7C,MAAMnqB,EAAQ,yBACV8qB,IAAS,MACX3qB,EAAG,MAAM,eAAiBH,EAE1BG,EAAG,MAAM,kBAAoBH,EAE3BmqB,IACFA,EAAY,cAAgBhqB,EAEhC,CClFgB,SAAA4qB,GAAgBC,EAAOC,EAAWC,EAAS,CACzD,MAAMC,EAAO7U,GAAM2U,EAAW,EAAGD,EAAM,OAAS,CAAC,EAC3CnsB,EAAKyX,GAAM4U,EAAS,EAAGF,EAAM,OAAS,CAAC,EAC7C,GAAIG,IAAStsB,EACJ,OAAAmsB,EAEH,MAAA3J,EAAS2J,EAAMG,CAAI,EACnBC,EAAQvsB,EAAKssB,EAAO,GAAK,EAC/B,QAASzd,EAAIyd,EAAMzd,IAAM7O,EAAI6O,GAAK0d,EAChCJ,EAAMtd,CAAC,EAAIsd,EAAMtd,EAAI0d,CAAK,EAE5B,OAAAJ,EAAMnsB,CAAE,EAAIwiB,EACL2J,CACT,CCdgB,SAAAK,GAAmBL,EAAOG,EAAMtsB,EAAI,CAC5C,MAAAysB,EAAWN,EAAM,QACvB,OAAAM,EAAS,OAAOzsB,EAAK,EAAIysB,EAAS,OAASzsB,EAAKA,EAAI,EAAGysB,EAAS,OAAOH,EAAM,CAAC,EAAE,CAAC,CAAC,EAC3EG,CACT,CCDA,MAAMC,GAAa,4CACNC,GAA4B,CACvC,YAA4BrB,GAAA,CAC1BA,EAAY,UAAU,QAAQ,CAACsB,EAAUpqB,IAAU,CAC3C,MAAAupB,EAAYxK,GAAW,IAAIqL,CAAQ,EACpCb,GAAA,MAAAA,EAAW,IAAI,UACVA,EAAA,IAAI,QAAQ,MAAM,WAAaW,IACrCpB,GAAA,YAAAA,EAAa,eAAgB9oB,IACrBupB,EAAA,IAAI,QAAQ,MAAM,QAAU,OACxC,CACD,CACH,EACA,YAAa,CAACT,EAAaK,EAAWkB,IAAiB,CACrCX,GAAAZ,EAAY,UAAWuB,EAAclB,CAAS,EACxD,MAAAmB,EAAQxB,EAAY,UAAU,OAAS,cAAA1sB,EAAA2iB,GAAW,IAAI1Z,CAAC,IAAhB,YAAAjJ,EAAmB,KAAI,EACpE0sB,EAAY,UAAU,QAAQ,CAACsB,EAAUpqB,IAAU,CACjD,GAAI,CAAC8oB,EAAa,OAClB,MAAMyB,EAAWP,GAAmBM,EAAOnB,EAAWL,EAAY,WAAW,EACvE0B,EAAUF,EAAMtqB,CAAK,EACrBmhB,EAAUoJ,EAASvqB,CAAK,EACxByqB,EAAiB1L,GAAW,IAAIqL,CAAQ,EAC9C,GAAIK,GAAA,MAAAA,EAAgB,IAAI,SAAWtJ,GAAWqJ,EAAS,CAC/C,MAAAE,EAAIvJ,EAAQ,KAAOqJ,EAAQ,KAC3BG,EAAIxJ,EAAQ,IAAMqJ,EAAQ,IAChCC,EAAe,IAAI,QAAQ,MAAM,UAAY,eAAeC,CAAC,OAAOC,CAAC,QACvE,EACD,EACD7B,EAAY,WAAaK,CAC3B,EACA,WAAY,IAAM,CAAC,EACnB,UAA0BL,GAAA,CAEZA,EAAA,UAAU,QAAoBsB,GAAA,CAClC,MAAAb,EAAYxK,GAAW,IAAIqL,CAAQ,EACrCb,GAAA,MAAAA,EAAW,IAAI,UACPA,EAAA,IAAI,QAAQ,MAAM,UAAY,GAC9BA,EAAA,IAAI,QAAQ,MAAM,WAAa,GAC/BA,EAAA,IAAI,QAAQ,MAAM,QAAU,GAC5BA,EAAA,IAAI,QAAQ,MAAM,OAAS,GACvC,CACD,CACH,CACF,EC3CaqB,GAA2B,CACtC,YAAa,IAAM,CAAC,EACpB,WAAY,IAAM,CAAC,EACnB,YAAa,CAAC9B,EAAaK,EAAWkB,IAAiB,OAC/C,MAAArJ,GAAO5kB,EAAA2iB,GAAW,IAAI+J,EAAY,UAAUuB,CAAY,CAAC,IAAlD,YAAAjuB,EAAqD,IAAI,QAClE4kB,IACO6J,GAAA7J,EAAMqJ,EAAclB,CAAS,EACtBO,GAAAZ,EAAY,UAAWuB,EAAclB,CAAS,EAC9DL,EAAY,WAAaK,EAE7B,EACA,UAAW,IAAM,CAAC,CACpB,EACA,SAAS0B,GAAS/rB,EAAIurB,EAAcS,EAAU,CAC5C,MAAMC,EAAWjsB,EAAG,cACpB,GAAIgsB,EAAW,EACbC,EAAS,QAAQjsB,CAAE,MACd,CAGDurB,EAAe,IAAMA,GAAgBS,GACvCA,IAEF,MAAMlpB,EAAMmpB,EAAS,SAAS,KAAKD,CAAQ,EACvClpB,EACFA,EAAI,OAAO9C,CAAE,EAEbisB,EAAS,OAAOjsB,CAAE,CAEtB,CACF,CCvBA,IAAIgqB,EAAc,KAClB,MAAMkC,GAAa,CACjB,KAAMnC,GACN,SAAUsB,GACV,SAAUS,EACZ,EACO,SAASK,GAAY,CAC1B,KAAAhkB,EACA,MAAAkV,EACA,KAAAjhB,EACA,IAAA0G,EACA,UAAAspB,EACA,YAAAC,EACA,UAAAC,EACA,QAAAlL,EACA,SAAAjjB,EACA,qBAAA8rB,EACA,SAAAsC,EAAW,UACb,EAAG,CAID/wB,YAAU,IAAM,CACVwuB,GAAeA,EAAY,UAAU,SAAW3M,EAAM,SAC5C2M,EAAA,UAAY,CAAC,GAAG3M,CAAK,EACrB2M,EAAA,YAAc3M,EAAM,QAAQlV,CAAI,EAC9C,EACC,CAACkV,EAAOlV,CAAI,CAAC,EACV,MACJ,eAAAqkB,EACA,cAAAlL,GACEH,GAAa,CACf,GAAIhZ,EACJ,IAAArF,EACA,KAAA1G,EACA,QAAAglB,EACA,SAAAjjB,EACA,YAAa,IAAM,OACH6rB,EAAA,CACZ,UAAW,CAAC,GAAG3M,CAAK,EACpB,eAAgBlV,EAChB,YAAakV,EAAM,QAAQlV,CAAI,EAC/B,WAAYkV,EAAM,QAAQlV,CAAI,EAC9B,aAAc,KACd,IAAArF,EACA,aAAcA,EAAI,QAAU2pB,GAAgB3pB,EAAI,OAAO,EAAI,OAC3D,eAAgB,IAAM,CACpB6d,GAAYV,EAAU,CACxB,GAESiM,GAAAK,CAAQ,EAAE,YAAYvC,CAAW,EAC9BqC,GAAA,MAAAA,KACd/uB,EAAA0sB,EAAY,eAAZ,MAAA1sB,EAA0B,iBAAiB,SAAU0sB,EAAY,eACnE,EACA,UAAW,IAAM,OACVA,IACLA,EAAY,aAAe,KAC3BC,GAAA,MAAAA,EAAuBD,EAAY,cAC/BA,EAAY,cAAgBA,EAAY,aAC9BoC,GAAA,MAAAA,EAAApC,EAAY,YAAaA,EAAY,cAEnD1sB,EAAA0sB,EAAY,eAAZ,MAAA1sB,EAA0B,oBAAoB,SAAU0sB,EAAY,gBACzDkC,GAAAK,CAAQ,EAAE,UAAUvC,CAAW,EAE9BsC,GAAA,MAAAA,IACEtC,EAAA,KAChB,EACA,QAAS,IAAM,CAAC,EACjB,EACK,CACJ,eAAA0C,GACE5J,GAAa,CACf,GAAI3a,EACJ,IAAArF,EACA,MAAO,CAAC1G,CAAI,EACZ,SAAA+B,EACA,0BAA2B,GAC3B,WAAY,CAAC+iB,EAAQhiB,IAAM,CACpB8qB,GACMkC,GAAAK,CAAQ,EAAE,WAAW,CAC9B,EAAArtB,EACA,IAAA4D,EACA,KAAAqF,EACA,YAAA6hB,EACA,qBAAAC,CAAA,CACD,CACH,EACA,YAAa,IAAM,CACjB,GAAI,CAACD,EAAa,OAClB,MAAMK,EAAYL,EAAY,UAAU,QAAQ7hB,CAAI,EAC9CwkB,EAAW3C,EAAY,UAAU,QAAQA,EAAY,cAAc,EACzEkC,GAAWK,CAAQ,EAAE,YAAYvC,EAAaK,EAAWsC,CAAQ,CACnE,EACA,YAAa,IAAM,CACZ3C,IACLA,EAAY,aAAe,KAC3BC,GAAA,MAAAA,EAAuBD,EAAY,cACrC,EACD,EACM,OACL,cAAe,CACb,GAAG5Q,GAAWoT,EAAgBE,CAAc,CAC9C,EACA,cAAApL,CAAA,CAEJ,CC1FO,SAASsL,IAAuB,CAC/B,MACJ,UAAAC,GACEC,GAAU,EACRvE,EAAW1kB,KACX,CACJ,UAAAkpB,GACEC,EAAe,EACbC,EAAe,kBAAkBJ,CAAS,GAC1CK,EAAOH,EAAUE,CAAY,EASnC,OARAzxB,YAAU,IAAM,CAET0xB,EAGHnG,IAAkB,QAAQ,aAAa,kBAAkBmG,EAAK,EAAE,IAAI,EAFpE3E,EAAS,yBAAyB,CAGpC,EACC,CAACA,EAAU2E,CAAI,CAAC,EACdA,EAGEhyB,MAACiyB,IAAkB,aAAAF,CAA4B,GAF7C,IAGX,CACA,SAASE,GAAkB,CACzB,aAAAF,CACF,EAAG,CACK,MACJ,KAAM,CACJ,eAAAG,CACF,GACEtZ,GAAY,EACVuZ,EAAoB7G,GAAmBjgB,GAAK,cAAAjJ,EAAAiJ,EAAE,SAAF,YAAAjJ,EAAU,SAAS,MAAM,OAAM,EAC3EgwB,EAAgBtrB,UAAQ,IAAM,CAClC,MAAMurB,EAAY,CAAC,GAAGF,GAAA,YAAAA,EAAmB,SAAS,EAClD,OAAID,GACFG,EAAU,KAAK,kBAAkB,EAE5BA,EAAU,IAAiBC,IAAA,CAChC,IAAKA,EACL,KAAMA,EAAS,WAAW,IAAK,GAAG,CAClC,KACD,CAACH,EAAmBD,CAAc,CAAC,EACtC,cAAQhsB,WACJ,WAACL,OAAA,OAAI,UAAU,uBACb,UAAA7F,EAAA,IAACuuB,EAAc,MAAM,GAAGwD,CAAY,QAAS,MAAO/xB,MAACiG,EAAM,SAAQ,YAAY,EAAI,UAAU,QAAQ,UAAS,GAAC,QAC9GkiB,GAAc,UAAS,KAAK,KAAM,GAAG4J,CAAY,aAAc,SAAS,KAAK,MAAQ/xB,MAAAiG,EAAA,CAAM,QAAQ,iBAAiB,EAAI,YAAajG,EAAA,IAACiG,EAAM,SAAQ,2CAA4C,GAC9L,SAAAmsB,EAAc,IAAInlB,SAASslB,GAAsB,OAAOtlB,EAAK,IAAK,gBAAe,GAC7E,SAAAA,EAAK,MAD8BA,EAAK,GAE3C,CAAS,EACb,GACF,EACCjN,EAAA,IAAAwyB,GAAA,CAAiB,SAAU,GAAGT,CAAY,SAAU,QACpD,MAAI,WAAU,aACb,SAAA/xB,MAACyyB,IAAkB,GACrB,CACF,GACJ,CACO,SAASD,GAAiB,CAC/B,SAAAE,CACF,EAAG,CACD,MAAMrF,EAAW1kB,KACX4E,EAAOukB,IACP3P,EAAQwQ,GAAS,CACrB,QAASplB,EAAK,QACd,KAAMmlB,CAAA,CACP,EACD,cAAQxsB,WACJ,WAACL,OAAA,OAAI,UAAU,yDACb,UAAC7F,MAAAiG,EAAA,CAAM,QAAQ,YAAa,GAC5BJ,OAAC+sB,IAAc,KAAK,UAAU,UAAU,QAAQ,OAAQ,GAAI,QAA2BC,GAAA,CACnFA,IACFtlB,EAAK,SAASmlB,EAAU,CAAC,GAAGvQ,EAAO0Q,CAAc,EAAG,CAClD,YAAa,GACd,EACQxF,EAAA,GAAGlL,EAAM,MAAM,EAAE,EAG1B,YAAAniB,MAAC8F,EAAO,SAAQ,UAAU,MAAM,UAAU,KAAK,KAAK,UAAW9F,EAAA,IAACsf,KAAQ,EACtE,SAAAtf,EAAA,IAACiG,EAAM,SAAQ,KAAM,GACvB,QACC+nB,GAAkB,KACrB,GACF,EACAnoB,OAAC,MAAI,WAAU,sBACZ,UAAAsc,EAAM,IAAI,CAAClV,EAAMjH,IAAWhG,EAAA,IAAA8yB,GAAA,CAA2B,KAAA7lB,EAAY,MAAAkV,EAAc,MAAAnc,EAAc,UAAW,CAACyrB,EAAUX,IAAa,CACnIvjB,EAAK,SAASmlB,EAAU1C,GAAmB7N,EAAOsP,EAAUX,CAAQ,EAAG,CACrE,YAAa,GACd,IAH8C7jB,EAAK,EAInD,CAAE,EACDkV,EAAM,OAA6Q,KAAnQniB,EAAA,IAAA6N,GAAA,CAAmB,KAAK,KAAK,UAAU,QAAQ,MAAO7N,MAACP,GAAS,KAAKmvB,EAAc,GAAI,MAAO5uB,EAAA,IAACiG,EAAM,SAAQ,mBAAoB,GAAI,YAAajG,MAACiG,EAAM,SAAQ,wFAAyF,GAAI,CAAK,EACvR,CACF,GACJ,CACA,SAASwsB,IAAoB,CAC3B,MAAMpF,EAAW1kB,KACX0V,EAASuT,KACTD,EAAY,SAAStT,EAAO,SAAS,EACrC9Q,EAAOukB,IACPphB,EAAO,iBACPqiB,EAAQJ,GAAS,CACrB,QAASplB,EAAK,QACd,KAAAmD,CAAA,CACD,EACKshB,EAAOe,EAAMpB,CAAS,EAC5B,OAAKK,EACGnsB,OAAA+sB,GAAA,CAAc,KAAK,QAAQ,QAAwBI,GAAA,CACrDA,IACGzlB,EAAA,SAASmD,EAAMqiB,EAAM,OAAO,CAACnnB,EAAGyG,IAAMA,GAAKsf,CAAS,EAAG,CAC1D,YAAa,GACd,EACDtE,EAAS,yBAAyB,EAGlC,YAAArtB,MAAC8F,EAAO,SAAQ,UAAU,MAAM,SAAS,KAAK,KAAK,UAAW9F,EAAA,IAAC6kB,KAAW,EACxE,SAAA7kB,EAAA,IAACiG,EAAM,SAAQ,aAAc,GAC/B,EACCjG,EAAA,IAAA2e,GAAA,CAAmB,SAAQ,GAAC,MAAQ3e,MAAAiG,EAAA,CAAM,QAAQ,aAAc,GAAI,KAAMjG,EAAA,IAACiG,EAAM,SAAQ,2CAA2C,OAAQ,CAC7I,KAAM+rB,EAAK,MACV,EAAI,cAAU/rB,EAAM,SAAQ,QAAS,GAAI,CAC5C,IAfgB,IAgBpB,CACA,SAAS6sB,GAAa,CACpB,KAAA7lB,EACA,MAAAkV,EACA,MAAAnc,EACA,UAAAkrB,CACF,EAAG,CACK,MAAAtpB,EAAMjE,SAAO,IAAI,EACjB,CACJ,cAAAsvB,EACA,cAAA7M,GACE6K,GAAY,CACd,KAAAhkB,EACA,MAAAkV,EACA,KAAM,qBACN,IAAAva,EACA,UAAAspB,EACA,SAAU,WACX,EACKgC,EAAOjmB,EAAK,MAAQkmB,GAAsBlmB,EAAK,IAAI,EACnDmmB,EAAgBvtB,OAAC,MAAI,WAAU,6CAChC,UAAQqtB,GAAAlzB,MAACkzB,EAAK,MAAK,IAAK,GAAG,IAC3BlzB,MAACiG,EAAM,SAAQ,aAAc,GAAE,GAClC,IACF,aAAQC,WACJ,UAAAlG,MAACitB,EAAiB,aAAard,GAAM,GAAI,GAAG5J,CAAK,GAAI,IAAA4B,EAAW,GAAGqrB,EACjE,SAACptB,OAAA,OAAI,UAAU,2BACb,UAAC7F,MAAA8d,GAAA,CAAW,IAAKsI,EAAe,KAAK,KACnC,SAACpmB,MAAA2uB,GAAA,CAAkB,UAAU,+BAA+B,CAC9D,GACC3uB,EAAA,WAAK,SAAKiN,EAAA,OAASmmB,EAAc,GACpC,EACF,CACF,EACJ,CCvKO,SAASC,IAA2B,CACnC,MACJ,UAAA1B,EACA,cAAA2B,GACE1B,GAAU,EACd,aAAQ2B,GAAe,WAAW,kBAAkB5B,CAAS,SAAU,UAAW2B,CAAe,EACnG,CACO,SAASC,GAAe,CAC7B,UAAAC,EACA,UAAAhE,CACF,EAAG,CACD,MAAMnC,EAAW1kB,KACX,CACJ,UAAAkpB,GACEC,EAAe,EACb7kB,EAAO4kB,EAAU,GAAG2B,CAAS,IAAIhE,CAAS,EAAE,EAelD,OAZAlvB,YAAU,IAAM,CACT2M,EAMH4e,IAAkB,QAAQ,aAAa,uBAAuB5e,EAAK,EAAE,IAAI,EALzEogB,EAAS,KAAM,CACb,SAAU,OACV,QAAS,GACV,CAGH,EACC,CAACA,EAAUpgB,CAAI,CAAC,EAGdA,EAGEjN,EAAA,IAACyzB,GAAsB,WAAAD,EAAsB,UAAAhE,CAAsB,GAFjE,IAGX,CACA,SAASiE,GAAsB,CAC7B,UAAAD,EACA,UAAAhE,CACF,EAAG,CACD,cAAQtpB,WACJ,WAAAlG,MAAC0zB,IAAa,eAAgB,GAAGF,CAAS,IAAIhE,CAAS,GAAI,EAC3DxvB,MAAC,OAAI,UAAU,mBACb,eAAC2zB,GAAkB,WAAAH,EAAsB,UAAAhE,EAAsB,CACjE,EACF,GACJ,CACA,SAASmE,GAAkB,CACzB,UAAAH,EACA,UAAAhE,CACF,EAAG,CACD,MAAMnC,EAAW1kB,KACX,CACJ,OAAA6kB,GACEE,GAAc,CAChB,KAAM8F,CAAA,CACP,EACK,CACJ,SAAA5mB,EACA,UAAAilB,GACEC,EAAe,EACb7kB,EAAOugB,EAAO,CAACgC,CAAS,EAC9B,OAAQ3pB,OAAA+sB,GAAA,CAAc,KAAK,QAAQ,QAAwBI,GAAA,CACzD,GAAIA,GACExD,EAAW,CACP,MAAAoE,EAAe/B,EAAU2B,CAAS,EAC/B5mB,EAAA4mB,EAAWI,EAAa,OAAO,CAAChoB,EAAGyG,IAAMA,IAAM,CAACmd,CAAS,EAAG,CACnE,YAAa,GACd,EACDnC,EAAS,KAAM,CACb,SAAU,OACV,QAAS,GACV,CACH,CAGA,YAAArtB,MAAC8F,EAAO,SAAQ,UAAU,MAAM,SAAS,KAAK,KAAK,UAAW9F,EAAA,IAAC6kB,KAAW,EACxE,SAAA7kB,EAAA,IAACiG,EAAM,SAAQ,kBAAmB,GACpC,EACCjG,EAAA,IAAA2e,GAAA,CAAmB,SAAQ,GAAC,MAAQ3e,MAAAiG,EAAA,CAAM,QAAQ,aAAc,GAAI,KAAMjG,EAAA,IAACiG,EAAM,SAAQ,2CAA2C,OAAQ,CAC7I,KAAMgH,EAAK,OACV,EAAI,cAAUhH,EAAM,SAAQ,QAAS,GAAI,CAC5C,GACJ,CCxFa,MAAA4tB,GAAmC,CAAC,wBAAwB,EAClE,SAASC,IAA2B,CACzC,OAAOta,GAAY,CACjB,YAAaqa,GACb,WAAsBrI,GACbuI,GAAYvI,CAAM,EAE3B,UAAW,MAAM7qB,GAAY,CAC3B+d,GAAY,aAAa,CAAC,yBAAyB,EAAG/d,CAAQ,EACxDqB,GAAAR,EAAQ,eAAe,CAAC,CAChC,EACA,QAAgBe,GAAA+F,GAAmB/F,CAAG,EACvC,CACH,CACA,SAASwxB,GAAYC,EAAS,CACrB,OAAAphB,EAAU,KAAK,mBAAoB,CACxC,QAAAohB,CACD,GAAE,KAAK1hB,GAAKA,EAAE,IAAI,CACrB,CClBO,SAAS2hB,GAAc,CAC5B,UAAAC,EACA,YAAAC,CACF,EAAG,CACK,MACJ,MAAAxyB,EACA,MAAAyyB,EACA,QAAAC,CACF,EAAIC,GAAW,CAAC,CACd,aAAAC,CAAA,IAEOL,IAEP,CAACC,GAAe,CAACI,EAAa,SAAS,SAASJ,CAAW,EAC5D,EACD7zB,mBAAU,IAAM,CACd,MAAMk0B,EAA0BxwB,GAAA,CAC1BkwB,IACFlwB,EAAE,eAAe,EACjBA,EAAE,YAAc,GAClB,EAEK,+BAAiB,eAAgBwwB,CAAkB,EACnD,IAAM,OAAO,oBAAoB,eAAgBA,CAAkB,GACzE,CAACN,CAAS,CAAC,EACPl0B,MAAC4yB,IAAc,KAAK,QAAQ,OAAQjxB,IAAU,UAAW,QAAwBqxB,GAAA,CAClFrxB,IAAU,YACVqxB,EACMqB,IAEFD,IACR,EAEE,SAAAp0B,MAAC2e,GAAmB,UAAQ,GAAC,MAAQ3e,MAAAiG,EAAA,CAAM,QAAQ,0BAA2B,GAAI,KAAOjG,MAAAiG,EAAA,CAAM,QAAQ,mFAAoF,GAAI,MAAQjG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,YAAY,EAAI,QAAUjG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,kBAAkB,EAAI,CACrR,EACJ,CC3BO,SAASwuB,GAAqB,CACnC,SAAArxB,EACA,WAAAsxB,EACA,KAAAnnB,EACA,mBAAAonB,CACF,EAAG,CACK,MACJ,QAAAC,GACEC,GAAa,CACf,QAAStnB,EAAK,QACf,EACDjN,YAAU,KACQurB,EAAA,EAAE,WAAW+I,CAAO,EAC7B,IAAM/I,EAAA,EAAkB,WAAW,EAAK,GAC9C,CAAC+I,CAAO,CAAC,EACZt0B,YAAU,IAAM,CACR,MAAAw0B,EAAevnB,EAAK,MAAgBie,GAAA,CACxBK,IAAE,QAAQ,UAAUL,CAAM,EAC3C,EACM,UAAMsJ,EAAa,aAAY,EACrC,CAACvnB,CAAI,CAAC,EACT,MAAMwmB,EAAcD,KACpB,cAAQ5tB,WACJ,WAAAlG,EAAA,IAAC+0B,GAAuB,YAAAL,EACtB,SAAC10B,MAAA2Y,GAAA,CACC,SAAC3Y,MAAAoN,GAAA,CAAK,UAAU,mBAAmB,GAAG,oBAAoB,KAAAG,EAAY,SAAoBie,GAAA,CAC1FuI,EAAY,OAAOvI,EAAQ,CACzB,UAAW,IAAMje,EAAK,MAAMie,CAAM,EACnC,GAEE,SAAApoB,CACH,EACF,GACF,EACCpD,EAAA,IAAAi0B,GAAA,CAAc,UAAWW,EAAS,YAAaD,EAAoB,CACtE,GACJ,CACO,SAASI,GAAuB,CACrC,WAAAL,EACA,SAAAtxB,CACF,EAAG,CACM,OAAAyC,EAAA,KAAC,MAAI,WAAU,uBAClB,UAAA7F,EAAA,IAACg1B,GAAuB,IACvBN,EACD10B,MAAC,OAAI,UAAU,4BACb,eAAC,MAAI,WAAU,mCAAoC,SAAAoD,CAAA,CAAS,CAC9D,EACF,GACJ,CACA,SAAS4xB,IAAyB,CAC1B,MACJ,MAAArzB,GACEoH,GAAY,EACVksB,EAAWC,GAAc,CAC7B,YAAarB,EACd,GAAI,EACCe,EAAUtJ,GAAwBjgB,KAAE,OAAO,EAC1C,OAAAxF,EAAA,KAAC,MAAI,WAAU,sDAClB,UAAA7F,MAAC8d,GAAW,QAAO,WAAW,UAAU,aAAa,YAAalO,GAAM,IAAIjO,GAAA,YAAAA,EAAO,WAAY,SAAU,QAAO,GAC9G,SAAA3B,MAACm1B,IAAU,GACb,EACAn1B,MAAC,OAAI,UAAU,QACb,eAACiG,EAAM,SAAQ,oBAAoB,CACrC,GACAjG,MAAC8F,EAAO,SAAQ,OAAO,MAAM,UAAU,UAAU,gBAAgB,SAAU,CAAC8uB,GAAWK,EAAU,KAAK,SAAS,KAAK,oBACjH,SAAUL,EAAA50B,EAAA,IAACiG,EAAM,SAAQ,MAAO,GAAMjG,MAAAiG,EAAA,CAAM,QAAQ,QAAQ,CAC/D,EACF,GACJ,CChFO,SAASmvB,IAAkB,CAChC,MAAMtsB,EAAWC,KACV,WAAI,IAAI,IAAK,OAAO,OAASD,EAAS,QAAQ,EAAE,SAAS,QAAQ,MAAO,EAAE,CACnF,CCIO,SAASusB,GAA2B,CACzC,SAAAjyB,EACA,SAAAkyB,CACF,EAAG,CACK,MAAAC,EAAgB7V,WAAS,QAAQtc,CAAQ,EACzCoyB,EAAeJ,KACfnH,EAAa,CAACjuB,MAACiG,GAAsB,QAAQ,eAApB,WAAkC,CAAE,EAC/DsvB,EAAc,OAAS,GACdtH,EAAA,KAAKsH,EAAc,CAAC,CAAC,EAElC,MAAME,EAAWF,EAAc,OAAS,EAAIA,EAAc,MAAM,CAAC,EAAIA,EAC9D,OAAA1vB,EAAA,KAAC,MAAI,WAAU,gDAClB,UAAA7F,MAAC8d,GAAW,UAAS,KAAK,OAAO,eAAe,UAAU,uCAAuC,YAAalO,GAAM,GAAI0lB,GAAYE,EAClI,SAAAx1B,MAAC01B,IAAsB,GACzB,EACA7vB,OAAC,MAAI,WAAU,wBACb,UAAA7F,EAAA,IAAC21B,GAAU,OAAO1H,EAAY,UAAU,qBAAqB,QAC5D0H,GAAU,OAAOF,EAAU,aAAY,GAAC,UAAU,eAAe,GACpE,CACF,GACJ,CACA,SAASE,GAAU,CACjB,MAAAxT,EACA,UAAAviB,EACA,aAAAg2B,CACF,EAAG,CACM,OAAA51B,EAAA,IAAC,MAAI,WAAWC,EAAK,0BAA2BL,CAAS,EAC3D,SAAMuiB,EAAA,IAAI,CAAClV,EAAMjH,IAAU,CACtB,MAAA6vB,EAAS1T,EAAM,OAAS,IAAMnc,EACpC,cAAQE,WACF,WAAClG,MAAA,OAAI,UAAWC,EAAK,8DAA+D41B,GAAUD,GAAgB,cAAc,EACzH,SACH3oB,CAAA,GACC,CAAC4oB,IAAWD,EAAe51B,MAACmtB,GAAuB,WAAU,2BAA2B,KAAK,cAAe,GAAMntB,MAAA,OAAI,SAAM,SAJ7GgG,CAKlB,CACL,EACD,EACJ,CCrCO,SAAS8vB,IAAiB,CAC/B,MAAMtK,EAASS,KACT1e,EAAO+gB,GAAQ,CACnB,cAAe,CACb,SAAU,CACR,SAAU,CACR,QAAS9C,EAAO,SAAS,SAAS,QAClC,WAAYA,EAAO,SAAS,SAAS,WACrC,UAAWA,EAAO,SAAS,SAAS,UACpC,kBAAmBA,EAAO,SAAS,SAAS,kBAC5C,iBAAkBA,EAAO,SAAS,SAAS,iBAC3C,iBAAkBA,EAAO,SAAS,SAAS,gBAC7C,CACF,EACA,WAAY,CACV,IAAK,CACH,SAAUA,EAAO,WAAW,IAAI,QAClC,CACF,CACF,EACD,EACM,OAAA3lB,OAAC4uB,GAAqB,MAAAlnB,EAAY,WAAYvN,EAAA,IAACq1B,GAC9C,UAAAr1B,EAAA,IAACiG,EAAM,SAAQ,SAAU,GAC3B,EACF,UAAAjG,EAAA,IAAC+1B,GAAsB,OAAQ/1B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,SAAU,GAAI,YAAajG,EAAA,IAACiG,EAAM,SAAQ,uFAAwF,GAAI,KAAK,UAAU,EACjMjG,EAAA,IAAA+1B,GAAA,CAAsB,MAAO/1B,EAAA,IAACiG,GAAM,QAAQ,YAAa,GAAI,kBAAcA,EAAM,SAAQ,mCAAoC,GAAI,KAAK,aAAa,EACnJjG,EAAA,IAAA+1B,GAAA,CAAsB,MAAO/1B,EAAA,IAACiG,GAAM,QAAQ,WAAY,GAAI,kBAAcA,EAAM,SAAQ,8EAA+E,GAAI,KAAK,YAAY,EAC5LjG,EAAA,IAAA+1B,GAAA,CAAsB,MAAO/1B,EAAA,IAACiG,GAAM,QAAQ,mBAAoB,GAAI,kBAAcA,EAAM,SAAQ,0FAA2F,GAAI,KAAK,oBAAoB,EACxNjG,EAAA,IAAA+1B,GAAA,CAAsB,MAAO/1B,EAAA,IAACiG,GAAM,QAAQ,kBAAmB,GAAI,kBAAcA,EAAM,SAAQ,oFAAqF,GAAI,KAAK,mBAAmB,QAChN+vB,GAAkB,UAClBC,GAAwB,GAC3B,GACJ,CACA,SAASF,GAAsB,CAC7B,MAAArnB,EACA,YAAAX,EACA,KAAA7M,CACF,EAAG,CACK,MAAA6a,EAAeuP,GAAwBjgB,GAAA,cAAAjJ,EAAAiJ,EAAE,WAAF,YAAAjJ,EAAY,SAAS,SAASlB,GAAK,EAChF,OAAQlB,MAAA+d,GAAA,CAAkB,KAAM,qBAAqB7c,CAAI,GAAI,UAAU,uBAAuB,MAAAwN,EAAc,YAAAX,EAA0B,WAAW,iBAAiB,aAAAgO,EAA4B,SAAU,IAAM,CAC5L8P,IAAE,QAAQ,aAAa,sBAAsB,CAC5D,GACL,CACA,SAASmK,IAAoB,CAC3B,OAAQh2B,MAAAuuB,EAAA,CAAc,KAAK,0BAA0B,SAAQ,GAAC,UAAU,QAAQ,MAAOvuB,EAAA,IAACiG,EAAM,SAAQ,YAAY,CAAI,EACxH,CACA,SAASgwB,IAA0B,CACjC,OAAQj2B,EAAA,IAAAuuB,EAAA,CAAc,KAAK,qCAAqC,UAAU,QAAQ,iBAAiB,WAAW,KAAM,EAAG,MAAOvuB,MAACiG,EAAM,SAAQ,mBAAmB,CAAI,EACtK,CCxDO,SAASiwB,GAAaC,EAAM,EAAGC,EAAM,IAAO,CAC3C,MAAAC,EAAe,IAAI,YAAY,CAAC,EAC/B,cAAO,gBAAgBA,CAAY,EAC1C,MAAMC,EAASD,EAAa,CAAC,GAAK,WAAa,GACzC,OAAAF,EAAA,KAAK,KAAKA,CAAG,EACbC,EAAA,KAAK,MAAMA,CAAG,EACb,KAAK,MAAME,GAAUF,EAAMD,EAAM,EAAE,EAAIA,CAChD,CCIO,SAASI,GAAU,CACxB,KAAAr1B,EACA,SAAAkC,EACA,SAAAH,CACF,EAAG,CACK,MACJ,MAAAqqB,GACEC,GAAS,EACPF,EAAW1kB,KACX,CACJ,MAAA6tB,EACA,UAAA3E,EACA,SAAAjlB,GACEklB,EAAe,EACnB,cAAQ5rB,WACH,WAAA9C,QACA,MAAI,WAAU,QACb,SAACpD,MAAA8F,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,MAAM,UAAU,UAAW9F,MAACsf,KAAQ,EAAI,SAAArc,EAAoB,QAAS,IAAM,OAC/G,MAAMwzB,GAAmBr0B,EAAAypB,EAAkB,aAAlB,YAAAzpB,EAA4B,WAAW,OAAO,MACjEs0B,EAAgB7E,EAAU,mBAAmB,EAC1CjlB,EAAA,oBAAqB,CAAC,GAAG8pB,EAAe,CAC/C,GAAIR,GAAa,EACjB,KAAM5I,EAAM9rB,EAAQ,WAAW,CAAC,EAChC,OAAQi1B,EACR,KAAAv1B,CAAA,CACD,EAAG,CACF,YAAa,GACd,EACQmsB,EAAA,GAAGqJ,EAAc,MAAM,EAAE,GAEhC,SAAC12B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,WAAY,EAC7B,GACF,EACCuwB,EAAM,mBAAmB,EAAE,IAAI,CAACh0B,EAAOwD,UAAWinB,EAAgC,IAAI,GAAGjnB,CAAK,GAAI,YAAa2wB,GAAS,SAAA1zB,EACpH,WAAM,IAD8D,EAAAT,EAAM,EAE7E,CAAmB,CACvB,GACJ,CCvCA,MAAMo0B,GAAYhS,GAAM,KAAK,IAAM1f,GAAA,WAAO,0BAAc,EAAC,mTAClD,SAAS2xB,GAAU,CACxB,aAAA9a,EACA,KAAA5P,EAAO,OACP,MAAA2B,EACA,OAAAgpB,EACA,SAAA7B,EACA,kBAAA8B,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,KAAM,CAAChvB,EAAO2E,CAAQ,EAAIvM,WAAS0b,CAAY,EACzC,CAACmb,EAASC,CAAU,EAAI92B,WAAS,EAAI,EAC3C,OAAQwF,OAAAkB,GAAA,CAAO,KAAK,aAAa,UAAU,gBACvC,UAAA/G,MAACgH,IAAc,SAAM8G,CAAA,SACpB5G,GAAW,WAAU,qBAAqB,QAAQ,MACjD,SAAClH,MAAAo3B,WAAA,CAAS,SAAUp3B,EAAA,IAAC,OAAI,UAAU,gDAC7B,eAAC4N,GAAe,cAAW,oBAAoB,gBAAe,GAAC,KAAK,IAAK,GAC3E,EACF,SAAA5N,MAAC42B,IAAU,SAAAI,EAAoB,KAAA7qB,EAAY,SAAsBsY,GAAA7X,EAAS6X,CAAQ,EAAG,aAAcxc,GAAS,GAAI,gBAAiBkvB,EAAY,UAAAF,CAAA,CAAsB,CACrK,GACF,EACAj3B,MAACq3B,IAAO,SAAU,CAACH,GAAWjC,EAAU,MAAAhtB,EAAc,OAAA6uB,EAAgB,YAAaC,EAAmB,CACxG,GACJ,CACA,SAASM,GAAO,CACd,SAAAp0B,EACA,MAAAgF,EACA,OAAA6uB,EACA,YAAAQ,CACF,EAAG,CACK,MACJ,MAAArY,GACEC,GAAiB,EACrB,OAAQrZ,OAAAsZ,GAAA,CAAa,WAAU,GAAC,YAAAmY,EAC5B,UAACt3B,MAAA8F,EAAA,CAAO,QAAS,IAAMmZ,EAAA,EACrB,SAACjf,EAAA,IAAAiG,EAAA,CAAM,QAAQ,SAAS,CAC1B,GACAjG,MAAC8F,GAAO,SAAA7C,EAAoB,QAAQ,OAAO,MAAM,UAAU,QAAS,IAAM,CACtE6zB,EACFA,EAAO7uB,CAAK,EAEZgX,EAAMhX,CAAK,CACb,EAEE,SAAAjI,MAACiG,EAAM,SAAQ,MAAO,GACxB,CACF,GACJ,CCvDO,SAASsxB,GAAW7mB,EAAM,CAC/B,OAAO4N,GAAS,CACd,SAAU,CAAC,QAAS,WAAY5N,CAAI,EACpC,QAAS,IAAM8mB,GAAU9mB,CAAI,EAC9B,CACH,CACA,SAAS8mB,GAAU9mB,EAAM,CAChB,OAAAkC,EAAU,IAAI,6BAA6BlC,CAAI,EAAE,EAAE,KAAiB/P,KAAS,IAAI,CAC1F,CCLO,SAAS82B,GAAiB/mB,EAAM,CACrC,MAAMgO,EAAcgZ,KACpB,OAAOle,GAAY,CACjB,WAAYF,GAAWqe,GAAWjnB,EAAM4I,EAAQ,IAAI,EACpD,UAAW,SAAY,CACrB,MAAMoF,EAAY,kBAAkB,CAClC,SAAU,CAAC,QAAS,WAAYhO,CAAI,EACrC,EACK1O,GAAAR,EAAQ,kBAAkB,CAAC,CACnC,EACA,QAAgBe,GAAA+F,GAAmB/F,CAAG,EACvC,CACH,CACA,SAASo1B,GAAWjnB,EAAMknB,EAAM,CAC9B,OAAOhlB,EAAU,IAAI,6BAA6BlC,CAAI,GAAI,CACxD,KAAAknB,CACD,GAAE,KAAKtlB,GAAKA,EAAE,IAAI,CACrB,QCTA,MAAMulB,KAAQz1B,GAAA+oB,GAAuB,SAAS,cAAc,EAAE,SAAhD,YAAA/oB,GAAwD,QAAS,GACzEgc,GAAQyZ,GAAM,IAAIC,GAAQA,EAAK,GAAG,EACjC,SAASC,IAAa,CACrB,MACJ,UAAAla,CAAA,EACE0Z,GAAWnZ,EAAK,EACpB,OAAQpe,EAAA,IAAA+0B,GAAA,CAAuB,WAAY/0B,EAAA,IAACq1B,IACpC,SAACr1B,MAAAiG,EAAA,CAAM,QAAQ,MAAM,CACvB,GACD,SAAY4X,EAAA7d,EAAA,IAAC0N,KAAe,EAAK1N,MAACkG,WAC9B,UAAA2xB,GAAM,IAAIC,GAAS93B,EAAA,IAAAg4B,GAAA,CAAgC,MAAOF,EAAK,MAAO,KAAMA,EAAK,GAAxC,EAAAA,EAAK,GAAwC,CAAE,EAC3F,CACJ,EACJ,CACA,SAASE,GAAiB,CACxB,MAAAtpB,EACA,KAAAgC,CACF,EAAG,CACK,MACJ,KAAA3I,EACA,UAAA8V,CAAA,EACE0Z,GAAWnZ,EAAK,EACb,OAAAvY,EAAA,KAAC+sB,GAAc,MAAK,QACvB,UAAA5yB,MAACitB,GAAiB,SAAUpP,EAC1B,eAAC5X,EAAO,IAAGyI,EAAO,CACpB,GACC3G,QAAQkwB,GAAiB,MAAAvnB,EAAY,MAAO3I,EAAK2I,CAAI,CAAG,GAAK,IAChE,GACJ,CACA,SAASunB,GAAiB,CACxB,KAAAvnB,EACA,MAAAzI,CACF,EAAG,CACK,MACJ,MAAAgX,GACEC,GAAiB,EACfyY,EAAaF,GAAiB/mB,CAAI,EAClCumB,EAAYtzB,SAAO,IAAI,EACvBu0B,QAAepyB,EAAO,SAAQ,UAAU,MAAM,UAAU,QAAS,IAAM,CACvEmxB,EAAU,SACZA,EAAU,QAAQ,OAAO,SAAShvB,EAAM,QAAQ,CAClD,EAEE,SAAAjI,MAACiG,EAAM,SAAQ,oBAAoB,CACrC,GACK,OAAAjG,EAAA,IAAC62B,GAAU,MAAK,oBAAoB,YAAQ5wB,EAAM,SAAQ,oBAAqB,GAAI,kBAAmBiyB,EAAa,UAAAjB,EAAsB,aAAchvB,EAAM,QAAUA,EAAM,SAAU,SAAU0vB,EAAW,UAAW,SAAU,GAAO,OAAoBlT,GAAA,CAC7PA,GAAY,MACdkT,EAAW,OAAO,CAChB,KAAMlT,CAAA,EACL,CACD,UAAW,IAAMxF,EAAM,EACxB,CAEF,GACL,CC1DO,SAASkZ,IAAoB,CAClC,MAAM3M,EAASS,KACT1e,EAAO+gB,GAAQ,CACnB,cAAe,CACb,WAAY,CACV,YAAa,CACX,IAAK9C,EAAO,WAAW,YAAY,IACnC,KAAMA,EAAO,WAAW,YAAY,IACtC,CACF,CACF,EACD,EACM,OAAA3lB,OAAC4uB,GAAqB,MAAAlnB,EAAY,WAAYvN,EAAA,IAACq1B,GAC9C,UAAAr1B,EAAA,IAACiG,EAAM,SAAQ,aAAc,GAC/B,EACF,UAACjG,MAAAo4B,GAAA,CAAwB,KAAK,KAAM,GACpCp4B,MAACo4B,GAAwB,MAAK,MAAO,EACvC,GACJ,CACA,SAASA,GAAwB,CAC/B,KAAAjsB,CACF,EAAG,CACK,MACJ,UAAA0lB,GACEC,EAAe,EACb,CACJ,SAAAllB,GACEklB,EAAe,EACbhkB,EAAQ3B,IAAS,OAAUnM,MAAAiG,EAAA,CAAM,QAAQ,2BAA2B,EAAKjG,EAAA,IAACiG,EAAM,SAAQ,YAAa,GAC3G,OAAQJ,OAAA+sB,GAAA,CAAc,KAAK,QAAQ,QAAqBnO,GAAA,CAClDA,GAAY,OACL7X,EAAA,0BAA0BT,CAAI,GAAIsY,EAAU,CACnD,YAAa,GACd,EACDoH,EAAkB,UAAQ,cAAc1f,EAAMsY,CAAQ,EAGtD,YAAAzkB,MAACitB,GAAkB,SAAMnf,CAAA,GACzB9N,MAAC62B,GAAU,OAAA/oB,EAAc,aAAc+jB,EAAU,0BAA0B1lB,CAAI,EAAE,GAAK,GAAI,KAAAA,CAAY,EACxG,GACJ,CChDa,MAAAksB,GAAYz1B,EAAe5C,EAAA,YAAK,OAAO,UAAU,EAAE,gGAAgG,CAAE,ECA3J,SAASs4B,GAAkB3zB,EAAO,CACvC,OAAO4zB,GAAW5zB,CAAK,EAAE,SAAS,KAAK,EAAE,QAAQ,OAAQ,EAAE,EAAE,QAAQ,IAAK,EAAE,EAAE,QAAQ,OAAQ,GAAG,CACnG,CCFO,MAAM6zB,GAAW51B,EAAc5C,MAAC,QAAK,EAAE,yHAA0H,GAAI,cAAc,ECcnL,SAASy4B,IAA6B,CACrC,MACJ,UAAA5G,EACA,SAAAjlB,GACEklB,EAAe,EACb,CACJ,WAAA4G,GACE9G,GAAU,EACR+G,EAAQ9G,EAAU,qBAAqB,CAAC6G,CAAU,EAAE,EAC1D,OAAQ7yB,OAAA+sB,GAAA,CAAc,KAAK,QAAQ,QAAkB3qB,GAAA,CAC9CA,GACL4pB,EAAU,mBAAmB,EAAE,QAAQ,CAAC+G,EAAc5yB,IAAU,CAE1D,GAAA4yB,EAAa,KAAO3wB,EAAM,GAAI,CACvB2E,EAAA,qBAAqB5G,CAAK,GAAIiC,EAAO,CAC5C,YAAa,GACd,EACD,MACF,CAGA,GAAIA,EAAM,cAAe,CACd2E,EAAA,qBAAqB5G,CAAK,GAAI,CACrC,GAAG4yB,EACH,cAAe,IACd,CACD,YAAa,GACd,EACD,MACF,CACA,GAAI3wB,EAAM,aAAc,CACb2E,EAAA,qBAAqB5G,CAAK,GAAI,CACrC,GAAG4yB,EACH,aAAc,IACb,CACD,YAAa,GACd,EACD,MACF,EACD,CAEC,YAAA54B,MAAC8F,EAAO,MAAK,KAAK,QAAQ,UAAU,MAAM,UAAU,UAAW9F,EAAA,IAACw4B,KAAS,EACvE,SAAAx4B,EAAA,IAACiG,EAAM,SAAQ,UAAW,GAC5B,EACAjG,MAAC64B,IAAe,MAAAF,EAAc,CAChC,GACJ,CACA,SAASE,GAAe,CACtB,MAAAF,CACF,EAAG,CACD,MAAMprB,EAAO+gB,GAAQ,CACnB,cAAeqK,CAAA,CAChB,EACK,CACJ,MAAA1Z,EACA,OAAA6Z,GACE5Z,GAAiB,EACrB5e,mBAAU,IAAM,CACd,MAAMw0B,EAAevnB,EAAK,MAAM,CAACtF,EAAO,CACtC,KAAAyI,CAAA,IACI,CAEAA,IAAS,iBAAmBzI,EAAM,eAC/BsF,EAAA,SAAS,eAAgB,EAAK,EAEjCmD,IAAS,gBAAkBzI,EAAM,cAC9BsF,EAAA,SAAS,gBAAiB,EAAK,CACtC,CACD,EACM,UAAMunB,EAAa,aAAY,EACrC,CAACvnB,CAAI,CAAC,SACDxG,GACJ,WAAA/G,MAACgH,GACC,UAAAhH,EAAA,IAACiG,EAAM,SAAQ,iBAAkB,GACnC,EACAjG,MAACkH,IACC,SAACrB,EAAA,KAAAuH,GAAA,CAAK,KAAAG,EAAY,GAAIurB,EAAQ,SAAoBtN,GAAA,CAClDvM,EAAMuM,CAAM,CAEV,YAAAxrB,EAAA,IAACuuB,EAAc,MAAK,OAAO,MAAQvuB,MAAAiG,EAAA,CAAM,QAAQ,MAAO,GAAI,UAAU,QAAQ,UAAS,GAAC,QACvF8yB,GAAW,MAAK,UAAU,UAAU,uBAAuB,YAAa/4B,MAACiG,EAAM,SAAQ,wDAAwD,EAC9I,SAAAjG,EAAA,IAACiG,EAAM,SAAQ,YAAa,GAC9B,QACC8yB,GAAW,MAAK,gBAAgB,UAAU,QAAQ,YAAa/4B,MAACiG,EAAM,SAAQ,wDAAwD,EACrI,SAAAjG,EAAA,IAACiG,EAAM,SAAQ,wBAAyB,GAC1C,EACCjG,EAAA,IAAA+4B,GAAA,CAAW,KAAK,eAAe,YAAc/4B,MAAAiG,EAAA,CAAM,QAAQ,uDAAuD,EACjH,SAAAjG,MAACiG,EAAM,SAAQ,uBAAwB,GACzC,GACF,CACF,UACCkZ,GACC,WAACnf,MAAA8F,EAAA,CAAO,QAAS,IAAM,CACjBmZ,GAAA,EAEJ,SAAAjf,MAACiG,EAAM,SAAQ,QAAS,GAC1B,QACCH,EAAO,SAAQ,OAAO,MAAM,UAAU,KAAK,SAAS,KAAMgzB,EAAQ,SAAU,CAACvrB,EAAK,UAAU,QAC3F,eAACtH,EAAM,SAAQ,MAAO,GACxB,GACF,CACF,GACJ,CCpHO,MAAM+yB,GAAiBp2B,EAAc5C,MAAC,QAAK,EAAE,iTAAkT,GAAI,oBAAoB,ECcvX,SAASi5B,IAAyB,CACvC,MAAM5L,EAAW1kB,KACX,CACJ,WAAA+vB,GACE9G,GAAU,EACR,CAACsH,EAAmBC,CAAoB,EAAI94B,WAAS,EAAK,EAC1D,CACJ,SAAAuM,EACA,UAAAilB,GACEC,EAAe,EACbsH,EAAc,IAAM,CACxB,GAAIvH,EAAU,mBAAmB,EAAE,QAAU,EAAG,CACxC7vB,GAAA,OAAOR,EAAQ,gCAAgC,CAAC,EACtD,MACF,CACIk3B,IACFrL,EAAS,KAAM,CACb,SAAU,OACV,QAAS,GACV,EACQzgB,EAAA,oBAAqBilB,EAAU,mBAAmB,EAAE,OAAO,CAACjmB,EAAGyG,IAAMA,IAAM,CAACqmB,CAAU,EAAG,CAChG,YAAa,GACd,EACH,EAEF,cAAQxyB,WACJ,WAACL,OAAAwzB,GAAA,CAAY,eAAuB/vB,GAAA,CACpC,GAAIA,IAAQ,SACV6vB,EAAqB,EAAI,UAChB7vB,IAAQ,QAAS,CACpB,MAAAgwB,EAAO,qBAAqB,CAACZ,CAAU,GACvCa,EAAgB1H,EAAU,GAAGyH,CAAI,UAAU,EAAIzN,IAAkB,SAAS,WAAW,OAAO,KAAOA,EAAA,EAAkB,SAAS,WAAW,OAAO,MAC/I,eAAQ0N,CAAa,EAAE,QAAQ,CAAC,CAACC,EAAWC,CAAU,IAAM,CACjE5N,EAAkB,UAAQ,cAAc2N,EAAWC,CAAU,EAC9D,EACe5N,IAAE,QAAQ,aAAa,IAAI,EAClCjf,EAAA,GAAG0sB,CAAI,UAAWC,EAAe,CACxC,YAAa,GACd,EACQ3sB,EAAA,GAAG0sB,CAAI,QAAS,OAAW,CAClC,YAAa,GACd,CACH,CAEE,YAAAt5B,MAAC8d,IAAW,KAAK,KAAK,UAAU,aAC9B,SAAA9d,EAAA,IAACmpB,KAAa,CAChB,UACCuQ,GACC,WAAC15B,EAAA,IAAA25B,GAAA,CAAS,MAAM,QAAQ,UAAW35B,MAACg5B,GAAe,IACjD,SAACh5B,MAAAiG,EAAA,CAAM,QAAQ,cAAe,GAChC,EACCjG,EAAA,IAAA25B,GAAA,CAAS,MAAM,SAAS,UAAW35B,MAAC6kB,GAAW,IAC9C,SAAC7kB,MAAAiG,EAAA,CAAM,QAAQ,QAAS,GAC1B,GACF,GACF,QACC2sB,GAAc,MAAK,QAAQ,OAAQsG,EAAmB,QAAwBlG,GAAA,CAC3EA,GACUoG,IAEdD,EAAqB,EAAK,CAC5B,EACI,eAACxa,GAAmB,UAAQ,GAAC,MAAO3e,MAACiG,EAAM,SAAQ,cAAe,GAAI,KAAOjG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,8CAA8C,EAAI,cAAUA,EAAM,SAAQ,QAAS,GAAI,CACpL,EACF,GACJ,CC/EO,MAAM2zB,GAAe,CAAC,CAC3B,MAAO,qBACP,KAAMp4B,EAAQ,OAAO,CACvB,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,UAAU,CAC1B,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,OAAO,CACvB,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,YAAY,CAC5B,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,YAAY,CAC5B,EAAG,CACD,MAAO,iBACP,KAAMA,EAAQ,OAAO,EACrB,WAAY,oBACd,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,YAAY,EAC1B,WAAY,oBACd,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,cAAc,CAC9B,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,WAAW,EACzB,WAAY,eACd,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,SAAS,CACzB,EAAG,CACD,MAAO,kBACP,KAAMA,EAAQ,UAAU,EACxB,WAAY,oBACd,EAAG,CACD,MAAO,kBACP,KAAMA,EAAQ,YAAY,EAC1B,WAAY,oBACd,EAAG,CACD,MAAO,kBACP,KAAMA,EAAQ,iBAAiB,EAC/B,WAAY,oBACd,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,WAAW,EACzB,WAAY,oBACd,EAAG,CACD,MAAO,aACP,KAAMA,EAAQ,OAAO,EACrB,WAAY,oBACd,EAAG,CACD,MAAO,gBACP,KAAMA,EAAQ,aAAa,EAC3B,WAAY,oBACd,EAAG,CACD,MAAO,mBACP,KAAMA,EAAQ,OAAO,EACrB,WAAY,oBACd,CAAC,EC3DM,SAASq4B,GAAY,CAC1B,SAAA/d,EACA,MAAA7T,EACA,OAAAsG,CACF,EAAG,CACK,MAAAurB,EAAgBvrB,EAAO,IAAa5J,GAAA,CACxC,MAAM4B,EAAa0B,IAAUtD,EACtB,OAAA3E,MAACyE,GAAuB,SAAS,IAAM,CAC5CqX,GAAA,MAAAA,EAAWnX,EAAK,EACf,UAAW1E,EAAK,wDAAyDsG,GAAc,WAAW,EAAG,MAAO,CAC7G,gBAAiB5B,CAAA,EAEd,SAAc4B,GAAAvG,MAAC,QAAK,UAAU,uDAAwD,IALnE2E,CAMtB,EACH,EACD,OAAQ3E,MAAA,OAAI,UAAU,uBAAwB,SAAc85B,CAAA,EAC9D,CCbA,MAAMC,GAAiBH,GAAa,IAAI,CAAC,CACvC,MAAAj1B,CACF,IAAMA,CAAK,EAAE,MAAM,EAAG,EAAE,EACjB,SAASq1B,GAAY,CAC1B,aAAAje,EACA,SAAAD,EACA,aAAAme,EACA,UAAAC,CACF,EAAG,CACD,KAAM,CAACv1B,EAAOw1B,CAAQ,EAAI95B,WAAS0b,CAAY,EACzCqe,EAAUH,GAAgBF,GAC1B5rB,EAAQoN,GAAwB,CACpC,KAAM,KACP,EACD,cAAQ,MACJ,WAAAvb,EAAA,IAACq6B,GAAe,WAAU,UAAU,MAAA11B,EAAc,SAAsB21B,GAAA,CACxExe,GAAA,MAAAA,EAAWwe,GACXH,EAASG,CAAQ,GAChB,EACDz0B,OAAC,MAAI,WAAU,cACZ,UAAAu0B,GAAYp6B,EAAA,IAAA65B,GAAA,CAAY,OAAQO,EAAS,SAAsBE,GAAA,CAChE,GAAIA,EAAU,CACZ,MAAMC,EAAMhC,GAAW+B,CAAQ,EAAE,SAAS,KAAK,EAC/Cxe,GAAA,MAAAA,EAAWye,GACXJ,EAASI,CAAG,CACd,GACC,MAAO51B,EAAO,EACdu1B,GAAcl6B,MAAA,OAAI,UAAU,QACzB,SAACA,EAAA,IAAAw6B,GAAA,CAAc,aAAa,MAAM,KAAK,UAAU,YAAY,MAAM,WAAW,QAAQ,SAAQ,GAAC,aAAW,YAAY,SAAQ,GAAC,UAAWrsB,EAAM,MAAO,MAAAxJ,EAAc,SAAsB21B,GAAA,CAC7Lxe,GAAA,MAAAA,EAAWwe,GACXH,EAASG,CAAQ,GAChB,CACD,IACJ,CACF,GACJ,CCnCO,SAASG,GAAkB,CAChC,WAAAC,EAAa,GACb,UAAAR,EAAY,EACd,EAAG,CACK,MACJ,MAAAjb,EACA,MAAAhX,EACA,SAAA2E,EACA,aAAAJ,GACE0S,GAAiB,EAId,OAAArZ,EAAA,KAACkB,GAAO,MAAK,MAChB,UAAC/G,MAAAg6B,GAAA,CAAY,UAAAE,EAAsB,aAAc1tB,GAA8B,GAAI,SAAUiY,GAAY7X,EAAS6X,CAAQ,CAAG,GAC5H,CAACiW,GAAe70B,OAAAsZ,GAAA,CAAa,WAAU,GACpC,UAAAnf,EAAA,IAAC8F,EAAO,SAAQ,OAAO,KAAK,KAAK,QAAS,IAAMmZ,EAAA,EAC9C,SAAAjf,MAACiG,EAAM,SAAQ,QAAS,GAC1B,QACCH,EAAO,SAAQ,OAAO,MAAM,UAAU,KAAK,KAAK,QAAS,IAAMmZ,EAAMhX,CAAK,EACzE,eAAChC,EAAM,SAAQ,OAAQ,GACzB,GACF,CACJ,GACJ,CCrBA,MAAM00B,GAAiB,CAAC,CACtB,MAAOn5B,EAAQ,QAAQ,EACvB,MAAO,UACP,QAAS,aACT,eAAgB,cAClB,EAAG,CACD,MAAOA,EAAQ,YAAY,EAC3B,MAAO,KACP,QAAS,gBACT,eAAgB,iBAClB,EAAG,CACD,MAAOA,EAAQ,gBAAgB,EAC/B,MAAO,SACP,QAAS,SACT,eAAgB,qBAClB,EAAG,CACD,MAAOA,EAAQ,aAAa,EAC5B,MAAO,cACP,QAAS,iBACT,eAAgB,kBAClB,CAAC,EACM,SAASo5B,IAAoB,OAC5B,MACJ,WAAAlC,GACE9G,GAAU,EACR,CACJ,MAAA4E,EACA,SAAA5pB,GACEklB,EAAe,EACbxoB,EAAM,qBAAqBovB,CAAU,4BACrCmC,EAAgBrE,EAAMltB,CAAG,EACzBwxB,GAAe14B,EAAAu4B,GAAe,KAAK,CAAC,CACxC,MAAA1yB,CAAA,IACIA,IAAU4yB,CAAa,IAFR,YAAAz4B,EAEW,eACzB,OAAAyD,OAACwzB,IAAY,UAAU,QAAQ,cAAc,SAAS,cAAAwB,EAA8B,kBAA4B5yB,GAAA,CACrH2E,EAAStD,EAAKrB,EAAO,CACnB,YAAa,GACd,CAEC,YAAAjI,MAACitB,GAAiB,UAAWjtB,EAAA,IAACq4B,GAAU,SAAQ,YAAY,UAAWp4B,EAAK,UAAW66B,CAAY,EAAG,EACpG,SAAA96B,EAAA,IAACiG,EAAM,SAAQ,QAAS,GAC1B,EACCjG,MAAA05B,GAAA,CACE,SAAeiB,GAAA,IAAI,CAAC,CACrB,MAAAjsB,EACA,MAAAzG,EACA,QAAA4G,CAAA,UACKksB,GAAiB,OAAA9yB,EAAc,UAAYjI,EAAA,WAAI,UAAWC,EAAK,2BAA4B4O,CAAO,CAAG,GACtG,eAAC5I,EAAO,IAAGyI,EAAO,CADP,EAAAzG,CAEb,CAAO,EACX,CACF,GACJ,CC5DO,SAAS+yB,GAAuB,CACrC,SAAA53B,EACA,UAAA63B,EAAY,OACd,EAAG,CACD,aAAQ,MAAI,WAAWh7B,EAAK,6BAA8Bg7B,CAAS,EAC9D,SAAA73B,CACH,EACJ,CCQA,MAAM83B,GAAY,CAAC,CACjB,MAAO15B,EAAQ,YAAY,EAC3B,IAAK,iBACP,EAAG,CACD,MAAOA,EAAQ,gBAAgB,EAC/B,IAAK,qBACP,EAAG,CACD,MAAOA,EAAQ,YAAY,EAC3B,IAAK,sBACP,EAAG,CACD,MAAOA,EAAQ,cAAc,EAC7B,IAAK,oBACP,EAAG,CACD,MAAOA,EAAQ,QAAQ,EACvB,IAAK,cACP,EAAG,CACD,MAAOA,EAAQ,aAAa,EAC5B,IAAK,mBACP,EAAG,CACD,MAAOA,EAAQ,gBAAgB,EAC/B,IAAK,iBACP,EAAG,CACD,MAAOA,EAAQ,MAAM,EACrB,IAAK,sBACP,CAAC,EACM,SAAS25B,IAAc,CAC5B,MAAM9N,EAAW1kB,KACX,CACJ,WAAA+vB,GACE9G,GAAU,EACR,CACJ,UAAAC,EACA,MAAA2E,GACE1E,EAAe,EACb6G,EAAQ9G,EAAU,qBAAqB,CAAC6G,CAAU,EAAE,EACpD0C,EAAe5E,EAAM,qBAAqB,CAACkC,CAAU,cAAc,EA0BzE,OAvBAp4B,YAAU,IAAM,CACTq4B,GACHtL,EAAS,KAAM,CACb,SAAU,OACV,QAAS,GACV,CACH,EACC,CAACA,EAAUsL,CAAK,CAAC,EAGpBr4B,YAAU,IAAM,CACd,IAAI+6B,EAAY,GAChB,OAAI1C,GAAA,MAAAA,EAAO,IACTtN,GAAmB,KAAK,IAAM,CACxBgQ,GACJxP,EAAkB,UAAQ,eAAe8M,EAAM,EAAE,EAClD,EAEI,IAAM,CACC0C,EAAA,GACIxP,IAAE,QAAQ,eAAe,IAAI,EAC/C,EACC,CAAC8M,GAAA,YAAAA,EAAO,EAAE,CAAC,EACTA,SACGzyB,WACJ,WAACL,OAAA,OAAI,UAAU,iDACb,UAAA7F,EAAA,IAACy4B,GAA2B,UAC3BQ,GAAuB,KAC1B,SACC,MACC,WAAAj5B,MAACitB,GAAiB,YAAard,GAAM,GAAG,OAAO,YAAawrB,GAA+Bp7B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,SAAS,EAChH,eAACA,EAAM,SAAQ,MAAO,GACxB,EACAjG,MAACitB,EAAiB,aAAard,GAAM,GAAG,SACtC,SAAC5P,MAAAiG,EAAA,CAAM,QAAQ,WAAW,CAC5B,SACC+0B,GACC,UAAAh7B,EAAA,IAACiG,EAAM,SAAQ,QAAS,GAC1B,QACC20B,GAAkB,IAClBM,GAAU,IAAIv2B,GAAU3E,EAAA,IAAAs7B,GAAA,CAAmC,UAAW32B,EAAM,IAAK,MAAO3E,MAACiG,EAAO,IAAGtB,EAAM,KAAO,GAAI,kBAAmBg0B,EAAM,OAAOh0B,EAAM,GAAG,EAAG,MAAAg0B,CAAA,EAAhHh0B,EAAM,GAAwH,CAAE,GACnL,CACF,IAnBiB,IAoBrB,CACA,SAAS22B,GAAmB,CAC1B,MAAA5sB,EACA,MAAAiqB,EACA,UAAAa,EACA,kBAAA+B,CACF,EAAG,CACK,MACJ,SAAA3uB,GACEklB,EAAe,EACb,CACJ,WAAA4G,GACE9G,GAAU,EACR,CAAC4J,EAAoBC,CAAqB,EAAIp7B,WAASk7B,CAAiB,EAIxEG,EAAiCjC,GAAA,CACrCgC,EAAsBhC,CAAU,EAChC5N,EAAkB,UAAQ,cAAc2N,EAAWC,CAAU,GAE/Dn5B,mBAAU,IAAM,CAEdm7B,EAAsBF,CAAiB,GACtC,CAACA,CAAiB,CAAC,EACd11B,OAAA+sB,GAAA,CAAc,MAAO+I,GAAgBH,CAAkB,EAAG,KAAK,UAAU,UAAU,QAAQ,OAAQ,GAAI,cAA2BlB,GAAA,CACvHoB,EAAApD,GAAkBgC,CAAQ,CAAC,GAC3C,QAAS,CAACA,EAAU,CACrB,aAAAsB,EACA,aAAApvB,CAAA,IACI,CACA8tB,GAAYsB,EACLhvB,EAAA,qBAAqB,CAAC8rB,CAAU,WAAWc,CAAS,GAAIlB,GAAkBgC,CAAQ,EAAG,CAC5F,YAAa,GACd,EAGDoB,EAAiBlvB,CAAY,CAG7B,YAACxM,MAAAitB,EAAA,CAAiB,UAAU,aAAa,UAAWjtB,MAACq4B,IAAU,QAAQ,YAAY,UAAU,UAAU,MAAO,CAC9G,KAAM,OAAOmD,CAAkB,KAC9B,EACE,SACH9sB,EAAA,QACC+rB,GAAkB,GACrB,GACJ,CC1IO,SAASoB,IAAc,CAC5B,MAAMpG,EAAWnK,GAAwBjgB,GAAA,cAAAjJ,EAAAiJ,EAAE,SAAF,YAAAjJ,EAAU,SAAQ,EACrD05B,EAAgBh1B,UAAQ,IACvB2uB,EACE,OAAO,QAAQA,GAAY,CAAE,GAAE,IAAI,CAAC,CAACnsB,EAAKrB,CAAK,KAC7C,CACL,GAAGA,EACH,IAAAqB,CAAA,EAEH,EAAE,KAAK,CAAC,EAAGyyB,MAAO,iBAAG,WAAY,KAAMA,GAAA,YAAAA,EAAG,WAAY,EAAE,EANnC,GAOrB,CAACtG,CAAQ,CAAC,EACN,OAAAz1B,EAAA,IAAC+0B,IACH,SAAc+G,EAAA,OAAgB97B,EAAA,IAAAitB,EAAA,CAAmC,GAAI+O,EAAQ,IAAK,YAAarF,GAC5F,SAAA32B,MAACiG,GAAO,GAAG+1B,EAAQ,KAAO,EADuB,EAAAA,EAAQ,GAE3D,CAAmB,CACvB,EACJ,CCtBA,MAAeC,GAAA,kCCQR,SAASC,GAAoB,CAClC,MAAO,CACL,QAAAC,EACA,WAAAC,CACF,CACF,EAAG,CACK,MACJ,MAAA9O,GACEC,GAAS,EACN,OAAA1nB,EAAA,KAAC,MAAI,WAAU,qCAClB,UAAA7F,MAACq8B,IAAU,UAAU,2BAA2B,MAAOF,EAAQ,MAAO,SAAen4B,GAAA,CAC1Eo4B,EAAA,CACT,GAAGD,EACH,MAAOn4B,EAAE,OAAO,MACjB,CACH,EAAG,eAAgBhE,MAACs8B,GAAW,IAAI,YAAahP,EAAM9rB,EAAQ,cAAc,CAAC,EAAG,EAC9EqE,OAAC02B,GAAO,WAAU,YAAY,cAAc,SAAS,cAAeJ,EAAQ,SAAU,kBAA4Bl0B,GAAA,CACvGm0B,EAAA,CACT,GAAGD,EACH,SAAUl0B,CAAA,CACX,CAEC,YAAAjI,MAAC+6B,IAAK,MAAM,GACV,eAAC90B,EAAM,SAAQ,iBAAiB,CAClC,GACAjG,MAAC+6B,IAAK,MAAM,QACV,eAAC90B,EAAM,SAAQ,QAAQ,CACzB,GACAjG,MAAC+6B,IAAK,MAAM,aACV,eAAC90B,EAAM,SAAQ,aAAa,CAC9B,GACAjG,MAAC+6B,IAAK,MAAM,UACV,eAAC90B,EAAM,SAAQ,UAAU,CAC3B,GACAjG,MAAC+6B,IAAK,MAAM,cACV,eAAC90B,EAAM,SAAQ,cAAc,CAC/B,GACAjG,MAAC+6B,IAAK,MAAM,YACV,eAAC90B,EAAM,SAAQ,YAAY,CAC7B,IACF,CACF,GACJ,CCjDO,MAAMu2B,GAAmB,CAAC,CAC/B,MAAOh7B,EAAQ,QAAQ,EACvB,OAAQ,kNACR,SAAU,YACZ,EAAG,CACD,OAAQ,+BACR,SAAU,YACZ,EAAG,CACD,OAAQ,+CACR,SAAU,OACZ,EAAG,CACD,OAAQ,uCACR,SAAU,aACZ,EAAG,CACD,OAAQ,6BACR,SAAU,YACZ,EAAG,CACD,OAAQ,oCACR,SAAU,WACZ,EAAG,CACD,OAAQ,qDACR,SAAU,YACZ,EAAG,CACD,OAAQ,kCACR,SAAU,OACZ,EAAG,CACD,OAAQ,sCACR,SAAU,WACZ,EAAG,CACD,OAAQ,uCACR,SAAU,YACZ,EAAG,CACD,OAAQ,8BACR,SAAU,YACZ,EAAG,CACD,OAAQ,iDACR,SAAU,YACZ,CAAC,ECtCe,SAAAi7B,GAAW9M,EAAO3c,EAAW,CAC3C,OAAO2c,EAAM,OAAO,CAAC+M,EAAazvB,EAAMjH,IAAU,CAChD,MAAM22B,EAAa,KAAK,MAAM32B,EAAQgN,CAAS,EAC3C,OAAC0pB,EAAYC,CAAU,IACbD,EAAAC,CAAU,EAAI,IAEhBD,EAAAC,CAAU,EAAE,KAAK1vB,CAAI,EAC1ByvB,CACT,EAAG,CAAE,EACP,CCPO,SAASE,GAAU3zB,EAAS,CACjC,MAAM4zB,EAAWC,GAAY,CAC3B,MAAO,SACP,GAAG7zB,CAAA,CACJ,EACD,OAAOnC,UAAQ,KACN,CACL,WAAWinB,EAAQgP,EAAW,CACxB,OAAAA,EAAU,SAAW,EAChB,IAEAhP,IAAO,UAAU,KAAK,EACnBgP,IAAU,UAAU,KAAK,EAC9BF,EAAS,QAAQ9O,EAAO,MAAM,EAAGgP,EAAU,MAAM,EAAGA,CAAS,IAAM,EAC5E,EACA,SAAShP,EAAQgP,EAAW,CACtB,OAAAA,EAAU,SAAW,EAChB,IAEAhP,IAAO,UAAU,KAAK,EACnBgP,IAAU,UAAU,KAAK,EAC9BF,EAAS,QAAQ9O,EAAO,MAAM,CAACgP,EAAU,MAAM,EAAGA,CAAS,IAAM,EAC1E,EACA,SAAShP,EAAQgP,EAAW,CACtB,GAAAA,EAAU,SAAW,EAChB,SAEAhP,IAAO,UAAU,KAAK,EACnBgP,IAAU,UAAU,KAAK,EACrC,IAAIC,EAAO,EACX,MAAMC,EAAWF,EAAU,OAC3B,KAAOC,EAAOC,GAAYlP,EAAO,OAAQiP,IAAQ,CAC/C,MAAME,EAAQnP,EAAO,MAAMiP,EAAMA,EAAOC,CAAQ,EAChD,GAAIJ,EAAS,QAAQE,EAAWG,CAAK,IAAM,EAClC,QAEX,CACO,QACT,IAED,CAACL,CAAQ,CAAC,CACf,CCrCO,SAASM,GAAqB,CACnC,MAAAl1B,EACA,SAAA6T,CACF,EAAG,CACK,MACJ,KAAA/T,EACA,UAAA8V,CAAA,EACEM,GAAc,CAAC,aAAa,CAAC,EAC3B,CAACif,EAAaC,CAAc,EAAIh9B,WAAS,CAAC,EAC1C,CAAC87B,EAASmB,CAAc,EAAIj9B,WAAS,CACzC,MAAO,GACP,UAAU4H,GAAA,YAAAA,EAAO,WAAY,GAC9B,EACK,CACJ,SAAAs1B,GACEX,GAAU,CACZ,YAAa,OACd,EACKY,EAAW12B,UAAQ,IAChB01B,GAAiB,QAAOz0B,GAAA,YAAAA,EAAM,cAAe,CAAE,GACrD,CAACA,GAAA,YAAAA,EAAM,WAAW,CAAC,EAChB01B,EAAgB32B,UAAQ,IACrB02B,EAAS,OAAevzB,GAAA,OAC7B,OAAOszB,EAAStzB,EAAK,OAAQkyB,EAAQ,KAAK,IAAM,CAACA,EAAQ,YAAY/5B,EAAA6H,EAAK,WAAL,YAAA7H,EAAe,iBAAkB+5B,EAAQ,SAAS,YAAY,GACpI,EACA,CAACqB,EAAUrB,EAASoB,CAAQ,CAAC,EAC1B1F,EAAQ/wB,UAAQ,IACb21B,GAAWgB,EAAe,EAAE,EAClC,CAACA,CAAa,CAAC,EACZ7zB,EAAQiuB,EAAMuF,CAAW,EAG/B98B,YAAU,IAAM,CACV,GAAAyH,IAAQE,GAAA,MAAAA,EAAO,QAAQ,CACzB,MAAMjC,EAAQy3B,EAAc,aAAerzB,EAAE,SAAWnC,EAAM,MAAM,EAChEjC,GAAS,GACXq3B,EAAe,KAAK,MAAMr3B,EAAQ,EAAE,CAAC,CAEzC,GACC,CAAC+B,EAAM01B,EAAex1B,GAAA,YAAAA,EAAO,MAAM,CAAC,EACvC3H,YAAU,IAAM,CACd,MAAMoJ,EAAK,gBACPE,GAAA,MAAAA,EAAO,QACTD,GAAUC,EAAO,CACf,GAAAF,CAAA,CACD,CACH,EACC,CAACE,EAAOwzB,CAAW,CAAC,EACjB,MAAAhB,EAAapzB,cAAYmzB,GAAW,CACxCmB,EAAenB,CAAO,EAEtBkB,EAAe,CAAC,CAClB,EAAG,CAAE,GACE,OACL,MAAOzzB,GAAS,CAAC,EACjB,YAAAwzB,EACA,cAAeK,GAAiB,CAAC,EACjC,eAAAJ,EACA,UAAAxf,EACA,QAAAse,EACA,WAAAC,EACA,MAAAn0B,EACA,SAAA6T,EACA,MAAA+b,CAAA,CAEJ,CClEO,SAAS6F,GAAuB,CACrC,MAAO,CACL,YAAAN,EAAc,EACd,eAAAC,EACA,cAAAI,EACA,MAAA5F,CACF,CACF,EAAG,CACK,MAAA8F,GAAQF,GAAA,YAAAA,EAAe,SAAU,EAChC,OAAA53B,EAAA,KAAC,MAAI,WAAU,oEACjB,UAAA83B,EAAQ,GAAM39B,MAAA,OACX,eAACiG,EAAM,SAAQ,wBAAwB,OAAQ,CACjD,KAAMm3B,EAAc,GAAK,EACzB,GAAI,KAAK,KAAKA,EAAc,GAAK,GAAIO,CAAK,EAC1C,MAAAA,GACC,CACD,GACF93B,OAAC,MAAI,WAAU,aACb,UAAA7F,EAAA,IAAC8d,GAAW,UAAUsf,EAAc,EAAG,QAAS,IAAM,CACtDC,EAAe,KAAK,IAAI,EAAGD,EAAc,CAAC,CAAC,CAC7C,EACI,SAACp9B,EAAA,IAAA01B,GAAA,EAAsB,CACzB,GACA11B,MAAC8d,IAAW,SAAUsf,GAAevF,EAAM,OAAS,EAAG,QAAS,IAAM,CACtEwF,EAAeD,EAAc,CAAC,CAChC,EACI,SAACp9B,EAAA,IAAAmtB,GAAA,EAAuB,CAC1B,IACF,CACF,GACJ,CCtBO,SAASyQ,GAAa76B,EAAO,CAC5B,MAAApB,EAAQw7B,GAAqBp6B,CAAK,EACxC,OAAQ8C,OAAA,OAAI,UAAW9C,EAAM,UACzB,UAAA/C,MAACk8B,IAAoB,MAAAv6B,EAAc,EACnC3B,MAAC2pB,IAAgB,QAAS,GAAO,KAAK,OACpC,SAAA3pB,EAAA,IAAC69B,GAAS,OAAAl8B,CAAA,CAAc,CAC1B,GACA3B,MAAC09B,IAAuB,MAAA/7B,EAAc,CACxC,GACJ,CACA,SAASk8B,GAAS,CAChB,MAAAl8B,CACF,EAAG,CACK,MACJ,UAAAkc,EACA,MAAAjU,CACE,EAAAjI,EACEm8B,EAAgB,yEACtB,OAAIjgB,EACK7d,EAAA,IAAC+9B,GAAiB,WAAWD,CAAe,GAEhDl0B,GAAA,MAAAA,EAAO,aAGJqd,GAAE,IAAF,CAAuB,GAAG+W,GAAkB,UAAWF,EAC1D,SAAAl0B,GAAA,YAAAA,EAAO,IAAYK,GAAAjK,MAACi+B,IAA6B,KAAAh0B,EAAY,MAAAtI,CAAA,EAAzBsI,EAAK,MAAkC,IAD9D,WAEhB,EAJOjK,EAAA,IAAC6N,IAAmB,UAAU,QAAQ,KAAK,KAAK,MAAQ7N,MAAAP,GAAA,CAAS,IAAKw8B,EAAA,CAAW,EAAI,MAAOj8B,MAACiG,EAAM,SAAQ,mBAAoB,GAAI,YAAcjG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,gDAAiD,EAAI,EAK/N,CACA,SAASg4B,GAAW,CAClB,KAAAh0B,EACA,MAAO,CACL,MAAAhC,EACA,SAAA6T,CACF,CACF,EAAG,CACK,MAAAoiB,GAAWj2B,GAAA,YAAAA,EAAO,UAAWgC,EAAK,OAClCk0B,EAAcl0B,EAAK,OAAO,MAAM,GAAG,EAAE,CAAC,EAAE,QAAQ,KAAM,EAAE,EAC9D,OAAQpE,OAAApB,GAAA,CAA6B,QAAQ,QAAQ,QAAS,IAAM,CAClEqX,EAAS7R,CAAI,CAEX,YAACjK,MAAA,QAAK,UAAWC,EAAK,8HAA+Hi+B,GAAY,mCAAmC,EAClM,SAACl+B,MAAA,QAAK,MAAO,CACb,WAAYiK,EAAK,QAChB,aAAE,GACL,QACC,OAAK,WAAWhK,EAAK,yEAA0Ei+B,GAAY,cAAc,EACvH,SAAKj0B,EAAA,YAAShE,EAAO,IAAGgE,EAAK,KAAO,GAAKk0B,EAC5C,IAVoBl0B,EAAK,MAW3B,CACJ,CACA,SAAS8zB,GAAiB,CACxB,UAAAn+B,CACF,EAAG,CACD,MAAMuiB,EAAQ,MAAM,KAAK,MAAM,EAAE,EAAE,MAAM,EAClC,OAAAniB,MAACinB,GAAE,IAAF,CAAgC,GAAG+W,GAAkB,UAAAp+B,EACxD,SAAMuiB,EAAA,IAAanc,GAAAH,EAAA,KAAC,MACjB,WAAC7F,MAAA,OAAI,UAAU,gBACb,SAAAA,EAAA,IAACo+B,IAAS,QAAQ,QAAQ,QAAQ,OAAO,CAC3C,GACAp+B,MAACo+B,GAAS,WAAU,cAAe,EAJT,GAAAp4B,CAK5B,CAAM,GANM,oBAOhB,CACJ,CCvEO,SAASq4B,IAAiB,CACzB,MACJ,SAAAzxB,EACA,MAAA4pB,GACE1E,EAAe,EACb,CACJ,WAAA4G,GACE9G,GAAU,EACRtoB,EAAM,qBAAqBovB,CAAU,QAC3C,aAAQkF,GAAa,OAAOpH,EAAMltB,CAAG,EAAG,SAAkBW,GAAA,CACxD2C,EAAStD,EAAKW,EAAM,CAClB,YAAa,GACd,EACe4hB,IAAE,QAAQ,aAAa5hB,CAAI,CAC1C,GACL,CCZA,MAAMq0B,GAAY,CAChB,eAAgB,CACd,MAAO98B,EAAQ,QAAQ,EACvB,MAAO,KACT,EACA,QAAS,CACP,MAAOA,EAAQ,OAAO,EACtB,MAAO,SACT,EACA,aAAc,CACZ,MAAOA,EAAQ,QAAQ,EACvB,MAAO,UACT,EACA,aAAc,CACZ,MAAOA,EAAQ,OAAO,EACtB,MAAO,QACT,EACA,aAAc,CACZ,MAAOA,EAAQ,QAAQ,EACvB,MAAO,SACT,EACA,eAAgB,CACd,MAAOA,EAAQ,MAAM,EACrB,MAAO,QACT,CACF,EACO,SAAS+8B,IAAmB,CAC1B,OAAA14B,EAAA,KAAC,MAAI,WAAU,aAClB,UAAC7F,MAAAw+B,GAAA,CAAe,MAAQx+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,iBAAkB,GAAI,KAAK,eAAgB,GACjFjG,MAACw+B,IAAe,MAAOx+B,EAAA,IAACiG,GAAM,QAAQ,gBAAiB,GAAI,KAAK,cAAe,GAC/EjG,MAACw+B,GAAe,OAAQx+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,iBAAiB,EAAI,KAAK,eAAe,SAAQ,EAAC,EAC1F,GACJ,CACA,SAASu4B,GAAe,CACtB,MAAA9vB,EACA,KAAAgC,EACA,SAAA+tB,CACF,EAAG,CACK,MACJ,WAAA/F,GACE9G,GAAU,EACR,CACJ,MAAA4E,EACA,SAAA5pB,GACEklB,EAAe,EACb4M,EAAU,qBAAqBhG,CAAU,gBAAgBhoB,CAAI,GAC7DiuB,EAAenI,EAAMkI,CAAO,EAClC,cAAQ,MACJ,WAAC1+B,EAAA,WAAI,UAAU,8BAA+B,SAAM0O,EAAA,EACpD1O,MAAC,MAAI,WAAU,kCACZ,gBAAO,QAAQs+B,EAAS,EAAE,OAAO,CAAC,CAACh1B,CAAG,IAAM,CAACm1B,GAAY,CAACn1B,EAAI,SAAS,MAAM,CAAC,EAAE,IAAI,CAAC,CAACA,EAAK,CAC5F,MAAAoF,EACA,MAAAzG,CAAA,CACD,IAAMjI,MAAC4+B,GAAwB,QAAQt1B,EAAK,SAAUrB,IAAU02B,EAAc,QAAS,IAAM,CAC5F/xB,EAAS8xB,EAASz2B,EAAO,CACvB,YAAa,GACd,EACD4jB,IAAkB,QAAQ,cAAc,QAAQnb,CAAI,GAAIzI,CAAK,GAEvD,eAAChC,EAAO,IAAGyI,EAAO,CANC,EAAApF,CAOrB,CAAgB,EACtB,CACF,GACJ,CACA,SAASs1B,GAAc,CACrB,OAAAt7B,EACA,SAAAF,EACA,SAAA86B,EACA,QAAAz6B,CACF,EAAG,CACD,OAAQzD,MAAAyE,GAAA,CAAW,QAAQ,QAAQ,UAAWxE,EAAK,+BAAgCqD,EAAQ46B,GAAY,gBAAgB,EAAG,QAAAz6B,EACrH,SAAAL,CACH,EACJ,CC1EO,SAASy7B,IAAkB,CAChC,MAAMrT,EAASS,KACT1e,EAAO+gB,GAAQ,CACnB,cAAe,CACb,WAAY,CACV,OAAQ9C,EAAO,WAAW,OAAO,OAAYtpB,KAAE,OAAS,MAAM,CAChE,CACF,EACD,EACD,OAAQlC,MAAAy0B,GAAA,CAAqB,KAAAlnB,EAAY,WAAavN,MAAA8+B,GAAA,CAAsB,KAAAvxB,CAAY,GAAI,mBAAmB,SAC3G,SAACvN,EAAA,IAAAgtB,GAAA,EAAO,CACV,EACJ,CACO,SAAS8R,GAAsB,CACpC,KAAAvxB,EACA,SAAAnK,CACF,EAAG,CACK,MACJ,SAAA+oB,GACEpjB,GAAY,EACVg2B,EAAc5S,EAAS,MAAM,GAAG,EAAE,IAAI,EACtC,CACJ,WAAAuM,GACE9G,GAAU,EACRoN,EAAYrM,GAAS,CACzB,QAASplB,EAAK,QACd,KAAM,oBACP,EACK0xB,EAAcvG,EAAasG,EAAUtG,CAAU,EAAI,KACzD,cAAQrD,GACH,WAAAjyB,EACDpD,MAACiG,EAAM,SAAQ,QAAS,GACvBg5B,GAAej/B,EAAA,IAAC,OAAM,UAAAi/B,EAAY,KAAK,EACvCF,IAAgB,QAAW/+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,OAAO,EAChD84B,IAAgB,UAAa/+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,WAAW,CACzD,GACJ,CCpCO,SAASi5B,IAAiB,CAC/B,MAAM1T,EAASS,KACT1e,EAAO+gB,GAAQ,CACnB,cAAe,CACb,SAAU,CACR,MAAO9C,EAAO,SAAS,KACzB,CACF,EACD,EACD,OAAQxrB,MAAAy0B,GAAA,CAAqB,KAAAlnB,EAAY,WAAavN,MAAAm/B,GAAA,CAAqB,KAAA5xB,CAAY,GAAI,mBAAmB,QAC1G,SAACvN,EAAA,IAAAgtB,GAAA,EAAO,CACV,EACJ,CACA,SAASmS,GAAqB,CAC5B,KAAA5xB,CACF,EAAG,CACK,MACJ,UAAAokB,EACA,cAAA2B,GACE1B,GAAU,EACRwN,EAAWzM,GAAS,CACxB,QAASplB,EAAK,QACd,KAAM,iBACP,EACK8xB,EAAa1N,EAAYyN,EAASzN,CAAS,EAAI,KAC/C2N,EAAahM,GAAiB+L,EAAaA,EAAW,MAAM/L,CAAa,EAAI,KACnF,cAAQ+B,GACJ,WAACr1B,MAAAiG,EAAA,CAAM,QAAQ,OAAQ,GACtBo5B,GAAcr/B,EAAA,IAAC,OAAM,UAAAq/B,EAAW,KAAK,EACrCC,GAAct/B,EAAA,IAAC,OAAM,UAAAs/B,EAAW,MAAM,CACzC,GACJ,CC/BO,SAASC,IAA4B,CAC1C,MAAM/T,EAASS,KACT1e,EAAO+gB,GAAQ,CACnB,cAAe,CACb,SAAU,CACR,SAAU,CACR,WAAY,CACV,YAAa9C,EAAO,SAAS,SAAS,WAAW,aAAe,GAChE,eAAgBA,EAAO,SAAS,SAAS,WAAW,gBAAkB,GACtE,YAAaA,EAAO,SAAS,SAAS,WAAW,aAAe,GAChE,mBAAoBA,EAAO,SAAS,SAAS,WAAW,oBAAsB,GAC9E,oBAAqBA,EAAO,SAAS,SAAS,WAAW,qBAAuB,GAChF,oBAAqBA,EAAO,SAAS,SAAS,WAAW,qBAAuB,GAChF,YAAaA,EAAO,SAAS,SAAS,WAAW,aAAe,GAChE,eAAgBA,EAAO,SAAS,SAAS,WAAW,gBAAkB,GACtE,YAAaA,EAAO,SAAS,SAAS,WAAW,aAAe,GAChE,gBAAiBA,EAAO,SAAS,SAAS,WAAW,iBAAmB,CAAC,EACzE,kBAAmBA,EAAO,SAAS,SAAS,WAAW,mBAAqB,CAAC,EAC7E,QAASA,EAAO,SAAS,SAAS,WAAW,SAAW,CAAC,CAC3D,CACF,CACF,CACF,EACD,EACM,OAAAxrB,MAACy0B,GAAqB,MAAAlnB,EAAY,WAAYvN,EAAA,IAACw/B,GAAW,IAAI,mBAAmB,eACpF,SAACx/B,MAAAgtB,GAAA,EAAO,CACV,EACJ,CACA,SAASwS,IAAa,CACd,MACJ,SAAArT,GACEpjB,GAAY,EACVg2B,EAAc5S,EAAS,MAAM,GAAG,EAAE,IAAI,EAC5C,cAAQkJ,GACJ,WAACr1B,MAAAiG,EAAA,CAAM,QAAQ,cAAe,GAC7B84B,IAAgB,kBAAqB/+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,iBAAiB,EACpE84B,IAAgB,oBAAuB/+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,mBAAmB,EACxE84B,IAAgB,sBAAyB/+B,EAAA,IAAAiG,EAAA,CAAM,QAAQ,qBAAqB,CAC/E,GACJ,CC1CO,SAASw5B,GAAW18B,EAAO,CAC1B,MACJ,KAAA2B,EAAO,KACP,OAAAg7B,EACA,MAAAhxB,EACA,eAAA6L,EAAiB,CAAC,CAAC7L,EACnB,UAAA9O,EACA,MAAAimB,EAAQ,SACR,OAAA8Z,EACA,SAAAv8B,EACA,WAAAwX,EAAa,UACb,UAAAglB,EAAY,SACV,EAAA78B,EACE,CACJ,SAAA0M,EACA,SAAAowB,EACA,gBAAAC,EACA,mBAAAC,EACA,QAAA/iB,EACA,QAAAgjB,EACA,SAAAC,EACA,WAAAC,EACA,gBAAAC,EACA,SAAA9lB,EACA,SAAAC,EACA,KAAA8lB,EACA,OAAA5U,EACA,cAAA6U,CACE,EAAAV,EACJ,IAAIW,EAAc,GACdC,EAAiB,KAAK,IAAI,CAAC,GAAGJ,EAAgB,OAAO9lB,CAAQ,CAAC,EAAE,OAAQ,CAAC,GAAG8lB,EAAgB,OAAO7lB,CAAQ,CAAC,EAAE,OAAQ,CAAC,GAAG6lB,EAAgB,OAAOC,CAAI,CAAC,EAAE,MAAM,EAC9JC,EACYC,EAAAD,EAAc7U,EAAO,CAAC,CAAC,EAC5BA,EAAO,SAAW,EAC3B8U,EAAcP,EAAmB,CAAC,EACzBvU,EAAO,SAAW,IAI3B8U,EAAc,GAAGP,EAAmB,CAAC,CAAC,MAAMA,EAAmB,CAAC,CAAC,GAChDQ,EAAA,EAAI,EAAI,KAAK,IAAIA,EAAgB,CAAC,GAAGJ,EAAgB,OAAO9lB,CAAQ,CAAC,EAAE,OAAQ,CAAC,GAAG8lB,EAAgB,OAAO7lB,CAAQ,CAAC,EAAE,MAAM,GAE9I,MAAMnM,EAAQoN,GAAwB,CACpC,KAAA7W,EACA,SAAUw7B,EACV,aAAc,OACf,EACKM,EAAmBvgC,EAAK,aAAcL,EAAWimB,EAAO,CAC5D,oBAAqB6Z,CAAA,CACtB,EACD,cAAQ,MAAI,WAAWc,EAAkB,KAAK,QAAQ,GAAIR,EACpD,WAAStxB,GAAA6L,WAAoB,MAAI,WAAWta,EAAKkO,EAAM,MAAO,aAAa,EACxE,UAASO,GAAA1O,EAAA,IAAC,QAAM,SAAS,IAAM,QAGlCoC,EAAA,SAAS,eAAe69B,EAAS,CAAC,CAAC,IAAnC,MAAA79B,EAAsC,OAAM,EAC3C,GAAI4a,EAAS,QAASgjB,EAChB,SACHtxB,EAAA,EACD6L,GAAkBva,EAAA,IAAC,SAAO,SAASigC,EAAS,CAAC,EAAG,UAAU,qBAAqB,YAAU,MAAM,MAAQM,EAA6B,CACvI,MAAO,GAAGA,CAAc,KACxB,SAAU,GAAGA,CAAc,MAFgG,OAIpH,SACHD,EAAA,GACJ,EACDz6B,EAAA,YAAI,IAAKg6B,EAAU,UAAW5/B,EAAK,WAAYwgC,GAAiB19B,CAAK,CAAC,EAAI,GAAG0M,EAAU,KAAK,eAC3F,UAACzP,MAAA,OAAI,UAAWC,EAAK,kCAAmCygC,GAAc9lB,EAAYslB,CAAU,EAAGS,GAAej8B,CAAI,CAAC,CAAG,GACrH1E,MAAA,OAAI,UAAWC,EAAK,mCAAoC2gC,GAAahB,EAAWM,CAAU,EAAGS,GAAej8B,CAAI,CAAC,EAAG,MAAO,CAC5H,MAAO,GAAG,KAAK,IAAIo7B,EAAgB,CAAC,EAAI,IAAK,CAAC,CAAC,KAC9C,EACA18B,CAAA,EACH,CACF,GACJ,CACA,SAASq9B,GAAiB,CACxB,KAAA/7B,EACA,cAAAm8B,CACF,EAAG,CACG,GAAAA,EAAsB,OAAAA,EAC1B,OAAQn8B,EAAM,CACZ,IAAK,KACI,aACT,IAAK,KACI,aACT,QACS,YACX,CACF,CACA,SAASi8B,GAAej8B,EAAM,CAC5B,OAAQA,EAAM,CACZ,IAAK,KACI,YACT,IAAK,KACI,YACT,QACS,WACX,CACF,CACA,SAASg8B,GAAc/7B,EAAOu7B,EAAY,CAIxC,OAHIA,IACMv7B,EAAA,YAEFA,EAAO,CACb,IAAK,WACI,8BACT,IAAK,UACI,yBACT,IAAK,UACI,mBACT,QACS,OAAAA,CACX,CACF,CACA,SAASi8B,GAAaj8B,EAAOu7B,EAAY,CAIvC,OAHIA,IACMv7B,EAAA,YAEFA,EAAO,CACb,IAAK,WACI,2BACT,IAAK,UACI,mBACT,QACS,OAAAA,CACX,CACF,CC3HO,SAASm8B,GAAU,CACxB,SAAAzmB,EAAW,EACX,SAAAC,EAAW,IACX,WAAA4lB,EAAa,GACb,KAAAE,EAAO,EACP,cAAAzlB,EACA,YAAAomB,EACA,cAAAhY,EACA,MAAAra,EACA,cAAA2xB,EACA,qBAAAW,EACA,UAAAC,EACA,cAAAjY,EACA,GAAGjmB,CACL,EAAG,CACD,KAAM,CAACm+B,EAAeC,CAAgB,EAAI9gC,WAAS,EAAK,EAClD8/B,EAAkBhlB,GAAmBR,CAAa,EAClD,CACJ,kBAAA0L,EACA,qBAAAwC,GACEtC,GAAmB,EACjBsZ,EAAWl8B,SAAO,IAAI,EAGtB,CAAC6nB,EAAQ4V,CAAS,EAAI1c,GAAmB3hB,EAAM,MAAQA,EAAM,MAAQ,OAAWA,EAAM,cAAgB,CAACsX,CAAQ,EAAGtX,EAAM,QAAQ,EAGhIs+B,EAAY19B,SAAO,IAAI,EAC7B09B,EAAU,QAAU7V,EAGpB,KAAM,CAAC8V,EAAeC,CAAgB,EAAIlhC,EAAS,aAAI,MAAMmrB,EAAO,MAAM,EAAE,KAAK,EAAK,CAAC,EACjFgW,EAAmB79B,SAAO,IAAI,EACpC69B,EAAiB,QAAUF,EAG3B,SAASG,EAAkBx5B,EAAO,CACzB,OAAAk4B,EAAgB,OAAOl4B,CAAK,CACrC,CACA,MAAMy5B,EAA2B17B,GAAA,OACxB,QAAA5D,EAAAo/B,EAAiB,UAAjB,YAAAp/B,EAA2B4D,KAAU,IAExC+5B,EAAqB/5B,GAASy7B,EAAkBjW,EAAOxlB,CAAK,CAAC,EAC7D27B,EAA4B37B,OAAU,EAAIqU,EAAWmR,EAAOxlB,EAAQ,CAAC,EACrE47B,KAA4B57B,IAAUwlB,EAAO,OAAS,EAAIlR,EAAWkR,EAAOxlB,EAAQ,CAAC,EACrF67B,EAAgB,CAAC77B,EAAOiC,IAAU,CACtC,GAAIi4B,GAAc,CAAC4B,GAAgB97B,CAAK,GAAK,CAACq7B,EAAU,QACtD,OAEI,MAAAU,GAAUJ,EAAiB37B,CAAK,EAChCg8B,GAAUJ,EAAiB57B,CAAK,EAGtCiC,EAAQg6B,GAAgBh6B,EAAO85B,GAASC,GAAS5B,CAAI,EACrDiB,EAAU,QAAUa,GAAab,EAAU,QAASr7B,EAAOiC,CAAK,EAChEm5B,EAAUC,EAAU,OAAO,GAIvBc,EAAsB,CAACn8B,EAAOo8B,IAAa,QAC/C,GAAIlC,GAAc,CAAC4B,GAAgB97B,CAAK,EACtC,OAEI,MAAAq8B,IAAcjgC,GAAAo/B,EAAiB,UAAjB,YAAAp/B,GAA2B4D,GAC/Cw7B,EAAiB,QAAUU,GAAaV,EAAiB,SAAW,GAAIx7B,EAAOo8B,CAAQ,EACvFb,EAAiBC,EAAiB,OAAO,EAGrCT,GAAesB,IAAe,CAACb,EAAiB,QAAQ,KAAK,OAAO,GAC1DT,EAAAM,EAAU,SAAW,EAAE,CACrC,EAEI,CAACiB,EAAcC,CAAe,EAAIliC,WAAS,MAAS,EACpDmiC,EAA2Bv6B,GAAA,CAC/B,MAAMyoB,EAAI,KAAK,IAAI,GAAIzoB,EAAQoS,IAAaC,EAAWD,EAAS,EAC5D,aAAMqW,CAAC,EACF,EAEFA,CAAA,EAEHoP,EAA2B95B,GAAAw8B,EAAgBnB,EAAU,QAAQr7B,CAAK,CAAC,EACnEy8B,EAAkB,CAACz8B,EAAO08B,IAAY,CAC5Bb,EAAA77B,EAAO28B,GAAgBD,CAAO,CAAC,GAEzCE,KAA2B,KAAK,OAAO36B,EAAQoS,GAAY+lB,CAAI,EAAIA,EAAO/lB,EAC1EsoB,GAA6BD,GAAA,CAC3B,MAAAzzB,EAAMyzB,GAAWpoB,EAAWD,GAAYA,EAC9C,OAAOY,GAAM2nB,EAAgB3zB,CAAG,EAAGoL,EAAUC,CAAQ,GAIjDuoB,GAAoBl/B,SAAO,IAAI,MAAM6nB,EAAO,MAAM,EAAE,KAAK,EAAI,CAAC,EAC9DsW,GAAkB97B,GAAS68B,GAAkB,QAAQ78B,CAAK,EAC1D88B,GAAmB,CAAC98B,EAAO+8B,IAAa,CAC1BF,GAAA,QAAQ78B,CAAK,EAAI+8B,CAAA,EAO/BC,GAA6Br/B,SAAO,IAAI,EACxCs/B,GAAiBt/B,SAAO,MAAS,EACjCu/B,GAAyBl/B,GAAA,CACzB,KAAAA,EAAE,cAAgB,UAAYA,EAAE,SAAW,GAAKA,EAAE,QAAUA,EAAE,SAAWA,EAAE,YAG/D+kB,GAAA,MAAAA,IAGZ8W,EAAS,SAAW,CAACK,GAAc1U,EAAO,MAAM,CAAC5f,EAAGyG,KAAM,CAACivB,EAAcjvB,EAAC,CAAC,GAAG,CAC1E,MAAA3N,EAAOm7B,EAAS,QAAQ,YAExBsD,GAAgBtD,EAAS,QAAQ,wBAAwB,KAEzD6C,IADS1+B,EAAE,QAAUm/B,IACFz+B,EACnBuD,GAAQ06B,GAAgBD,EAAO,EAGjC,IAAAU,GACJ,MAAMC,GAAQ7X,EAAO,UAAetL,IAAAjY,GAAQiY,GAAI,CAAC,EACjD,GAAImjB,KAAU,EAEGD,GAAAC,WACNA,KAAU,GAEnBD,GAAe5X,EAAO,OAAS,MAC1B,CACC,MAAA8X,GAAW9X,EAAO6X,GAAQ,CAAC,EAC3BE,GAAa/X,EAAO6X,EAAK,EAE3B,KAAK,IAAIC,GAAWr7B,EAAK,EAAI,KAAK,IAAIs7B,GAAat7B,EAAK,EAC1Dm7B,GAAeC,GAAQ,EAERD,GAAAC,EAEnB,CAGID,IAAgB,GAAKtB,GAAgBsB,EAAY,GAEnDp/B,EAAE,eAAe,EACjBg/B,GAA2B,QAAUI,GACrCb,EAAgBa,EAAY,EAC5BH,GAAe,QAAUj/B,EAAE,UACPm+B,EAAAa,GAA2B,QAAS,EAAI,EAC5DnB,EAAcuB,GAAcn7B,EAAK,EACfoe,EAAA,OAAQ,YAAamd,GAAW,EAAK,GAEvDR,GAA2B,QAAU,IAEzC,GAEIS,GAAkB9/B,SAAO,IAAI,EAC7B,CACJ,SAAU+/B,IACRtb,GAAiB,CACnB,cAAe8a,GACf,aAAc,CACZO,GAAgB,QAAU,IAC5B,EACA,OAAOz/B,EAAGohB,EAAQ,QACV,MAAA1gB,KAAOtC,GAAAy9B,EAAS,UAAT,YAAAz9B,GAAkB,cAAe,EAK9C,GAJIqhC,GAAgB,SAAW,OAC7BA,GAAgB,QAAU3D,EAAgBkD,GAA2B,SAAW,CAAC,EAAIt+B,IAEvF++B,GAAgB,SAAWre,EACvB4d,GAA2B,SAAW,MAAQnD,EAAS,QAAS,CAClE,MAAM6C,GAAUznB,GAAMwoB,GAAgB,QAAU/+B,GAAM,EAAG,CAAC,EAC1C+9B,EAAAO,GAA2B,QAASN,EAAO,CAC7D,CACF,EACA,WAAY,CACNM,GAA2B,SAAW,OACpBb,EAAAa,GAA2B,QAAS,EAAK,EAC7DA,GAA2B,QAAU,KAEzC,EACD,EACKvzB,GAAWyO,GAAWwlB,GAAc,CACxC,eAAgB,IAAM,CACpBvC,EAAiB,EAAI,CACvB,EACA,eAAgB,IAAM,CACpBA,EAAiB,EAAK,CACxB,EACA,cAAoBn9B,GAAA,CAClBglB,GAAA,MAAAA,EAAgBhlB,EAClB,EACD,EACKw/B,GAAiBx/B,GAAA,CACVA,EAAE,YACFi/B,GAAe,UACpBD,GAA2B,SAAW,OACpBb,EAAAa,GAA2B,QAAS,EAAK,EAC7DA,GAA2B,QAAU,MAElBna,EAAA,OAAQ,YAAa2a,GAAW,EAAK,EAC5D,EAEI95B,GAAKsR,UACLgC,GAAUtO,EAAQ,GAAGhF,EAAE,SAAW,OAClCs2B,GAAU,GAAGt2B,EAAE,SACfu2B,GAAW,CAAC,GAAG,MAAMzU,EAAO,MAAM,CAAC,EAAE,IAAI,CAACtL,EAAG7N,IAC1C,GAAG3I,EAAE,UAAU2I,CAAC,EACxB,EACM,OACL,SAAA5C,GACA,SAAAowB,EACA,WAAAK,EACA,KAAAE,EACA,OAAA5U,EACA,SAAAnR,EACA,SAAAC,EACA,aAAAgoB,EACA,QAAAtlB,GACA,QAAAgjB,GACA,SAAAC,GACA,gBAAAE,EACA,gBAAAL,EACA,iBAAA6B,EACA,iBAAAC,EACA,mBAAA7B,EACA,gBAAA2B,EACA,cAAAG,EACA,oBAAAM,EACA,iBAAAW,GACA,gBAAAP,EACA,cAAAlC,EACA,cAAAa,EACA,qBAAAF,EACA,UAAAC,CAAA,CAEJ,CACA,SAASiB,GAAavS,EAAO3pB,EAAOiC,EAAO,CACrC,OAAA0nB,EAAM3pB,CAAK,IAAMiC,EACZ0nB,EAEF,CAAC,GAAGA,EAAM,MAAM,EAAG3pB,CAAK,EAAGiC,EAAO,GAAG0nB,EAAM,MAAM3pB,EAAQ,CAAC,CAAC,CACpE,CCjPO,SAAS29B,GAAY,CAC1B,MAAA39B,EACA,OAAA25B,EACA,WAAYiE,EACZ,UAAAC,EACA,SAAAhnB,EACA,OAAArP,EACA,UAAAoyB,EAAY,SACd,EAAG,CACK,MAAAkE,EAAc9jB,GAAanD,CAAQ,EACnC,CACJ,kBAAAwJ,EACA,qBAAAwC,GACEtC,GAAmB,EACjB,CACJ,KAAA6Z,EACA,OAAA5U,EACA,aAAA8W,EACA,QAAAtlB,EACA,SAAAijB,EACA,WAAY8D,EACZ,gBAAAjE,EACA,iBAAA6B,EACA,iBAAAC,EACA,mBAAA7B,EACA,cAAA8B,EACA,oBAAAM,EACA,gBAAAT,EACA,iBAAAoB,EACA,gBAAAP,EACA,cAAArB,EACA,qBAAAF,EACA,UAAAC,EAAY,WACV,EAAAtB,EACEqE,EAAatC,EAAgB17B,CAAK,EAClCiC,EAAQujB,EAAOxlB,CAAK,EAGT88B,EAAA98B,EAAO,CAAC49B,CAAe,EACxC,MAAM1D,EAAa0D,GAAmBG,EAChCE,EAAaj7B,cAAY,IAAM,CAC/B86B,EAAY,SACdA,EAAY,QAAQ,MAAM,CACxB,cAAe,GAChB,CACH,EACC,CAACA,CAAW,CAAC,EAIVI,EAAY5B,IAAiBt8B,EACnC1F,YAAU,IAAM,CACV4jC,GACSD,GACb,EACC,CAACC,EAAWD,CAAU,CAAC,EACpB,MAAAhB,EAAiBt/B,SAAO,MAAS,EACjCwgC,EAAuBngC,GAAA,CACvBA,EAAE,YAAci/B,EAAe,UACtBgB,IACX9B,EAAoBn8B,EAAO,EAAK,EACX6iB,EAAA,OAAQ,YAAasb,EAAiB,EAAK,EAClE,EAEIvkC,EAAYK,EAAK,sHAAuHghC,EAAW,CAACf,GAAc,YAAakE,GAAW,CAC9L,UAAAxE,EACA,WAAAM,EACA,WAAA8D,CAAA,CACD,EAED,CAAChD,GAAwBA,GAAwBgD,GAAc9C,EAAgB,UAAY,aAC3F,OAAQlhC,MAAA,OAAI,KAAK,eAAe,UAAAJ,EAAsB,MAAO,CAC3D,KAAM,GAAG,KAAK,IAAIkgC,EAAgB95B,CAAK,EAAI,IAAK,CAAC,CAAC,KACjD,cAAoBhC,GAAA,CACjBA,EAAE,SAAW,GAAKA,EAAE,QAAUA,EAAE,SAAWA,EAAE,UAGtCigC,IACXhB,EAAe,QAAUj/B,EAAE,UAC3Bm+B,EAAoBn8B,EAAO,EAAI,EACbqgB,EAAA,OAAQ,YAAa8d,EAAiB,EAAK,IAE3D,eAAC,QAAM,IAAIlE,EAASj6B,CAAK,EAAG,UAAWge,GAAmB,IAAM,CAChEme,EAAoBn8B,EAAO,EAAI,EAChC,EAAG,QAASge,GAAmB,IAAM,CAEpCme,EAAoBn8B,EAAO,EAAK,CACjC,GAAG,IAAK89B,EAAa,SAAW5D,EAAiB,OAAJ,EAAe,IAAKyB,EAAiB37B,CAAK,EAAG,IAAK47B,EAAiB57B,CAAK,EAAG,KAAAo6B,EAAY,MAAAn4B,EAAc,SAAUi4B,EAAY,aAAY2D,EAAW,kBAAiB7mB,EAAS,mBAAiB,aAAa,iBAAgB+iB,EAAmB/5B,CAAK,EAAG,QAAS,IAAM,CAChTu8B,EAAgBv8B,CAAK,GACpB,OAAahC,GAAA,CACdu+B,EAAgB,MAAS,EACzBJ,EAAoBn8B,EAAO,EAAK,EAChCwH,GAAA,MAAAA,EAASxJ,EAAC,EACT,SAAeA,GAAA,CAChB69B,EAAc77B,EAAO,WAAWhC,EAAE,OAAO,KAAK,CAAC,GAC9C,KAAK,QAAQ,UAAU,SAAU,EACpC,EACJ,CACA,SAASogC,GAAW,CAClB,WAAAlE,EACA,WAAA8D,EACA,UAAApE,CACF,EAAG,CACD,OAAIM,EACK,oCAELN,GAAaA,IAAc,UACtBA,EAEF3/B,EAAK,wBAAyB+jC,EAAa,kBAAoB,YAAY,CACpF,CC5GO,SAASK,GAAO,CACrB,SAAAxnB,EACA,OAAArP,EACA,GAAGzK,CACL,EAAG,CACK,MACJ,SAAA+Y,EACA,YAAAilB,EACA,MAAA94B,EACA,aAAA8T,EACA,GAAGuoB,CACD,EAAAvhC,EACEwhC,EAAY,CAChB,GAAGD,EAEH,MAAOr8B,GAAS,KAAO,CAACA,CAAK,EAAI,OACjC,aAAc8T,GAAgB,KAAO,CAACA,CAAY,EAAI,OACtD,SAAemE,GAAA,CACFpE,GAAA,MAAAA,EAAAoE,EAAE,CAAC,EAChB,EACA,YAAkBA,GAAA,CACF6gB,GAAA,MAAAA,EAAA7gB,EAAE,CAAC,EACnB,GAEIyf,EAASmB,GAAUyD,CAAS,EAClC,OAAQvkC,EAAA,IAAAy/B,GAAA,CAAY,GAAG8E,EAAW,OAAA5E,EAC9B,SAAC3/B,EAAA,IAAA2jC,GAAA,CAAY,UAAW5gC,EAAM,UAAW,MAAO,EAAG,OAAA48B,EAAgB,SAAA9iB,EAAoB,OAAArP,EAAgB,CACzG,EACJ,CACO,SAASg3B,GAAW,CACzB,KAAA9zB,EACA,GAAG3N,CACL,EAAG,CACK,MACJ,MAAO,CACL,SAAA+Y,EACA,OAAAtO,EACA,MAAAvF,EAAQ,GACR,IAAAL,CACF,GACEoW,GAAc,CAChB,KAAAtN,CAAA,CACD,EACKuN,EAAY,CAChB,SAAAnC,EACA,OAAAtO,EACA,MAAOvF,GAAS,IAEX,OAAAjI,EAAA,IAACqkC,IAAO,SAAUz8B,EAAM,GAAGsW,GAAWD,EAAWlb,CAAK,CAAG,EAClE,CC3CO,SAAS0hC,IAA4B,CACnC,OAAA5+B,EAAA,KAACK,WAAA,CACJ,UAAAlG,EAAA,IAAC0kC,GAAc,IACf7+B,OAAC,MAAI,WAAU,uBACb,UAAC7F,EAAA,IAAAitB,EAAA,CAAiB,GAAG,iBAAiB,YAAard,GAAM,UAAU,QACjE,SAAC5P,EAAA,IAAAiG,EAAA,CAAM,QAAQ,gBAAiB,GAClC,EACAjG,MAACitB,EAAiB,IAAG,mBAAmB,YAAard,GACnD,SAAC5P,MAAAiG,EAAA,CAAM,QAAQ,mBAAmB,CACpC,GACAjG,MAACitB,EAAiB,IAAG,qBAAqB,YAAard,GACrD,SAAC5P,MAAAiG,EAAA,CAAM,QAAQ,qBAAqB,CACtC,IACF,QACC0+B,GAAc,GACjB,GACJ,CACA,SAASD,IAAgB,CACjB,MAAAE,EAAetZ,GAAwBjgB,YAAA,OAAAnD,GAAA9F,EAAAiJ,EAAE,WAAF,YAAAjJ,EAAY,SAAS,SAAS,aAA9B,YAAA8F,EAA0C,YAAW,EAClG,OACIrC,EAAA,KAAAK,WAAA,WAAAlG,EAAA,IAACuuB,EAAc,OAAQvuB,MAAAiG,EAAA,CAAM,QAAQ,eAAe,EAAI,UAAU,QAAQ,KAAK,2CAA2C,QAAS,IAAM,CACzH4lB,IAAE,QAAQ,aAAa,6BAA6B,GACnE,QACA0C,EAAc,OAAQvuB,MAAAiG,EAAA,CAAM,QAAQ,kBAAkB,EAAI,UAAU,QAAQ,iBAAiB,WAAW,KAAM,EAAG,KAAK,8CAA8C,QAAS,IAAM,CACpK4lB,IAAE,QAAQ,aAAa,gCAAgC,GACtE,EACA7rB,EAAA,IAAA+d,GAAA,CAAkB,KAAK,2CAA2C,UAAU,QAAQ,MAAQ/d,EAAA,IAAAiG,EAAA,CAAM,QAAQ,eAAe,EAAI,aAAc2+B,EAAc,WAAW,WAAW,QAC/KJ,GAAW,MAAK,kDAAkD,YAAQv+B,EAAM,SAAQ,uBAAuB,EAAI,SAAU,EAAG,KAAM,GAAK,SAAU,EAAG,cAAe,CACxK,MAAO,WACN,EACDjG,MAAC,OAAI,UAAU,2BACb,eAACiG,EAAM,SAAQ,6FAA6F,CAC9G,GACAjG,MAACs7B,IAAmB,QAAQ,mDAAmD,MAAQt7B,MAAAiG,EAAA,CAAM,QAAQ,yBAAyB,CAAI,GAClIjG,MAACs7B,IAAmB,QAAQ,mDAAmD,MAAQt7B,MAAAiG,EAAA,CAAM,QAAQ,yBAAyB,CAAI,EACpI,GACJ,CACA,SAAS0+B,IAAgB,CACjB,MAAAC,EAAetZ,GAAwBjgB,YAAA,OAAAnD,GAAA9F,EAAAiJ,EAAE,WAAF,YAAAjJ,EAAY,SAAS,SAAS,aAA9B,YAAA8F,EAA0C,YAAW,EAC3F,OAAArC,EAAA,KAACK,WAAA,CACJ,UAAAlG,EAAA,IAACuuB,EAAc,OAAQvuB,MAAAiG,EAAA,CAAM,QAAQ,eAAe,EAAI,UAAU,QAAQ,KAAK,2CAA2C,QAAS,IAAM,CACzH4lB,IAAE,QAAQ,aAAa,6BAA6B,GACnE,EACA7rB,EAAA,IAAAuuB,EAAA,CAAc,MAAOvuB,MAACiG,EAAM,SAAQ,iBAAkB,GAAI,UAAU,QAAQ,KAAK,8CAA8C,QAAS,IAAM,CAC/H4lB,IAAE,QAAQ,aAAa,gCAAgC,GACtE,EACA7rB,EAAA,IAAA+d,GAAA,CAAkB,KAAK,2CAA2C,UAAU,QAAQ,MAAQ/d,EAAA,IAAAiG,EAAA,CAAM,QAAQ,0BAA0B,EAAI,aAAc2+B,EAAc,WAAW,WAAW,CAC7L,GACJ,CACA,SAAStJ,GAAmB,CAC1B,MAAA5sB,EACA,QAAAgwB,CACF,EAAG,CACD,MAAMp1B,EAAMo1B,EACN,CACJ,MAAAlI,EACA,SAAA5pB,GACEklB,EAAe,EACb+S,EAAYrO,EAAMltB,CAAG,EACrB6wB,EAAoBlyB,GAAA,CACxB2E,EAAS8xB,EAASz2B,EAAO,CACvB,YAAa,GACd,GAEH,cAAQ2qB,GAAc,MAAK,UAAU,MAAOiS,EAAW,gCAA+B,GAAC,cAAepgB,GAAY0V,EAAS1V,CAAQ,EAAG,QAAkBxc,GAAAkyB,EAASlyB,CAAK,EAClK,UAACjI,MAAAitB,EAAA,CAAiB,UAAU,aAAa,UAAWjtB,MAACq4B,IAAU,QAAQ,YAAY,UAAU,UAAU,MAAO,CAC9G,KAAMwM,CAAA,EACL,EACE,SACHn2B,EAAA,QACC+rB,GAAkB,GACrB,GACJ,CC/EO,SAASqK,IAAkC,CAChD,KAAM,CAACtb,EAAgBC,CAAiB,EAAIppB,WAAS,CAAC,MAAM,CAAC,EAC7D,cAAQgpB,GAAU,SAAQ,UAAU,eAAAG,EAAgC,iBAA4BgC,GAAA,CAC9F/B,EAAkB+B,CAAM,EACpBA,EAAO,QACTK,IAAkB,QAAQ,aAAa,iBAAiBL,EAAO,CAAC,CAAC,IAAI,CAGrE,YAAAxrB,EAAA,IAAC8pB,GAAc,OAAM,OAAO,MAAQ9pB,MAAAiG,EAAA,CAAM,QAAQ,kBAAkB,EAClE,SAAAjG,MAAC0zB,GAAa,gBAAe,2CAA4C,GAC3E,EACC1zB,EAAA,IAAA8pB,GAAA,CAAc,MAAM,MAAM,MAAQ9pB,MAAAiG,EAAA,CAAM,QAAQ,kBAAkB,EACjE,SAAAjG,MAAC0zB,GAAa,gBAAe,2CAA4C,GAC3E,EACC1zB,EAAA,IAAA8pB,GAAA,CAAc,MAAM,OAAO,MAAQ9pB,MAAAiG,EAAA,CAAM,QAAQ,gBAAgB,EAChE,SAAAjG,MAAC0zB,GAAa,gBAAe,2CAA4C,GAC3E,CACF,GACJ,CCdO,SAASqR,IAAoC,CAC5C,MACJ,OAAAvX,EACA,OAAAwX,EACA,OAAAvX,GACEC,GAAc,CAChB,KAAM,+CACP,EACK,CAAClE,EAAgBC,CAAiB,EAAIppB,WAAS,CAAC,CAAC,CAAC,EACxD,cAAQ,MACJ,WAAAL,EAAA,IAACqpB,GAAU,SAAQ,UAAU,eAAAG,EAAgC,iBAA4BgC,GAAA,CACzF/B,EAAkB+B,CAAM,EACpBA,EAAO,QACTK,IAAkB,QAAQ,aAAa,8BAA8BL,EAAO,CAAC,CAAC,IAAI,CAGjF,WAAAgC,EAAO,IAAI,CAAChrB,EAAOwD,IACZH,OAAAikB,GAAA,CAA6B,MAAO9jB,EAAO,MAAOhG,MAACiG,EAAM,SAAS,mBAAmBD,EAAQ,CAAC,GAAI,EACpG,UAAAhG,MAACilC,IAAY,MAAAj/B,EAAc,EAC1BhG,EAAA,WAAI,UAAU,aACb,SAACA,MAAA8F,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,MAAM,SAAS,QAAS,IAAM,CACpEk/B,EAAOh/B,CAAK,GAER,SAAChG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,QAAS,EAC1B,GACF,IARqBzD,EAAM,EAS7B,CACL,EACD,QACC,MAAI,WAAU,mBACb,SAAAxC,EAAA,IAAC8F,GAAO,KAAK,KAAK,QAAQ,UAAU,MAAM,UAAU,gBAAYwZ,GAAQ,IAAI,QAAS,IAAM,CAC3FmO,EAAO,CAAE,GACShE,EAAA,CAAC+D,EAAO,MAAM,CAAC,GAE/B,SAACxtB,EAAA,IAAAiG,EAAA,CAAM,QAAQ,aAAc,EAC/B,GACF,CACF,GACJ,CACA,SAASg/B,GAAY,CACnB,MAAAj/B,CACF,EAAG,CACK,MAAA4+B,EAAetZ,GAAmBjgB,GAAA,WAAK,OAAA3C,GAAAR,GAAA9F,EAAAiJ,EAAE,WAAF,YAAAjJ,EAAY,SAAS,SAAS,aAA9B,YAAA8F,EAA0C,gBAAgBlC,KAA1D,YAAA0C,EAAkE,MAAK,EACpH,OACI7C,EAAA,KAAAK,WAAA,WAAAlG,MAAC+d,IAAkB,KAAM,gDAAgD/X,CAAK,SAAU,UAAU,QAAQ,MAAQhG,MAAAiG,EAAA,CAAM,QAAQ,OAAQ,GAAI,aAAc2+B,EAAc,WAAW,WAAW,EAC7L5kC,EAAA,IAAAuuB,EAAA,CAAc,KAAM,gDAAgDvoB,CAAK,SAAU,MAAQhG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,OAAQ,GAAI,UAAU,QAAQ,QAAS,IAAM,CACvJ4lB,EAAA,EAAkB,QAAQ,aAAa,+BAA+B7lB,CAAK,IAAI,GAC9E,QACAuoB,EAAc,MAAM,gDAAgDvoB,CAAK,YAAa,MAAQhG,MAAAiG,EAAA,CAAM,QAAQ,UAAW,GAAI,UAAU,QAAQ,iBAAiB,WAAW,KAAM,EAAG,QAAS,IAAM,CAClM4lB,EAAA,EAAkB,QAAQ,aAAa,kCAAkC7lB,CAAK,IAAI,GACjF,CACH,GACJ,CCpDO,SAASk/B,IAA+B,CACvC,MACJ,OAAA1X,EACA,OAAAwX,EACA,OAAAvX,GACEC,GAAc,CAChB,KAAM,iDACP,EACK,CAAClE,EAAgBC,CAAiB,EAAIppB,WAAS,CAAC,CAAC,CAAC,EACxD,cAAQ,MACJ,WAAAL,EAAA,IAACqpB,GAAU,SAAQ,UAAU,eAAAG,EAAgC,iBAA4BgC,GAAA,CACzF/B,EAAkB+B,CAAM,EACpBA,EAAO,QACTK,IAAkB,QAAQ,aAAa,gCAAgCL,EAAO,CAAC,CAAC,IAAI,CAGnF,WAAAgC,EAAO,IAAI,CAAChrB,EAAOwD,IACZH,OAAAikB,GAAA,CAA6B,MAAO9jB,EAAO,MAAOhG,MAACiG,EAAM,SAAS,qBAAqBD,EAAQ,CAAC,GAAI,EACtG,UAAAhG,MAACilC,IAAY,MAAAj/B,EAAc,EAC1BhG,EAAA,WAAI,UAAU,aACb,SAACA,MAAA8F,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,MAAM,SAAS,QAAS,IAAM,CACpEk/B,EAAOh/B,CAAK,GAER,SAAChG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,QAAS,EAC1B,GACF,IARqBzD,EAAM,EAS7B,CACL,EACD,QACC,MAAI,WAAU,mBACb,SAAAxC,EAAA,IAAC8F,GAAO,KAAK,KAAK,QAAQ,UAAU,MAAM,UAAU,gBAAYwZ,GAAQ,IAAI,QAAS,IAAM,CAC3FmO,EAAO,CAAE,GACShE,EAAA,CAAC+D,EAAO,MAAM,CAAC,GAE/B,SAACxtB,EAAA,IAAAiG,EAAA,CAAM,QAAQ,aAAc,EAC/B,GACF,CACF,GACJ,CACA,SAASg/B,GAAY,CACnB,MAAAj/B,CACF,EAAG,CACD,OACIH,EAAA,KAAAK,WAAA,WAAAlG,MAAC+d,IAAkB,KAAM,kDAAkD/X,CAAK,SAAU,UAAU,QAAQ,MAAOhG,MAACiG,EAAM,SAAQ,QAAQ,EAAI,aAAck/B,GAAgBn/B,CAAK,EAAG,WAAW,WAAW,EACzMhG,EAAA,IAAAuuB,EAAA,CAAc,KAAM,kDAAkDvoB,CAAK,SAAU,MAAQhG,EAAA,IAAAiG,EAAA,CAAM,QAAQ,OAAQ,GAAI,UAAU,QAAQ,QAAS,IAAM,CACzJ4lB,EAAA,EAAkB,QAAQ,aAAa,iCAAiC7lB,CAAK,IAAI,GAChF,QACAuoB,EAAc,MAAM,kDAAkDvoB,CAAK,YAAa,MAAQhG,MAAAiG,EAAA,CAAM,QAAQ,UAAW,GAAI,UAAU,QAAQ,iBAAiB,WAAW,KAAM,EAAG,QAAS,IAAM,CACpM4lB,EAAA,EAAkB,QAAQ,aAAa,oCAAoC7lB,CAAK,IAAI,GACnF,QACAuoB,EAAc,MAAM,kDAAkDvoB,CAAK,eAAgB,MAAQhG,MAAAiG,EAAA,CAAM,QAAQ,aAAc,GAAI,UAAU,QAAQ,iBAAiB,WAAW,KAAM,EAAG,QAAS,IAAM,CAC1M4lB,EAAA,EAAkB,QAAQ,aAAa,uCAAuC7lB,CAAK,IAAI,GACtF,CACH,GACJ,CACA,SAASm/B,GAAgBn/B,EAAO,SACtB,OAAAkC,IAAA9F,EAAAypB,IAAkB,WAAlB,YAAAzpB,EAA4B,SAAS,SAAS,YAAY,kBAAkB4D,CAAK,IAAjF,YAAAkC,EAAoF,KAC9F","names":["SvgImage","memo","src","className","height","svgString","useSvgImageContent","jsx","clsx","svgCache","image","setImage","useState","useEffect","cached","promise","fetchSvgImageContent","svg","response","ToastTimer","callback","remaining","__publicField","maximumVisible","getDefaultDuration","type","useToastStore","create","immer","set","get","message","opts","amountToRemove","state","toastId","nanoid","toastType","duration","toast","toastIndex","t","newToasts","_a","toastState","getAxiosErrorMessage","err","field","axios","fieldMessage","CancelFilledIcon","createSvgIcon","WarningIcon","Chip","props","onRemove","disabled","invalid","errorMessage","children","selectable","radius","elementType","to","onClick","chipRef","useRef","deleteButtonRef","focusManager","useFocusManager","handleKeyDown","e","handleClick","sizeStyle","sizeClassNames","adornment","cloneElement","Tooltip","Element","colorClassName","ButtonBase","size","color","ErrorIcon","highlightAllCode","el","themeMode","highlightCode","hljs","__vitePreload","UnfoldMoreIcon","UnfoldLessIcon","IgnitionStackTrace","trace","onSelectedIndexChange","selectedIndex","totalVendorGroups","expandedVendorGroups","setExpandedVendorGroups","allVendorGroupsExpanded","jsxs","Button","frame","index","Trans","Fragment","vendorFrame","StackTrackItem","prev","KeyboardArrowDownIcon","isSelected","IgnitionFilePath","part","IgnitionErrorDialog","error","setSelectedIndex","selectedFrame","useMemo","Dialog","DialogHeader","DownloadButton","DialogBody","CodeSnippet","codeRef","lineNumbers","highlightedIndex","lines","lineNumber","line","CodeSnippetLine","isHighlighted","ref","useDialogStore","dialog","data","resolve","value","_b","openDialog","closeDialog","defaultErrorMessage","showHttpErrorToast","defaultMessage","toastOptions","_d","_c","useNavigate","routerNavigate","useRouterNavigate","location","useLocation","useCallback","options","replace","createPath","resolvePath","setThemeValue","key","themeEl","removeThemeValue","prefixId","id","loadFonts","fonts","doc","googleFonts","customFonts","promises","font","weights","families","f","googlePromise","lazyLoader","customFontPromises","fontConfig","loadedFont","current","fontFace","useAppearanceEditorMode","iframe","isSsr","search","AppearanceListener","isAppearanceEditorActive","alreadyFiredLoadedEvent","currentData","useBootstrapDataStore","s","selectThemeTemporarily","useThemeSelector","handleCommand","command","newData","deepMerge","_","source","mergeBootstrapData","renderCustomCode","handleMessage","isAppearanceEvent","eventIsTrusted","mode","parent","nodeType","customNode","useLocalStorage","initialValue","storedValue","setStoredValue","getFromLocalStorage","setValue","valueToStore","setInLocalStorage","handleStorageChange","event","item","removeFromLocalStorage","ErrorOutlineIcon","Form","onBeforeSubmit","onSubmit","form","onBlur","FormProvider","FullPageLoader","screen","ProgressCircle","IllustratedMessage","title","description","action","imageHeight","imageMargin","style","getSizeClassName","ArrowDropDownIcon","AvatarPlaceholderIcon","colors","AvatarInitialsFallback","forwardRef","label","labelForBackground","initial","bgColor","bgLabel","hash","accum","val","getTextFallbackFontSize","Avatar","circle","link","fallback","fallbackColor","lazy","domProps","renderedAvatar","wrapperProps","Link","extensionFromFilename","fullFileName","getFileMime","file","extensionsToMime","fileExtension","UploadedFile","relativePath","generateFingerprint","reader","UploadedFileFromEntry","entry","reject","name","mime","lastModified","encodeFilename","encodeCharacter","character","suffix","oneMB","desiredChunkSize","batchSize","concurrency","S3MultipartUpload","config","axiosRetry","storedUrl","_e","pendingChunks","c","signedUrls","batch","pendingUploads","result","failedParts","success","failedItem","chunk","retryUploads","i","r","url","partNumber","etag","totalUploaded","n","apiClient","fileKey","uploadId","minChunkSize","chunkSize","end","previouslyUploaded","p","TusUpload","upload","uploadGroupHash","onProgress","onSuccess","onError","metadata","baseUrl","tusFingerprint","Upload","getCookie","errorDetails","responseBody","parsedError","bytesUploaded","bytesTotal","uploadKey","createFileEntry","previousUploads","Disk","S3Upload","acl","AxiosUpload","formData","validateFile","restrictions","maxFileSize","allowedFileTypes","blockedFileTypes","prettyBytes","fileMatchesTypes","types","match","extension","ProgressTimeout","startUploading","settings","getBootstrapData","timer","errorType","errorCode","status","canRetry","currentTime","percentage","currentUpload","previousTimestamp","previousBytes","speed","eta","timeDelta","remainingBytes","request","chooseUploadStrategy","OneMB","FourMB","HundredMB","driver","createUpload","strategyConfig","storeOptions","uploadedFile","enableMapSet","initialState","createFileUploadStore","u","currentRetryCount","maxRetries","delay","newUploadState","fileUpload","updateTotals","userOptions","fileUploads","files","uploads","activeUploads","activeUpload","next","FileUploadContext","createContext","useFileUploadStore","selector","equalityFn","store","useContext","useStoreWithEqualityFn","FileUploadProvider","useSettings","createUploadInput","old","input","buildUploadInputAccept","extensions","accept","openUploadWindow","fileList","deleteFileEntries","payload","useDeleteFileEntries","useMutation","useActiveUpload","uploadIdRef","uploadSingle","_abortUpload","updateFileUpload","uploadFile","selectAndUploadFile","deleteEntry","entryPath","handleSuccess","abortUpload","ProgressBarBase","minValue","maxValue","showValueLabel","isIndeterminate","labelPosition","role","formatOptions","trackColor","progressColor","trackHeight","getSize","useId","clamp","formatter","useNumberFormatter","valueLabel","valueToFormat","barStyle","getInputFieldClassNames","labelEl","ProgressBar","AddAPhotoIcon","FileInputType","TwoMB","ImageSelector","onChange","defaultValue","diskPrefix","showRemoveButton","showEditButtonOnHover","required","autoFocus","variant","previewSize","placeholderIcon","stretchPreview","previewRadius","onFileSelected","uploadStatus","isDeletingEntry","inputRef","useAutoFocus","fieldId","labelId","descriptionId","imageUrl","uploadOptions","inputFieldClassNames","VariantElement","AvatarVariant","SquareVariant","InputVariant","removeButton","useDefaultButton","handleUpload","Field","isLoading","IconButton","FormImageSelector","useController","formProps","mergeProps","useValueLists","names","params","useQuery","fetchValueLists","keepPreviousData","previousData","queryClient","ConfirmationDialog","body","closeText","confirm","isDanger","onConfirm","close","useDialogContext","DialogFooter","AppAppearanceConfig","lazyAdminRoute","AddIcon","ChipList","wrap","startButton","Children","chip","isValidElement","stringToChipValue","ChipFieldInner","fieldRef","useObjectRef","displayWith","v","validateWith","suggestions","inputValue","onInputValueChange","onItemSelected","placeholder","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","propsValue","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","onChipClick","alwaysShowAvatar","readOnly","inputFieldProps","fieldClassNames","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","dropdownArrow","fieldProps","inputProps","useField","Input","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","cr","newItems","setChips","chips","addItems","listbox","useListbox","handleItemSelection","activeIndex","setActiveIndex","isOpen","setIsOpen","setInputValue","refs","listboxId","collection","onInputChange","textValue","option","useLayoutEffect","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","createEventHandler","Listbox","Popover","emails","selection","email","mixedValueToChipValue","propsDefaultValue","handleChange","newValue","useControlledState","ChipField","React","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","deltaX","deltaY","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","width","left","top","target","useDraggable","preview","hidePreview","dragHandleRef","addGlobalListener","removeAllGlobalListeners","useGlobalListeners","optionsRef","notifyMonitors","monitor","onDragStart","draggable","clickedOnHandle","hideNativeGhostImage","ie","node","m","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","getEntryFile","getEntriesFromDirectory","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","FormChipField","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","preventDefault","stopPropagation","onPress","onLongPress","removeGlobalListener","start","onPointerDown","onPointerMove","onPointerUp","longPressTriggered","MoreVertIcon","AccordionAnimation","Accordion","isLazy","other","expandedValues","setExpandedValues","itemsCount","AnimatePresence","FocusScope","child","AccordionItem","bodyClassName","bodyPadding","labelClassName","buttonPadding","startIcon","endAppend","chevronPosition","isFirst","footerContent","onHeaderMouseEnter","onHeaderMouseLeave","isExpanded","wasExpandedOnce","buttonId","panelId","onKeyDown","toggle","newKeys","chevron","DefaultAppearanceConfig","mergedAppearanceConfig","resolvePreviewAppIsLoaded","previewAppIsLoaded","useAppearanceStore","subscribeWithSelector","values","postMessage","themeId","document","window","appearanceState","useAppearanceEditorValuesQuery","fetchAppearanceValues","prepareSettingsForHookForm","useAppearanceEditorValues","usePreviewRoute","pathname","subRoute","useMatches","activeSection","baseRoute","AppearanceEditorPage","base_url","iframeRef","iframeRoute","Navigate","StaticPageTitle","Sidebar","spinner","Outlet","AppearanceButton","endIcon","KeyboardArrowRightIcon","MenuList","navigate","trans","useTrans","fields","append","useFieldArray","useAvailableRoutes","menuConfig","route","ucFirst","string","AddMenuItemDialog","categories","routeItems","AddCustomLink","AddRoute","category","useForm","FormTextField","List","ListItem","last","DragIndicatorIcon","dropdownMenu","sortableLineStrategy","sortSession","onDropPositionChange","previousPosition","newPosition","midY","overIndex","clearLinePreview","addLinePreview","droppableId","droppable","itemIndex","side","moveItemInArray","array","fromIndex","toIndex","from","delta","moveItemInNewArray","newArray","transition","sortableTransformStrategy","sortable","currentIndex","rects","newRects","oldRect","sortableTarget","x","y","sortableMoveNodeStrategy","moveNode","newIndex","parentEl","strategies","useSortable","onSortEnd","onSortStart","onDragEnd","strategy","draggableProps","getScrollParent","droppableProps","oldIndex","AppearanceMenuEditor","menuIndex","useParams","getValues","useFormContext","menuFormPath","menu","MenuEditorSection","has_mobile_app","menuSectionConfig","menuPositions","positions","position","Option","MenuItemsManager","DeleteMenuTrigger","formPath","useWatch","DialogTrigger","menuItemConfig","MenuListItem","menus","isConfirmed","sortableProps","Icon","createSvgIconFromTree","iconOnlyLabel","AppearanceMenuItemEditor","menuItemIndex","MenuItemEditor","itemsPath","MenuItemEditorSection","MenuItemForm","DeleteItemTrigger","currentItems","saveAppearanceChangesMutationKey","useSaveAppearanceChanges","saveChanges","changes","BlockerDialog","isBlocked","allowedPath","reset","proceed","useBlocker","nextLocation","handleBeforeUnload","AppearanceEditorForm","breadcrumb","blockerAllowedPath","isDirty","useFormState","subscription","AppearanceEditorLayout","AppearanceEditorHeader","isSaving","useIsMutating","CloseIcon","usePreviousPath","AppearanceEditorBreadcrumb","backLink","childrenArray","previousPath","sections","KeyboardArrowLeftIcon","LabelList","isEmphasized","isLast","GeneralSection","BrandingImageSelector","SiteNameTextField","SiteDescriptionTextArea","randomNumber","min","max","randomBuffer","number","ThemeList","watch","lightThemeColors","currentThemes","NavLink","AceEditor","AceDialog","onSave","footerStartAction","beautify","editorRef","isValid","setIsValid","Suspense","Footer","startAction","useSeoTags","fetchTags","useUpdateSeoTags","useQueryClient","updateTags","tags","pages","page","SeoSection","TagEditorTrigger","TagsEditorDialog","resetButton","CustomCodeSection","CustomCodeDialogTrigger","ColorIcon","colorToThemeValue","parseColor","TuneIcon","ThemeSettingsDialogTrigger","themeIndex","theme","currentTheme","SettingsDialog","formId","FormSwitch","RestartAltIcon","ThemeMoreOptionsButton","confirmDialogOpen","setConfirmDialogOpen","deleteTheme","MenuTrigger","path","defaultColors","colorName","themeValue","Menu","MenuItem","ColorPresets","ColorSwatch","presetButtons","DefaultPresets","ColorPicker","colorPresets","showInput","setColor","presets","HexColorPicker","newColor","hex","HexColorInput","ColorPickerDialog","hideFooter","navbarColorMap","NavbarColorPicker","selectedValue","previewColor","Item","AppearanceSectionTitle","marginTop","colorList","ThemeEditor","selectedFont","isAborted","ColorPickerTrigger","initialThemeValue","selectedThemeValue","setSelectedThemeValue","selectThemeValue","themeValueToHex","valueChanged","SectionList","sortedSection","b","section","fontImage","FontSelectorFilters","filters","setFilters","TextField","SearchIcon","Select","BrowserSafeFonts","chunkArray","resultArray","chunkIndex","useFilter","collator","useCollator","substring","scan","sliceLen","slice","useFontSelectorState","currentPage","setCurrentPage","setFilterState","contains","allFonts","filteredFonts","FontSelectorPagination","total","FontSelector","FontList","gridClassName","FontListSkeleton","opacityAnimation","FontButton","isActive","displayName","Skeleton","ThemeFontPanel","radiusMap","ThemeRadiusPanel","RadiusSelector","hidePill","formKey","currentValue","PreviewButton","ThemeEditorForm","ThemeEditorBreadcrumb","lastSegment","allThemes","activeTheme","MenuEditorForm","MenuEditorBreadcrumb","allMenus","activeMenu","activeItem","LandingPageAppearanceForm","Breadcrumb","BaseSlider","inline","slider","fillColor","trackRef","getThumbPercent","getThumbValueLabel","groupId","thumbIds","isDisabled","numberFormatter","step","getValueLabel","outputValue","maxLabelLength","wrapperClassname","getWrapperHeight","getTrackColor","getTrackHeight","getFillColor","wrapperHeight","useSlider","onChangeEnd","showThumbOnHoverOnly","thumbSize","isPointerOver","setIsPointerOver","setValues","valuesRef","draggedThumbs","setDraggedThumbs","draggedThumbsRef","getFormattedValue","isThumbDragging","getThumbMinValue","getThumbMaxValue","setThumbValue","isThumbEditable","thisMin","thisMax","snapValueToStep","replaceIndex","updateDraggedThumbs","dragging","wasDragging","focusedThumb","setFocusedThumb","getValuePercent","setThumbPercent","percent","getPercentValue","getRoundedValue","editableThumbsRef","setThumbEditable","editable","realTimeTrackDraggingIndex","currentPointer","handlePointerDown","trackPosition","closestThumb","split","lastLeft","firstRight","onUpTrack","currentPosition","moveDomProps","SliderThumb","isThumbDisabled","ariaLabel","inputObjRef","isSliderDisabled","isDragging","focusInput","isFocused","handlePointerUp","thumbColor","Slider","otherProps","baseProps","FormSlider","LandingPageSectionGeneral","HeaderSection","FooterSection","defaultImage","formValue","LandingPageSectionActionButtons","LandingPageSectionPrimaryFeatures","remove","FeatureForm","LandingPageSecondaryFeatures","getDefaultImage"],"sources":["../../../common/foundation/resources/client/ui/library/images/svg-image.jsx","../../../common/foundation/resources/client/ui/library/toast/toast-timer.jsx","../../../common/foundation/resources/client/ui/library/toast/toast-store.jsx","../../../common/foundation/resources/client/ui/library/toast/toast.jsx","../../../common/foundation/resources/client/http/get-axios-error-message.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/cancel-filled-icon.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Warning.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/chip.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Error.jsx","../../../common/foundation/resources/client/text-editor/highlight/highlight-code.jsx","../../../common/foundation/resources/client/ui/library/icons/material/UnfoldMore.jsx","../../../common/foundation/resources/client/ui/library/icons/material/UnfoldLess.jsx","../../../common/foundation/resources/client/http/ignition-error-dialog/ignition-stack-trace.jsx","../../../common/foundation/resources/client/http/ignition-error-dialog/ignition-error-dialog.jsx","../../../common/foundation/resources/client/ui/library/overlays/store/dialog-store.jsx","../../../common/foundation/resources/client/http/show-http-error-toast.jsx","../../../common/foundation/resources/client/ui/navigation/use-navigate.jsx","../../../common/foundation/resources/client/ui/library/themes/utils/set-theme-value.jsx","../../../common/foundation/resources/client/ui/library/fonts/font-picker/load-fonts.jsx","../../../common/foundation/resources/client/admin/appearance/commands/use-appearance-editor-mode.jsx","../../../common/foundation/resources/client/admin/appearance/commands/appearance-listener.jsx","../../../common/foundation/resources/client/ui/library/utils/hooks/local-storage.jsx","../../../common/foundation/resources/client/ui/library/icons/material/ErrorOutline.jsx","../../../common/foundation/resources/client/ui/library/forms/form.jsx","../../../common/foundation/resources/client/ui/library/progress/full-page-loader.jsx","../../../common/foundation/resources/client/ui/library/images/illustrated-message.jsx","../../../common/foundation/resources/client/ui/library/icons/material/ArrowDropDown.jsx","../../../common/foundation/resources/client/ui/library/avatar/avatar-placeholder-icon.jsx","../../../common/foundation/resources/client/ui/library/avatar/avatar-initials-fallback.jsx","../../../common/foundation/resources/client/ui/library/avatar/avatar.jsx","../../../common/foundation/resources/client/ui/library/utils/files/extension-from-filename.jsx","../../../common/foundation/resources/client/ui/library/utils/files/get-file-mime.jsx","../../../common/foundation/resources/client/ui/library/utils/files/uploaded-file.jsx","../../../common/foundation/resources/client/uploads/uploader/strategy/s3-multipart-upload.jsx","../../../common/foundation/resources/client/uploads/uploader/strategy/tus-upload.jsx","../../../common/foundation/resources/client/uploads/uploader/backend-metadata.jsx","../../../common/foundation/resources/client/uploads/uploader/strategy/s3-upload.jsx","../../../common/foundation/resources/client/uploads/uploader/strategy/axios-upload.jsx","../../../common/foundation/resources/client/ui/library/utils/files/validate-file.jsx","../../../common/foundation/resources/client/uploads/uploader/progress-timeout.jsx","../../../common/foundation/resources/client/uploads/uploader/start-uploading.jsx","../../../common/foundation/resources/client/uploads/uploader/create-file-upload.jsx","../../../common/foundation/resources/client/uploads/uploader/file-upload-store.jsx","../../../common/foundation/resources/client/uploads/uploader/file-upload-provider.jsx","../../../common/foundation/resources/client/ui/library/utils/files/create-upload-input.jsx","../../../common/foundation/resources/client/ui/library/utils/files/open-upload-window.jsx","../../../common/foundation/resources/client/uploads/requests/delete-file-entries.jsx","../../../common/foundation/resources/client/uploads/uploader/use-active-upload.jsx","../../../common/foundation/resources/client/ui/library/progress/progress-bar-base.jsx","../../../common/foundation/resources/client/ui/library/progress/progress-bar.jsx","../../../common/foundation/resources/client/ui/library/icons/material/AddAPhoto.jsx","../../../common/foundation/resources/client/ui/library/utils/files/file-input-config.jsx","../../../common/foundation/resources/client/uploads/components/image-selector.jsx","../../../common/foundation/resources/client/http/value-lists.jsx","../../../common/foundation/resources/client/ui/library/overlays/dialog/confirmation-dialog.jsx","../../../resources/client/admin/appearance/app-appearance-config.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Add.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/chip-list.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/string-to-chip-value.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/chip-field.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Delete.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/drag-state.jsx","../../../common/foundation/resources/client/ui/library/interactions/interactable-event.jsx","../../../common/foundation/resources/client/ui/library/interactions/active-interaction.jsx","../../../common/foundation/resources/client/ui/library/interactions/utils/dom-rect-to-obj.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/update-rects.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-draggable.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/read-files-from-data-transfer.jsx","../../../common/foundation/resources/client/ui/library/utils/array/async-iterable-to-array.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-droppable.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/chip-field/form-chip-field.jsx","../../../common/foundation/resources/client/ui/library/interactions/use-pointer-events.jsx","../../../common/foundation/resources/client/ui/library/icons/material/MoreVert.jsx","../../../common/foundation/resources/client/ui/library/accordion/accordtion-animation.jsx","../../../common/foundation/resources/client/ui/library/accordion/accordion.jsx","../../../common/foundation/resources/client/admin/appearance/config/default-appearance-config.jsx","../../../common/foundation/resources/client/admin/appearance/config/merged-appearance-config.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-store.jsx","../../../common/foundation/resources/client/admin/appearance/requests/use-appearance-editor-values.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-editor-page.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-button.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/menu-list.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/hooks/available-routes.jsx","../../../common/foundation/resources/client/ui/library/utils/string/uc-first.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/add-menu-item-dialog.jsx","../../../common/foundation/resources/client/ui/library/icons/material/DragIndicator.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/dropdown-menu.svg","../../../common/foundation/resources/client/ui/library/interactions/dnd/sortable/sortable-line-strategy.jsx","../../../common/foundation/resources/client/ui/library/utils/array/move-item-in-array.jsx","../../../common/foundation/resources/client/ui/library/utils/array/move-item-in-new-array.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/sortable/sortable-transform-strategy.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/sortable/sortable-move-node-strategy.jsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/sortable/use-sortable.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/appearance-menu-editor.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/menu-item-editor.jsx","../../../common/foundation/resources/client/admin/appearance/requests/use-save-appearance-editor-changes.jsx","../../../common/foundation/resources/client/ui/library/overlays/dialog/blocker-dialog.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-editor-form.jsx","../../../common/foundation/resources/client/ui/navigation/use-previous-path.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-editor-breadcrumb.jsx","../../../common/foundation/resources/client/admin/appearance/sections/general-section.jsx","../../../common/foundation/resources/client/ui/library/utils/string/random-number.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-list.jsx","../../../common/foundation/resources/client/ace-editor/ace-dialog.jsx","../../../common/foundation/resources/client/admin/appearance/sections/seo/use-seo-tags.jsx","../../../common/foundation/resources/client/admin/appearance/sections/seo/use-update-seo-tags.jsx","../../../common/foundation/resources/client/admin/appearance/sections/seo/seo-section.jsx","../../../common/foundation/resources/client/admin/appearance/sections/code/custom-code-section.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/color-icon.jsx","../../../common/foundation/resources/client/ui/library/themes/utils/color-to-theme-value.jsx","../../../common/foundation/resources/client/ui/library/icons/material/Tune.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-settings-dialog-trigger.jsx","../../../common/foundation/resources/client/ui/library/icons/material/RestartAlt.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-more-options-button.jsx","../../../common/foundation/resources/client/ui/library/color-picker/color-presets.jsx","../../../common/foundation/resources/client/ui/library/color-picker/color-swatch.jsx","../../../common/foundation/resources/client/ui/library/color-picker/color-picker.jsx","../../../common/foundation/resources/client/ui/library/color-picker/color-picker-dialog.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/navbar-color-picker.jsx","../../../common/foundation/resources/client/admin/appearance/appearance-section-title.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-editor.jsx","../../../common/foundation/resources/client/admin/appearance/section-list.jsx","../../../common/foundation/resources/client/ui/font-selector/font.svg","../../../common/foundation/resources/client/ui/font-selector/font-selector-filters.jsx","../../../common/foundation/resources/client/ui/library/fonts/font-picker/browser-safe-fonts.jsx","../../../common/foundation/resources/client/ui/library/utils/array/chunk-array.jsx","../../../common/foundation/resources/client/ui/library/i18n/use-filter.jsx","../../../common/foundation/resources/client/ui/font-selector/font-selector-state.jsx","../../../common/foundation/resources/client/ui/font-selector/font-selector-pagination.jsx","../../../common/foundation/resources/client/ui/font-selector/font-selector.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-font-panel.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-radius-panel.jsx","../../../common/foundation/resources/client/admin/appearance/sections/themes/theme-editor-form.jsx","../../../common/foundation/resources/client/admin/appearance/sections/menus/menu-editor-form.jsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-appearance-form.jsx","../../../common/foundation/resources/client/ui/library/forms/slider/base-slider.jsx","../../../common/foundation/resources/client/ui/library/forms/slider/use-slider.jsx","../../../common/foundation/resources/client/ui/library/forms/slider/slider-thumb.jsx","../../../common/foundation/resources/client/ui/library/forms/slider/slider.jsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-general.jsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-action-buttons.jsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-primary-features.jsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-secondary-features.jsx"],"sourcesContent":["import { memo, useEffect, useState } from 'react';\nimport clsx from 'clsx';\nexport const SvgImage = memo(({\n  src,\n  className,\n  height = 'h-full'\n}) => {\n  const svgString = useSvgImageContent(src);\n  // render container even if image is not loaded yet, so there's\n  // no layout shift if height is provided via className\n  return <div className={clsx('svg-image-container inline-block bg-no-repeat', height, className)} dangerouslySetInnerHTML={svgString ? {\n    __html: svgString\n  } : undefined} />;\n});\nconst svgCache = new Map();\nfunction useSvgImageContent(src) {\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    const cached = svgCache.get(src);\n    if (cached) {\n      // svg was already fetched\n      if (typeof cached === 'string') {\n        setImage(cached);\n        //  svg is currently being fetched\n      } else {\n        cached.then(setImage);\n      }\n      // fetch the svg\n    } else {\n      const promise = fetchSvgImageContent(src);\n      svgCache.set(src, promise);\n      promise.then(svg => {\n        svgCache.set(src, svg);\n        setImage(svg);\n      });\n    }\n  }, [src]);\n  return image;\n}\nfunction fetchSvgImageContent(src) {\n  return fetch(src).then(response => response.text());\n}","export class ToastTimer {\n  createdAt = 0;\n  constructor(callback, remaining) {\n    this.callback = callback;\n    this.remaining = remaining;\n    this.resume();\n  }\n  pause() {\n    clearTimeout(this.timerId);\n    this.remaining -= Date.now() - this.createdAt;\n  }\n  resume() {\n    this.createdAt = Date.now();\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n    }\n    this.timerId = setTimeout(this.callback, this.remaining);\n  }\n  clear() {\n    clearTimeout(this.timerId);\n  }\n}","import { create } from 'zustand';\nimport { immer } from 'zustand/middleware/immer';\nimport { nanoid } from 'nanoid';\nimport { ToastTimer } from '@ui/toast/toast-timer';\nconst maximumVisible = 1;\nfunction getDefaultDuration(type) {\n  switch (type) {\n    case 'danger':\n      return 8000;\n    case 'loading':\n      return 0;\n    default:\n      return 3000;\n  }\n}\nexport const useToastStore = create()(immer((set, get) => ({\n  toasts: [],\n  add: (message, opts) => {\n    const amountToRemove = get().toasts.length + 1 - maximumVisible;\n    if (amountToRemove > 0) {\n      set(state => {\n        state.toasts.splice(0, amountToRemove);\n      });\n    }\n    const toastId = opts?.id || nanoid(6);\n    const toastType = opts?.type || 'positive';\n    const duration = opts?.duration ?? getDefaultDuration(toastType);\n    const toast = {\n      timer: duration > 0 ? new ToastTimer(() => get().remove(toastId), duration) : null,\n      message,\n      ...opts,\n      id: toastId,\n      type: toastType,\n      position: opts?.position || 'bottom-center',\n      duration,\n      disableExitAnimation: opts?.disableExitAnimation,\n      disableEnterAnimation: opts?.disableEnterAnimation\n    };\n    const toastIndex = get().toasts.findIndex(t => t.id === toast.id);\n    if (toastIndex > -1) {\n      set(state => {\n        state.toasts[toastIndex] = toast;\n      });\n    } else {\n      set(state => {\n        state.toasts.push(toast);\n      });\n    }\n  },\n  remove: toastId => {\n    const newToasts = get().toasts.filter(toast => {\n      if (toastId === toast.id) {\n        toast.timer?.clear();\n        return false;\n      }\n      return true;\n    });\n    set(state => {\n      state.toasts = newToasts;\n    });\n  }\n})));\nexport function toastState() {\n  return useToastStore.getState();\n}","import { toastState } from '@ui/toast/toast-store';\nexport function toast(message, opts) {\n  toastState().add(message, opts);\n}\ntoast.danger = (message, opts) => {\n  toastState().add(message, {\n    ...opts,\n    type: 'danger'\n  });\n};\ntoast.positive = (message, opts) => {\n  toastState().add(message, {\n    ...opts,\n    type: 'positive'\n  });\n};\ntoast.loading = (message, opts) => {\n  toastState().add(message, {\n    ...opts,\n    type: 'loading'\n  });\n};","import axios from 'axios';\nexport function getAxiosErrorMessage(err, field) {\n  if (axios.isAxiosError(err) && err.response) {\n    const response = err.response.data;\n    if (field != null) {\n      const fieldMessage = response.errors?.[field];\n      return Array.isArray(fieldMessage) ? fieldMessage[0] : fieldMessage;\n    }\n    return response?.message;\n  }\n}","import { createSvgIcon } from '@ui/icons/create-svg-icon';\nexport const CancelFilledIcon = createSvgIcon(<path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" />);","import { createSvgIcon } from '../create-svg-icon';\nexport const WarningIcon = createSvgIcon(<path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\" />, 'WarningOutlined');","import React, { cloneElement, useRef } from 'react';\nimport clsx from 'clsx';\nimport { useFocusManager } from '@react-aria/focus';\nimport { ButtonBase } from '@ui/buttons/button-base';\nimport { CancelFilledIcon } from './cancel-filled-icon';\nimport { WarningIcon } from '@ui/icons/material/Warning';\nimport { Tooltip } from '@ui/tooltip/tooltip';\nexport function Chip(props) {\n  const {\n    onRemove,\n    disabled,\n    invalid,\n    errorMessage,\n    children,\n    className,\n    selectable = false,\n    radius = 'rounded-full',\n    elementType = 'div',\n    to,\n    onClick\n  } = props;\n  const chipRef = useRef(null);\n  const deleteButtonRef = useRef(null);\n  const focusManager = useFocusManager();\n  const handleKeyDown = e => {\n    switch (e.key) {\n      case 'ArrowRight':\n      case 'ArrowDown':\n        focusManager?.focusNext({\n          tabbable: true\n        });\n        break;\n      case 'ArrowLeft':\n      case 'ArrowUp':\n        focusManager?.focusPrevious({\n          tabbable: true\n        });\n        break;\n      case 'Backspace':\n      case 'Delete':\n        if (chipRef.current === document.activeElement) {\n          onRemove?.();\n        }\n        break;\n      default:\n    }\n  };\n  const handleClick = e => {\n    e.stopPropagation();\n    if (onClick) {\n      onClick(e);\n    } else {\n      chipRef.current.focus();\n    }\n  };\n  const sizeStyle = sizeClassNames(props);\n  let adornment = invalid || errorMessage != null ? <WarningIcon className=\"text-danger\" size=\"sm\" /> : props.adornment && cloneElement(props.adornment, {\n    size: sizeStyle.adornment.size,\n    circle: true,\n    className: clsx(props.adornment.props.className, sizeStyle.adornment.margin)\n  });\n  if (errorMessage && adornment) {\n    adornment = <Tooltip label={errorMessage} variant=\"danger\">\n        {adornment}\n      </Tooltip>;\n  }\n  const Element = elementType;\n  return <Element tabIndex={selectable ? 0 : undefined} ref={chipRef} to={to} onKeyDown={selectable ? handleKeyDown : undefined} onClick={selectable ? handleClick : undefined} className={clsx('relative flex flex-shrink-0 items-center justify-center gap-10 overflow-hidden whitespace-nowrap outline-none transition-opacity', 'min-w-0 max-w-full after:pointer-events-none after:absolute after:inset-0', onClick && 'cursor-pointer', radius, colorClassName(props), sizeStyle.chip, !disabled && selectable && 'hover:after:bg-black/5 focus:after:bg-black/10', className, disabled && 'pointer-events-none opacity-70')}>\n      {adornment}\n      <div className=\"flex-auto overflow-hidden overflow-ellipsis\">\n        {children}\n      </div>\n      {onRemove && <ButtonBase ref={deleteButtonRef} className={clsx('text-black/30 dark:text-white/50', sizeStyle.closeButton)} onClick={e => {\n      e.stopPropagation();\n      onRemove();\n    }} tabIndex={-1}>\n          <CancelFilledIcon className=\"block\" width=\"100%\" height=\"100%\" />\n        </ButtonBase>}\n    </Element>;\n}\nfunction sizeClassNames({\n  size,\n  onRemove\n}) {\n  switch (size) {\n    case 'xs':\n      return {\n        adornment: {\n          size: 'xs',\n          margin: '-ml-3'\n        },\n        chip: clsx('pl-4 h-8 text-xs font-medium text-center w-max', !onRemove && 'pr-4'),\n        closeButton: 'mr-4 w-14 h-14'\n      };\n    case 'sm':\n      return {\n        adornment: {\n          size: 'xs',\n          margin: '-ml-3'\n        },\n        chip: clsx('pl-8 h-26 text-xs', !onRemove && 'pr-8'),\n        closeButton: 'mr-4 w-18 h-18'\n      };\n    case 'lg':\n      return {\n        adornment: {\n          size: 'md',\n          margin: '-ml-12'\n        },\n        chip: clsx('pl-18 h-38 text-base', !onRemove && 'pr-18'),\n        closeButton: 'mr-6 w-24 h-24'\n      };\n    default:\n      return {\n        adornment: {\n          size: 'sm',\n          margin: '-ml-6'\n        },\n        chip: clsx('pl-12 h-32 text-sm', !onRemove && 'pr-12'),\n        closeButton: 'mr-6 w-22 h-22'\n      };\n  }\n}\nfunction colorClassName({\n  color\n}) {\n  switch (color) {\n    case 'primary':\n      return `bg-primary text-on-primary`;\n    case 'positive':\n      return `bg-positive-lighter text-positive-darker`;\n    case 'danger':\n      return `bg-danger-lighter text-danger-darker`;\n    default:\n      return `bg-chip text-main`;\n  }\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const ErrorIcon = createSvgIcon(<path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\" />, 'ErrorOutlined');","export function highlightAllCode(el, themeMode = 'dark') {\n  el.querySelectorAll('pre code').forEach(e => {\n    highlightCode(e, themeMode);\n  });\n}\nexport async function highlightCode(el, themeMode = 'dark') {\n  const {\n    hljs\n  } = await import('@common/text-editor/highlight/highlight');\n  if (!el.dataset.highlighted) {\n    el.classList.add(themeMode === 'dark' ? 'hljs-dark' : 'hljs-light');\n    hljs.highlightElement(el);\n  }\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const UnfoldMoreIcon = createSvgIcon(<path d=\"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z\" />, 'UnfoldMoreOutlined');","import { createSvgIcon } from '../create-svg-icon';\nexport const UnfoldLessIcon = createSvgIcon(<path d=\"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z\" />, 'UnfoldLessOutlined');","import React, { Fragment, useState } from 'react';\nimport { Trans } from '@ui/i18n/trans';\nimport { KeyboardArrowDownIcon } from '@ui/icons/material/KeyboardArrowDown';\nimport clsx from 'clsx';\nimport { Button } from '@ui/buttons/button';\nimport { UnfoldMoreIcon } from '@ui/icons/material/UnfoldMore';\nimport { UnfoldLessIcon } from '@ui/icons/material/UnfoldLess';\nexport function IgnitionStackTrace({\n  trace,\n  onSelectedIndexChange,\n  selectedIndex,\n  totalVendorGroups\n}) {\n  const [expandedVendorGroups, setExpandedVendorGroups] = useState([]);\n  const allVendorGroupsExpanded = expandedVendorGroups.length === totalVendorGroups;\n  return <div className=\"max-w-440 border-r text-sm\">\n      <div className=\"border-b px-30 py-16\">\n        <Button variant=\"outline\" size=\"2xs\" startIcon={allVendorGroupsExpanded ? <UnfoldLessIcon /> : <UnfoldMoreIcon />} onClick={() => {\n        if (allVendorGroupsExpanded) {\n          setExpandedVendorGroups([]);\n        } else {\n          setExpandedVendorGroups(trace.map((frame, index) => 'vendorGroup' in frame ? index : -1).filter(index => index !== -1));\n        }\n      }}>\n          {allVendorGroupsExpanded ? <Trans message=\"Collapse vendor frames\" /> : <Trans message=\"Expand vendor frames\" />}\n        </Button>\n      </div>\n      {trace.map((frame, index) => {\n      if ('vendorGroup' in frame) {\n        // vendor group is expanded, display all vendor frames\n        if (expandedVendorGroups.includes(index)) {\n          return <Fragment key={index}>\n                {frame.items.map((vendorFrame, index) => <StackTrackItem key={`vendor-${index}`} frame={vendorFrame} onClick={() => onSelectedIndexChange(vendorFrame.flatIndex)} isSelected={selectedIndex === vendorFrame.flatIndex} />)}\n              </Fragment>;\n        }\n        // vendor group is collapsed, only show vendor group header\n        return <div className=\"flex cursor-pointer items-center gap-4 border-b px-30 py-16 hover:bg-hover\" key={index} onClick={() => setExpandedVendorGroups(prev => [...prev, index])}>\n              <Trans message=\":count vendor [one frame|other frames]\" values={{\n            count: frame.items.length\n          }} />\n              <KeyboardArrowDownIcon className=\"text-muted\" />\n            </div>;\n      }\n\n      // app frame item\n      return <StackTrackItem key={index} frame={frame} onClick={() => onSelectedIndexChange(frame.flatIndex)} isSelected={selectedIndex === frame.flatIndex} />;\n    })}\n    </div>;\n}\nfunction StackTrackItem({\n  frame,\n  onClick,\n  isSelected\n}) {\n  return <div onClick={onClick} className={clsx('cursor-pointer border-b px-30 py-16', isSelected ? 'bg-danger text-on-primary' : 'hover:bg-danger/10')}>\n      <IgnitionFilePath frame={frame} />\n      <div className=\"font-semibold\">{frame.method}</div>\n    </div>;\n}\nexport function IgnitionFilePath({\n  frame\n}) {\n  return <div className=\"inline-flex flex-wrap items-baseline\">\n      {frame.path.map((part, index) => frame.path.length - 1 === index ? <div key={index} className=\"font-semibold\">\n            {part}\n          </div> : <div key={index}>{part}/</div>)}\n      <div>:{frame.lineNumber}</div>\n    </div>;\n}","import { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogHeader } from '@ui/overlays/dialog/dialog-header';\nimport { Trans } from '@ui/i18n/trans';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { Chip } from '@ui/forms/input-field/chip-field/chip';\nimport React, { memo, useEffect, useMemo, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { ErrorIcon } from '@ui/icons/material/Error';\nimport { highlightCode } from '@common/text-editor/highlight/highlight-code';\nimport { IgnitionFilePath, IgnitionStackTrace } from '@common/http/ignition-error-dialog/ignition-stack-trace';\nimport { Button } from '@ui/buttons/button';\nexport function IgnitionErrorDialog({\n  error\n}) {\n  const [selectedIndex, setSelectedIndex] = useState(() => {\n    for (const frame of error.trace) {\n      if (!('vendorGroup' in frame)) {\n        return frame.flatIndex;\n      }\n    }\n    return 0;\n  });\n  const selectedFrame = useMemo(() => {\n    for (const frame of error.trace) {\n      if ('vendorGroup' in frame) {\n        for (const vendorFrame of frame.items) {\n          if (vendorFrame.flatIndex === selectedIndex) {\n            return vendorFrame;\n          }\n        }\n      } else if (frame.flatIndex === selectedIndex) {\n        return frame;\n      }\n    }\n  }, [error, selectedIndex]);\n  return <Dialog size=\"fullscreen\">\n      <DialogHeader showDivider leftAdornment={<ErrorIcon />} color=\"text-danger\" actions={<DownloadButton />}>\n        <Trans message=\"An error occured\" />\n      </DialogHeader>\n      <DialogBody padding=\"p-0 stack\">\n        <div className=\"sticky top-0 z-10 border-b bg p-24\">\n          <Chip className=\"w-max\" radius=\"rounded-panel\">\n            {error.exception}\n          </Chip>\n          <div className=\"mt-16 line-clamp-2 text-lg font-semibold leading-snug\">\n            {error.message}\n          </div>\n        </div>\n        <div className=\"flex items-stretch gap-10\">\n          <IgnitionStackTrace trace={error.trace} onSelectedIndexChange={setSelectedIndex} selectedIndex={selectedIndex} totalVendorGroups={error.totalVendorGroups} />\n          {selectedFrame && <CodeSnippet frame={selectedFrame} />}\n        </div>\n      </DialogBody>\n    </Dialog>;\n}\nfunction CodeSnippet({\n  frame\n}) {\n  const codeRef = useRef(null);\n  const lineNumbers = Object.keys(frame.codeSnippet).map(Number);\n  const highlightedIndex = lineNumbers.indexOf(frame.lineNumber);\n  const lines = Object.values(frame.codeSnippet);\n  return <div className=\"sticky top-120 flex-auto\">\n      <div className=\"px-30 py-16 text-right text-muted\">\n        <IgnitionFilePath frame={frame} />\n      </div>\n      <div className=\"flex\">\n        <div className=\"mr-8 select-none text-right\">\n          {lineNumbers.map((lineNumber, index) => <div className={clsx('px-8 font-mono leading-loose text-muted', index == highlightedIndex && 'bg-danger/30')} key={index}>\n              {lineNumber}\n            </div>)}\n        </div>\n        <div className=\"compact-scrollbar flex-grow overflow-x-auto\">\n          <pre>\n            <code className=\"language-php\" ref={codeRef}>\n              {lines.map((line, index) => <CodeSnippetLine isHighlighted={highlightedIndex === index} key={`${frame.path}.${index}`} line={line} />)}\n            </code>\n          </pre>\n        </div>\n      </div>\n    </div>;\n}\nconst CodeSnippetLine = memo(({\n  line,\n  isHighlighted\n}) => {\n  const ref = useRef(null);\n  useEffect(() => {\n    const el = ref.current;\n    highlightCode(el, 'light');\n    return () => {\n      delete el.dataset.highlighted;\n    };\n  }, []);\n  return <span className={clsx('block leading-loose', isHighlighted && 'bg-danger/20')}>\n      <span className=\"language-php\" ref={ref}>\n        {line + '\\n'}\n      </span>\n    </span>;\n});\nfunction DownloadButton() {\n  return <Button variant=\"outline\" className=\"text-main\" elementType=\"a\" download href=\"api/v1/logs/error/download-latest\" size=\"2xs\">\n      <Trans message=\"Download log\" />\n    </Button>;\n}","import { create } from 'zustand';\nimport { immer } from 'zustand/middleware/immer';\nexport const useDialogStore = create()(immer((set, get) => ({\n  dialog: null,\n  data: undefined,\n  resolveClosePromise: null,\n  openDialog: (dialog, data) => {\n    return new Promise(resolve => {\n      set(state => {\n        state.dialog = dialog;\n        state.data = data;\n        state.resolveClosePromise = resolve;\n      });\n    });\n  },\n  closeActiveDialog: value => {\n    get().resolveClosePromise?.(value);\n    set(state => {\n      state.dialog = null;\n      state.data = undefined;\n      state.resolveClosePromise = null;\n    });\n  }\n})));\nexport const openDialog = useDialogStore.getState().openDialog;\nexport const closeDialog = value => {\n  useDialogStore.getState().closeActiveDialog(value);\n};","import { toast } from '@ui/toast/toast';\nimport { getAxiosErrorMessage } from './get-axios-error-message';\nimport { message } from '@ui/i18n/message';\nimport axios from 'axios';\nimport { IgnitionErrorDialog } from '@common/http/ignition-error-dialog/ignition-error-dialog';\nimport { openDialog } from '@ui/overlays/store/dialog-store';\nconst defaultErrorMessage = message('There was an issue. Please try again.');\nexport function showHttpErrorToast(err, defaultMessage = defaultErrorMessage, field, toastOptions) {\n  if (axios.isAxiosError(err) && err.response?.data?.ignitionTrace) {\n    openDialog(IgnitionErrorDialog, {\n      error: err.response.data\n    });\n  } else {\n    toast.danger(getAxiosErrorMessage(err, field) || defaultMessage, {\n      action: err.response?.data?.action,\n      ...toastOptions\n    });\n  }\n}","import { createPath, resolvePath, useLocation, useNavigate as useRouterNavigate } from 'react-router';\nimport { useCallback } from 'react';\nexport function useNavigate() {\n  const routerNavigate = useRouterNavigate();\n  const location = useLocation();\n  return useCallback((to, options) => {\n    // prevent duplicates in history when navigating to the same url\n    const replace = createPath(location) === createPath(resolvePath(to, location.pathname));\n    routerNavigate(to, {\n      ...options,\n      replace: options?.replace !== false && replace\n    });\n  }, [routerNavigate, location]);\n}","import { themeEl } from '@ui/root-el';\nexport function setThemeValue(key, value) {\n  themeEl?.style.setProperty(key, value);\n}\nexport function removeThemeValue(key) {\n  themeEl?.style.removeProperty(key);\n}","import lazyLoader from '@ui/utils/loaders/lazy-loader';\nfunction prefixId(id) {\n  return `be-fonts-${id}`;\n}\nexport function loadFonts(fonts, options) {\n  const doc = options.document || document;\n  const googleFonts = [];\n  const customFonts = [];\n  let promises = [];\n  fonts.forEach(font => {\n    if ('google' in font && font.google) {\n      googleFonts.push(font);\n    } else if ('src' in font) {\n      customFonts.push(font);\n    }\n    // native fonts don't need to be loaded, they are already available in the browser\n  });\n  if (googleFonts?.length) {\n    const weights = options.weights || [400];\n    const families = fonts.map(f => `${f.family}:${weights.join(',')}`).join('|');\n    const googlePromise = lazyLoader.loadAsset(`https://fonts.googleapis.com/css?family=${families}&display=swap`, {\n      type: 'css',\n      id: prefixId(options.id),\n      force: options.forceAssetLoad,\n      document: doc\n    });\n    promises.push(googlePromise);\n  }\n  if (customFonts?.length) {\n    const customFontPromises = customFonts.map(async fontConfig => {\n      const loadedFont = Array.from(doc.fonts.values()).find(current => {\n        return current.family === fontConfig.family;\n      });\n      if (loadedFont) {\n        return loadedFont.loaded;\n      }\n      const fontFace = new FontFace(fontConfig.family, `url(${options?.prefixSrc ? options.prefixSrc(fontConfig.src) : fontConfig.src})`, fontConfig.descriptors);\n      doc.fonts.add(fontFace);\n      return fontFace.load();\n    });\n    promises = promises.concat(customFontPromises);\n  }\n  return Promise.all(promises);\n}","import { isSsr } from '@ui/utils/dom/is-ssr';\nexport function useAppearanceEditorMode() {\n  const iframe = window.frameElement || undefined;\n  if (!iframe?.src || isSsr()) {\n    return {\n      isAppearanceEditorActive: false,\n      appearanceEditorParams: {}\n    };\n  }\n  const search = new URL(iframe.src).searchParams;\n  return {\n    isAppearanceEditorActive: !isSsr() && search.get('appearanceEditor') === 'true',\n    appearanceEditorParams: Object.fromEntries(search)\n  };\n}","import { useCallback, useEffect, useRef } from 'react';\nimport { removeThemeValue, setThemeValue } from '@ui/themes/utils/set-theme-value';\nimport { loadFonts } from '@ui/fonts/font-picker/load-fonts';\nimport { mergeBootstrapData, useBootstrapDataStore } from '@ui/bootstrap-data/bootstrap-data-store';\nimport deepMerge from 'deepmerge';\nimport { useAppearanceEditorMode } from '@common/admin/appearance/commands/use-appearance-editor-mode';\nimport { useThemeSelector } from '@ui/themes/theme-selector-context';\nexport function AppearanceListener() {\n  const {\n    isAppearanceEditorActive\n  } = useAppearanceEditorMode();\n  const alreadyFiredLoadedEvent = useRef(false);\n  const currentData = useBootstrapDataStore(s => s.data);\n  const {\n    selectThemeTemporarily\n  } = useThemeSelector();\n  const handleCommand = useCallback(command => {\n    switch (command.type) {\n      case 'setValues':\n        const newData = {};\n        if (command.values.appearance?.themes) {\n          newData.themes = command.values.appearance.themes;\n        }\n        if (command.values.settings) {\n          newData.settings = deepMerge(currentData.settings, command.values.settings, {\n            arrayMerge: (_, source) => source\n          });\n        }\n        return mergeBootstrapData(newData);\n      case 'setThemeFont':\n        if (command.value) {\n          setThemeValue('--be-font-family', command.value.family);\n          loadFonts([command.value], {\n            id: 'be-primary-font',\n            forceAssetLoad: true\n          });\n        } else {\n          removeThemeValue('--be-font-family');\n        }\n        return;\n      case 'setThemeValue':\n        return setThemeValue(command.name, command.value);\n      case 'setActiveTheme':\n        selectThemeTemporarily(command.themeId);\n        return;\n      case 'setCustomCode':\n        return renderCustomCode(command.mode, command.value);\n      default:\n    }\n  }, [currentData, selectThemeTemporarily]);\n  useEffect(() => {\n    const handleMessage = e => {\n      if (isAppearanceEvent(e) && eventIsTrusted(e)) {\n        handleCommand(e.data);\n      }\n    };\n    window.addEventListener('message', handleMessage);\n    if (isAppearanceEditorActive && !alreadyFiredLoadedEvent.current) {\n      window.postMessage({\n        source: 'be-appearance-preview',\n        type: 'appLoaded'\n      }, '*');\n      alreadyFiredLoadedEvent.current = true;\n    }\n    return () => {\n      window.removeEventListener('message', handleMessage);\n    };\n  }, [handleCommand, isAppearanceEditorActive]);\n  return null;\n}\nfunction isAppearanceEvent(e) {\n  return e.data?.source === 'be-appearance-editor';\n}\nfunction eventIsTrusted(e) {\n  return new URL(e.origin).hostname === window.location.hostname;\n}\nfunction renderCustomCode(mode, value) {\n  const parent = mode === 'html' ? document.body : document.head;\n  const nodeType = mode === 'html' ? 'div' : 'style';\n  let customNode = parent.querySelector('#be-custom-code');\n  if (!value) {\n    if (customNode) {\n      customNode.remove();\n    }\n  } else {\n    if (!customNode) {\n      customNode = document.createElement(nodeType);\n      customNode.id = 'be-custom-code';\n      parent.appendChild(customNode);\n    }\n    customNode.innerHTML = value;\n  }\n}","import { useEffect, useState } from 'react';\nexport function useLocalStorage(key, initialValue = null) {\n  const [storedValue, setStoredValue] = useState(() => {\n    return getFromLocalStorage(key, initialValue);\n  });\n  const setValue = value => {\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    setStoredValue(valueToStore);\n    setInLocalStorage(key, valueToStore);\n  };\n\n  // update state value using custom storage event. This will re-render\n  // component even if local storage value was set from different hook instance\n  useEffect(() => {\n    const handleStorageChange = event => {\n      if (event.detail?.key === key) {\n        setStoredValue(event.detail.newValue);\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, [key]);\n  return [storedValue, setValue];\n}\nexport function getFromLocalStorage(key, initialValue = null) {\n  if (typeof window === 'undefined') {\n    return initialValue;\n  }\n  try {\n    const item = window.localStorage.getItem(key);\n    return item != null ? JSON.parse(item) : initialValue;\n  } catch (error) {\n    return initialValue;\n  }\n}\nexport function setInLocalStorage(key, value) {\n  try {\n    if (typeof window !== 'undefined') {\n      window.localStorage.setItem(key, JSON.stringify(value));\n      window.dispatchEvent(new CustomEvent('storage', {\n        detail: {\n          key,\n          newValue: value\n        }\n      }));\n    }\n  } catch (error) {\n    //\n  }\n}\nexport function removeFromLocalStorage(key) {\n  try {\n    if (typeof window !== 'undefined') {\n      window.localStorage.removeItem(key);\n    }\n  } catch (error) {\n    //\n  }\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const ErrorOutlineIcon = createSvgIcon(<path d=\"M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" />, 'ErrorOutlineOutlined');","import { FormProvider } from 'react-hook-form';\nexport function Form({\n  children,\n  onBeforeSubmit,\n  onSubmit,\n  form,\n  className,\n  id,\n  onBlur\n}) {\n  return <FormProvider {...form}>\n      <form id={id} onBlur={onBlur} className={className} onSubmit={e => {\n      // prevent parent forms from submitting, if nested\n      e.stopPropagation();\n      onBeforeSubmit?.();\n      form.handleSubmit(onSubmit)(e);\n    }}>\n        {children}\n      </form>\n    </FormProvider>;\n}","import React from 'react';\nimport clsx from 'clsx';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nexport function FullPageLoader({\n  className,\n  screen\n}) {\n  return <div className={clsx('flex flex-auto items-center justify-center', screen ? 'h-screen w-screen' : 'h-full w-full', className)}>\n      <ProgressCircle isIndeterminate aria-label=\"Loading page...\" size=\"md\" />\n    </div>;\n}","import React from 'react';\nimport clsx from 'clsx';\nexport function IllustratedMessage({\n  image,\n  title,\n  description,\n  action,\n  className,\n  size = 'md',\n  imageHeight,\n  imageMargin = 'mb-24'\n}) {\n  const style = getSizeClassName(size, imageHeight);\n  return <div className={clsx('text-center', className)}>\n      {image && <div className={clsx(style.image, imageMargin)}>{image}</div>}\n      {title && <div className={clsx(style.title, 'mb-2 text-main')}>{title}</div>}\n      {description && <div className={clsx(style.description, 'text-muted')}>\n          {description}\n        </div>}\n      {action && <div className=\"mt-20\">{action}</div>}\n    </div>;\n}\nfunction getSizeClassName(size, imageHeight) {\n  switch (size) {\n    case 'xs':\n      return {\n        image: imageHeight || 'h-60',\n        title: 'text-sm',\n        description: 'text-xs'\n      };\n    case 'sm':\n      return {\n        image: imageHeight || 'h-80',\n        title: 'text-base',\n        description: 'text-sm'\n      };\n    default:\n      return {\n        image: imageHeight || 'h-128',\n        title: 'text-lg',\n        description: 'text-base'\n      };\n  }\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const ArrowDropDownIcon = createSvgIcon(<path d=\"m7 10 5 5 5-5H7z\" />, 'ArrowDropDownOutlined');","import { createSvgIcon } from '@ui/icons/create-svg-icon';\nexport const AvatarPlaceholderIcon = createSvgIcon(<path d=\"M24,12 C28.418278,12 32,15.581722 32,20 L32,22 C32,26.418278 28.418278,30 24,30 C19.581722,30 16,26.418278 16,22 L16,20 C16,15.581722 19.581722,12 24,12 Z M24,32 C33.8734019,32 42.1092023,38.8710577 44,48 L4,48 C5.89079771,38.8710577 14.1265981,32 24,32 Z\"></path>);","import clsx from 'clsx';\nimport React, { forwardRef, useMemo } from 'react';\nconst colors = ['#3b82f6', '#6366f1', '#0284c7', '#9333ea', '#059669', '#ea580c', '#dc2626', '#06b6d4', '#e11d48'];\nexport const AvatarInitialsFallback = forwardRef(({\n  size,\n  label,\n  labelForBackground,\n  color\n}, ref) => {\n  const {\n    initial,\n    bgColor\n  } = useMemo(() => {\n    const bgLabel = labelForBackground || label || '';\n    const hash = bgLabel.split('').reduce((accum, val) => val.charCodeAt(0) + accum, bgLabel.length);\n    return {\n      initial: label.slice(0, 1).toUpperCase(),\n      bgColor: colors[hash % colors.length]\n    };\n  }, [label, labelForBackground]);\n  return <div ref={ref} style={!color ? {\n    backgroundColor: bgColor\n  } : undefined} className={clsx('flex h-full w-full items-center justify-center font-semibold leading-normal text-on-primary', color, getTextFallbackFontSize(size))}>\n        {initial}\n      </div>;\n});\nfunction getTextFallbackFontSize(size) {\n  switch (size) {\n    case 'xs':\n      return 'text-xs';\n    case 'sm':\n      return 'text-xs';\n    case 'xl':\n      return 'text-xl';\n    case 'md':\n      return 'text-base';\n    default:\n      return '';\n  }\n}","import clsx from 'clsx';\nimport React, { forwardRef } from 'react';\nimport { Link } from 'react-router';\nimport { Tooltip } from '@ui/tooltip/tooltip';\nimport { AvatarPlaceholderIcon } from '@ui/avatar/avatar-placeholder-icon';\nimport { AvatarInitialsFallback } from '@ui/avatar/avatar-initials-fallback';\nexport const Avatar = forwardRef(function ({\n  className,\n  circle,\n  size = 'md',\n  src,\n  link,\n  label,\n  labelForBackground,\n  fallback = 'initials',\n  fallbackColor,\n  lazy = true,\n  ...domProps\n}, ref) {\n  let renderedAvatar = src ? <img ref={ref} src={src} alt={label} loading={lazy ? 'lazy' : undefined} className=\"block h-full w-full object-cover\" /> : fallback === 'initials' && label ? <AvatarInitialsFallback size={size} label={label} labelForBackground={labelForBackground} color={fallbackColor} /> : <div className=\"h-full w-full bg-alt dark:bg-chip\">\n      <AvatarPlaceholderIcon viewBox=\"0 0 48 48\" className=\"h-full w-full text-muted\" />\n    </div>;\n  if (label) {\n    renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n  }\n  const wrapperProps = {\n    ...domProps,\n    className: clsx(className, 'relative block overflow-hidden select-none flex-shrink-0', getSizeClassName(size), circle ? 'rounded-full' : 'rounded')\n  };\n  return link ? <Link {...wrapperProps} to={link}>\n      {renderedAvatar}\n    </Link> : <div {...wrapperProps}>{renderedAvatar}</div>;\n});\nfunction getSizeClassName(size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    case 'xl':\n      return 'w-60 h-60';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}","export function extensionFromFilename(fullFileName) {\n  const re = /(?:\\.([^.]+))?$/;\n  return re.exec(fullFileName)?.[1] || '';\n}","import { extensionFromFilename } from './extension-from-filename';\nexport function getFileMime(file) {\n  const extensionsToMime = {\n    md: 'text/markdown',\n    markdown: 'text/markdown',\n    mp4: 'video/mp4',\n    mp3: 'audio/mp3',\n    svg: 'image/svg+xml',\n    jpg: 'image/jpeg',\n    png: 'image/png',\n    gif: 'image/gif',\n    yaml: 'text/yaml',\n    yml: 'text/yaml',\n    log: 'text/plain'\n  };\n  const fileExtension = file.name ? extensionFromFilename(file.name) : null;\n\n  // check if mime type is set in the file object\n  if (file.type) {\n    return file.type;\n  }\n\n  // see if we can map extension to a mime type\n  if (fileExtension && fileExtension in extensionsToMime) {\n    return extensionsToMime[fileExtension];\n  }\n  return 'application/octet-stream';\n}","import { getFileMime } from '@ui/utils/files/get-file-mime';\nimport { extensionFromFilename } from '@ui/utils/files/extension-from-filename';\nimport { nanoid } from 'nanoid';\nexport class UploadedFile {\n  relativePath = '';\n  mime = '';\n  extension = '';\n  get data() {\n    return new Promise(resolve => {\n      if (this.cachedData) {\n        resolve(this.cachedData);\n      }\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        this.cachedData = reader.result;\n        resolve(this.cachedData);\n      });\n      if (this.extension === 'json') {\n        reader.readAsText(this.native);\n      } else {\n        reader.readAsDataURL(this.native);\n      }\n    });\n  }\n  constructor(file, relativePath) {\n    this.id = nanoid();\n    this.name = file.name;\n    this.size = file.size;\n    this.mime = getFileMime(file);\n    this.lastModified = file.lastModified;\n    this.extension = extensionFromFilename(file.name) || 'bin';\n    this.native = file;\n    relativePath = relativePath || file.webkitRelativePath || '';\n\n    // remove leading slashes\n    relativePath = relativePath.replace(/^\\/+/g, '');\n\n    // only include relative path if file is actually in a folder and not just /file.txt\n    if (relativePath && relativePath.split('/').length > 1) {\n      this.relativePath = relativePath;\n    }\n    this.fingerprint = generateFingerprint({\n      name: this.name,\n      size: this.size,\n      mime: this.mime,\n      lastModified: this.lastModified\n    });\n  }\n}\nexport class UploadedFileFromEntry {\n  relativePath = '';\n  mime = '';\n  extension = '';\n  native = null;\n  get data() {\n    return new Promise((resolve, reject) => {\n      reject('UploadedFileFromEntry does not have file data');\n    });\n  }\n  constructor(entry) {\n    this.id = nanoid();\n    this.name = entry.name;\n    this.size = entry.file_size ?? 0;\n    this.mime = entry.mime;\n    this.lastModified = entry.updated_at || '';\n    this.extension = entry.extension || 'bin';\n    this.relativePath = entry.path;\n    this.fingerprint = generateFingerprint({\n      name: this.name,\n      size: this.size,\n      mime: this.mime,\n      lastModified: this.lastModified\n    });\n  }\n}\nfunction generateFingerprint({\n  name,\n  mime,\n  size,\n  relativePath,\n  lastModified\n}) {\n  let id = 'be';\n  if (typeof name === 'string') {\n    id += `-${encodeFilename(name.toLowerCase())}`;\n  }\n  if (mime) {\n    id += `-${mime}`;\n  }\n  if (typeof relativePath === 'string') {\n    id += `-${encodeFilename(relativePath.toLowerCase())}`;\n  }\n  if (size !== undefined) {\n    id += `-${size}`;\n  }\n  if (lastModified !== undefined) {\n    id += `-${lastModified}`;\n  }\n  return id;\n}\nfunction encodeCharacter(character) {\n  return character.charCodeAt(0).toString(32);\n}\nfunction encodeFilename(name) {\n  let suffix = '';\n  return name.replace(/[^A-Z0-9]/gi, character => {\n    suffix += `-${encodeCharacter(character)}`;\n    return '/';\n  }) + suffix;\n}","import axios from 'axios';\nimport { getFromLocalStorage, removeFromLocalStorage, setInLocalStorage } from '@ui/utils/hooks/local-storage';\nimport { apiClient } from '@common/http/query-client';\nimport { getAxiosErrorMessage } from '@common/http/get-axios-error-message';\nimport axiosRetry from 'axios-retry';\nconst oneMB = 1024 * 1024;\n// chunk size that will be uploaded to s3 per request\nconst desiredChunkSize = 20 * oneMB;\n// how many urls should be pre-signed per call to backend\nconst batchSize = 10;\n// number of concurrent requests to s3 api\nconst concurrency = 5;\nexport class S3MultipartUpload {\n  chunks = [];\n  abortedByUser = false;\n  get storageKey() {\n    return `s3-multipart::${this.file.fingerprint}`;\n  }\n  constructor(file, config) {\n    this.file = file;\n    this.config = config;\n    this.abortController = new AbortController();\n    this.chunkAxios = axios.create();\n    axiosRetry(this.chunkAxios, {\n      retries: 3\n    });\n  }\n  async start() {\n    const storedUrl = getFromLocalStorage(this.storageKey);\n    if (storedUrl) {\n      await this.getUploadedParts(storedUrl);\n    }\n    if (!this.uploadedParts?.length) {\n      await this.createMultipartUpload();\n      if (!this.uploadId) return;\n    }\n    this.prepareChunks();\n    const result = await this.uploadParts();\n    if (result === 'done') {\n      const isCompleted = await this.completeMultipartUpload();\n      if (!isCompleted) return;\n\n      // catch any errors so below \"onError\" handler gets executed\n      try {\n        const response = await this.createFileEntry();\n        if (response?.fileEntry) {\n          this.config.onSuccess?.(response?.fileEntry, this.file);\n          removeFromLocalStorage(this.storageKey);\n          return;\n        }\n      } catch {}\n    }\n\n    // upload failed\n    if (!this.abortController.signal.aborted) {\n      this.abortController.abort();\n    }\n    if (!this.abortedByUser) {\n      this.config.onError?.(null, this.file);\n    }\n  }\n  async abort() {\n    this.abortedByUser = true;\n    this.abortController.abort();\n    await this.abortUploadOnS3();\n  }\n  async uploadParts() {\n    const pendingChunks = this.chunks.filter(c => !c.done);\n    if (!pendingChunks.length) {\n      return Promise.resolve('done');\n    }\n    const signedUrls = await this.batchSignUrls(pendingChunks.slice(0, batchSize));\n    if (!signedUrls) return;\n    while (signedUrls.length) {\n      const batch = signedUrls.splice(0, concurrency);\n      const pendingUploads = batch.map(item => {\n        return this.uploadPartToS3(item);\n      });\n      const result = await Promise.all(pendingUploads);\n      \n      // Check for failed parts and retry them\n      const failedParts = [];\n      result.forEach((success, index) => {\n        if (!success) {\n          const failedItem = batch[index];\n          const chunk = this.chunks.find(c => c.partNumber === failedItem.partNumber);\n          if (chunk && !chunk.retryCount) chunk.retryCount = 0;\n          if (chunk && chunk.retryCount < 3) {\n            chunk.retryCount++;\n            failedParts.push(failedItem);\n          } else {\n            // Max retries exceeded, abort upload\n            console.error(`Part ${failedItem.partNumber} failed after 3 retries`);\n            return;\n          }\n        }\n      });\n      \n      // Retry failed parts immediately\n      if (failedParts.length > 0) {\n        console.log(`Retrying ${failedParts.length} failed parts...`);\n        const retryUploads = failedParts.map(item => this.uploadPartToS3(item));\n        const retryResults = await Promise.all(retryUploads);\n        // If any retries still fail, they'll be caught in the next iteration\n      }\n    }\n    return await this.uploadParts();\n  }\n  async batchSignUrls(batch) {\n    const response = await this.chunkAxios.post('api/v1/s3/multipart/batch-sign-part-urls', {\n      partNumbers: batch.map(i => i.partNumber),\n      uploadId: this.uploadId,\n      key: this.fileKey\n    }, {\n      signal: this.abortController.signal\n    }).then(r => r.data).catch(err => {\n      if (!this.abortController.signal.aborted) {\n        this.abortController.abort();\n      }\n    });\n    return response?.urls;\n  }\n  async uploadPartToS3({\n    url,\n    partNumber\n  }) {\n    const chunk = this.chunks.find(c => c.partNumber === partNumber);\n    if (!chunk) return false;\n    \n    try {\n      const response = await this.chunkAxios.put(url, chunk.blob, {\n        withCredentials: false,\n        signal: this.abortController.signal,\n        onUploadProgress: e => {\n          if (!e.event.lengthComputable) return;\n          chunk.bytesUploaded = e.loaded;\n          const totalUploaded = this.chunks.reduce((n, c) => n + c.bytesUploaded, 0);\n          this.config.onProgress?.({\n            bytesUploaded: totalUploaded,\n            bytesTotal: this.file.size\n          });\n        }\n      });\n      \n      const etag = response.headers.etag;\n      if (etag) {\n        chunk.done = true;\n        chunk.etag = etag;\n        return true;\n      }\n      return false;\n    } catch (err) {\n      // Don't abort entire upload for individual part failures\n      if (this.abortController.signal.aborted) {\n        return false;\n      }\n      \n      // Log the error for debugging\n      console.warn(`Part ${partNumber} upload failed:`, err.message || err);\n      \n      // Reset progress for failed chunk\n      chunk.bytesUploaded = 0;\n      \n      return false;\n    }\n  }\n  async createMultipartUpload() {\n    const response = await apiClient.post('s3/multipart/create', {\n      filename: this.file.name,\n      mime: this.file.mime,\n      size: this.file.size,\n      extension: this.file.extension,\n      ...this.config.metadata\n    }).then(r => r.data).catch(err => {\n      if (err.code !== 'ERR_CANCELED') {\n        this.config.onError?.(getAxiosErrorMessage(err), err);\n      }\n    });\n    if (response) {\n      this.uploadId = response.uploadId;\n      this.fileKey = response.key;\n      setInLocalStorage(this.storageKey, {\n        createdAt: new Date().toISOString(),\n        fileKey: this.fileKey,\n        uploadId: this.uploadId\n      });\n    }\n  }\n  async getUploadedParts({\n    fileKey,\n    uploadId\n  }) {\n    const response = await apiClient.post('s3/multipart/get-uploaded-parts', {\n      key: fileKey,\n      uploadId\n    }).then(r => r.data).catch(() => {\n      removeFromLocalStorage(this.storageKey);\n      return null;\n    });\n    if (response?.parts?.length) {\n      this.uploadedParts = response.parts;\n      this.uploadId = uploadId;\n      this.fileKey = fileKey;\n    }\n  }\n  async completeMultipartUpload() {\n    return apiClient.post('s3/multipart/complete', {\n      key: this.fileKey,\n      uploadId: this.uploadId,\n      parts: this.chunks.map(c => {\n        return {\n          ETag: c.etag,\n          PartNumber: c.partNumber\n        };\n      })\n    }).then(r => r.data).catch(() => {\n      this.config.onError?.(null, this.file);\n      this.abortUploadOnS3();\n    }).finally(() => {\n      removeFromLocalStorage(this.storageKey);\n    });\n  }\n  async createFileEntry() {\n    return await apiClient.post('s3/entries', {\n      ...this.config.metadata,\n      clientMime: this.file.mime,\n      clientName: this.file.name,\n      filename: this.fileKey.split('/').pop(),\n      size: this.file.size,\n      clientExtension: this.file.extension\n    }).then(r => r.data).catch();\n  }\n  prepareChunks() {\n    this.chunks = [];\n    // at least 5MB per request, at most 10k requests\n    const minChunkSize = Math.max(5 * oneMB, Math.ceil(this.file.size / 10000));\n    const chunkSize = Math.max(desiredChunkSize, minChunkSize);\n\n    // Upload zero-sized files in one zero-sized chunk\n    if (this.file.size === 0) {\n      this.chunks.push({\n        blob: this.file.native,\n        done: false,\n        partNumber: 1,\n        bytesUploaded: 0\n      });\n    } else {\n      let partNumber = 1;\n      for (let i = 0; i < this.file.size; i += chunkSize) {\n        const end = Math.min(this.file.size, i + chunkSize);\n        // check if this part was already uploaded previously\n        const previouslyUploaded = this.uploadedParts?.find(p => p.PartNumber === partNumber);\n        this.chunks.push({\n          blob: this.file.native.slice(i, end),\n          done: !!previouslyUploaded,\n          partNumber,\n          etag: previouslyUploaded ? previouslyUploaded.ETag : undefined,\n          bytesUploaded: previouslyUploaded?.Size ? parseInt(previouslyUploaded?.Size) : 0\n        });\n        partNumber++;\n      }\n    }\n  }\n  abortUploadOnS3() {\n    return apiClient.post('s3/multipart/abort', {\n      key: this.fileKey,\n      uploadId: this.uploadId\n    });\n  }\n  static async create(file, config) {\n    return new S3MultipartUpload(file, config);\n  }\n}","import { Upload } from 'tus-js-client';\nimport { getAxiosErrorMessage } from '@common/http/get-axios-error-message';\nimport { apiClient } from '@common/http/query-client';\nimport { getCookie } from 'react-use-cookie';\nexport class TusUpload {\n  constructor(upload, uploadGroupHash) {\n    this.upload = upload;\n    this.uploadGroupHash = uploadGroupHash;\n  }\n  start() {\n    this.upload.start();\n  }\n  abort() {\n    return this.upload.abort(true);\n  }\n  static async create(file, {\n    onProgress,\n    onSuccess,\n    onError,\n    metadata,\n    chunkSize,\n    baseUrl\n  }) {\n    const tusFingerprint = ['tus', file.fingerprint, 'drive'].join('-');\n    const upload = new Upload(file.native, {\n      fingerprint: () => Promise.resolve(tusFingerprint),\n      removeFingerprintOnSuccess: true,\n      endpoint: `${baseUrl}/api/v1/tus/upload`,\n      chunkSize,\n      retryDelays: [0, 3000, 5000, 10000, 20000],\n      overridePatchMethod: true,\n      metadata: {\n        name: window.btoa(file.id),\n        clientName: file.name,\n        clientExtension: file.extension,\n        clientMime: file.mime || '',\n        clientSize: `${file.size}`,\n        ...metadata\n      },\n      headers: {\n        'X-XSRF-TOKEN': getCookie('XSRF-TOKEN')\n      },\n      onError: err => {\n        let errorDetails = {\n          code: 'TUS_ERROR'\n        };\n        if ('originalResponse' in err && err.originalResponse) {\n          try {\n            const responseBody = err.originalResponse.getBody();\n            const parsedError = JSON.parse(responseBody);\n            const message = parsedError?.message;\n            errorDetails = {\n              code: 'TUS_SERVER_ERROR',\n              response: {\n                status: err.originalResponse.getStatus(),\n                data: parsedError\n              }\n            };\n            onError?.(message, errorDetails);\n          } catch (e) {\n            onError?.(null, errorDetails);\n          }\n        } else {\n          // Network or client-side error\n          errorDetails.code = 'TUS_NETWORK_ERROR';\n          onError?.(null, errorDetails);\n        }\n      },\n      onProgress(bytesUploaded, bytesTotal) {\n        onProgress?.({\n          bytesUploaded,\n          bytesTotal\n        });\n      },\n      onSuccess: async () => {\n        const uploadKey = upload.url?.split('/').pop();\n        try {\n          if (uploadKey) {\n            const response = await createFileEntry(uploadKey, {\n              upload_group_hash: metadata.upload_group_hash,\n              password: metadata.password,\n              expires_in_hours: metadata.expires_in_hours,\n              max_downloads: metadata.max_downloads,\n              sender_email: metadata.sender_email,\n              sender_name: metadata.sender_name,\n              message: metadata.message\n            });\n            \n            // Store the upload_group_hash for subsequent files to use\n            if (response.upload_group_hash && !metadata.upload_group_hash) {\n              // This was the first file, store the hash for subsequent files\n              window.currentUploadGroupHash = response.upload_group_hash;\n            }\n            \n            // Upload is complete - no processing feedback needed\n            // Background jobs will handle heavy operations silently\n            onSuccess?.(response.fileEntry, file);\n          }\n        } catch (err) {\n          localStorage.removeItem(tusFingerprint);\n          onError?.(getAxiosErrorMessage(err), err);\n        }\n      }\n    });\n    const previousUploads = await upload.findPreviousUploads();\n    if (previousUploads.length) {\n      upload.resumeFromPreviousUpload(previousUploads[0]);\n    }\n    return new TusUpload(upload, metadata.upload_group_hash);\n  }\n}\nfunction createFileEntry(uploadKey, options = {}) {\n  return apiClient.post('tus/entries', {\n    uploadKey,\n    upload_group_hash: options.upload_group_hash || null,\n    password: options.password || null,\n    expires_in_hours: options.expires_in_hours || null,\n    max_downloads: options.max_downloads || null,\n    sender_email: options.sender_email || null,\n    sender_name: options.sender_name || null,\n    message: options.message || null\n  }).then(r => r.data);\n}\n\n","export let Disk = /*#__PURE__*/function (Disk) {\n  Disk[\"public\"] = \"public\";\n  Disk[\"uploads\"] = \"uploads\";\n  return Disk;\n}({});","import axios from 'axios';\nimport { getAxiosErrorMessage } from '@common/http/get-axios-error-message';\nimport { apiClient } from '@common/http/query-client';\nexport class S3Upload {\n  constructor(file, config) {\n    this.file = file;\n    this.config = config;\n    this.abortController = new AbortController();\n  }\n  async start() {\n    this.presignedRequest = await this.presignPostUrl();\n    if (!this.presignedRequest) return;\n    const result = await this.uploadFileToS3();\n    if (result !== 'uploaded') return;\n    const response = await this.createFileEntry();\n    if (response?.fileEntry) {\n      this.config.onSuccess?.(response.fileEntry, this.file);\n    } else if (!this.abortController.signal) {\n      this.config.onError?.(null, this.file);\n    }\n  }\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n  presignPostUrl() {\n    return apiClient.post('s3/simple/presign', {\n      filename: this.file.name,\n      mime: this.file.mime,\n      disk: this.config.metadata?.disk,\n      size: this.file.size,\n      extension: this.file.extension,\n      ...this.config.metadata\n    }, {\n      signal: this.abortController.signal\n    }).then(r => r.data).catch(err => {\n      if (err.code !== 'ERR_CANCELED') {\n        this.config.onError?.(getAxiosErrorMessage(err), err);\n      }\n    });\n  }\n  uploadFileToS3() {\n    const {\n      url,\n      acl\n    } = this.presignedRequest;\n    return axios.put(url, this.file.native, {\n      signal: this.abortController.signal,\n      withCredentials: false,\n      headers: {\n        'Content-Type': this.file.mime,\n        'x-amz-acl': acl\n      },\n      onUploadProgress: e => {\n        if (e.event.lengthComputable) {\n          this.config.onProgress?.({\n            bytesUploaded: e.loaded,\n            bytesTotal: e.total || 0\n          });\n        }\n      }\n    }).then(() => 'uploaded').catch(err => {\n      if (err.code !== 'ERR_CANCELED') {\n        this.config.onError?.(getAxiosErrorMessage(err), err);\n      }\n    });\n  }\n  async createFileEntry() {\n    return await apiClient.post('s3/entries', {\n      ...this.config.metadata,\n      clientMime: this.file.mime,\n      clientName: this.file.name,\n      filename: this.presignedRequest.key.split('/').pop(),\n      size: this.file.size,\n      clientExtension: this.file.extension\n    }).then(r => {\n      return r.data;\n    }).catch(err => {\n      if (err.code !== 'ERR_CANCELED') {\n        this.config.onError?.(getAxiosErrorMessage(err), err);\n      }\n    });\n  }\n  static async create(file, config) {\n    return new S3Upload(file, config);\n  }\n}","import { apiClient } from '@common/http/query-client';\nimport { getAxiosErrorMessage } from '@common/http/get-axios-error-message';\nexport class AxiosUpload {\n  constructor(file, config) {\n    this.file = file;\n    this.config = config;\n    this.abortController = new AbortController();\n  }\n  async start() {\n    const formData = new FormData();\n    const {\n      onSuccess,\n      onError,\n      onProgress,\n      metadata\n    } = this.config;\n    formData.set('file', this.file.native);\n    formData.set('clientMime', this.file.mime);\n    formData.set('clientExtension', this.file.extension);\n    if (metadata) {\n      Object.entries(metadata).forEach(([key, value]) => {\n        formData.set(key, `${value}`);\n      });\n    }\n    const response = await apiClient.post('file-entries', formData, {\n      onUploadProgress: e => {\n        if (e.event.lengthComputable) {\n          onProgress?.({\n            bytesUploaded: e.loaded,\n            bytesTotal: e.total || 0\n          });\n        }\n      },\n      signal: this.abortController.signal,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).catch(err => {\n      if (err.code !== 'ERR_CANCELED') {\n        onError?.(getAxiosErrorMessage(err), err);\n      }\n    });\n\n    // if upload was aborted, it will be handled and set\n    // as \"aborted\" already, no need to set it as \"failed\"\n    if (this.abortController.signal.aborted) {\n      return;\n    }\n    if (response && response.data.fileEntry) {\n      onSuccess?.(response.data.fileEntry, this.file);\n    }\n  }\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n  static async create(file, config) {\n    return new AxiosUpload(file, config);\n  }\n}","import { message } from '@ui/i18n/message';\nimport { prettyBytes } from '@ui/utils/files/pretty-bytes';\nimport match from 'mime-match';\nexport function validateFile(file, restrictions) {\n  if (!restrictions) return;\n  const {\n    maxFileSize,\n    allowedFileTypes,\n    blockedFileTypes\n  } = restrictions;\n  if (maxFileSize && file.size != null && file.size > maxFileSize) {\n    return message('`:file` exceeds maximum allowed size of :size', {\n      values: {\n        file: file.name,\n        size: prettyBytes(maxFileSize)\n      }\n    });\n  }\n  if (allowedFileTypes?.length) {\n    if (!fileMatchesTypes(file, allowedFileTypes)) {\n      return message('This file type is not allowed');\n    }\n  }\n  if (blockedFileTypes?.length) {\n    if (fileMatchesTypes(file, blockedFileTypes)) {\n      return message('This file type is not allowed');\n    }\n  }\n}\nfunction fileMatchesTypes(file, types) {\n  return types\n  // support multiple file types in a string (video/mp4,audio/mp3,image/png)\n  .map(type => type.split(',')).flat().some(type => {\n    // check if this is a mime-type\n    if (type.includes('/')) {\n      if (!file.mime) return false;\n      return match(file.mime.replace(/;.*?$/, ''), type);\n    }\n\n    // otherwise this is likely an extension\n    const extension = type.replace('.', '').toLowerCase();\n    if (extension && file.extension) {\n      return file.extension.toLowerCase() === extension;\n    }\n    return false;\n  });\n}","export class ProgressTimeout {\n  isDone = false;\n  timeout = 30000;\n  timeoutHandler = null;\n  progress() {\n    // Some browsers fire another progress event when the upload is\n    // cancelled, so we have to ignore progress after the timer was\n    // told to stop.\n    if (this.isDone || !this.timeoutHandler) return;\n    if (this.timeout > 0) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = setTimeout(this.timeoutHandler, this.timeout);\n    }\n  }\n  done() {\n    if (!this.isDone) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = null;\n      this.isDone = true;\n    }\n  }\n}","import { Disk } from './backend-metadata';\nimport { S3MultipartUpload } from './strategy/s3-multipart-upload';\nimport { S3Upload } from './strategy/s3-upload';\nimport { TusUpload } from './strategy/tus-upload';\nimport { AxiosUpload } from './strategy/axios-upload';\nimport { validateFile } from '@ui/utils/files/validate-file';\nimport { getBootstrapData } from '@ui/bootstrap-data/bootstrap-data-store';\nimport { toast } from '@ui/toast/toast';\nimport { ProgressTimeout } from './progress-timeout';\nimport { message } from '@ui/i18n/message';\nexport async function startUploading(upload, state) {\n  const settings = getBootstrapData().settings;\n  const options = upload.options;\n  const file = upload.file;\n\n  // validate file, if validation fails, error the upload and bail\n  if (options?.restrictions) {\n    const errorMessage = validateFile(file, options.restrictions);\n    if (errorMessage) {\n      state.updateFileUpload(file.id, {\n        errorMessage,\n        status: 'failed',\n        request: undefined,\n        timer: undefined\n      });\n      if (options.showToastOnRestrictionFail) {\n        toast.danger(errorMessage);\n      }\n      state.runQueue();\n      return null;\n    }\n  }\n\n  // prepare config for file upload strategy\n  const timer = new ProgressTimeout();\n  const config = {\n    metadata: {\n      ...options?.metadata,\n      relativePath: file.relativePath,\n      disk: options?.metadata?.disk || Disk.uploads,\n      parentId: options?.metadata?.parentId || ''\n    },\n    chunkSize: settings.uploads.chunk_size,\n    baseUrl: settings.base_url,\n    onError: (errorMessage, errorDetails) => {\n      // Categorize the error type and extract error code\n      let errorType = 'unknown';\n      let errorCode;\n      if (errorDetails) {\n        if (errorDetails.code === 'ERR_NETWORK' || errorDetails.code === 'NETWORK_ERROR') {\n          errorType = 'network';\n        } else if (errorDetails.response?.status) {\n          const status = errorDetails.response.status;\n          errorCode = status;\n          if (status >= 500) {\n            errorType = 'server';\n          } else if (status >= 400 && status < 500) {\n            errorType = status === 422 ? 'validation' : 'server';\n          }\n        }\n      }\n\n      // For network and server errors, allow retries\n      const canRetry = errorType === 'network' || errorType === 'server';\n      state.updateFileUpload(file.id, {\n        errorMessage,\n        status: 'failed',\n        errorType,\n        errorCode,\n        maxRetries: canRetry ? 3 : 0,\n        retryCount: 0,\n        retryDelay: 1000\n      });\n      state.runQueue();\n      timer.done();\n      options?.onError?.(errorMessage, file);\n      if (options.showToastOnBackendError && errorMessage) {\n        toast.danger(errorMessage);\n      }\n    },\n    onSuccess: entry => {\n      state.updateFileUpload(file.id, {\n        status: 'completed',\n        entry\n      });\n      state.runQueue();\n      timer.done();\n      options?.onSuccess?.(entry, file);\n    },\n    onProgress: ({\n      bytesUploaded,\n      bytesTotal\n    }) => {\n      const currentTime = Date.now();\n      const percentage = bytesUploaded / bytesTotal * 100;\n\n      // Get the previous progress data for speed calculation\n      const currentUpload = state.getUpload(file.id);\n      const previousTimestamp = currentUpload?.previousTimestamp || currentTime;\n      const previousBytes = currentUpload?.previousBytes || 0;\n\n      // Calculate speed and ETA\n      let speed = 0;\n      let eta = 0;\n      const timeDelta = currentTime - previousTimestamp;\n      if (timeDelta > 0 && bytesUploaded > previousBytes) {\n        // Calculate instantaneous speed in bytes per second\n        const bytesDelta = bytesUploaded - previousBytes;\n        speed = bytesDelta / timeDelta * 1000; // Convert from bytes/ms to bytes/sec\n\n        // Calculate ETA in seconds\n        const remainingBytes = bytesTotal - bytesUploaded;\n        if (speed > 0) {\n          eta = remainingBytes / speed;\n        }\n      }\n      \n      state.updateFileUpload(file.id, {\n        percentage,\n        bytesUploaded,\n        speed,\n        eta,\n        previousTimestamp: currentTime,\n        previousBytes: bytesUploaded\n      });\n      timer.progress();\n      options?.onProgress?.({\n        bytesUploaded,\n        bytesTotal\n      });\n    }\n  };\n\n  // choose and create upload strategy, based on file size and settings\n  const strategy = chooseUploadStrategy(file, config);\n  const request = await strategy.create(file, config);\n\n  // add handler for when upload times out (no progress for 30+ seconds)\n  timer.timeoutHandler = () => {\n    request.abort();\n    state.updateFileUpload(file.id, {\n      status: 'failed',\n      errorMessage: message('Upload timed out')\n    });\n    state.runQueue();\n  };\n  state.updateFileUpload(file.id, {\n    status: 'inProgress',\n    request\n  });\n  request.start();\n  return request;\n}\nconst OneMB = 1024 * 1024;\nconst FourMB = 4 * OneMB;\nconst HundredMB = 100 * OneMB;\nconst chooseUploadStrategy = (file, config) => {\n  const settings = getBootstrapData().settings;\n  const disk = config.metadata?.disk || Disk.uploads;\n  const driver = disk === Disk.uploads ? settings.uploads.uploads_driver : settings.uploads.public_driver;\n  if (driver?.endsWith('s3') && settings.uploads.s3_direct_upload) {\n    return file.size >= HundredMB ? S3MultipartUpload : S3Upload;\n  } else {\n    // 4MB = Axios, otherwise Tus\n    return file.size >= FourMB && !settings.uploads.disable_tus ? TusUpload : AxiosUpload;\n  }\n};","import { UploadedFile } from '@ui/utils/files/uploaded-file';\nexport function createUpload(file, strategyConfig, storeOptions) {\n  let uploadedFile = file instanceof UploadedFile ? file : new UploadedFile(file);\n  if (storeOptions?.modifyUploadedFile) {\n    uploadedFile = storeOptions.modifyUploadedFile(uploadedFile);\n  }\n  return {\n    file: uploadedFile,\n    percentage: 0,\n    bytesUploaded: 0,\n    status: 'pending',\n    options: strategyConfig || {},\n    retryCount: 0,\n    maxRetries: 3,\n    retryDelay: 1000,\n    isRetrying: false\n  };\n}","import { create } from 'zustand';\nimport { immer } from 'zustand/middleware/immer';\nimport { enableMapSet } from 'immer';\nimport { UploadedFileFromEntry } from '@ui/utils/files/uploaded-file';\nimport { S3MultipartUpload } from './strategy/s3-multipart-upload';\nimport { TusUpload } from './strategy/tus-upload';\nimport { startUploading } from './start-uploading';\nimport { createUpload } from './create-file-upload';\nenableMapSet();\nconst initialState = {\n  concurrency: 3,\n  fileUploads: new Map(),\n  activeUploadsCount: 0,\n  completedUploadsCount: 0\n};\nexport const createFileUploadStore = ({\n  settings,\n  options\n}) => create()(immer((set, get) => {\n  return {\n    ...initialState,\n    reset: () => {\n      set(initialState);\n    },\n    getUpload: uploadId => {\n      return get().fileUploads.get(uploadId);\n    },\n    getCompletedFileEntries: () => {\n      return [...get().fileUploads.values()].filter(u => !!u.entry).map(u => u.entry);\n    },\n    clearInactive: () => {\n      set(state => {\n        state.fileUploads.forEach((upload, key) => {\n          if (upload.status !== 'inProgress') {\n            state.fileUploads.delete(key);\n          }\n        });\n      });\n      get().runQueue();\n    },\n    abortUpload: id => {\n      const upload = get().fileUploads.get(id);\n      if (upload) {\n        upload.request?.abort();\n        get().updateFileUpload(id, {\n          status: 'aborted',\n          percentage: 0\n        });\n        get().runQueue();\n      }\n    },\n    retryUpload: id => {\n      const upload = get().fileUploads.get(id);\n      if (upload && upload.status === 'failed') {\n        const currentRetryCount = upload.retryCount || 0;\n        const maxRetries = upload.maxRetries || 3;\n        if (currentRetryCount < maxRetries) {\n          // Calculate exponential backoff delay\n          const baseDelay = upload.retryDelay || 1000;\n          const delay = baseDelay * Math.pow(2, currentRetryCount);\n          get().updateFileUpload(id, {\n            status: 'pending',\n            isRetrying: true,\n            retryCount: currentRetryCount + 1,\n            percentage: 0,\n            bytesUploaded: 0,\n            speed: 0,\n            eta: 0,\n            previousTimestamp: undefined,\n            previousBytes: undefined,\n            errorMessage: undefined,\n            request: undefined,\n            timer: undefined\n          });\n\n          // Implement exponential backoff\n          setTimeout(() => {\n            get().updateFileUpload(id, {\n              isRetrying: false\n            });\n            get().runQueue();\n          }, delay);\n        }\n      }\n    },\n    updateFileUpload: (id, newUploadState) => {\n      set(state => {\n        const fileUpload = state.fileUploads.get(id);\n        if (fileUpload) {\n          state.fileUploads.set(id, {\n            ...fileUpload,\n            ...newUploadState\n          });\n\n          // only need to update inProgress count if status of the uploads in queue change\n          if ('status' in newUploadState) {\n            updateTotals(state);\n          }\n        }\n      });\n    },\n    addCompletedFileUpload: entry => {\n      set(state => {\n        state.fileUploads.set(`${entry.id}`, {\n          file: new UploadedFileFromEntry(entry),\n          status: 'completed',\n          entry,\n          percentage: 100,\n          bytesUploaded: entry.file_size || 0,\n          options: {}\n        });\n        updateTotals(state);\n      });\n    },\n    uploadSingle: (file, userOptions) => {\n      const upload = createUpload(file, userOptions, options);\n      const fileUploads = new Map(get().fileUploads);\n      fileUploads.set(upload.file.id, upload);\n      set(state => {\n        updateTotals(state);\n        state.fileUploads = fileUploads;\n      });\n      get().runQueue();\n      return upload.file.id;\n    },\n    removeUpload: id => {\n      set(state => {\n        state.fileUploads.delete(id);\n        updateTotals(state);\n      });\n    },\n    uploadMultiple: (files, strategyConfig) => {\n      // create file upload items from specified files\n      const uploads = new Map(get().fileUploads);\n      [...files].forEach(file => {\n        const upload = createUpload(file, strategyConfig, options);\n        uploads.set(upload.file.id, upload);\n      });\n\n      // set state only once, there might be thousands of files, don't want to trigger a rerender for each one\n      set(state => {\n        updateTotals(state);\n        state.fileUploads = uploads;\n      });\n      get().runQueue();\n      return [...uploads.keys()];\n    },\n    runQueue: async () => {\n      const uploads = [...get().fileUploads.values()];\n      const activeUploads = uploads.filter(u => u.status === 'inProgress');\n      let concurrency = get().concurrency;\n      if (activeUploads.filter(activeUpload =>\n      // only upload one file from folder at a time to avoid creating duplicate folders\n      activeUpload.file.relativePath ||\n      // only allow one s3 multipart upload at a time, it will already upload multiple parts in parallel\n      activeUpload.request instanceof S3MultipartUpload ||\n      // only allow one tus upload if file is larger than chunk size, tus will have parallel uploads already in that case\n      activeUpload.request instanceof TusUpload && settings.uploads.chunk_size && activeUpload.file.size > settings.uploads.chunk_size).length) {\n        concurrency = 1;\n      }\n      if (activeUploads.length < concurrency) {\n        //const pendingUploads = uploads.filter(u => u.status === 'pending');\n        //const next = pendingUploads.find(a => !!a.request);\n        const next = uploads.find(u => u.status === 'pending');\n        if (next) {\n          await startUploading(next, get());\n        }\n      }\n    }\n  };\n}));\nconst updateTotals = state => {\n  state.completedUploadsCount = [...state.fileUploads.values()].filter(u => u.status === 'completed').length;\n  state.activeUploadsCount = [...state.fileUploads.values()].filter(u => u.status === 'inProgress' || u.status === 'pending').length;\n};","import { createContext, useContext, useState } from 'react';\nimport { createFileUploadStore } from '@common/uploads/uploader/file-upload-store';\nimport { useSettings } from '@ui/settings/use-settings';\nimport { useStoreWithEqualityFn } from 'zustand/traditional';\nconst FileUploadContext = createContext(null);\nexport function useFileUploadStore(selector, equalityFn) {\n  const store = useContext(FileUploadContext);\n  return useStoreWithEqualityFn(store, selector, equalityFn);\n}\nexport function FileUploadProvider({\n  children,\n  options\n}) {\n  const settings = useSettings();\n\n  //lazily create store object only once\n  const [store] = useState(() => {\n    return createFileUploadStore({\n      settings,\n      options\n    });\n  });\n  return <FileUploadContext.Provider value={store}>\n      {children}\n    </FileUploadContext.Provider>;\n}","export function createUploadInput(config = {}) {\n  const old = document.querySelector('#hidden-file-upload-input');\n  if (old) old.remove();\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.multiple = config.multiple ?? false;\n  input.classList.add('hidden');\n  input.style.display = 'none';\n  input.style.visibility = 'hidden';\n  input.id = 'hidden-file-upload-input';\n  input.accept = buildUploadInputAccept(config);\n  if (config.directory) {\n    input.webkitdirectory = true;\n  }\n  document.body.appendChild(input);\n  return input;\n}\nexport function buildUploadInputAccept({\n  extensions = [],\n  types = []\n}) {\n  const accept = [];\n  if (extensions?.length) {\n    extensions = extensions.map(e => {\n      return e.startsWith('.') ? e : `.${e}`;\n    });\n    accept.push(extensions.join(','));\n  }\n  if (types?.length) {\n    accept.push(types.join(','));\n  }\n  return accept.join(',');\n}","import { UploadedFile } from '@ui/utils/files/uploaded-file';\nimport { createUploadInput } from '@ui/utils/files/create-upload-input';\n/**\n * Open browser dialog for uploading files and\n * resolve promise with uploaded files.\n */\nexport function openUploadWindow(config = {}) {\n  return new Promise(resolve => {\n    const input = createUploadInput(config);\n    input.onchange = e => {\n      const fileList = e.target.files;\n      if (!fileList) {\n        return resolve([]);\n      }\n      const uploads = Array.from(fileList).filter(f => f.name !== '.DS_Store').map(file => new UploadedFile(file));\n      resolve(uploads);\n      input.remove();\n    };\n    document.body.appendChild(input);\n    input.click();\n  });\n}","import { useMutation } from '@tanstack/react-query';\nimport { apiClient } from '../../http/query-client';\nimport { showHttpErrorToast } from '../../http/show-http-error-toast';\nfunction deleteFileEntries(payload) {\n  return apiClient.post('file-entries/delete', payload).then(r => r.data);\n}\nexport function useDeleteFileEntries() {\n  return useMutation({\n    mutationFn: props => deleteFileEntries(props),\n    onError: err => showHttpErrorToast(err)\n  });\n}","import { useCallback, useRef } from 'react';\nimport { useFileUploadStore } from './file-upload-provider';\nimport { openUploadWindow } from '@ui/utils/files/open-upload-window';\nimport { useDeleteFileEntries } from '@common/uploads/requests/delete-file-entries';\nexport function useActiveUpload() {\n  const deleteFileEntries = useDeleteFileEntries();\n\n  // use ref for setting ID to avoid extra renders, zustand selector\n  // will pick up changed selector on first progress event\n  const uploadIdRef = useRef();\n  const uploadSingle = useFileUploadStore(s => s.uploadSingle);\n  const _abortUpload = useFileUploadStore(s => s.abortUpload);\n  const updateFileUpload = useFileUploadStore(s => s.updateFileUpload);\n  const activeUpload = useFileUploadStore(s => uploadIdRef.current ? s.fileUploads.get(uploadIdRef.current) : null);\n  const uploadFile = useCallback((file, config) => {\n    uploadIdRef.current = uploadSingle(file, config);\n  }, [uploadSingle]);\n  const selectAndUploadFile = useCallback(async config => {\n    const files = await openUploadWindow({\n      types: config?.restrictions?.allowedFileTypes\n    });\n    uploadFile(files[0], config);\n    return files[0];\n  }, [uploadFile]);\n  const deleteEntry = useCallback(({\n    onSuccess,\n    entryPath\n  }) => {\n    const handleSuccess = () => {\n      if (activeUpload) {\n        updateFileUpload(activeUpload.file.id, {\n          ...activeUpload,\n          entry: undefined\n        });\n      }\n      onSuccess();\n    };\n    if (!entryPath && !activeUpload?.entry?.id) {\n      handleSuccess();\n      return;\n    }\n    deleteFileEntries.mutate({\n      paths: entryPath ? [entryPath] : undefined,\n      entryIds: activeUpload?.entry?.id ? [activeUpload?.entry?.id] : undefined,\n      deleteForever: true\n    }, {\n      onSuccess: handleSuccess\n    });\n  }, [deleteFileEntries, activeUpload, updateFileUpload]);\n  const abortUpload = useCallback(() => {\n    if (activeUpload) {\n      _abortUpload(activeUpload.file.id);\n    }\n  }, [activeUpload, _abortUpload]);\n  return {\n    uploadFile,\n    selectAndUploadFile,\n    percentage: activeUpload?.percentage || 0,\n    uploadStatus: activeUpload?.status,\n    entry: activeUpload?.entry,\n    deleteEntry,\n    isDeletingEntry: deleteFileEntries.isPending,\n    activeUpload,\n    abortUpload\n  };\n}","import React, { useId } from 'react';\nimport clsx from 'clsx';\nimport { clamp } from '@ui/utils/number/clamp';\nimport { useNumberFormatter } from '@ui/i18n/use-number-formatter';\nimport { getInputFieldClassNames } from '@ui/forms/input-field/get-input-field-class-names';\nexport function ProgressBarBase(props) {\n  let {\n    value = 0,\n    minValue = 0,\n    maxValue = 100,\n    size = 'md',\n    label,\n    showValueLabel = !!label,\n    isIndeterminate = false,\n    labelPosition = 'top',\n    className,\n    role,\n    formatOptions = {\n      style: 'percent'\n    },\n    radius = 'rounded',\n    trackColor = 'bg-primary-light',\n    progressColor = 'bg-primary',\n    trackHeight = getSize(size)\n  } = props;\n  const id = useId();\n  value = clamp(value, minValue, maxValue);\n  const percentage = (value - minValue) / (maxValue - minValue);\n  const formatter = useNumberFormatter(formatOptions);\n  let valueLabel = '';\n  if (!isIndeterminate && showValueLabel) {\n    const valueToFormat = formatOptions.style === 'percent' ? percentage : value;\n    valueLabel = formatter.format(valueToFormat);\n  }\n  const barStyle = {};\n  if (!isIndeterminate) {\n    barStyle.width = `${Math.round(percentage * 100)}%`;\n  }\n  const style = getInputFieldClassNames({\n    size\n  });\n  const labelEl = (label || valueLabel) && <div className={clsx('my-4 flex justify-between gap-10', style.label)}>\n      {label && <span id={id}>{label}</span>}\n      {valueLabel && <div>{valueLabel}</div>}\n    </div>;\n  return <div aria-valuenow={isIndeterminate ? undefined : value} aria-valuemin={minValue} aria-valuemax={maxValue} aria-valuetext={isIndeterminate ? undefined : valueLabel} aria-labelledby={label ? id : undefined} role={role || 'progressbar'} className={clsx(className, 'min-w-42')}>\n      {labelPosition === 'top' && labelEl}\n      <div className={`${trackHeight} ${radius} ${trackColor} overflow-hidden`}>\n        <div className={clsx(progressColor, 'fill h-full rounded-l transition-width duration-200', isIndeterminate && 'progress-bar-indeterminate-animate')} style={barStyle} />\n      </div>\n      {labelPosition === 'bottom' && labelEl}\n    </div>;\n}\nfunction getSize(size) {\n  switch (size) {\n    case 'sm':\n      return 'h-6';\n    case 'xs':\n      return 'h-4';\n    default:\n      return 'h-8';\n  }\n}","import React from 'react';\nimport { ProgressBarBase } from '@ui/progress/progress-bar-base';\nexport function ProgressBar(props) {\n  return <ProgressBarBase {...props} />;\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const AddAPhotoIcon = createSvgIcon(<path d=\"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5zm5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zM5 6h3V4H5V1H3v3H0v2h3v3h2z\" />, 'AddAPhotoOutlined');","export let FileInputType = /*#__PURE__*/function (FileInputType) {\n  FileInputType[\"image\"] = \"image/*\";\n  FileInputType[\"audio\"] = \"audio/*\";\n  FileInputType[\"text\"] = \"text/*\";\n  FileInputType[\"json\"] = \"application/json\";\n  FileInputType[\"video\"] = \"video/mp4,video/mpeg,video/x-m4v,video/*\";\n  return FileInputType;\n}({});","import React, { cloneElement, Fragment, useCallback, useId, useRef } from 'react';\nimport clsx from 'clsx';\nimport { Button } from '@ui/buttons/button';\nimport { Trans } from '@ui/i18n/trans';\nimport { useActiveUpload } from '@common/uploads/uploader/use-active-upload';\nimport { useController } from 'react-hook-form';\nimport { mergeProps } from '@react-aria/utils';\nimport { ProgressBar } from '@ui/progress/progress-bar';\nimport { Disk } from '../uploader/backend-metadata';\nimport { toast } from '@ui/toast/toast';\nimport { Field } from '@ui/forms/input-field/field';\nimport { getInputFieldClassNames } from '@ui/forms/input-field/get-input-field-class-names';\nimport { useAutoFocus } from '@ui/focus/use-auto-focus';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { AddAPhotoIcon } from '@ui/icons/material/AddAPhoto';\nimport { AvatarPlaceholderIcon } from '@ui/avatar/avatar-placeholder-icon';\nimport { FileInputType } from '@ui/utils/files/file-input-config';\nconst TwoMB = 2 * 1024 * 1024;\nexport function ImageSelector({\n  className,\n  label,\n  description,\n  value,\n  onChange,\n  defaultValue,\n  diskPrefix,\n  showRemoveButton,\n  showEditButtonOnHover = false,\n  invalid,\n  errorMessage,\n  required,\n  autoFocus,\n  variant = 'input',\n  previewSize = 'h-80',\n  placeholderIcon,\n  stretchPreview = false,\n  previewRadius,\n  disabled,\n  onFileSelected\n}) {\n  const {\n    uploadFile,\n    entry,\n    uploadStatus,\n    deleteEntry,\n    isDeletingEntry,\n    percentage\n  } = useActiveUpload();\n  const inputRef = useRef(null);\n  useAutoFocus({\n    autoFocus\n  }, inputRef);\n  const fieldId = useId();\n  const labelId = label ? `${fieldId}-label` : undefined;\n  const descriptionId = description ? `${fieldId}-description` : undefined;\n  const imageUrl = value || entry?.url;\n  const uploadOptions = {\n    showToastOnRestrictionFail: true,\n    restrictions: {\n      allowedFileTypes: [FileInputType.image],\n      maxFileSize: TwoMB\n    },\n    metadata: {\n      diskPrefix,\n      disk: Disk.public\n    },\n    onSuccess: entry => {\n      onChange?.(entry.url);\n    },\n    onError: message => {\n      if (message) {\n        toast.danger(message);\n      }\n    }\n  };\n  const inputFieldClassNames = getInputFieldClassNames({\n    description,\n    descriptionPosition: 'top',\n    invalid\n  });\n  let VariantElement;\n  if (variant === 'avatar') {\n    VariantElement = AvatarVariant;\n  } else if (variant === 'square') {\n    VariantElement = SquareVariant;\n  } else {\n    VariantElement = InputVariant;\n  }\n  const removeButton = showRemoveButton ? <Button variant=\"link\" color=\"danger\" size=\"xs\" disabled={isDeletingEntry || !imageUrl || disabled} onClick={() => {\n    deleteEntry({\n      onSuccess: () => onChange?.('')\n    });\n  }}>\n      <Trans message=\"Remove image\" />\n    </Button> : null;\n  const useDefaultButton = defaultValue != null && value !== defaultValue ? <Button variant=\"outline\" color=\"primary\" size=\"xs\" disabled={disabled} onClick={() => {\n    onChange?.(defaultValue);\n  }}>\n        <Trans message=\"Use default\" />\n      </Button> : null;\n  const handleUpload = useCallback(() => {\n    inputRef.current?.click();\n  }, []);\n  return <div className={clsx('text-sm', className)}>\n      {label && <div id={labelId} className={inputFieldClassNames.label}>\n          {label}\n        </div>}\n      {description && <div className={inputFieldClassNames.description}>{description}</div>}\n      <div aria-labelledby={labelId} aria-describedby={descriptionId}>\n        <Field fieldClassNames={inputFieldClassNames} errorMessage={errorMessage} invalid={invalid}>\n          <VariantElement inputFieldClassNames={inputFieldClassNames} placeholderIcon={placeholderIcon} previewSize={previewSize} isLoading={uploadStatus === 'inProgress'} imageUrl={imageUrl} removeButton={removeButton} useDefaultButton={useDefaultButton} showEditButtonOnHover={showEditButtonOnHover} stretchPreview={stretchPreview} previewRadius={previewRadius} handleUpload={handleUpload} disabled={disabled}>\n            <input ref={inputRef} aria-labelledby={labelId} aria-describedby={descriptionId}\n          // if file is already uploaded (from form or via props) set\n          // required to false, otherwise farm validation will always fail\n          required={imageUrl ? false : required} accept={FileInputType.image} type=\"file\" disabled={uploadStatus === 'inProgress'} className=\"sr-only\" onChange={e => {\n            if (e.target.files?.length) {\n              uploadFile(e.target.files[0], uploadOptions);\n              onFileSelected?.(e.target.files[0]);\n            }\n          }} />\n          </VariantElement>\n          {uploadStatus === 'inProgress' && <ProgressBar className=\"absolute left-0 right-0 top-0\" size=\"xs\" value={percentage} />}\n        </Field>\n      </div>\n    </div>;\n}\nfunction InputVariant({\n  children,\n  inputFieldClassNames,\n  imageUrl,\n  previewSize,\n  stretchPreview,\n  isLoading,\n  handleUpload,\n  removeButton,\n  useDefaultButton,\n  disabled\n}) {\n  if (imageUrl) {\n    return <Fragment>\n        <div className={`${previewSize} relative mb-10 overflow-hidden rounded border bg-fg-base/8 p-6`}>\n          <img className={clsx('mx-auto h-full rounded', stretchPreview ? 'object-cover' : 'object-contain')} onClick={() => handleUpload()} src={imageUrl} alt=\"\" />\n          {children}\n        </div>\n        <Button onClick={() => handleUpload()} disabled={isLoading || disabled} className=\"mr-10\" variant=\"outline\" color=\"primary\" size=\"xs\">\n          <Trans message=\"Replace\" />\n        </Button>\n        {removeButton && cloneElement(removeButton, {\n        variant: 'outline'\n      })}\n        {useDefaultButton && cloneElement(useDefaultButton, {\n        variant: 'outline'\n      })}\n      </Fragment>;\n  }\n  return cloneElement(children, {\n    className: clsx(inputFieldClassNames.input, 'py-8', 'file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10')\n  });\n}\nfunction SquareVariant({\n  children,\n  placeholderIcon,\n  previewSize,\n  imageUrl,\n  stretchPreview,\n  handleUpload,\n  removeButton,\n  useDefaultButton,\n  previewRadius = 'rounded',\n  showEditButtonOnHover = false,\n  disabled\n}) {\n  return <div>\n      <div className={clsx(previewSize, previewRadius, !imageUrl && 'border', 'group z-20 flex flex-col items-center justify-center gap-14 bg-fg-base/8 bg-center bg-no-repeat', stretchPreview ? 'bg-cover' : 'bg-contain p-6')} style={imageUrl ? {\n      backgroundImage: `url(${imageUrl})`\n    } : undefined} onClick={() => handleUpload()}>\n        {placeholderIcon && !imageUrl && cloneElement(placeholderIcon, {\n        size: 'lg'\n      })}\n        <Button variant=\"raised\" color=\"white\" size=\"xs\" className={clsx(showEditButtonOnHover && 'invisible group-hover:visible')} disabled={disabled}>\n          {imageUrl ? <Trans message=\"Replace image\" /> : <Trans message=\"Upload image\" />}\n        </Button>\n      </div>\n      {children}\n      {(removeButton || useDefaultButton) && <div className=\"mt-8\">\n          {removeButton && cloneElement(removeButton, {\n        variant: 'link'\n      })}\n          {useDefaultButton && cloneElement(useDefaultButton, {\n        variant: 'link'\n      })}\n        </div>}\n    </div>;\n}\nfunction AvatarVariant({\n  children,\n  placeholderIcon,\n  previewSize,\n  isLoading,\n  imageUrl,\n  removeButton,\n  useDefaultButton,\n  handleUpload,\n  previewRadius = 'rounded-full',\n  disabled\n}) {\n  if (!placeholderIcon) {\n    placeholderIcon = <AvatarPlaceholderIcon viewBox=\"0 0 48 48\" className={clsx('h-full w-full bg-primary-light/40 text-primary/40', previewRadius)} />;\n  }\n  return <div>\n      <div className={clsx('relative', previewSize)} onClick={() => handleUpload()}>\n        {imageUrl ? <img src={imageUrl} className={clsx('h-full w-full object-cover', previewRadius)} alt=\"\" /> : placeholderIcon}\n        <div className=\"absolute -bottom-6 -right-6 rounded-full bg-paper shadow-xl\">\n          <IconButton disabled={isLoading || disabled} type=\"button\" variant=\"outline\" size=\"sm\" color=\"primary\" radius=\"rounded-full\">\n            <AddAPhotoIcon />\n          </IconButton>\n        </div>\n      </div>\n      {children}\n      {(removeButton || useDefaultButton) && <div className=\"mt-14\">\n          {removeButton && cloneElement(removeButton, {\n        variant: 'link'\n      })}\n          {useDefaultButton && cloneElement(useDefaultButton, {\n        variant: 'link'\n      })}\n        </div>}\n    </div>;\n}\nexport function FormImageSelector(props) {\n  const {\n    field: {\n      onChange,\n      value = null\n    },\n    fieldState: {\n      error\n    }\n  } = useController({\n    name: props.name\n  });\n  const formProps = {\n    onChange,\n    value,\n    invalid: error != null,\n    errorMessage: error ? <Trans message=\"Please select an image.\" /> : null\n  };\n  return <ImageSelector {...mergeProps(formProps, props)} />;\n}","import { keepPreviousData, useQuery } from '@tanstack/react-query';\nimport { apiClient, queryClient } from './query-client';\nexport function useValueLists(names, params, options = {}) {\n  return useQuery({\n    queryKey: ['value-lists', names, params],\n    queryFn: () => fetchValueLists(names, params),\n    // if there are params, make sure we update lists when they change\n    staleTime: !params ? Infinity : undefined,\n    placeholderData: keepPreviousData,\n    enabled: !options.disabled,\n    initialData: () => {\n      // check if we have already fetched value lists for all specified names previously,\n      // if so, return cached response for this query, as there's no need to fetch it again\n      const previousData = queryClient.getQueriesData({\n        queryKey: ['ValueLists']\n      }).find(([, response]) => {\n        if (response && names.every(n => response[n])) {\n          return response;\n        }\n        return null;\n      });\n      if (previousData) {\n        return previousData[1];\n      }\n    }\n  });\n}\nexport function prefetchValueLists(names, params) {\n  return queryClient.ensureQueryData({\n    queryKey: ['value-lists', names, params],\n    queryFn: () => fetchValueLists(names, params)\n  });\n}\nfunction fetchValueLists(names, params) {\n  return apiClient.get(`value-lists/${names}`, {\n    params\n  }).then(response => response.data);\n}","import React from 'react';\nimport { Button } from '@ui/buttons/button';\nimport { ErrorOutlineIcon } from '@ui/icons/material/ErrorOutline';\nimport { DialogFooter } from './dialog-footer';\nimport { useDialogContext } from './dialog-context';\nimport { Dialog } from './dialog';\nimport { DialogHeader } from './dialog-header';\nimport { DialogBody } from './dialog-body';\nimport { Trans } from '@ui/i18n/trans';\nexport function ConfirmationDialog({\n  className,\n  title,\n  body,\n  close: closeText,\n  confirm,\n  isDanger,\n  isLoading,\n  onConfirm\n}) {\n  const {\n    close\n  } = useDialogContext();\n  return <Dialog className={className} size=\"sm\" role=\"alertdialog\">\n      <DialogHeader color={isDanger ? 'text-danger' : null} leftAdornment={<ErrorOutlineIcon className=\"icon-sm\" />}>\n        {title}\n      </DialogHeader>\n      <DialogBody>{body}</DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={() => {\n        close(false);\n      }}>\n          {closeText || <Trans message=\"Cancel\" />}\n        </Button>\n        <Button disabled={isLoading} variant=\"flat\" color={isDanger ? 'danger' : 'primary'} onClick={() => {\n        onConfirm?.();\n        // if callback is passed in, caller is responsible for closing the dialog\n        if (!onConfirm) {\n          close(true);\n        }\n      }}>\n          {confirm}\n        </Button>\n      </DialogFooter>\n    </Dialog>;\n}","import { message } from '@ui/i18n/message';\nimport { lazyAdminRoute } from '@common/admin/routes/lazy-admin-route';\nexport const AppAppearanceConfig = {\n  preview: {\n    defaultRoute: 'drive',\n    navigationRoutes: ['s', 'drive']\n  },\n  sections: {\n    'landing-page': {\n      label: message('Landing Page'),\n      position: 1,\n      previewRoute: '/',\n      routes: [{\n        path: 'landing-page',\n        lazy: () => lazyAdminRoute('LandingPageAppearanceForm'),\n        children: [{\n          index: true,\n          lazy: () => lazyAdminRoute('LandingPageSectionGeneral')\n        }, {\n          path: 'action-buttons',\n          lazy: () => lazyAdminRoute('LandingPageSectionActionButtons')\n        }, {\n          path: 'primary-features',\n          lazy: () => lazyAdminRoute('LandingPageSectionPrimaryFeatures')\n        }, {\n          path: 'secondary-features',\n          lazy: () => lazyAdminRoute('LandingPageSecondaryFeatures')\n        }]\n      }]\n    },\n    // missing label will get added by deepMerge from default config\n    // @ts-ignore\n    menus: {\n      config: {\n        positions: ['drive-navbar', 'drive-sidebar', 'homepage-navbar', 'shareable-link-page', 'footer', 'footer-secondary'],\n        availableRoutes: ['/drive', '/drive/shares', '/drive/recent', '/drive/starred', '/drive/trash']\n      }\n    },\n    // @ts-ignore\n    'seo-settings': {\n      config: {\n        pages: [{\n          key: 'landing-page',\n          label: message('Landing page')\n        }, {\n          key: 'shareable-link-page',\n          label: message('Shareable link page')\n        }]\n      }\n    }\n  }\n};","import { createSvgIcon } from '../create-svg-icon';\nexport const AddIcon = createSvgIcon(<path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />, 'AddOutlined');","import React, { Children, cloneElement, isValidElement } from 'react';\nimport clsx from 'clsx';\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n  wrap = true,\n  startButton\n}) {\n  return <div className={clsx('flex items-center gap-8', wrap && 'flex-wrap', className)}>\n      {startButton}\n      {Children.map(children, chip => {\n      if (isValidElement(chip)) {\n        return cloneElement(chip, {\n          size,\n          color,\n          selectable,\n          radius\n        });\n      }\n    })}\n    </div>;\n}","export function stringToChipValue(value) {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {\n    id: value,\n    name: `${value}`,\n    description: `${value}`\n  };\n}","import React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { useFocusManager } from '@react-aria/focus';\nimport clsx from 'clsx';\nimport { mergeProps, useLayoutEffect, useObjectRef } from '@react-aria/utils';\nimport { useControlledState } from '@react-stately/utils';\nimport { ChipList } from './chip-list';\nimport { Field } from '../field';\nimport { Input } from '../input';\nimport { Chip } from './chip';\nimport { getInputFieldClassNames } from '../get-input-field-class-names';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport { useField } from '../use-field';\nimport { Listbox } from '../../listbox/listbox';\nimport { useListbox } from '../../listbox/use-listbox';\nimport { useListboxKeyboardNavigation } from '../../listbox/use-listbox-keyboard-navigation';\nimport { createEventHandler } from '@ui/utils/dom/create-event-handler';\nimport { stringToChipValue } from './string-to-chip-value';\nimport { KeyboardArrowDownIcon } from '@ui/icons/material/KeyboardArrowDown';\nimport { Avatar } from '@ui/avatar/avatar';\nimport { Popover } from '@ui/overlays/popover';\nfunction ChipFieldInner(props, ref) {\n  const fieldRef = useRef(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'sm',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    onChipClick,\n    alwaysShowAvatar = false,\n    readOnly,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true\n  });\n  const [value, onChange] = useChipFieldValueState(props);\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n  const loadingIndicator = <ProgressCircle isIndeterminate size=\"w-24 h-24\" aria-label=\"loading...\" />;\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n  const {\n    fieldProps,\n    inputProps\n  } = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow\n  });\n  return <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input ref={fieldRef} className={clsx('flex flex-wrap items-center', fieldClassNames.input)} onClick={() => {\n      // refocus input when clicking outside it, but while still inside chip field\n      inputRef.current?.focus();\n    }}>\n        <ListWrapper displayChipUsing={displayWith} onChipClick={onChipClick} items={value} setItems={onChange} chipSize={chipSize} alwaysShowAvatar={alwaysShowAvatar} readOnly={readOnly} />\n        <ChipInput size={props.size} showEmptyMessage={showEmptyMessage} inputProps={inputProps} inputValue={inputValue} onInputValueChange={onInputValueChange} fieldRef={fieldRef} inputRef={inputRef} chips={value} setChips={onChange} validateWith={validateWith} isLoading={isLoading} suggestions={suggestions} placeholder={placeholder} openMenuOnFocus={openMenuOnFocus} listboxIsOpen={listboxIsOpen} setListboxIsOpen={setListboxIsOpen} allowCustomValue={allowCustomValue} readOnly={readOnly}>\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>;\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n  onChipClick,\n  alwaysShowAvatar,\n  readOnly\n}) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(key => {\n    const i = items.findIndex(cr => cr.id === key);\n    const newItems = [...items];\n    if (i > -1) {\n      newItems.splice(i, 1);\n      setItems(newItems);\n    }\n    return newItems;\n  }, [items, setItems]);\n  return <ChipList className={clsx('max-w-full flex-shrink-0 flex-wrap', chipSize === 'xs' ? 'my-6' : 'my-8')} size={chipSize} selectable>\n      {items.map(item => <Chip key={item.id} errorMessage={item.errorMessage} adornment={item.image || alwaysShowAvatar ? <Avatar circle src={item.image} fallback=\"initials\" label={item.name} /> : null} onClick={() => onChipClick?.(item)} onRemove={readOnly ? undefined : () => {\n      const newItems = removeItem(item.id);\n      if (newItems.length) {\n        // focus previous chip\n        manager?.focusPrevious({\n          tabbable: true\n        });\n      } else {\n        // focus input\n        manager?.focusLast();\n      }\n    }}>\n          {displayChipUsing(item)}\n        </Chip>)}\n    </ChipList>;\n}\nfunction ChipInput(props) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n    isLoading,\n    size,\n    readOnly\n  } = props;\n  const manager = useFocusManager();\n  const addItems = useCallback(items => {\n    items = (items || []).filter(item => {\n      const invalid = !item || !item.id || !item.name;\n      const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n      return !alreadyExists && !invalid;\n    });\n    if (!items.length) return;\n    if (validateWith) {\n      items = items.map(item => validateWith(item));\n    }\n    setChips([...chips, ...items]);\n  }, [chips, setChips, validateWith]);\n  const listbox = useListbox({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value);\n    }\n  });\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange\n  } = listbox;\n  const handleItemSelection = textValue => {\n    const option = collection.size && activeIndex != null ? [...collection.values()][activeIndex] : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n  const {\n    handleTriggerKeyDown,\n    handleListboxKeyboardNavigation\n  } = useListboxKeyboardNavigation(listbox);\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n  return <Listbox listbox={listbox} mobileOverlay={Popover} isLoading={isLoading} onPointerDown={e => {\n    // prevent focus from leaving input when scrolling listbox via mouse\n    e.preventDefault();\n  }}>\n      <input readOnly={readOnly} type=\"text\" className={clsx('mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none', size === 'xs' ? 'h-20' : 'h-30')} placeholder={placeholder} {...mergeProps(inputProps, {\n      ref: inputRef,\n      value: inputValue,\n      onChange: onInputChange,\n      onPaste: e => {\n        const paste = e.clipboardData.getData('text');\n        const emails = paste.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi);\n        if (emails) {\n          e.preventDefault();\n          const selection = window.getSelection();\n          if (selection?.rangeCount) {\n            selection.deleteFromDocument();\n            addItems(emails.map(email => stringToChipValue(email)));\n          }\n        }\n      },\n      'aria-autocomplete': 'list',\n      'aria-controls': isOpen ? listboxId : undefined,\n      autoComplete: 'off',\n      autoCorrect: 'off',\n      spellCheck: 'false',\n      onKeyDown: e => {\n        if (readOnly) return;\n        const input = e.target;\n        if (e.key === 'Enter') {\n          // prevent form submitting\n          e.preventDefault();\n          // add chip from selected listbox option or current input text value\n          handleItemSelection(input.value);\n          return;\n        }\n\n        // on escape, clear input and close dropdown\n        if (e.key === 'Escape' && isOpen) {\n          setIsOpen(false);\n          setInputValue('');\n        }\n\n        // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n        if (e.key === 'ArrowUp' && isOpen && (activeIndex === 0 || activeIndex == null)) {\n          setActiveIndex(null);\n          return;\n        }\n\n        // block left and right arrows from navigating in input, if focus is on listbox\n        if (activeIndex != null && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {\n          e.preventDefault();\n          return;\n        }\n\n        // move focus on the last chip, if focus is at the  start of input\n        if ((e.key === 'ArrowLeft' || e.key === 'Backspace' || e.key === 'Delete') && input.selectionStart === 0 && activeIndex == null && chips.length) {\n          manager?.focusPrevious({\n            tabbable: true\n          });\n          return;\n        }\n\n        // fallthrough to listbox navigation handlers for arrow keys\n        const handled = handleTriggerKeyDown(e);\n        if (!handled) {\n          handleListboxKeyboardNavigation(e);\n        }\n      },\n      onFocus: readOnly ? undefined : handleFocusAndClick,\n      onClick: readOnly ? undefined : handleFocusAndClick\n    })} />\n    </Listbox>;\n}\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey\n}) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(value => {\n    const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n    onChange?.(newValue);\n  }, [onChange, valueKey]);\n  return useControlledState(!propsValue ? undefined : propsValue, propsDefaultValue || [], handleChange);\n}\nfunction mixedValueToChipValue(value) {\n  if (value == null) {\n    return undefined;\n  }\n  return value.map(v => {\n    return typeof v !== 'object' ? stringToChipValue(v) : v;\n  });\n}\nexport const ChipField = React.forwardRef(ChipFieldInner);","import { createSvgIcon } from '../create-svg-icon';\nexport const DeleteIcon = createSvgIcon(<path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />, 'DeleteOutlined');","export const draggables = new Map();\nexport const droppables = new Map();\nexport const dragMonitors = new Map();\nexport const dragSession = {\n  status: 'inactive'\n};","export function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY\n}) {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e\n  };\n}","export let activeInteraction = null;\nexport function setActiveInteraction(name) {\n  activeInteraction = name;\n}","export function domRectToObj(rect) {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height\n  };\n}","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\n\nexport function updateRects(targets) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {\n        width,\n        height,\n        left,\n        top\n      } = entry.boundingClientRect;\n      const [id, target] = [...targets].find(([, target]) => target.ref.current === entry.target) || [];\n      if (id == null || target == null) return;\n      const rect = {\n        width,\n        height,\n        left,\n        top\n      };\n      targets.set(id, {\n        ...target,\n        rect\n      });\n    });\n    observer.disconnect();\n  });\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}","import { useLayoutEffect, useRef } from 'react';\nimport { draggables, dragMonitors, dragSession, droppables } from './drag-state';\nimport { interactableEvent } from '../interactable-event';\nimport { activeInteraction, setActiveInteraction } from '../active-interaction';\nimport { domRectToObj } from '../utils/dom-rect-to-obj';\nimport { updateRects } from './update-rects';\nimport { useGlobalListeners } from '@react-aria/utils';\n\n// Either draggable from within the app, or file dragged in from the desktop\n\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}) {\n  const dragHandleRef = useRef(null);\n  const {\n    addGlobalListener,\n    removeAllGlobalListeners\n  } = useGlobalListeners();\n  const state = useRef({\n    lastPosition: {\n      x: 0,\n      y: 0\n    }\n  }).current;\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = callback => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n  const onDragStart = e => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle = !dragHandleRef.current || !state.clickedEl || dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n    state.lastPosition = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({\n      rect: state.currentRect,\n      e\n    });\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n  const onDragOver = e => {\n    e.preventDefault();\n    if (!state.currentRect) return;\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY\n    };\n    const ie = interactableEvent({\n      rect: newRect,\n      e,\n      deltaX,\n      deltaY\n    });\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n    state.lastPosition = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    state.currentRect = newRect;\n  };\n  const onDragEnd = e => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n    const ie = interactableEvent({\n      rect: state.currentRect,\n      e\n    });\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: e => {\n      state.clickedEl = e.target;\n    }\n  };\n  return {\n    draggableProps,\n    dragHandleRef\n  };\n}\nlet emptyImage;\nfunction hideNativeGhostImage(e) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}","import { UploadedFile } from '@ui/utils/files/uploaded-file';\nexport async function* readFilesFromDataTransfer(dataTransfer) {\n  const entries = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry);\n    }\n  }\n}\nasync function* getEntriesFromDirectory(item) {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries;\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry);\n      }\n    }\n  } while (entries.length > 0);\n}\nfunction getEntryFile(entry) {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}","export async function asyncIterableToArray(iterator) {\n  const items = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}","import { useLayoutEffect, useRef } from 'react';\nimport { draggables, dragSession, droppables } from './drag-state';\nimport { readFilesFromDataTransfer } from './read-files-from-data-transfer';\nimport { asyncIterableToArray } from '@ui/utils/array/async-iterable-to-array';\n\n// File dragged in from desktop\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\nexport function useDroppable({\n  id,\n  disabled,\n  ref,\n  ...options\n}) {\n  const state = useRef({\n    dragOverElements: new Set(),\n    dropActivateTimer: undefined\n  }).current;\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = draggable => {\n    const options = optionsRef.current;\n    const allowEventsOnSelf = options.allowDragEventsFromItself || ref.current !== draggable.ref?.current;\n    return !!(draggable?.type && allowEventsOnSelf && options.types.includes(draggable.type) && (!options.acceptsDrop || options.acceptsDrop(draggable)));\n  };\n  const fireDragLeave = e => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n  const onDragEnter = e => {\n    e.stopPropagation();\n    state.dragOverElements.add(e.target);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n  const onDragLeave = e => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n  const onDrop = async e => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n  const droppableProps = {\n    onDragOver: e => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop\n  };\n  return {\n    droppableProps: disabled ? {} : droppableProps\n  };\n}\nfunction getDraggable(e) {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      }\n    };\n  }\n}","import { useController } from 'react-hook-form';\nimport { mergeProps } from '@react-aria/utils';\nimport React from 'react';\nimport { ChipField } from './chip-field';\nexport function FormChipField({\n  children,\n  ...props\n}) {\n  const {\n    field: {\n      onChange,\n      onBlur,\n      value = [],\n      ref\n    },\n    fieldState: {\n      invalid,\n      error\n    }\n  } = useController({\n    name: props.name\n  });\n  const formProps = {\n    onChange,\n    onBlur,\n    value,\n    invalid,\n    errorMessage: error?.message\n  };\n  return <ChipField ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>;\n}","import { useRef } from 'react';\nimport { useGlobalListeners } from '@react-aria/utils';\nimport { createEventHandler } from '@ui/utils/dom/create-event-handler';\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}) {\n  const stateRef = useRef({\n    lastPosition: {\n      x: 0,\n      y: 0\n    },\n    started: false,\n    longPressTriggered: false\n  });\n  const state = stateRef.current;\n  const {\n    addGlobalListener,\n    removeGlobalListener\n  } = useGlobalListeners();\n  const start = e => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n  const onPointerDown = e => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget;\n      state.lastPosition = {\n        x: e.clientX,\n        y: e.clientY\n      };\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n  const onPointerMove = e => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n      if ((Math.abs(deltaX) >= minimumMovement || Math.abs(deltaY) >= minimumMovement) && !state.started) {\n        start(e);\n      }\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {\n          x: e.clientX,\n          y: e.clientY\n        };\n      }\n    }\n  };\n  const onPointerUp = e => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n        document.documentElement.style.userSelect = state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown)\n    }\n  };\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const MoreVertIcon = createSvgIcon(<path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />, 'MoreVertOutlined');","export const AccordionAnimation = {\n  variants: {\n    open: {\n      height: 'auto',\n      visibility: 'visible',\n      transitionEnd: {\n        overflow: 'auto'\n      }\n    },\n    closed: {\n      height: 0,\n      overflow: 'hidden',\n      transitionEnd: {\n        visibility: 'hidden'\n      }\n    }\n  },\n  transition: {\n    type: 'tween',\n    duration: 0.2\n  }\n};","import React, { cloneElement, isValidElement, useId, useRef } from 'react';\nimport clsx from 'clsx';\nimport { AnimatePresence, m } from 'framer-motion';\nimport { useControlledState } from '@react-stately/utils';\nimport { FocusScope, useFocusManager } from '@react-aria/focus';\nimport { AccordionAnimation } from '@ui/accordion/accordtion-animation';\nimport { ArrowDropDownIcon } from '@ui/icons/material/ArrowDropDown';\nexport const Accordion = React.forwardRef(({\n  variant = 'default',\n  mode = 'single',\n  children,\n  className,\n  isLazy,\n  ...other\n}, ref) => {\n  const [expandedValues, setExpandedValues] = useControlledState(other.expandedValues, other.defaultExpandedValues || [], other.onExpandedChange);\n  const itemsCount = React.Children.count(children);\n  return <div className={clsx(variant === 'outline' && 'space-y-10', className)} ref={ref} role=\"presentation\">\n        <AnimatePresence>\n          <FocusScope>\n            {React.Children.map(children, (child, index) => {\n          if (!isValidElement(child)) return null;\n          return cloneElement(child, {\n            key: child.key || index,\n            value: child.props.value || index,\n            isFirst: index === 0,\n            isLast: index === itemsCount - 1,\n            mode,\n            variant,\n            expandedValues,\n            setExpandedValues,\n            isLazy\n          });\n        })}\n          </FocusScope>\n        </AnimatePresence>\n      </div>;\n});\nexport function AccordionItem(props) {\n  const {\n    children,\n    label,\n    disabled,\n    bodyClassName,\n    bodyPadding = 'p-16',\n    labelClassName,\n    buttonPadding = 'py-10 pl-14 pr-10',\n    startIcon,\n    description,\n    endAppend,\n    chevronPosition = 'right',\n    isFirst,\n    mode,\n    isLazy,\n    variant,\n    footerContent,\n    onHeaderMouseEnter,\n    onHeaderMouseLeave\n  } = props;\n  const expandedValues = props.expandedValues || [];\n  const value = props.value || 0;\n  const setExpandedValues = props.setExpandedValues || (() => {});\n  const ref = useRef(null);\n  const isExpanded = !disabled && expandedValues.includes(value);\n  const wasExpandedOnce = useRef(false);\n  if (isExpanded) {\n    wasExpandedOnce.current = true;\n  }\n  const focusManager = useFocusManager();\n  const id = useId();\n  const buttonId = `${id}-button`;\n  const panelId = `${id}-panel`;\n  const onKeyDown = e => {\n    switch (e.key) {\n      case 'ArrowDown':\n        focusManager?.focusNext();\n        break;\n      case 'ArrowUp':\n        focusManager?.focusPrevious();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n  const toggle = () => {\n    const i = expandedValues.indexOf(value);\n    if (i > -1) {\n      const newKeys = [...expandedValues];\n      newKeys.splice(i, 1);\n      setExpandedValues(newKeys);\n    } else if (mode === 'single') {\n      setExpandedValues([value]);\n    } else {\n      setExpandedValues([...expandedValues, value]);\n    }\n  };\n  const chevron = <div className={clsx(variant === 'minimal' && '')}>\n      <ArrowDropDownIcon aria-hidden=\"true\" size=\"md\" className={clsx(disabled ? 'text-disabled' : 'text-muted', isExpanded && 'rotate-180 transition-transform')} />\n    </div>;\n  return <div className={clsx(variant === 'default' && 'border-b', variant === 'outline' && 'rounded-panel border', disabled && 'text-disabled')}>\n      <h3 className={clsx('flex w-full items-center justify-between text-sm', disabled && 'pointer-events-none', isFirst && variant === 'default' && 'border-t', isExpanded && variant !== 'minimal' ? 'border-b' : 'border-b border-b-transparent', variant === 'outline' ? isExpanded ? 'rounded-panel-t' : 'rounded-panel' : undefined)} onMouseEnter={onHeaderMouseEnter} onMouseLeave={onHeaderMouseLeave}>\n        <button disabled={disabled} aria-expanded={isExpanded} id={buttonId} aria-controls={panelId} type=\"button\" ref={ref} onKeyDown={onKeyDown} onClick={() => {\n        if (!disabled) {\n          toggle();\n        }\n      }} className={clsx('flex flex-auto items-center gap-10 text-left outline-none hover:bg-hover focus-visible:bg-primary/focus', buttonPadding)}>\n          {chevronPosition === 'left' && chevron}\n          {startIcon && cloneElement(startIcon, {\n          size: 'md',\n          className: clsx(startIcon.props.className, disabled ? 'text-disabled' : 'text-muted')\n        })}\n          <div className=\"flex-auto overflow-hidden overflow-ellipsis\">\n            <div className={labelClassName} data-testid=\"accordion-label\">\n              {label}\n            </div>\n            {description && <div className=\"text-xs text-muted\">{description}</div>}\n          </div>\n          {chevronPosition === 'right' && chevron}\n        </button>\n        {endAppend && <div className=\"flex-shrink-0 px-4 text-sm text-muted\">\n            {endAppend}\n          </div>}\n      </h3>\n      <m.div aria-labelledby={id} role=\"region\" variants={AccordionAnimation.variants} transition={AccordionAnimation.transition} initial={false} animate={isExpanded ? 'open' : 'closed'}>\n        <div className={clsx(bodyPadding, bodyClassName)}>\n          {!isLazy || wasExpandedOnce ? children : null}\n        </div>\n        {footerContent}\n      </m.div>\n    </div>;\n}","import { message } from '@ui/i18n/message';\nexport const DefaultAppearanceConfig = {\n  preview: {\n    defaultRoute: '/',\n    navigationRoutes: []\n  },\n  sections: {\n    general: {\n      label: message('General'),\n      position: 1\n    },\n    themes: {\n      label: message('Themes'),\n      position: 2\n    },\n    menus: {\n      label: message('Menus'),\n      position: 3,\n      config: {\n        availableRoutes: ['/', '/login', '/register', '/contact', '/pricing', '/account-settings', '/admin', '/admin/appearance', '/admin/settings', '/admin/plans', '/admin/subscriptions', '/admin/users', '/admin/roles', '/admin/pages', '/admin/tags', '/admin/files', '/admin/localizations', '/admin/ads', '/admin/logs', '/admin/settings/authentication', '/admin/settings/branding', '/admin/settings/cache', '/admin/settings/providers', '/api-docs'],\n        positions: ['admin-navbar', 'admin-sidebar', 'custom-page-navbar', 'auth-page-footer', 'auth-dropdown', 'account-settings-page', 'billing-page', 'checkout-page-navbar', 'checkout-page-footer', 'pricing-table-page', 'contact-us-page', 'notifications-page', 'footer', 'footer-secondary']\n      }\n    },\n    'custom-code': {\n      label: message('Custom Code'),\n      position: 4\n    },\n    'seo-settings': {\n      label: message('SEO Settings'),\n      position: 5\n    }\n  }\n};","import deepMerge from 'deepmerge';\nimport { DefaultAppearanceConfig } from '@common/admin/appearance/config/default-appearance-config';\nimport { AppAppearanceConfig } from '@app/admin/appearance/app-appearance-config';\nconst mergedAppearanceConfig = deepMerge.all([DefaultAppearanceConfig, AppAppearanceConfig]);\nexport default mergedAppearanceConfig;","import { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport mergedAppearanceConfig from './config/merged-appearance-config';\nlet resolvePreviewAppIsLoaded = () => {};\nexport const previewAppIsLoaded = new Promise(resolve => resolvePreviewAppIsLoaded = resolve);\nexport const useAppearanceStore = create()(subscribeWithSelector((set, get) => ({\n  defaults: null,\n  iframeWindow: null,\n  isDirty: false,\n  setIsDirty: value => {\n    set(() => ({\n      isDirty: value\n    }));\n  },\n  config: mergedAppearanceConfig,\n  setDefaults: value => {\n    set({\n      defaults: {\n        ...value\n      }\n    });\n  },\n  setIframeWindow: value => {\n    set({\n      iframeWindow: value\n    });\n    value.addEventListener('message', e => {\n      if (e.data.source === 'be-appearance-preview' && e.data.type === 'appLoaded') {\n        resolvePreviewAppIsLoaded();\n      }\n    });\n  },\n  preview: {\n    setValues: values => {\n      const preview = get().iframeWindow;\n      postMessage(preview, {\n        type: 'setValues',\n        values\n      });\n    },\n    setThemeFont: font => {\n      const preview = get().iframeWindow;\n      postMessage(preview, {\n        type: 'setThemeFont',\n        value: font\n      });\n    },\n    setThemeValue: (name, value) => {\n      const preview = get().iframeWindow;\n      postMessage(preview, {\n        type: 'setThemeValue',\n        name,\n        value\n      });\n    },\n    setActiveTheme: themeId => {\n      const preview = get().iframeWindow;\n      postMessage(preview, {\n        type: 'setActiveTheme',\n        themeId\n      });\n    },\n    setCustomCode: (mode, value) => {\n      const preview = get().iframeWindow;\n      postMessage(preview, {\n        type: 'setCustomCode',\n        mode,\n        value\n      });\n    },\n    setHighlight: selector => {\n      let node = null;\n      const document = get().iframeWindow?.document;\n      if (document && selector) {\n        node = document.querySelector(selector);\n      }\n      if (node) {\n        requestAnimationFrame(() => {\n          if (!node) return;\n          node.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center'\n          });\n        });\n      }\n    }\n  }\n})));\nfunction postMessage(window, command) {\n  if (window) {\n    window.postMessage({\n      source: 'be-appearance-editor',\n      ...command\n    }, '*');\n  }\n}\nexport function appearanceState() {\n  return useAppearanceStore.getState();\n}","import { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@common/http/query-client';\nimport { prepareSettingsForHookForm } from '@common/admin/settings/requests/use-admin-settings';\nexport function useAppearanceEditorValuesQuery() {\n  return useQuery({\n    queryKey: ['admin/appearance/values'],\n    queryFn: () => fetchAppearanceValues(),\n    staleTime: Infinity,\n    select: prepareSettingsForHookForm\n  });\n}\nexport function useAppearanceEditorValues() {\n  const {\n    data\n  } = useAppearanceEditorValuesQuery();\n  return data.values;\n}\nfunction fetchAppearanceValues() {\n  return apiClient.get('admin/appearance/values').then(r => r.data);\n}","import { Navigate, Outlet, useLocation, useMatches } from 'react-router';\nimport { useEffect, useRef } from 'react';\nimport { appearanceState } from './appearance-store';\nimport { useAppearanceEditorValuesQuery } from './requests/use-appearance-editor-values';\nimport { Trans } from '@ui/i18n/trans';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport { useAppearanceEditorMode } from './commands/use-appearance-editor-mode';\nimport { StaticPageTitle } from '../../seo/static-page-title';\nimport { useSettings } from '@ui/settings/use-settings';\nimport mergedAppearanceConfig from '@common/admin/appearance/config/merged-appearance-config';\nfunction usePreviewRoute() {\n  const {\n    pathname\n  } = useLocation();\n  const matches = useMatches();\n  const subRoute = matches.at(-1)?.handle?.previewRoute;\n  const activeSection = pathname.split('/')[3];\n  const config = mergedAppearanceConfig.sections[activeSection];\n  const baseRoute = config?.previewRoute || mergedAppearanceConfig.preview.defaultRoute || '/';\n  if (subRoute) {\n    return `${baseRoute}/${subRoute}`;\n  }\n  return baseRoute;\n}\nexport function AppearanceEditorPage() {\n  const {\n    isAppearanceEditorActive\n  } = useAppearanceEditorMode();\n  const {\n    data\n  } = useAppearanceEditorValuesQuery();\n  const {\n    base_url\n  } = useSettings();\n  const iframeRef = useRef(null);\n  const iframeRoute = usePreviewRoute();\n  useEffect(() => {\n    // only set defaults snapshot once on route init\n    if (data?.defaults && !appearanceState().defaults) {\n      appearanceState().setDefaults(data.defaults);\n    }\n  }, [data]);\n  useEffect(() => {\n    if (iframeRef.current) {\n      appearanceState().setIframeWindow(iframeRef.current.contentWindow);\n    }\n  }, []);\n\n  // make sure appearance editor iframe can't be nested\n  if (isAppearanceEditorActive) {\n    return <Navigate to=\"/admin\" />;\n  }\n\n  // iframeRoute might contain search params, so we need to parse\n  // it and construct new url with appearanceEditor appended\n  const url = new URL(iframeRoute && iframeRoute !== '/' ? `${base_url}/${iframeRoute}` : `${base_url}`);\n  url.searchParams.append('appearanceEditor', 'true');\n\n  // set key so iframe is recreated on route change and there's no entry pushed into history stack\n  return <div className=\"h-screen items-center md:flex\">\n      <StaticPageTitle>\n        <Trans message=\"Appearance\" />\n      </StaticPageTitle>\n      <Sidebar values={data?.values} />\n      <div className=\"relative h-full flex-auto\">\n        <iframe key={iframeRoute} ref={iframeRef} className=\"h-full w-full max-md:hidden\" src={url.toString()} />\n      </div>\n    </div>;\n}\nfunction Sidebar({\n  values\n}) {\n  const spinner = <div className=\"flex h-full flex-auto items-center justify-center\">\n      <ProgressCircle isIndeterminate aria-label=\"Loading editor\" />\n    </div>;\n  return <div className=\"relative z-10 h-full w-full border-r bg shadow-lg @container md:w-320\">\n      {values ? <Outlet /> : spinner}\n    </div>;\n}","import clsx from 'clsx';\nimport { forwardRef } from 'react';\nimport { KeyboardArrowRightIcon } from '@ui/icons/material/KeyboardArrowRight';\nimport { ButtonBase } from '@ui/buttons/button-base';\nexport const AppearanceButton = forwardRef(({\n  startIcon,\n  children,\n  className,\n  description,\n  endIcon,\n  ...other\n}, ref) => {\n  return <ButtonBase ref={ref} display=\"flex\" className={clsx('relative mb-10 h-54 w-full items-center gap-10 rounded-input border bg px-14 text-sm hover:bg-hover', className, other.disabled && 'pointer-events-none opacity-50')} variant={null} {...other}>\n        {startIcon}\n        <span className=\"block min-w-0\">\n          <span className=\"block\">{children}</span>\n          {description && <span className=\"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted\">\n              {description}\n            </span>}\n        </span>\n        <div className=\"ml-auto\">\n          {endIcon ?? <KeyboardArrowRightIcon aria-hidden className=\"text-muted icon-sm\" />}\n        </div>\n      </ButtonBase>;\n});","import { Link, useNavigate } from 'react-router';\nimport { Button } from '@ui/buttons/button';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { Trans } from '@ui/i18n/trans';\nimport { useFieldArray } from 'react-hook-form';\nimport { AppearanceButton } from '../../appearance-button';\nimport { nanoid } from 'nanoid';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { message } from '@ui/i18n/message';\nimport { Fragment } from 'react';\nexport function MenuList() {\n  const navigate = useNavigate();\n  const {\n    trans\n  } = useTrans();\n  const {\n    fields,\n    append\n  } = useFieldArray({\n    name: 'settings.menus',\n    keyName: 'key'\n  });\n  return <Fragment>\n      <div>\n        {fields.map((field, index) => <AppearanceButton to={`${index}`} key={field.key} elementType={Link}>\n            {field.name}\n          </AppearanceButton>)}\n      </div>\n      <div className=\"text-right\">\n        <Button variant=\"outline\" color=\"primary\" startIcon={<AddIcon />} size=\"xs\" onClick={() => {\n        const id = nanoid(10);\n        append({\n          name: trans(message('New menu :number', {\n            values: {\n              number: fields.length + 1\n            }\n          })),\n          id,\n          positions: [],\n          items: []\n        });\n        navigate(`${fields.length}`);\n      }}>\n          <Trans message=\"Create menu\" />\n        </Button>\n      </div>\n    </Fragment>;\n}","import mergedAppearanceConfig from '../../../config/merged-appearance-config';\nexport function useAvailableRoutes() {\n  const menuConfig = mergedAppearanceConfig.sections.menus.config;\n  if (!menuConfig) return [];\n  return menuConfig.availableRoutes.map(route => {\n    return {\n      id: route,\n      label: route,\n      action: route,\n      type: 'route',\n      target: '_self'\n    };\n  });\n}","export function ucFirst(string) {\n  if (!string) return string;\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}","import { useForm } from 'react-hook-form';\nimport { Accordion, AccordionItem } from '@ui/accordion/accordion';\nimport { Form } from '@ui/forms/form';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { Button } from '@ui/buttons/button';\nimport { useAvailableRoutes } from '@common/admin/appearance/sections/menus/hooks/available-routes';\nimport { List, ListItem } from '@ui/list/list';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogHeader } from '@ui/overlays/dialog/dialog-header';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { Trans } from '@ui/i18n/trans';\nimport { useValueLists } from '@common/http/value-lists';\nimport { nanoid } from 'nanoid';\nimport { ucFirst } from '@ui/utils/string/uc-first';\nexport function AddMenuItemDialog({\n  title = <Trans message=\"Add menu item\" />\n}) {\n  const {\n    data\n  } = useValueLists(['menuItemCategories']);\n  const categories = data?.menuItemCategories || [];\n  const routeItems = useAvailableRoutes();\n  return <Dialog size=\"sm\">\n      <DialogHeader>{title}</DialogHeader>\n      <DialogBody>\n        <Accordion variant=\"outline\">\n          <AccordionItem label={<Trans message=\"Link\" />} bodyClassName=\"max-h-240 overflow-y-auto\">\n            <AddCustomLink />\n          </AccordionItem>\n          <AccordionItem label={<Trans message=\"Route\" />} bodyClassName=\"max-h-240 overflow-y-auto\">\n            <AddRoute items={routeItems} />\n          </AccordionItem>\n          {categories.map(category => <AccordionItem key={category.name} label={<Trans message={category.name} />}>\n              <AddRoute items={category.items} />\n            </AccordionItem>)}\n        </Accordion>\n      </DialogBody>\n    </Dialog>;\n}\nfunction AddCustomLink() {\n  const form = useForm({\n    defaultValues: {\n      id: nanoid(6),\n      type: 'link',\n      target: '_blank'\n    }\n  });\n  const {\n    close\n  } = useDialogContext();\n  return <Form form={form} onSubmit={value => {\n    close(value);\n  }}>\n      <FormTextField required name=\"label\" label={<Trans message=\"Label\" />} className=\"mb-20\" />\n      <FormTextField required type=\"url\" name=\"action\" placeholder=\"https://\" label={<Trans message=\"Url\" />} className=\"mb-20\" />\n      <div className=\"text-right\">\n        <Button type=\"submit\" variant=\"flat\" color=\"primary\" size=\"xs\">\n          <Trans message=\"Add to menu\" />\n        </Button>\n      </div>\n    </Form>;\n}\nfunction AddRoute({\n  items\n}) {\n  const {\n    close\n  } = useDialogContext();\n  return <List>\n      {items.map(item => {\n      return <ListItem key={item.id} startIcon={<AddIcon size=\"sm\" />} onSelected={() => {\n        if (item.label) {\n          const last = item.label.split('/').pop();\n          item.label = last ? ucFirst(last) : item.label;\n          item.id = nanoid(6);\n        }\n        if (!item.target) {\n          item.target = '_self';\n        }\n        close(item);\n      }}>\n            {item.label}\n          </ListItem>;\n    })}\n    </List>;\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const DragIndicatorIcon = createSvgIcon(<path d=\"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />, 'DragIndicatorOutlined');","export default \"__VITE_ASSET__abcb02f6__\"","import { droppables } from '@ui/interactions/dnd/drag-state';\nexport const sortableLineStrategy = {\n  onDragStart: () => {},\n  onDragEnter: () => {},\n  onDragOver: ({\n    e,\n    ref,\n    item,\n    sortSession,\n    onDropPositionChange\n  }) => {\n    const previousPosition = sortSession.dropPosition;\n    let newPosition = null;\n    const rect = droppables.get(item)?.rect;\n    if (rect) {\n      const midY = rect.top + rect.height / 2;\n      if (e.clientY <= midY) {\n        newPosition = 'before';\n      } else if (e.clientY >= midY) {\n        newPosition = 'after';\n      }\n    }\n    if (newPosition !== previousPosition) {\n      const overIndex = sortSession.sortables.indexOf(item);\n      sortSession.dropPosition = newPosition;\n      onDropPositionChange?.(sortSession.dropPosition);\n      clearLinePreview(sortSession);\n      if (ref.current) {\n        if (sortSession.dropPosition === 'after') {\n          addLinePreview(ref.current, 'bottom', sortSession);\n        } else {\n          // if it's the first row, add preview to the top border, as there's no previous element\n          if (overIndex === 0) {\n            addLinePreview(ref.current, 'top', sortSession);\n            // otherwise add preview to the bottom border of the previous row\n          } else {\n            const droppableId = sortSession.sortables[overIndex - 1];\n            const droppable = droppables.get(droppableId);\n            if (droppable?.ref.current) {\n              addLinePreview(droppable.ref.current, 'bottom', sortSession);\n            }\n          }\n        }\n      }\n      const itemIndex = sortSession.sortables.indexOf(item);\n\n      // don't move item at all if hovering over itself\n      if (sortSession.activeIndex === itemIndex) {\n        sortSession.finalIndex = sortSession.activeIndex;\n        return;\n      }\n\n      // adjust final drop index based on whether we're dropping drag target after or before it's original index\n      // this is needed, so we get the same index if target is dropped after current item or before next item\n      const dragDirection = overIndex > sortSession.activeIndex ? 'after' : 'before';\n      if (dragDirection === 'after') {\n        sortSession.finalIndex = sortSession.dropPosition === 'before' ? itemIndex - 1 : itemIndex;\n      } else {\n        sortSession.finalIndex = sortSession.dropPosition === 'after' ? itemIndex + 1 : itemIndex;\n      }\n    }\n  },\n  onDragEnd: sortSession => {\n    clearLinePreview(sortSession);\n  }\n};\nfunction clearLinePreview(sortSession) {\n  if (sortSession?.linePreviewEl) {\n    sortSession.linePreviewEl.style.borderBottomColor = '';\n    sortSession.linePreviewEl.style.borderTopColor = '';\n    sortSession.linePreviewEl = undefined;\n  }\n}\nfunction addLinePreview(el, side, sortSession) {\n  const color = 'rgb(var(--be-primary))';\n  if (side === 'top') {\n    el.style.borderTopColor = color;\n  } else {\n    el.style.borderBottomColor = color;\n  }\n  if (sortSession) {\n    sortSession.linePreviewEl = el;\n  }\n}","import { clamp } from '@ui/utils/number/clamp';\nexport function moveItemInArray(array, fromIndex, toIndex) {\n  const from = clamp(fromIndex, 0, array.length - 1);\n  const to = clamp(toIndex, 0, array.length - 1);\n  if (from === to) {\n    return array;\n  }\n  const target = array[from];\n  const delta = to < from ? -1 : 1;\n  for (let i = from; i !== to; i += delta) {\n    array[i] = array[i + delta];\n  }\n  array[to] = target;\n  return array;\n}","export function moveItemInNewArray(array, from, to) {\n  const newArray = array.slice();\n  newArray.splice(to < 0 ? newArray.length + to : to, 0, newArray.splice(from, 1)[0]);\n  return newArray;\n}","import { moveItemInArray } from '@ui/utils/array/move-item-in-array';\nimport { droppables } from '@ui/interactions/dnd/drag-state';\nimport { moveItemInNewArray } from '@ui/utils/array/move-item-in-new-array';\nconst transition = 'transform 0.2s cubic-bezier(0.2, 0, 0, 1)';\nexport const sortableTransformStrategy = {\n  onDragStart: sortSession => {\n    sortSession.sortables.forEach((sortable, index) => {\n      const droppable = droppables.get(sortable);\n      if (!droppable?.ref.current) return;\n      droppable.ref.current.style.transition = transition;\n      if (sortSession?.activeIndex === index) {\n        droppable.ref.current.style.opacity = '0.4';\n      }\n    });\n  },\n  onDragEnter: (sortSession, overIndex, currentIndex) => {\n    moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n    const rects = sortSession.sortables.map(s => droppables.get(s)?.rect);\n    sortSession.sortables.forEach((sortable, index) => {\n      if (!sortSession) return;\n      const newRects = moveItemInNewArray(rects, overIndex, sortSession.activeIndex);\n      const oldRect = rects[index];\n      const newRect = newRects[index];\n      const sortableTarget = droppables.get(sortable);\n      if (sortableTarget?.ref.current && newRect && oldRect) {\n        const x = newRect.left - oldRect.left;\n        const y = newRect.top - oldRect.top;\n        sortableTarget.ref.current.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n      }\n    });\n    sortSession.finalIndex = overIndex;\n  },\n  onDragOver: () => {},\n  onDragEnd: sortSession => {\n    // clear any styles and transforms applied to sortables during sorting\n    sortSession.sortables.forEach(sortable => {\n      const droppable = droppables.get(sortable);\n      if (droppable?.ref.current) {\n        droppable.ref.current.style.transform = '';\n        droppable.ref.current.style.transition = '';\n        droppable.ref.current.style.opacity = '';\n        droppable.ref.current.style.zIndex = '';\n      }\n    });\n  }\n};","import { moveItemInArray } from '@ui/utils/array/move-item-in-array';\nimport { droppables } from '@ui/interactions/dnd/drag-state';\nexport const sortableMoveNodeStrategy = {\n  onDragStart: () => {},\n  onDragOver: () => {},\n  onDragEnter: (sortSession, overIndex, currentIndex) => {\n    const node = droppables.get(sortSession.sortables[currentIndex])?.ref.current;\n    if (node) {\n      moveNode(node, currentIndex, overIndex);\n      moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n      sortSession.finalIndex = overIndex;\n    }\n  },\n  onDragEnd: () => {}\n};\nfunction moveNode(el, currentIndex, newIndex) {\n  const parentEl = el.parentElement;\n  if (newIndex < 0) {\n    parentEl.prepend(el);\n  } else {\n    // if parent already contains this node, and we're changing\n    // node's index within parent, need to adjust index by one\n    if (currentIndex > -1 && currentIndex <= newIndex) {\n      newIndex++;\n    }\n    const ref = parentEl.children.item(newIndex);\n    if (ref) {\n      ref.before(el);\n    } else {\n      parentEl.append(el);\n    }\n  }\n}","import { useDraggable } from '../use-draggable';\nimport { useDroppable } from '../use-droppable';\nimport { useEffect } from 'react';\nimport { getScrollParent, mergeProps } from '@react-aria/utils';\nimport { droppables } from '../drag-state';\nimport { sortableLineStrategy } from '@ui/interactions/dnd/sortable/sortable-line-strategy';\nimport { sortableTransformStrategy } from '@ui/interactions/dnd/sortable/sortable-transform-strategy';\nimport { sortableMoveNodeStrategy } from '@ui/interactions/dnd/sortable/sortable-move-node-strategy';\nimport { updateRects } from '@ui/interactions/dnd/update-rects';\nlet sortSession = null;\nconst strategies = {\n  line: sortableLineStrategy,\n  liveSort: sortableTransformStrategy,\n  moveNode: sortableMoveNodeStrategy\n};\nexport function useSortable({\n  item,\n  items,\n  type,\n  ref,\n  onSortEnd,\n  onSortStart,\n  onDragEnd,\n  preview,\n  disabled,\n  onDropPositionChange,\n  strategy = 'liveSort'\n}) {\n  // todo: issue with sorting after scrolling menu editor item list\n\n  // update sortables and active index, in case we lazy load more items while sorting\n  useEffect(() => {\n    if (sortSession && sortSession.sortables.length !== items.length) {\n      sortSession.sortables = [...items];\n      sortSession.activeIndex = items.indexOf(item);\n    }\n  }, [items, item]);\n  const {\n    draggableProps,\n    dragHandleRef\n  } = useDraggable({\n    id: item,\n    ref,\n    type,\n    preview,\n    disabled,\n    onDragStart: () => {\n      sortSession = {\n        sortables: [...items],\n        activeSortable: item,\n        activeIndex: items.indexOf(item),\n        finalIndex: items.indexOf(item),\n        dropPosition: null,\n        ref,\n        scrollParent: ref.current ? getScrollParent(ref.current) : undefined,\n        scrollListener: () => {\n          updateRects(droppables);\n        }\n      };\n      strategies[strategy].onDragStart(sortSession);\n      onSortStart?.();\n      sortSession.scrollParent?.addEventListener('scroll', sortSession.scrollListener);\n    },\n    onDragEnd: () => {\n      if (!sortSession) return;\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n      if (sortSession.activeIndex !== sortSession.finalIndex) {\n        onSortEnd?.(sortSession.activeIndex, sortSession.finalIndex);\n      }\n      sortSession.scrollParent?.removeEventListener('scroll', sortSession.scrollListener);\n      strategies[strategy].onDragEnd(sortSession);\n      // call \"onDragEnd\" after \"onSortEnd\", so listener has a chance to use sort session data\n      onDragEnd?.();\n      sortSession = null;\n    },\n    getData: () => {}\n  });\n  const {\n    droppableProps\n  } = useDroppable({\n    id: item,\n    ref,\n    types: [type],\n    disabled,\n    allowDragEventsFromItself: true,\n    onDragOver: (target, e) => {\n      if (!sortSession) return;\n      strategies[strategy].onDragOver({\n        e,\n        ref,\n        item,\n        sortSession,\n        onDropPositionChange\n      });\n    },\n    onDragEnter: () => {\n      if (!sortSession) return;\n      const overIndex = sortSession.sortables.indexOf(item);\n      const oldIndex = sortSession.sortables.indexOf(sortSession.activeSortable);\n      strategies[strategy].onDragEnter(sortSession, overIndex, oldIndex);\n    },\n    onDragLeave: () => {\n      if (!sortSession) return;\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n    }\n  });\n  return {\n    sortableProps: {\n      ...mergeProps(draggableProps, droppableProps)\n    },\n    dragHandleRef\n  };\n}","import { useFormContext, useWatch } from 'react-hook-form';\nimport { Fragment, useEffect, useMemo, useRef } from 'react';\nimport { Link, useNavigate, useParams } from 'react-router';\nimport { appearanceState, useAppearanceStore } from '@common/admin/appearance/appearance-store';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { Button } from '@ui/buttons/button';\nimport { AddMenuItemDialog } from '@common/admin/appearance/sections/menus/add-menu-item-dialog';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { DragIndicatorIcon } from '@ui/icons/material/DragIndicator';\nimport { ConfirmationDialog } from '@ui/overlays/dialog/confirmation-dialog';\nimport { IllustratedMessage } from '@ui/images/illustrated-message';\nimport { SvgImage } from '@ui/images/svg-image';\nimport { DeleteIcon } from '@ui/icons/material/Delete';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { Option } from '@ui/forms/select/select';\nimport { Trans } from '@ui/i18n/trans';\nimport dropdownMenu from './dropdown-menu.svg';\nimport { FormChipField } from '@ui/forms/input-field/chip-field/form-chip-field';\nimport { useSortable } from '@ui/interactions/dnd/sortable/use-sortable';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { createSvgIconFromTree } from '@ui/icons/create-svg-icon';\nimport { useSettings } from '@ui/settings/use-settings';\nimport { moveItemInNewArray } from '@ui/utils/array/move-item-in-new-array';\nexport function AppearanceMenuEditor() {\n  const {\n    menuIndex\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    getValues\n  } = useFormContext();\n  const menuFormPath = `settings.menus.${menuIndex}`;\n  const menu = getValues(menuFormPath);\n  useEffect(() => {\n    // go to menu list, if menu can't be found\n    if (!menu) {\n      navigate('/admin/appearance/menus');\n    } else {\n      appearanceState().preview.setHighlight(`[data-menu-id=\"${menu.id}\"]`);\n    }\n  }, [navigate, menu]);\n  if (!menu) {\n    return null;\n  }\n  return <MenuEditorSection menuFormPath={menuFormPath} />;\n}\nfunction MenuEditorSection({\n  menuFormPath\n}) {\n  const {\n    site: {\n      has_mobile_app\n    }\n  } = useSettings();\n  const menuSectionConfig = useAppearanceStore(s => s.config?.sections.menus.config);\n  const menuPositions = useMemo(() => {\n    const positions = [...menuSectionConfig?.positions];\n    if (has_mobile_app) {\n      positions.push('mobile-app-about');\n    }\n    return positions.map(position => ({\n      key: position,\n      name: position.replaceAll('-', ' ')\n    }));\n  }, [menuSectionConfig, has_mobile_app]);\n  return <Fragment>\n      <div className=\"mb-30 border-b pb-30\">\n        <FormTextField name={`${menuFormPath}.name`} label={<Trans message=\"Menu name\" />} className=\"mb-20\" autoFocus />\n        <FormChipField chipSize=\"sm\" name={`${menuFormPath}.positions`} valueKey=\"id\" label={<Trans message=\"Menu positions\" />} description={<Trans message=\"Where should this menu appear on the site\" />}>\n          {menuPositions.map(item => <Option key={item.key} value={item.key} capitalizeFirst>\n              {item.name}\n            </Option>)}\n        </FormChipField>\n      </div>\n      <MenuItemsManager formPath={`${menuFormPath}.items`} />\n      <div className=\"text-right\">\n        <DeleteMenuTrigger />\n      </div>\n    </Fragment>;\n}\nexport function MenuItemsManager({\n  formPath\n}) {\n  const navigate = useNavigate();\n  const form = useFormContext();\n  const items = useWatch({\n    control: form.control,\n    name: formPath\n  });\n  return <Fragment>\n      <div className=\"flex flex-shrink-0 items-center justify-between gap-16\">\n        <Trans message=\"Menu items\" />\n        <DialogTrigger type=\"popover\" placement=\"right\" offset={20} onClose={menuItemConfig => {\n        if (menuItemConfig) {\n          form.setValue(formPath, [...items, menuItemConfig], {\n            shouldDirty: true\n          });\n          navigate(`${items.length}`);\n        }\n      }}>\n          <Button variant=\"outline\" color=\"primary\" size=\"xs\" startIcon={<AddIcon />}>\n            <Trans message=\"Add\" />\n          </Button>\n          <AddMenuItemDialog />\n        </DialogTrigger>\n      </div>\n      <div className=\"mt-20 flex-shrink-0\">\n        {items.map((item, index) => <MenuListItem key={item.id} item={item} items={items} index={index} onSortEnd={(oldIndex, newIndex) => {\n        form.setValue(formPath, moveItemInNewArray(items, oldIndex, newIndex), {\n          shouldDirty: true\n        });\n      }} />)}\n        {!items.length ? <IllustratedMessage size=\"xs\" className=\"my-40\" image={<SvgImage src={dropdownMenu} />} title={<Trans message=\"No menu items yet\" />} description={<Trans message=\"Click “add“ button to start adding links, pages, routes and other items to this menu. \" />} /> : null}\n      </div>\n    </Fragment>;\n}\nfunction DeleteMenuTrigger() {\n  const navigate = useNavigate();\n  const params = useParams();\n  const menuIndex = parseInt(params.menuIndex);\n  const form = useFormContext();\n  const name = `settings.menus`;\n  const menus = useWatch({\n    control: form.control,\n    name\n  });\n  const menu = menus[menuIndex];\n  if (!menu) return null;\n  return <DialogTrigger type=\"modal\" onClose={isConfirmed => {\n    if (isConfirmed) {\n      form.setValue(name, menus.filter((_, i) => i != menuIndex), {\n        shouldDirty: true\n      });\n      navigate('/admin/appearance/menus');\n    }\n  }}>\n      <Button variant=\"outline\" color=\"danger\" size=\"xs\" startIcon={<DeleteIcon />}>\n        <Trans message=\"Delete menu\" />\n      </Button>\n      <ConfirmationDialog isDanger title={<Trans message=\"Delete menu\" />} body={<Trans message=\"Are you sure you want to delete “:name“?\" values={{\n      name: menu.name\n    }} />} confirm={<Trans message=\"Delete\" />} />\n    </DialogTrigger>;\n}\nfunction MenuListItem({\n  item,\n  items,\n  index,\n  onSortEnd\n}) {\n  const ref = useRef(null);\n  const {\n    sortableProps,\n    dragHandleRef\n  } = useSortable({\n    item,\n    items,\n    type: 'menuEditorSortable',\n    ref,\n    onSortEnd,\n    strategy: 'liveSort'\n  });\n  const Icon = item.icon && createSvgIconFromTree(item.icon);\n  const iconOnlyLabel = <div className=\"flex items-center gap-4 text-xs text-muted\">\n      {Icon && <Icon size=\"sm\" />}\n      (<Trans message=\"No label...\" />)\n    </div>;\n  return <Fragment>\n      <AppearanceButton elementType={Link} to={`${index}`} ref={ref} {...sortableProps}>\n        <div className=\"flex items-center gap-10\">\n          <IconButton ref={dragHandleRef} size=\"sm\">\n            <DragIndicatorIcon className=\"text-muted hover:cursor-move\" />\n          </IconButton>\n          <div>{item.label || iconOnlyLabel}</div>\n        </div>\n      </AppearanceButton>\n    </Fragment>;\n}","import { useFieldArray, useFormContext } from 'react-hook-form';\nimport { Fragment, useEffect } from 'react';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { Button } from '@ui/buttons/button';\nimport { DeleteIcon } from '@ui/icons/material/Delete';\nimport { ConfirmationDialog } from '@ui/overlays/dialog/confirmation-dialog';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { Trans } from '@ui/i18n/trans';\nimport { useNavigate } from '@common/ui/navigation/use-navigate';\nimport { MenuItemForm } from '@common/admin/menus/menu-item-form';\nimport { useParams } from 'react-router';\nexport function AppearanceMenuItemEditor() {\n  const {\n    menuIndex,\n    menuItemIndex\n  } = useParams();\n  return <MenuItemEditor itemsPath={`settings.menus.${menuIndex}.items`} itemIndex={menuItemIndex} />;\n}\nexport function MenuItemEditor({\n  itemsPath,\n  itemIndex\n}) {\n  const navigate = useNavigate();\n  const {\n    getValues\n  } = useFormContext();\n  const item = getValues(`${itemsPath}.${itemIndex}`);\n\n  // go to menu editor, if menu item can't be found\n  useEffect(() => {\n    if (!item) {\n      navigate(`..`, {\n        relative: 'path',\n        replace: true\n      });\n    } else {\n      appearanceState().preview.setHighlight(`[data-menu-item-id=\"${item.id}\"]`);\n    }\n  }, [navigate, item]);\n\n  // only render form when menu and item are available to avoid issues with hook form default values\n  if (!item) {\n    return null;\n  }\n  return <MenuItemEditorSection itemsPath={itemsPath} itemIndex={itemIndex} />;\n}\nfunction MenuItemEditorSection({\n  itemsPath,\n  itemIndex\n}) {\n  return <Fragment>\n      <MenuItemForm formPathPrefix={`${itemsPath}.${itemIndex}`} />\n      <div className=\"mt-40 text-right\">\n        <DeleteItemTrigger itemsPath={itemsPath} itemIndex={itemIndex} />\n      </div>\n    </Fragment>;\n}\nfunction DeleteItemTrigger({\n  itemsPath,\n  itemIndex\n}) {\n  const navigate = useNavigate();\n  const {\n    fields\n  } = useFieldArray({\n    name: itemsPath\n  });\n  const {\n    setValue,\n    getValues\n  } = useFormContext();\n  const item = fields[+itemIndex];\n  return <DialogTrigger type=\"modal\" onClose={isConfirmed => {\n    if (isConfirmed) {\n      if (itemIndex) {\n        const currentItems = getValues(itemsPath);\n        setValue(itemsPath, currentItems.filter((_, i) => i !== +itemIndex), {\n          shouldDirty: true\n        });\n        navigate(`..`, {\n          relative: 'path',\n          replace: true\n        });\n      }\n    }\n  }}>\n      <Button variant=\"outline\" color=\"danger\" size=\"xs\" startIcon={<DeleteIcon />}>\n        <Trans message=\"Delete this item\" />\n      </Button>\n      <ConfirmationDialog isDanger title={<Trans message=\"Delete item\" />} body={<Trans message=\"Are you sure you want to delete “:name“?\" values={{\n      name: item.label\n    }} />} confirm={<Trans message=\"Delete\" />} />\n    </DialogTrigger>;\n}","import { useMutation } from '@tanstack/react-query';\nimport { toast } from '@ui/toast/toast';\nimport { apiClient, queryClient } from '@common/http/query-client';\nimport { showHttpErrorToast } from '@common/http/show-http-error-toast';\nimport { message } from '@ui/i18n/message';\nexport const saveAppearanceChangesMutationKey = ['appearance-editor-save'];\nexport function useSaveAppearanceChanges() {\n  return useMutation({\n    mutationKey: saveAppearanceChangesMutationKey,\n    mutationFn: values => {\n      return saveChanges(values);\n    },\n    onSuccess: async response => {\n      queryClient.setQueryData(['admin/appearance/values'], response);\n      toast(message('Changes saved'));\n    },\n    onError: err => showHttpErrorToast(err)\n  });\n}\nfunction saveChanges(changes) {\n  return apiClient.post(`admin/appearance`, {\n    changes\n  }).then(r => r.data);\n}","import { useBlocker } from 'react-router';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { ConfirmationDialog } from '@ui/overlays/dialog/confirmation-dialog';\nimport { Trans } from '@ui/i18n/trans';\nimport { useEffect } from 'react';\nexport function BlockerDialog({\n  isBlocked,\n  allowedPath\n}) {\n  const {\n    state,\n    reset,\n    proceed\n  } = useBlocker(({\n    nextLocation\n  }) => {\n    return isBlocked && (\n    // only block navigation if specified path is not within next location\n    !allowedPath || !nextLocation.pathname.includes(allowedPath));\n  });\n  useEffect(() => {\n    const handleBeforeUnload = e => {\n      if (isBlocked) {\n        e.preventDefault();\n        e.returnValue = true;\n      }\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [isBlocked]);\n  return <DialogTrigger type=\"modal\" isOpen={state === 'blocked'} onClose={isConfirmed => {\n    if (state !== 'blocked') return;\n    if (isConfirmed) {\n      proceed();\n    } else {\n      reset();\n    }\n  }}>\n      <ConfirmationDialog isDanger title={<Trans message=\"You have unsaved changes\" />} body={<Trans message=\"Your changes will be lost if you continue. Are you sure you want to discard them?\" />} close={<Trans message=\"Stay here\" />} confirm={<Trans message=\"Discard changes\" />} />\n    </DialogTrigger>;\n}","import { Fragment, useEffect } from 'react';\nimport { Form } from '@ui/forms/form';\nimport { useFormState } from 'react-hook-form';\nimport { appearanceState, useAppearanceStore } from '@common/admin/appearance/appearance-store';\nimport { saveAppearanceChangesMutationKey, useSaveAppearanceChanges } from '@common/admin/appearance/requests/use-save-appearance-editor-changes';\nimport { FileUploadProvider } from '@common/uploads/uploader/file-upload-provider';\nimport { Link, useLocation } from 'react-router';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { CloseIcon } from '@ui/icons/material/Close';\nimport { Trans } from '@ui/i18n/trans';\nimport { Button } from '@ui/buttons/button';\nimport { useIsMutating } from '@tanstack/react-query';\nimport { BlockerDialog } from '@ui/overlays/dialog/blocker-dialog';\nexport function AppearanceEditorForm({\n  children,\n  breadcrumb,\n  form,\n  blockerAllowedPath\n}) {\n  const {\n    isDirty\n  } = useFormState({\n    control: form.control\n  });\n  useEffect(() => {\n    appearanceState().setIsDirty(isDirty);\n    return () => appearanceState().setIsDirty(false);\n  }, [isDirty]);\n  useEffect(() => {\n    const subscription = form.watch(values => {\n      appearanceState().preview.setValues(values);\n    });\n    return () => subscription.unsubscribe();\n  }, [form]);\n  const saveChanges = useSaveAppearanceChanges();\n  return <Fragment>\n      <AppearanceEditorLayout breadcrumb={breadcrumb}>\n        <FileUploadProvider>\n          <Form className=\"h-full flex-auto\" id=\"appearance-editor\" form={form} onSubmit={values => {\n          saveChanges.mutate(values, {\n            onSuccess: () => form.reset(values)\n          });\n        }}>\n            {children}\n          </Form>\n        </FileUploadProvider>\n      </AppearanceEditorLayout>\n      <BlockerDialog isBlocked={isDirty} allowedPath={blockerAllowedPath} />\n    </Fragment>;\n}\nexport function AppearanceEditorLayout({\n  breadcrumb,\n  children\n}) {\n  return <div className=\"flex h-full flex-col\">\n      <AppearanceEditorHeader />\n      {breadcrumb}\n      <div className=\"flex-auto overflow-y-auto\">\n        <div className=\"flex h-full flex-col px-14 py-20\">{children}</div>\n      </div>\n    </div>;\n}\nfunction AppearanceEditorHeader() {\n  const {\n    state\n  } = useLocation();\n  const isSaving = useIsMutating({\n    mutationKey: saveAppearanceChangesMutationKey\n  }) > 0;\n  const isDirty = useAppearanceStore(s => s.isDirty);\n  return <div className=\"flex h-50 flex-shrink-0 items-center border-b pr-10\">\n      <IconButton border=\"border-r\" className=\"text-muted\" elementType={Link} to={state?.prevPath || '/admin'} replace>\n        <CloseIcon />\n      </IconButton>\n      <div className=\"pl-10\">\n        <Trans message=\"Appearance editor\" />\n      </div>\n      <Button variant=\"flat\" color=\"primary\" className=\"ml-auto block\" disabled={!isDirty || isSaving} type=\"submit\" form=\"appearance-editor\">\n        {isDirty ? <Trans message=\"Save\" /> : <Trans message=\"Saved\" />}\n      </Button>\n    </div>;\n}","import { useLocation } from 'react-router';\nexport function usePreviousPath() {\n  const location = useLocation();\n  return new URL('.', window.origin + location.pathname).pathname.replace(/\\/$/, '');\n}","import { Link } from 'react-router';\nimport clsx from 'clsx';\nimport React, { Children, Fragment } from 'react';\nimport { KeyboardArrowRightIcon } from '@ui/icons/material/KeyboardArrowRight';\nimport { Trans } from '@ui/i18n/trans';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { KeyboardArrowLeftIcon } from '@ui/icons/material/KeyboardArrowLeft';\nimport { usePreviousPath } from '@common/ui/navigation/use-previous-path';\nexport function AppearanceEditorBreadcrumb({\n  children,\n  backLink\n}) {\n  const childrenArray = Children.toArray(children);\n  const previousPath = usePreviousPath();\n  const categories = [<Trans key=\"mainLabel\" message=\"Customizing\" />];\n  if (childrenArray.length > 1) {\n    categories.push(childrenArray[0]);\n  }\n  const sections = childrenArray.length > 1 ? childrenArray.slice(1) : childrenArray;\n  return <div className=\"flex h-60 flex-shrink-0 items-center border-b\">\n      <IconButton iconSize=\"md\" radius=\"rounded-none\" className=\"h-full w-50 flex-shrink-0 text-muted\" elementType={Link} to={backLink ?? previousPath}>\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"min-w-0 border-l p-10\">\n        <LabelList items={categories} className=\"text-xs text-muted\" />\n        <LabelList items={sections} isEmphasized className=\"mt-2 text-sm\" />\n      </div>\n    </div>;\n}\nfunction LabelList({\n  items,\n  className,\n  isEmphasized\n}) {\n  return <div className={clsx('flex items-center gap-4', className)}>\n      {items.map((item, index) => {\n      const isLast = items.length - 1 === index;\n      return <Fragment key={index}>\n            <div className={clsx('min-w-0 overflow-hidden overflow-ellipsis whitespace-nowrap', isLast && isEmphasized && 'text-primary')}>\n              {item}\n            </div>\n            {!isLast && (isEmphasized ? <KeyboardArrowRightIcon className=\"flex-shrink-0 text-muted\" size=\"font-inherit\" /> : <div>&bull;</div>)}\n          </Fragment>;\n    })}\n    </div>;\n}","import { appearanceState, useAppearanceStore } from '../appearance-store';\nimport { FormImageSelector } from '@common/uploads/components/image-selector';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { Trans } from '@ui/i18n/trans';\nimport { useForm } from 'react-hook-form';\nimport { useAppearanceEditorValues } from '@common/admin/appearance/requests/use-appearance-editor-values';\nimport { AppearanceEditorForm } from '@common/admin/appearance/appearance-editor-form';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nexport function GeneralSection() {\n  const values = useAppearanceEditorValues();\n  const form = useForm({\n    defaultValues: {\n      settings: {\n        branding: {\n          favicon: values.settings.branding.favicon,\n          logo_light: values.settings.branding.logo_light,\n          logo_dark: values.settings.branding.logo_dark,\n          logo_light_mobile: values.settings.branding.logo_light_mobile,\n          logo_dark_mobile: values.settings.branding.logo_dark_mobile,\n          site_description: values.settings.branding.site_description\n        }\n      },\n      appearance: {\n        env: {\n          app_name: values.appearance.env.app_name\n        }\n      }\n    }\n  });\n  return <AppearanceEditorForm form={form} breadcrumb={<AppearanceEditorBreadcrumb>\n          <Trans message=\"General\" />\n        </AppearanceEditorBreadcrumb>}>\n      <BrandingImageSelector label={<Trans message=\"Favicon\" />} description={<Trans message=\"This will generate different size favicons. Image should be at least 512x512 in size.\" />} type=\"favicon\" />\n      <BrandingImageSelector label={<Trans message=\"Light logo\" />} description={<Trans message=\"Will be used on dark backgrounds.\" />} type=\"logo_light\" />\n      <BrandingImageSelector label={<Trans message=\"Dark logo\" />} description={<Trans message=\"Will be used on light backgrounds. Will default to light logo if left empty.\" />} type=\"logo_dark\" />\n      <BrandingImageSelector label={<Trans message=\"Mobile light logo\" />} description={<Trans message=\"Will be used on light backgrounds on mobile. Will default to desktop logo if left empty.\" />} type=\"logo_light_mobile\" />\n      <BrandingImageSelector label={<Trans message=\"Mobile dark logo\" />} description={<Trans message=\"Will be used on dark backgrounds on mobile. Will default to desktop if left empty.\" />} type=\"logo_dark_mobile\" />\n      <SiteNameTextField />\n      <SiteDescriptionTextArea />\n    </AppearanceEditorForm>;\n}\nfunction BrandingImageSelector({\n  label,\n  description,\n  type\n}) {\n  const defaultValue = useAppearanceStore(s => s.defaults?.settings.branding[type]);\n  return <FormImageSelector name={`settings.branding.${type}`} className=\"mb-30 border-b pb-30\" label={label} description={description} diskPrefix=\"branding_media\" defaultValue={defaultValue} onChange={() => {\n    appearanceState().preview.setHighlight('[data-logo=\"navbar\"]');\n  }} />;\n}\nfunction SiteNameTextField() {\n  return <FormTextField name=\"appearance.env.app_name\" required className=\"mt-20\" label={<Trans message=\"Site name\" />} />;\n}\nfunction SiteDescriptionTextArea() {\n  return <FormTextField name=\"settings.branding.site_description\" className=\"mt-20\" inputElementType=\"textarea\" rows={4} label={<Trans message=\"Site description\" />} />;\n}","export function randomNumber(min = 1, max = 10000) {\n  const randomBuffer = new Uint32Array(1);\n  window.crypto.getRandomValues(randomBuffer);\n  const number = randomBuffer[0] / (0xffffffff + 1);\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(number * (max - min + 1)) + min;\n}","import { NavLink, useNavigate } from 'react-router';\nimport { Fragment } from 'react';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { Button } from '@ui/buttons/button';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { Trans } from '@ui/i18n/trans';\nimport { useFormContext } from 'react-hook-form';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { message } from '@ui/i18n/message';\nimport { randomNumber } from '@ui/utils/string/random-number';\nexport function ThemeList({\n  type,\n  children,\n  disabled\n}) {\n  const {\n    trans\n  } = useTrans();\n  const navigate = useNavigate();\n  const {\n    watch,\n    getValues,\n    setValue\n  } = useFormContext();\n  return <Fragment>\n      {children}\n      <div className=\"mb-20\">\n        <Button size=\"xs\" variant=\"outline\" color=\"primary\" startIcon={<AddIcon />} disabled={disabled} onClick={() => {\n        const lightThemeColors = appearanceState().defaults?.appearance.themes.light;\n        const currentThemes = getValues('appearance.themes');\n        setValue('appearance.themes', [...currentThemes, {\n          id: randomNumber(),\n          name: trans(message('New theme')),\n          values: lightThemeColors,\n          type\n        }], {\n          shouldDirty: true\n        });\n        navigate(`${currentThemes.length}`);\n      }}>\n          <Trans message=\"New theme\" />\n        </Button>\n      </div>\n      {watch('appearance.themes').map((field, index) => <AppearanceButton key={field.id} to={`${index}`} elementType={NavLink} disabled={disabled}>\n          {field.name}\n        </AppearanceButton>)}\n    </Fragment>;\n}","import React, { Suspense, useState } from 'react';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogHeader } from '@ui/overlays/dialog/dialog-header';\nimport { Trans } from '@ui/i18n/trans';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { Button } from '@ui/buttons/button';\nconst AceEditor = React.lazy(() => import('./ace-editor'));\nexport function AceDialog({\n  defaultValue,\n  mode = 'html',\n  title,\n  onSave,\n  isSaving,\n  footerStartAction,\n  beautify,\n  editorRef\n}) {\n  const [value, setValue] = useState(defaultValue);\n  const [isValid, setIsValid] = useState(true);\n  return <Dialog size=\"fullscreen\" className=\"h-full w-full\">\n      <DialogHeader>{title}</DialogHeader>\n      <DialogBody className=\"relative flex-auto\" padding=\"p-0\">\n        <Suspense fallback={<div className=\"flex h-400 w-full items-center justify-center\">\n              <ProgressCircle aria-label=\"Loading editor...\" isIndeterminate size=\"md\" />\n            </div>}>\n          <AceEditor beautify={beautify} mode={mode} onChange={newValue => setValue(newValue)} defaultValue={value || ''} onIsValidChange={setIsValid} editorRef={editorRef} />\n        </Suspense>\n      </DialogBody>\n      <Footer disabled={!isValid || isSaving} value={value} onSave={onSave} startAction={footerStartAction} />\n    </Dialog>;\n}\nfunction Footer({\n  disabled,\n  value,\n  onSave,\n  startAction\n}) {\n  const {\n    close\n  } = useDialogContext();\n  return <DialogFooter dividerTop startAction={startAction}>\n      <Button onClick={() => close()}>\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button disabled={disabled} variant=\"flat\" color=\"primary\" onClick={() => {\n      if (onSave) {\n        onSave(value);\n      } else {\n        close(value);\n      }\n    }}>\n        <Trans message=\"Save\" />\n      </Button>\n    </DialogFooter>;\n}","import { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@common/http/query-client';\nexport function useSeoTags(name) {\n  return useQuery({\n    queryKey: ['admin', 'seo-tags', name],\n    queryFn: () => fetchTags(name)\n  });\n}\nfunction fetchTags(name) {\n  return apiClient.get(`admin/appearance/seo-tags/${name}`).then(response => response.data);\n}","import { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@common/http/query-client';\nimport { showHttpErrorToast } from '@common/http/show-http-error-toast';\nimport { toast } from '@ui/toast/toast';\nimport { message } from '@ui/i18n/message';\nexport function useUpdateSeoTags(name) {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: payload => updateTags(name, payload.tags),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: ['admin', 'seo-tags', name]\n      });\n      toast(message('Updated SEO tags'));\n    },\n    onError: err => showHttpErrorToast(err)\n  });\n}\nfunction updateTags(name, tags) {\n  return apiClient.put(`admin/appearance/seo-tags/${name}`, {\n    tags\n  }).then(r => r.data);\n}","import { Fragment, useRef } from 'react';\nimport { Trans } from '@ui/i18n/trans';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { AceDialog } from '@common/ace-editor/ace-dialog';\nimport mergedAppearanceConfig from '@common/admin/appearance/config/merged-appearance-config';\nimport { useSeoTags } from '@common/admin/appearance/sections/seo/use-seo-tags';\nimport { useUpdateSeoTags } from '@common/admin/appearance/sections/seo/use-update-seo-tags';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { FullPageLoader } from '@ui/progress/full-page-loader';\nimport { Button } from '@ui/buttons/button';\nimport { AppearanceEditorLayout } from '@common/admin/appearance/appearance-editor-form';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nconst pages = mergedAppearanceConfig.sections['seo-settings'].config?.pages || [];\nconst names = pages.map(page => page.key);\nexport function SeoSection() {\n  const {\n    isLoading\n  } = useSeoTags(names);\n  return <AppearanceEditorLayout breadcrumb={<AppearanceEditorBreadcrumb>\n          <Trans message=\"SEO\" />\n        </AppearanceEditorBreadcrumb>}>\n      {isLoading ? <FullPageLoader /> : <Fragment>\n          {pages.map(page => <TagEditorTrigger key={page.key} label={page.label} name={page.key} />)}\n        </Fragment>}\n    </AppearanceEditorLayout>;\n}\nfunction TagEditorTrigger({\n  label,\n  name\n}) {\n  const {\n    data,\n    isLoading\n  } = useSeoTags(names);\n  return <DialogTrigger type=\"modal\">\n      <AppearanceButton disabled={isLoading}>\n        <Trans {...label} />\n      </AppearanceButton>\n      {data ? <TagsEditorDialog name={name} value={data[name]} /> : null}\n    </DialogTrigger>;\n}\nfunction TagsEditorDialog({\n  name,\n  value\n}) {\n  const {\n    close\n  } = useDialogContext();\n  const updateTags = useUpdateSeoTags(name);\n  const editorRef = useRef(null);\n  const resetButton = <Button variant=\"outline\" color=\"primary\" onClick={() => {\n    if (editorRef.current) {\n      editorRef.current.editor.setValue(value.original);\n    }\n  }}>\n      <Trans message=\"Reset to original\" />\n    </Button>;\n  return <AceDialog mode=\"php_laravel_blade\" title={<Trans message=\"Edit SEO meta tags\" />} footerStartAction={resetButton} editorRef={editorRef} defaultValue={value.custom || value.original} isSaving={updateTags.isPending} beautify={false} onSave={newValue => {\n    if (newValue != null) {\n      updateTags.mutate({\n        tags: newValue\n      }, {\n        onSuccess: () => close()\n      });\n    }\n  }} />;\n}","import { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { Trans } from '@ui/i18n/trans';\nimport { useForm, useFormContext } from 'react-hook-form';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { AceDialog } from '@common/ace-editor/ace-dialog';\nimport { AppearanceEditorForm } from '@common/admin/appearance/appearance-editor-form';\nimport { useAppearanceEditorValues } from '@common/admin/appearance/requests/use-appearance-editor-values';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nexport function CustomCodeSection() {\n  const values = useAppearanceEditorValues();\n  const form = useForm({\n    defaultValues: {\n      appearance: {\n        custom_code: {\n          css: values.appearance.custom_code.css,\n          html: values.appearance.custom_code.html\n        }\n      }\n    }\n  });\n  return <AppearanceEditorForm form={form} breadcrumb={<AppearanceEditorBreadcrumb>\n          <Trans message=\"Custom code\" />\n        </AppearanceEditorBreadcrumb>}>\n      <CustomCodeDialogTrigger mode=\"css\" />\n      <CustomCodeDialogTrigger mode=\"html\" />\n    </AppearanceEditorForm>;\n}\nfunction CustomCodeDialogTrigger({\n  mode\n}) {\n  const {\n    getValues\n  } = useFormContext();\n  const {\n    setValue\n  } = useFormContext();\n  const title = mode === 'html' ? <Trans message=\"Custom HTML & JavaScript\" /> : <Trans message=\"Custom CSS\" />;\n  return <DialogTrigger type=\"modal\" onClose={newValue => {\n    if (newValue != null) {\n      setValue(`appearance.custom_code.${mode}`, newValue, {\n        shouldDirty: true\n      });\n      appearanceState().preview.setCustomCode(mode, newValue);\n    }\n  }}>\n      <AppearanceButton>{title}</AppearanceButton>\n      <AceDialog title={title} defaultValue={getValues(`appearance.custom_code.${mode}`) || ''} mode={mode} />\n    </DialogTrigger>;\n}","import { createSvgIcon } from '@ui/icons/create-svg-icon';\nexport const ColorIcon = createSvgIcon(<path stroke=\"#E0E0E0\" d=\"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z\" />);","import { parseColor } from '@react-stately/color';\nexport function colorToThemeValue(color) {\n  return parseColor(color).toString('rgb').replace('rgb(', '').replace(')', '').replace(/, ?/g, ' ');\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const TuneIcon = createSvgIcon(<path d=\"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z\" />, 'TuneOutlined');","import { useForm, useFormContext } from 'react-hook-form';\nimport { useEffect } from 'react';\nimport { TuneIcon } from '@ui/icons/material/Tune';\nimport { Button } from '@ui/buttons/button';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { FormSwitch } from '@ui/forms/toggle/switch';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogHeader } from '@ui/overlays/dialog/dialog-header';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { Trans } from '@ui/i18n/trans';\nimport { Form } from '@ui/forms/form';\nimport { useParams } from 'react-router';\nexport function ThemeSettingsDialogTrigger() {\n  const {\n    getValues,\n    setValue\n  } = useFormContext();\n  const {\n    themeIndex\n  } = useParams();\n  const theme = getValues(`appearance.themes.${+themeIndex}`);\n  return <DialogTrigger type=\"modal\" onClose={value => {\n    if (!value) return;\n    getValues('appearance.themes').forEach((currentTheme, index) => {\n      // update changed theme\n      if (currentTheme.id === value.id) {\n        setValue(`appearance.themes.${index}`, value, {\n          shouldDirty: true\n        });\n        return;\n      }\n\n      // unset \"default_light\" and \"default_dark\" on other themes\n      if (value.default_light) {\n        setValue(`appearance.themes.${index}`, {\n          ...currentTheme,\n          default_light: false\n        }, {\n          shouldDirty: true\n        });\n        return;\n      }\n      if (value.default_dark) {\n        setValue(`appearance.themes.${index}`, {\n          ...currentTheme,\n          default_dark: false\n        }, {\n          shouldDirty: true\n        });\n        return;\n      }\n    });\n  }}>\n      <Button size=\"xs\" variant=\"outline\" color=\"primary\" startIcon={<TuneIcon />}>\n        <Trans message=\"Settings\" />\n      </Button>\n      <SettingsDialog theme={theme} />\n    </DialogTrigger>;\n}\nfunction SettingsDialog({\n  theme\n}) {\n  const form = useForm({\n    defaultValues: theme\n  });\n  const {\n    close,\n    formId\n  } = useDialogContext();\n  useEffect(() => {\n    const subscription = form.watch((value, {\n      name\n    }) => {\n      // theme can only be set as either light or dark default\n      if (name === 'default_light' && value.default_light) {\n        form.setValue('default_dark', false);\n      }\n      if (name === 'default_dark' && value.default_dark) {\n        form.setValue('default_light', false);\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [form]);\n  return <Dialog>\n      <DialogHeader>\n        <Trans message=\"Update settings\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form form={form} id={formId} onSubmit={values => {\n        close(values);\n      }}>\n          <FormTextField name=\"name\" label={<Trans message=\"Name\" />} className=\"mb-30\" autoFocus />\n          <FormSwitch name=\"is_dark\" className=\"mb-20 border-b pb-20\" description={<Trans message=\"Whether this theme has light text on dark background.\" />}>\n            <Trans message=\"Dark theme\" />\n          </FormSwitch>\n          <FormSwitch name=\"default_light\" className=\"mb-30\" description={<Trans message=\"When light mode is selected, this theme will be used.\" />}>\n            <Trans message=\"Default for light mode\" />\n          </FormSwitch>\n          <FormSwitch name=\"default_dark\" description={<Trans message=\"When dark mode is selected, this theme will be used.\" />}>\n            <Trans message=\"Default for dark mode\" />\n          </FormSwitch>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => {\n        close();\n      }}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button variant=\"flat\" color=\"primary\" type=\"submit\" form={formId} disabled={!form.formState.isDirty}>\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>;\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const RestartAltIcon = createSvgIcon(<path d=\"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z\" />, 'RestartAltOutlined');","import { Fragment, useState } from 'react';\nimport { DeleteIcon } from '@ui/icons/material/Delete';\nimport { ConfirmationDialog } from '@ui/overlays/dialog/confirmation-dialog';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { MoreVertIcon } from '@ui/icons/material/MoreVert';\nimport { RestartAltIcon } from '@ui/icons/material/RestartAlt';\nimport { appearanceState } from '../../appearance-store';\nimport { toast } from '@ui/toast/toast';\nimport { Menu, MenuItem, MenuTrigger } from '@ui/menu/menu-trigger';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { message } from '@ui/i18n/message';\nimport { Trans } from '@ui/i18n/trans';\nimport { useNavigate } from '@common/ui/navigation/use-navigate';\nimport { useFormContext } from 'react-hook-form';\nimport { useParams } from 'react-router';\nexport function ThemeMoreOptionsButton() {\n  const navigate = useNavigate();\n  const {\n    themeIndex\n  } = useParams();\n  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false);\n  const {\n    setValue,\n    getValues\n  } = useFormContext();\n  const deleteTheme = () => {\n    if (getValues('appearance.themes').length <= 1) {\n      toast.danger(message('At least one theme is required'));\n      return;\n    }\n    if (themeIndex) {\n      navigate('..', {\n        relative: 'path',\n        replace: true\n      });\n      setValue('appearance.themes', getValues('appearance.themes').filter((_, i) => i !== +themeIndex), {\n        shouldDirty: true\n      });\n    }\n  };\n  return <Fragment>\n      <MenuTrigger onItemSelected={key => {\n      if (key === 'delete') {\n        setConfirmDialogOpen(true);\n      } else if (key === 'reset') {\n        const path = `appearance.themes.${+themeIndex}`;\n        const defaultColors = getValues(`${path}.is_dark`) ? appearanceState().defaults.appearance.themes.dark : appearanceState().defaults.appearance.themes.light;\n        Object.entries(defaultColors).forEach(([colorName, themeValue]) => {\n          appearanceState().preview.setThemeValue(colorName, themeValue);\n        });\n        appearanceState().preview.setThemeFont(null);\n        setValue(`${path}.values`, defaultColors, {\n          shouldDirty: true\n        });\n        setValue(`${path}.font`, undefined, {\n          shouldDirty: true\n        });\n      }\n    }}>\n        <IconButton size=\"md\" className=\"text-muted\">\n          <MoreVertIcon />\n        </IconButton>\n        <Menu>\n          <MenuItem value=\"reset\" startIcon={<RestartAltIcon />}>\n            <Trans message=\"Reset colors\" />\n          </MenuItem>\n          <MenuItem value=\"delete\" startIcon={<DeleteIcon />}>\n            <Trans message=\"Delete\" />\n          </MenuItem>\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger type=\"modal\" isOpen={confirmDialogOpen} onClose={isConfirmed => {\n      if (isConfirmed) {\n        deleteTheme();\n      }\n      setConfirmDialogOpen(false);\n    }}>\n        <ConfirmationDialog isDanger title={<Trans message=\"Delete theme\" />} body={<Trans message=\"Are you sure you want to delete this theme?\" />} confirm={<Trans message=\"Delete\" />} />\n      </DialogTrigger>\n    </Fragment>;\n}","import { message } from '@ui/i18n/message';\nexport const ColorPresets = [{\n  color: 'rgb(255, 255, 255)',\n  name: message('White')\n}, {\n  color: 'rgb(239,245,245)',\n  name: message('Solitude')\n}, {\n  color: 'rgb(245,213,174)',\n  name: message('Wheat')\n}, {\n  color: 'rgb(253,227,167)',\n  name: message('Cape Honey')\n}, {\n  color: 'rgb(242,222,186)',\n  name: message('Milk punch')\n}, {\n  color: 'rgb(97,118,75)',\n  name: message('Dingy'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(4, 147, 114)',\n  name: message('Aquamarine'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(222,245,229)',\n  name: message('Cosmic Latte')\n}, {\n  color: 'rgb(233,119,119)',\n  name: message('Geraldine'),\n  foreground: 'rgb(90,14,14)'\n}, {\n  color: 'rgb(247,164,164)',\n  name: message('Sundown')\n}, {\n  color: 'rgb(30,139,195)',\n  name: message('Pelorous'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(142,68,173)',\n  name: message('Deep Lilac'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(108,74,182)',\n  name: message('Blue marguerite'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(139,126,116)',\n  name: message('Americano'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(0,0,0)',\n  name: message('Black'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(64,66,88)',\n  name: message('Blue zodiac'),\n  foreground: 'rgb(255, 255, 255)'\n}, {\n  color: 'rgb(101,100,124)',\n  name: message('Comet'),\n  foreground: 'rgb(255, 255, 255)'\n}];","import React from 'react';\nimport clsx from 'clsx';\nimport { ButtonBase } from '@ui/buttons/button-base';\nexport function ColorSwatch({\n  onChange,\n  value,\n  colors\n}) {\n  const presetButtons = colors.map(color => {\n    const isSelected = value === color;\n    return <ButtonBase key={color} onClick={() => {\n      onChange?.(color);\n    }} className={clsx('relative block flex-shrink-0 w-26 h-26 border rounded', isSelected && 'shadow-md')} style={{\n      backgroundColor: color\n    }}>\n        {isSelected && <span className=\"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white\" />}\n      </ButtonBase>;\n  });\n  return <div className=\"flex flex-wrap gap-6\">{presetButtons}</div>;\n}","import { HexColorInput, HexColorPicker } from 'react-colorful';\nimport React, { useState } from 'react';\nimport { parseColor } from '@react-stately/color';\nimport { ColorPresets } from '@ui/color-picker/color-presets';\nimport { getInputFieldClassNames } from '@ui/forms/input-field/get-input-field-class-names';\nimport { ColorSwatch } from '@ui/color-picker/color-swatch';\nconst DefaultPresets = ColorPresets.map(({\n  color\n}) => color).slice(0, 14);\nexport function ColorPicker({\n  defaultValue,\n  onChange,\n  colorPresets,\n  showInput\n}) {\n  const [color, setColor] = useState(defaultValue);\n  const presets = colorPresets || DefaultPresets;\n  const style = getInputFieldClassNames({\n    size: 'sm'\n  });\n  return <div>\n      <HexColorPicker className=\"!w-auto\" color={color} onChange={newColor => {\n      onChange?.(newColor);\n      setColor(newColor);\n    }} />\n      <div className=\"px-12 py-20\">\n        {presets && <ColorSwatch colors={presets} onChange={newColor => {\n        if (newColor) {\n          const hex = parseColor(newColor).toString('hex');\n          onChange?.(hex);\n          setColor(hex);\n        }\n      }} value={color} />}\n        {showInput && <div className=\"pt-20\">\n            <HexColorInput autoComplete=\"off\" role=\"textbox\" autoCorrect=\"off\" spellCheck=\"false\" required aria-label=\"Hex color\" prefixed className={style.input} color={color} onChange={newColor => {\n          onChange?.(newColor);\n          setColor(newColor);\n        }} />\n          </div>}\n      </div>\n    </div>;\n}","import { ColorPicker } from './color-picker';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { Button } from '@ui/buttons/button';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { Trans } from '@ui/i18n/trans';\nexport function ColorPickerDialog({\n  hideFooter = false,\n  showInput = true\n}) {\n  const {\n    close,\n    value,\n    setValue,\n    initialValue\n  } = useDialogContext();\n  // todo: remove this once pixie and bedrive are refactored to use dialogTrigger currentValue (use \"currentValue\" for defaultValue as well)\n  //const initialValue = useRef(defaultValue);\n\n  return <Dialog size=\"2xs\">\n      <ColorPicker showInput={showInput} defaultValue={initialValue ? initialValue : ''} onChange={newValue => setValue(newValue)} />\n      {!hideFooter && <DialogFooter dividerTop>\n          <Button variant=\"text\" size=\"xs\" onClick={() => close()}>\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button variant=\"flat\" color=\"primary\" size=\"xs\" onClick={() => close(value)}>\n            <Trans message=\"Apply\" />\n          </Button>\n        </DialogFooter>}\n    </Dialog>;\n}","import { message } from '@ui/i18n/message';\nimport { useParams } from 'react-router';\nimport { useFormContext } from 'react-hook-form';\nimport { Menu, MenuTrigger } from '@ui/menu/menu-trigger';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { ColorIcon } from '@common/admin/appearance/sections/themes/color-icon';\nimport clsx from 'clsx';\nimport { Trans } from '@ui/i18n/trans';\nimport { Item } from '@ui/forms/listbox/item';\nconst navbarColorMap = [{\n  label: message('Accent'),\n  value: 'primary',\n  bgColor: 'bg-primary',\n  previewBgColor: 'text-primary'\n}, {\n  label: message('Background'),\n  value: 'bg',\n  bgColor: 'bg-background',\n  previewBgColor: 'text-background'\n}, {\n  label: message('Background alt'),\n  value: 'bg-alt',\n  bgColor: 'bg-alt',\n  previewBgColor: 'text-background-alt'\n}, {\n  label: message('Transparent'),\n  value: 'transparent',\n  bgColor: 'bg-transparent',\n  previewBgColor: 'text-transparent'\n}];\nexport function NavbarColorPicker() {\n  const {\n    themeIndex\n  } = useParams();\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const key = `appearance.themes.${themeIndex}.values.--be-navbar-color`;\n  const selectedValue = watch(key);\n  const previewColor = navbarColorMap.find(({\n    value\n  }) => value === selectedValue)?.previewBgColor;\n  return <MenuTrigger placement=\"right\" selectionMode=\"single\" selectedValue={selectedValue} onSelectionChange={value => {\n    setValue(key, value, {\n      shouldDirty: true\n    });\n  }}>\n      <AppearanceButton startIcon={<ColorIcon viewBox=\"0 0 48 48\" className={clsx('icon-lg', previewColor)} />}>\n        <Trans message=\"Navbar\" />\n      </AppearanceButton>\n      <Menu>\n        {navbarColorMap.map(({\n        label,\n        value,\n        bgColor\n      }) => <Item key={value} value={value} startIcon={<div className={clsx('h-20 w-20 rounded border', bgColor)} />}>\n            <Trans {...label} />\n          </Item>)}\n      </Menu>\n    </MenuTrigger>;\n}","import clsx from 'clsx';\nexport function AppearanceSectionTitle({\n  children,\n  marginTop = 'mt-22'\n}) {\n  return <div className={clsx('mb-6 text-sm font-semibold', marginTop)}>\n      {children}\n    </div>;\n}","import { Link, useNavigate, useParams } from 'react-router';\nimport { Fragment, useEffect, useState } from 'react';\nimport { appearanceState, previewAppIsLoaded } from '@common/admin/appearance/appearance-store';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { ColorIcon } from '@common/admin/appearance/sections/themes/color-icon';\nimport { colorToThemeValue } from '@ui/themes/utils/color-to-theme-value';\nimport { ThemeSettingsDialogTrigger } from '@common/admin/appearance/sections/themes/theme-settings-dialog-trigger';\nimport { ThemeMoreOptionsButton } from '@common/admin/appearance/sections/themes/theme-more-options-button';\nimport { ColorPickerDialog } from '@ui/color-picker/color-picker-dialog';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { useFormContext } from 'react-hook-form';\nimport { Trans } from '@ui/i18n/trans';\nimport { NavbarColorPicker } from '@common/admin/appearance/sections/themes/navbar-color-picker';\nimport { message } from '@ui/i18n/message';\nimport { themeValueToHex } from '@ui/themes/utils/theme-value-to-hex';\nimport { AppearanceSectionTitle } from '@common/admin/appearance/appearance-section-title';\nconst colorList = [{\n  label: message('Background'),\n  key: '--be-background'\n}, {\n  label: message('Background alt'),\n  key: '--be-background-alt'\n}, {\n  label: message('Foreground'),\n  key: '--be-foreground-base'\n}, {\n  label: message('Accent light'),\n  key: '--be-primary-light'\n}, {\n  label: message('Accent'),\n  key: '--be-primary'\n}, {\n  label: message('Accent dark'),\n  key: '--be-primary-dark'\n}, {\n  label: message('Text on accent'),\n  key: '--be-on-primary'\n}, {\n  label: message('Chip'),\n  key: '--be-background-chip'\n}];\nexport function ThemeEditor() {\n  const navigate = useNavigate();\n  const {\n    themeIndex\n  } = useParams();\n  const {\n    getValues,\n    watch\n  } = useFormContext();\n  const theme = getValues(`appearance.themes.${+themeIndex}`);\n  const selectedFont = watch(`appearance.themes.${+themeIndex}.font.family`);\n\n  // go to theme list, if theme can't be found\n  useEffect(() => {\n    if (!theme) {\n      navigate('..', {\n        relative: 'path',\n        replace: true\n      });\n    }\n  }, [navigate, theme]);\n\n  // set this theme as active in preview iframe\n  useEffect(() => {\n    let isAborted = false;\n    if (theme?.id) {\n      previewAppIsLoaded.then(() => {\n        if (isAborted) return;\n        appearanceState().preview.setActiveTheme(theme.id);\n      });\n    }\n    return () => {\n      isAborted = true;\n      appearanceState().preview.setActiveTheme(null);\n    };\n  }, [theme?.id]);\n  if (!theme) return null;\n  return <Fragment>\n      <div className=\"mb-20 flex items-center justify-between gap-10\">\n        <ThemeSettingsDialogTrigger />\n        <ThemeMoreOptionsButton />\n      </div>\n      <div>\n        <AppearanceButton elementType={Link} to=\"font\" description={selectedFont ? selectedFont : <Trans message=\"System\" />}>\n          <Trans message=\"Font\" />\n        </AppearanceButton>\n        <AppearanceButton elementType={Link} to=\"radius\">\n          <Trans message=\"Rounding\" />\n        </AppearanceButton>\n        <AppearanceSectionTitle>\n          <Trans message=\"Colors\" />\n        </AppearanceSectionTitle>\n        <NavbarColorPicker />\n        {colorList.map(color => <ColorPickerTrigger key={color.key} colorName={color.key} label={<Trans {...color.label} />} initialThemeValue={theme.values[color.key]} theme={theme} />)}\n      </div>\n    </Fragment>;\n}\nfunction ColorPickerTrigger({\n  label,\n  theme,\n  colorName,\n  initialThemeValue\n}) {\n  const {\n    setValue\n  } = useFormContext();\n  const {\n    themeIndex\n  } = useParams();\n  const [selectedThemeValue, setSelectedThemeValue] = useState(initialThemeValue);\n\n  // set color as css variable in preview and on button preview, but not in appearance values\n  // this way color change can be canceled when color picker is closed and applied explicitly via apply button\n  const selectThemeValue = themeValue => {\n    setSelectedThemeValue(themeValue);\n    appearanceState().preview.setThemeValue(colorName, themeValue);\n  };\n  useEffect(() => {\n    // need to update the color here so changes via \"reset colors\" button are reflected\n    setSelectedThemeValue(initialThemeValue);\n  }, [initialThemeValue]);\n  return <DialogTrigger value={themeValueToHex(selectedThemeValue)} type=\"popover\" placement=\"right\" offset={10} onValueChange={newColor => {\n    selectThemeValue(colorToThemeValue(newColor));\n  }} onClose={(newColor, {\n    valueChanged,\n    initialValue\n  }) => {\n    if (newColor && valueChanged) {\n      setValue(`appearance.themes.${+themeIndex}.values.${colorName}`, colorToThemeValue(newColor), {\n        shouldDirty: true\n      });\n    } else {\n      // reset to initial value, if apply button was not clicked\n      selectThemeValue(initialValue);\n    }\n  }}>\n      <AppearanceButton className=\"capitalize\" startIcon={<ColorIcon viewBox=\"0 0 48 48\" className=\"icon-lg\" style={{\n      fill: `rgb(${selectedThemeValue})`\n    }} />}>\n        {label}\n      </AppearanceButton>\n      <ColorPickerDialog />\n    </DialogTrigger>;\n}","import { NavLink } from 'react-router';\nimport { AppearanceButton } from './appearance-button';\nimport { useAppearanceStore } from './appearance-store';\nimport { Trans } from '@ui/i18n/trans';\nimport { useMemo } from 'react';\nimport { AppearanceEditorLayout } from '@common/admin/appearance/appearance-editor-form';\nexport function SectionList() {\n  const sections = useAppearanceStore(s => s.config?.sections);\n  const sortedSection = useMemo(() => {\n    if (!sections) return [];\n    return Object.entries(sections || []).map(([key, value]) => {\n      return {\n        ...value,\n        key\n      };\n    }).sort((a, b) => (a?.position || 1) - (b?.position || 1));\n  }, [sections]);\n  return <AppearanceEditorLayout>\n      {sortedSection.map(section => <AppearanceButton key={section.key} to={section.key} elementType={NavLink}>\n          <Trans {...section.label} />\n        </AppearanceButton>)}\n    </AppearanceEditorLayout>;\n}","export default \"__VITE_ASSET__03cbd387__\"","import { useTrans } from '@ui/i18n/use-trans';\nimport { TextField } from '@ui/forms/input-field/text-field/text-field';\nimport { SearchIcon } from '@ui/icons/material/Search';\nimport { message } from '@ui/i18n/message';\nimport { Select } from '@ui/forms/select/select';\nimport { Item } from '@ui/forms/listbox/item';\nimport { Trans } from '@ui/i18n/trans';\nimport React from 'react';\nexport function FontSelectorFilters({\n  state: {\n    filters,\n    setFilters\n  }\n}) {\n  const {\n    trans\n  } = useTrans();\n  return <div className=\"mb-24 items-center gap-24 @xs:flex\">\n      <TextField className=\"mb-12 flex-auto @xs:mb-0\" value={filters.query} onChange={e => {\n      setFilters({\n        ...filters,\n        query: e.target.value\n      });\n    }} startAdornment={<SearchIcon />} placeholder={trans(message('Search fonts'))} />\n      <Select className=\"flex-auto\" selectionMode=\"single\" selectedValue={filters.category} onSelectionChange={value => {\n      setFilters({\n        ...filters,\n        category: value\n      });\n    }}>\n        <Item value=\"\">\n          <Trans message=\"All categories\" />\n        </Item>\n        <Item value=\"serif\">\n          <Trans message=\"Serif\" />\n        </Item>\n        <Item value=\"sans-serif\">\n          <Trans message=\"Sans serif\" />\n        </Item>\n        <Item value=\"display\">\n          <Trans message=\"Display\" />\n        </Item>\n        <Item value=\"handwriting\">\n          <Trans message=\"Handwriting\" />\n        </Item>\n        <Item value=\"monospace\">\n          <Trans message=\"Monospace\" />\n        </Item>\n      </Select>\n    </div>;\n}","import { message } from '@ui/i18n/message';\nexport const BrowserSafeFonts = [{\n  label: message('System'),\n  family: 'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"',\n  category: 'sans-serif'\n}, {\n  family: 'Impact, Charcoal, sans-serif',\n  category: 'sans-serif'\n}, {\n  family: 'Arial, Helvetica Neue, Helvetica, sans-serif',\n  category: 'serif'\n}, {\n  family: '\"Comic Sans MS\", cursive, sans-serif',\n  category: 'Handwriting'\n}, {\n  family: 'Century Gothic, sans-serif',\n  category: 'sans-serif'\n}, {\n  family: '\"Courier New\", Courier, monospace',\n  category: 'monospace'\n}, {\n  family: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n  category: 'sans-serif'\n}, {\n  family: '\"Times New Roman\", Times, serif',\n  category: 'serif'\n}, {\n  family: '\"Lucida Console\", Monaco, monospace',\n  category: 'monospace'\n}, {\n  family: '\"Andele Mono\", monospace, sans-serif',\n  category: 'sans-serif'\n}, {\n  family: 'Verdana, Geneva, sans-serif',\n  category: 'sans-serif'\n}, {\n  family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\n  category: 'sans-serif'\n}];","export function chunkArray(array, chunkSize) {\n  return array.reduce((resultArray, item, index) => {\n    const chunkIndex = Math.floor(index / chunkSize);\n    if (!resultArray[chunkIndex]) {\n      resultArray[chunkIndex] = [];\n    }\n    resultArray[chunkIndex].push(item);\n    return resultArray;\n  }, []);\n}","import { useCollator } from '@ui/i18n/use-collator';\nimport { useMemo } from 'react';\nexport function useFilter(options) {\n  const collator = useCollator({\n    usage: 'search',\n    ...options\n  });\n  return useMemo(() => {\n    return {\n      startsWith(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n        return collator.compare(string.slice(0, substring.length), substring) === 0;\n      },\n      endsWith(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n        return collator.compare(string.slice(-substring.length), substring) === 0;\n      },\n      contains(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n        let scan = 0;\n        const sliceLen = substring.length;\n        for (; scan + sliceLen <= string.length; scan++) {\n          const slice = string.slice(scan, scan + sliceLen);\n          if (collator.compare(substring, slice) === 0) {\n            return true;\n          }\n        }\n        return false;\n      }\n    };\n  }, [collator]);\n}","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useValueLists } from '@common/http/value-lists';\nimport { BrowserSafeFonts } from '@ui/fonts/font-picker/browser-safe-fonts';\nimport { chunkArray } from '@ui/utils/array/chunk-array';\nimport { loadFonts } from '@ui/fonts/font-picker/load-fonts';\nimport { useFilter } from '@ui/i18n/use-filter';\nexport function useFontSelectorState({\n  value,\n  onChange\n}) {\n  const {\n    data,\n    isLoading\n  } = useValueLists(['googleFonts']);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [filters, setFilterState] = useState({\n    query: '',\n    category: value?.category ?? ''\n  });\n  const {\n    contains\n  } = useFilter({\n    sensitivity: 'base'\n  });\n  const allFonts = useMemo(() => {\n    return BrowserSafeFonts.concat(data?.googleFonts ?? []);\n  }, [data?.googleFonts]);\n  const filteredFonts = useMemo(() => {\n    return allFonts.filter(font => {\n      return contains(font.family, filters.query) && (!filters.category || font.category?.toLowerCase() === filters.category.toLowerCase());\n    });\n  }, [allFonts, filters, contains]);\n  const pages = useMemo(() => {\n    return chunkArray(filteredFonts, 20);\n  }, [filteredFonts]);\n  const fonts = pages[currentPage];\n\n  // open the page with the selected font\n  useEffect(() => {\n    if (data && value?.family) {\n      const index = filteredFonts.findIndex(f => f.family === value.family);\n      if (index >= 0) {\n        setCurrentPage(Math.floor(index / 20));\n      }\n    }\n  }, [data, filteredFonts, value?.family]);\n  useEffect(() => {\n    const id = 'font-selector';\n    if (fonts?.length) {\n      loadFonts(fonts, {\n        id\n      });\n    }\n  }, [fonts, currentPage]);\n  const setFilters = useCallback(filters => {\n    setFilterState(filters);\n    // reset to first page when searching or changing category\n    setCurrentPage(0);\n  }, []);\n  return {\n    fonts: fonts || [],\n    currentPage,\n    filteredFonts: filteredFonts || [],\n    setCurrentPage,\n    isLoading,\n    filters,\n    setFilters,\n    value,\n    onChange,\n    pages\n  };\n}","import { Trans } from '@ui/i18n/trans';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { KeyboardArrowLeftIcon } from '@ui/icons/material/KeyboardArrowLeft';\nimport { KeyboardArrowRightIcon } from '@ui/icons/material/KeyboardArrowRight';\nimport React from 'react';\nexport function FontSelectorPagination({\n  state: {\n    currentPage = 0,\n    setCurrentPage,\n    filteredFonts,\n    pages\n  }\n}) {\n  const total = filteredFonts?.length || 0;\n  return <div className=\"mt-30 flex items-center justify-end gap-24 border-t pt-14 text-sm\">\n      {total > 0 && <div>\n          <Trans message=\":from - :to of :total\" values={{\n        from: currentPage * 20 + 1,\n        to: Math.min((currentPage + 1) * 20, total),\n        total\n      }} />\n        </div>}\n      <div className=\"text-muted\">\n        <IconButton disabled={currentPage < 1} onClick={() => {\n        setCurrentPage(Math.max(0, currentPage - 1));\n      }}>\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton disabled={currentPage >= pages.length - 1} onClick={() => {\n        setCurrentPage(currentPage + 1);\n      }}>\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>;\n}","import { Trans } from '@ui/i18n/trans';\nimport React from 'react';\nimport { ButtonBase } from '@ui/buttons/button-base';\nimport clsx from 'clsx';\nimport { IllustratedMessage } from '@ui/images/illustrated-message';\nimport fontImage from './font.svg';\nimport { SvgImage } from '@ui/images/svg-image';\nimport { FontSelectorFilters } from '@common/ui/font-selector/font-selector-filters';\nimport { useFontSelectorState } from '@common/ui/font-selector/font-selector-state';\nimport { FontSelectorPagination } from '@common/ui/font-selector/font-selector-pagination';\nimport { Skeleton } from '@ui/skeleton/skeleton';\nimport { AnimatePresence, m } from 'framer-motion';\nimport { opacityAnimation } from '@ui/animation/opacity-animation';\nexport function FontSelector(props) {\n  const state = useFontSelectorState(props);\n  return <div className={props.className}>\n      <FontSelectorFilters state={state} />\n      <AnimatePresence initial={false} mode=\"wait\">\n        <FontList state={state} />\n      </AnimatePresence>\n      <FontSelectorPagination state={state} />\n    </div>;\n}\nfunction FontList({\n  state\n}) {\n  const {\n    isLoading,\n    fonts\n  } = state;\n  const gridClassName = 'grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start';\n  if (isLoading) {\n    return <FontListSkeleton className={gridClassName} />;\n  }\n  if (!fonts?.length) {\n    return <IllustratedMessage className=\"mt-60\" size=\"sm\" image={<SvgImage src={fontImage} />} title={<Trans message=\"No matching fonts\" />} description={<Trans message=\"Try another search query or different category\" />} />;\n  }\n  return <m.div key=\"font-list\" {...opacityAnimation} className={gridClassName}>\n      {fonts?.map(font => <FontButton key={font.family} font={font} state={state} />)}\n    </m.div>;\n}\nfunction FontButton({\n  font,\n  state: {\n    value,\n    onChange\n  }\n}) {\n  const isActive = value?.family === font.family;\n  const displayName = font.family.split(',')[0].replace(/\"/g, '');\n  return <ButtonBase key={font.family} display=\"block\" onClick={() => {\n    onChange(font);\n  }}>\n      <span className={clsx('flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl', isActive && 'ring-2 ring-primary ring-offset-2')}>\n        <span style={{\n        fontFamily: font.family\n      }}>Aa</span>\n      </span>\n      <span className={clsx('mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm', isActive && 'text-primary')}>\n        {font.label ? <Trans {...font.label} /> : displayName}\n      </span>\n    </ButtonBase>;\n}\nfunction FontListSkeleton({\n  className\n}) {\n  const items = Array.from(Array(20).keys());\n  return <m.div key=\"font-list-skeleton\" {...opacityAnimation} className={className}>\n      {items.map(index => <div key={index}>\n          <div className=\"aspect-square\">\n            <Skeleton display=\"block\" variant=\"rect\" />\n          </div>\n          <Skeleton className=\"mt-6 text-sm\" />\n        </div>)}\n    </m.div>;\n}","import { FontSelector } from '@common/ui/font-selector/font-selector';\nimport { useFormContext } from 'react-hook-form';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { useParams } from 'react-router';\nexport function ThemeFontPanel() {\n  const {\n    setValue,\n    watch\n  } = useFormContext();\n  const {\n    themeIndex\n  } = useParams();\n  const key = `appearance.themes.${themeIndex}.font`;\n  return <FontSelector value={watch(key)} onChange={font => {\n    setValue(key, font, {\n      shouldDirty: true\n    });\n    appearanceState().preview.setThemeFont(font);\n  }} />;\n}","import { Trans } from '@ui/i18n/trans';\nimport { ButtonBase } from '@ui/buttons/button-base';\nimport clsx from 'clsx';\nimport { useFormContext } from 'react-hook-form';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { message } from '@ui/i18n/message';\nimport { useParams } from 'react-router';\nconst radiusMap = {\n  'rounded-none': {\n    label: message('Square'),\n    value: '0px'\n  },\n  rounded: {\n    label: message('Small'),\n    value: '0.25rem'\n  },\n  'rounded-md': {\n    label: message('Medium'),\n    value: '0.375rem'\n  },\n  'rounded-lg': {\n    label: message('Large'),\n    value: '0.5rem'\n  },\n  'rounded-xl': {\n    label: message('Larger'),\n    value: '0.75rem'\n  },\n  'rounded-full': {\n    label: message('Pill'),\n    value: '9999px'\n  }\n};\nexport function ThemeRadiusPanel() {\n  return <div className=\"space-y-24\">\n      <RadiusSelector label={<Trans message=\"Button rounding\" />} name=\"button-radius\" />\n      <RadiusSelector label={<Trans message=\"Input rounding\" />} name=\"input-radius\" />\n      <RadiusSelector label={<Trans message=\"Panel rounding\" />} name=\"panel-radius\" hidePill />\n    </div>;\n}\nfunction RadiusSelector({\n  label,\n  name,\n  hidePill\n}) {\n  const {\n    themeIndex\n  } = useParams();\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const formKey = `appearance.themes.${themeIndex}.values.--be-${name}`;\n  const currentValue = watch(formKey);\n  return <div>\n      <div className=\"mb-10 text-sm font-semibold\">{label}</div>\n      <div className=\"grid grid-cols-3 gap-10 text-sm\">\n        {Object.entries(radiusMap).filter(([key]) => !hidePill || !key.includes('full')).map(([key, {\n        label,\n        value\n      }]) => <PreviewButton key={key} radius={key} isActive={value === currentValue} onClick={() => {\n        setValue(formKey, value, {\n          shouldDirty: true\n        });\n        appearanceState().preview.setThemeValue(`--be-${name}`, value);\n      }}>\n              <Trans {...label} />\n            </PreviewButton>)}\n      </div>\n    </div>;\n}\nfunction PreviewButton({\n  radius,\n  children,\n  isActive,\n  onClick\n}) {\n  return <ButtonBase display=\"block\" className={clsx('h-36 border-2 hover:bg-hover', radius, isActive && 'border-primary')} onClick={onClick}>\n      {children}\n    </ButtonBase>;\n}","import { useAppearanceEditorValues } from '@common/admin/appearance/requests/use-appearance-editor-values';\nimport { useForm, useWatch } from 'react-hook-form';\nimport { AppearanceEditorForm } from '@common/admin/appearance/appearance-editor-form';\nimport { Outlet, useLocation, useParams } from 'react-router';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nimport { Trans } from '@ui/i18n/trans';\nexport function ThemeEditorForm() {\n  const values = useAppearanceEditorValues();\n  const form = useForm({\n    defaultValues: {\n      appearance: {\n        themes: values.appearance.themes.filter(t => t.type === 'site')\n      }\n    }\n  });\n  return <AppearanceEditorForm form={form} breadcrumb={<ThemeEditorBreadcrumb form={form} />} blockerAllowedPath=\"themes\">\n      <Outlet />\n    </AppearanceEditorForm>;\n}\nexport function ThemeEditorBreadcrumb({\n  form,\n  children\n}) {\n  const {\n    pathname\n  } = useLocation();\n  const lastSegment = pathname.split('/').pop();\n  const {\n    themeIndex\n  } = useParams();\n  const allThemes = useWatch({\n    control: form.control,\n    name: 'appearance.themes'\n  });\n  const activeTheme = themeIndex ? allThemes[themeIndex] : null;\n  return <AppearanceEditorBreadcrumb>\n      {children}\n      <Trans message=\"Themes\" />\n      {activeTheme && <span>{activeTheme.name}</span>}\n      {lastSegment === 'font' && <Trans message=\"Font\" />}\n      {lastSegment === 'radius' && <Trans message=\"Rounding\" />}\n    </AppearanceEditorBreadcrumb>;\n}","import { useAppearanceEditorValues } from '@common/admin/appearance/requests/use-appearance-editor-values';\nimport { useForm, useWatch } from 'react-hook-form';\nimport { AppearanceEditorForm } from '@common/admin/appearance/appearance-editor-form';\nimport { Outlet, useParams } from 'react-router';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nimport { Trans } from '@ui/i18n/trans';\nexport function MenuEditorForm() {\n  const values = useAppearanceEditorValues();\n  const form = useForm({\n    defaultValues: {\n      settings: {\n        menus: values.settings.menus\n      }\n    }\n  });\n  return <AppearanceEditorForm form={form} breadcrumb={<MenuEditorBreadcrumb form={form} />} blockerAllowedPath=\"menus\">\n      <Outlet />\n    </AppearanceEditorForm>;\n}\nfunction MenuEditorBreadcrumb({\n  form\n}) {\n  const {\n    menuIndex,\n    menuItemIndex\n  } = useParams();\n  const allMenus = useWatch({\n    control: form.control,\n    name: 'settings.menus'\n  });\n  const activeMenu = menuIndex ? allMenus[menuIndex] : null;\n  const activeItem = menuItemIndex && activeMenu ? activeMenu.items[menuItemIndex] : null;\n  return <AppearanceEditorBreadcrumb>\n      <Trans message=\"Menus\" />\n      {activeMenu && <span>{activeMenu.name}</span>}\n      {activeItem && <span>{activeItem.label}</span>}\n    </AppearanceEditorBreadcrumb>;\n}","import { useAppearanceEditorValues } from '@common/admin/appearance/requests/use-appearance-editor-values';\nimport { useForm } from 'react-hook-form';\nimport { AppearanceEditorForm } from '@common/admin/appearance/appearance-editor-form';\nimport { Outlet, useLocation } from 'react-router';\nimport { AppearanceEditorBreadcrumb } from '@common/admin/appearance/appearance-editor-breadcrumb';\nimport { Trans } from '@ui/i18n/trans';\nexport function LandingPageAppearanceForm() {\n  const values = useAppearanceEditorValues();\n  const form = useForm({\n    defaultValues: {\n      settings: {\n        homepage: {\n          appearance: {\n            headerTitle: values.settings.homepage.appearance.headerTitle ?? '',\n            headerSubtitle: values.settings.homepage.appearance.headerSubtitle ?? '',\n            headerImage: values.settings.homepage.appearance.headerImage ?? '',\n            headerImageOpacity: values.settings.homepage.appearance.headerImageOpacity ?? '',\n            headerOverlayColor1: values.settings.homepage.appearance.headerOverlayColor1 ?? '',\n            headerOverlayColor2: values.settings.homepage.appearance.headerOverlayColor2 ?? '',\n            footerTitle: values.settings.homepage.appearance.footerTitle ?? '',\n            footerSubtitle: values.settings.homepage.appearance.footerSubtitle ?? '',\n            footerImage: values.settings.homepage.appearance.footerImage ?? '',\n            primaryFeatures: values.settings.homepage.appearance.primaryFeatures ?? [],\n            secondaryFeatures: values.settings.homepage.appearance.secondaryFeatures ?? [],\n            actions: values.settings.homepage.appearance.actions ?? []\n          }\n        }\n      }\n    }\n  });\n  return <AppearanceEditorForm form={form} breadcrumb={<Breadcrumb />} blockerAllowedPath=\"landing-page\">\n      <Outlet />\n    </AppearanceEditorForm>;\n}\nfunction Breadcrumb() {\n  const {\n    pathname\n  } = useLocation();\n  const lastSegment = pathname.split('/').pop();\n  return <AppearanceEditorBreadcrumb>\n      <Trans message=\"Landing page\" />\n      {lastSegment === 'action-buttons' && <Trans message=\"Action buttons\" />}\n      {lastSegment === 'primary-features' && <Trans message=\"Primary features\" />}\n      {lastSegment === 'secondary-features' && <Trans message=\"Secondary features\" />}\n    </AppearanceEditorBreadcrumb>;\n}","import React from 'react';\nimport clsx from 'clsx';\nimport { getInputFieldClassNames } from '../input-field/get-input-field-class-names';\nexport function BaseSlider(props) {\n  const {\n    size = 'md',\n    inline,\n    label,\n    showValueLabel = !!label,\n    className,\n    width = 'w-full',\n    slider,\n    children,\n    trackColor = 'primary',\n    fillColor = 'primary'\n  } = props;\n  const {\n    domProps,\n    trackRef,\n    getThumbPercent,\n    getThumbValueLabel,\n    labelId,\n    groupId,\n    thumbIds,\n    isDisabled,\n    numberFormatter,\n    minValue,\n    maxValue,\n    step,\n    values,\n    getValueLabel\n  } = slider;\n  let outputValue = '';\n  let maxLabelLength = Math.max([...numberFormatter.format(minValue)].length, [...numberFormatter.format(maxValue)].length, [...numberFormatter.format(step)].length);\n  if (getValueLabel) {\n    outputValue = getValueLabel(values[0]);\n  } else if (values.length === 1) {\n    outputValue = getThumbValueLabel(0);\n  } else if (values.length === 2) {\n    // This should really use the NumberFormat#formatRange proposal...\n    // https://github.com/tc39/ecma402/issues/393\n    // https://github.com/tc39/proposal-intl-numberformat-v3#formatrange-ecma-402-393\n    outputValue = `${getThumbValueLabel(0)} – ${getThumbValueLabel(1)}`;\n    maxLabelLength = 3 + 2 * Math.max(maxLabelLength, [...numberFormatter.format(minValue)].length, [...numberFormatter.format(maxValue)].length);\n  }\n  const style = getInputFieldClassNames({\n    size,\n    disabled: isDisabled,\n    labelDisplay: 'flex'\n  });\n  const wrapperClassname = clsx('touch-none', className, width, {\n    'flex items-center': inline\n  });\n  return <div className={wrapperClassname} role=\"group\" id={groupId}>\n      {(label || showValueLabel) && <div className={clsx(style.label, 'select-none')}>\n          {label && <label onClick={() => {\n        // Safari does not focus <input type=\"range\"> elements when clicking on an associated <label>,\n        // so do it manually. In addition, make sure we show the focus ring.\n        document.getElementById(thumbIds[0])?.focus();\n      }} id={labelId} htmlFor={groupId}>\n              {label}\n            </label>}\n          {showValueLabel && <output htmlFor={thumbIds[0]} className=\"ml-auto text-right\" aria-live=\"off\" style={!maxLabelLength ? undefined : {\n        width: `${maxLabelLength}ch`,\n        minWidth: `${maxLabelLength}ch`\n      }}>\n              {outputValue}\n            </output>}\n        </div>}\n      <div ref={trackRef} className={clsx('relative', getWrapperHeight(props))} {...domProps} role=\"presentation\">\n        <div className={clsx('absolute inset-0 m-auto rounded', getTrackColor(trackColor, isDisabled), getTrackHeight(size))} />\n        <div className={clsx('absolute inset-0 my-auto rounded', getFillColor(fillColor, isDisabled), getTrackHeight(size))} style={{\n        width: `${Math.max(getThumbPercent(0) * 100, 0)}%`\n      }} />\n        {children}\n      </div>\n    </div>;\n}\nfunction getWrapperHeight({\n  size,\n  wrapperHeight\n}) {\n  if (wrapperHeight) return wrapperHeight;\n  switch (size) {\n    case 'xs':\n      return 'h-14';\n    case 'sm':\n      return 'h-20';\n    default:\n      return 'h-30';\n  }\n}\nfunction getTrackHeight(size) {\n  switch (size) {\n    case 'xs':\n      return 'h-2';\n    case 'sm':\n      return 'h-3';\n    default:\n      return 'h-4';\n  }\n}\nfunction getTrackColor(color, isDisabled) {\n  if (isDisabled) {\n    color = 'disabled';\n  }\n  switch (color) {\n    case 'disabled':\n      return 'bg-slider-disabled/60';\n    case 'primary':\n      return 'bg-primary-light';\n    case 'neutral':\n      return 'bg-divider';\n    default:\n      return color;\n  }\n}\nfunction getFillColor(color, isDisabled) {\n  if (isDisabled) {\n    color = 'disabled';\n  }\n  switch (color) {\n    case 'disabled':\n      return 'bg-slider-disabled';\n    case 'primary':\n      return 'bg-primary';\n    default:\n      return color;\n  }\n}","import { mergeProps, snapValueToStep, useGlobalListeners } from '@react-aria/utils';\nimport { useControlledState } from '@react-stately/utils';\nimport { useId, useRef, useState } from 'react';\nimport { clamp } from '@ui/utils/number/clamp';\nimport { usePointerEvents } from '../../interactions/use-pointer-events';\nimport { useNumberFormatter } from '@ui/i18n/use-number-formatter';\nexport function useSlider({\n  minValue = 0,\n  maxValue = 100,\n  isDisabled = false,\n  step = 1,\n  formatOptions,\n  onChangeEnd,\n  onPointerDown,\n  label,\n  getValueLabel,\n  showThumbOnHoverOnly,\n  thumbSize,\n  onPointerMove,\n  ...props\n}) {\n  const [isPointerOver, setIsPointerOver] = useState(false);\n  const numberFormatter = useNumberFormatter(formatOptions);\n  const {\n    addGlobalListener,\n    removeGlobalListener\n  } = useGlobalListeners();\n  const trackRef = useRef(null);\n\n  // values will be stored in internal state as an array for both slider and range slider\n  const [values, setValues] = useControlledState(props.value ? props.value : undefined, props.defaultValue ?? [minValue], props.onChange);\n  // need to also store values in ref, because state value would\n  // lag behind by one between pointer down and move callbacks\n  const valuesRef = useRef(null);\n  valuesRef.current = values;\n\n  // indices of thumbs that are being dragged currently (state and ref for same reasons as above)\n  const [draggedThumbs, setDraggedThumbs] = useState(new Array(values.length).fill(false));\n  const draggedThumbsRef = useRef(null);\n  draggedThumbsRef.current = draggedThumbs;\n\n  // formatted value for <output> and thumb aria labels\n  function getFormattedValue(value) {\n    return numberFormatter.format(value);\n  }\n  const isThumbDragging = index => {\n    return draggedThumbsRef.current?.[index] || false;\n  };\n  const getThumbValueLabel = index => getFormattedValue(values[index]);\n  const getThumbMinValue = index => index === 0 ? minValue : values[index - 1];\n  const getThumbMaxValue = index => index === values.length - 1 ? maxValue : values[index + 1];\n  const setThumbValue = (index, value) => {\n    if (isDisabled || !isThumbEditable(index) || !valuesRef.current) {\n      return;\n    }\n    const thisMin = getThumbMinValue(index);\n    const thisMax = getThumbMaxValue(index);\n\n    // Round value to multiple of step, clamp value between min and max\n    value = snapValueToStep(value, thisMin, thisMax, step);\n    valuesRef.current = replaceIndex(valuesRef.current, index, value);\n    setValues(valuesRef.current);\n  };\n\n  // update \"dragging\" status of specified thumb\n  const updateDraggedThumbs = (index, dragging) => {\n    if (isDisabled || !isThumbEditable(index)) {\n      return;\n    }\n    const wasDragging = draggedThumbsRef.current?.[index];\n    draggedThumbsRef.current = replaceIndex(draggedThumbsRef.current || [], index, dragging);\n    setDraggedThumbs(draggedThumbsRef.current);\n\n    // Call onChangeEnd if no handles are dragging.\n    if (onChangeEnd && wasDragging && !draggedThumbsRef.current.some(Boolean)) {\n      onChangeEnd(valuesRef.current || []);\n    }\n  };\n  const [focusedThumb, setFocusedThumb] = useState(undefined);\n  const getValuePercent = value => {\n    const x = Math.min(1, (value - minValue) / (maxValue - minValue));\n    if (isNaN(x)) {\n      return 0;\n    }\n    return x;\n  };\n  const getThumbPercent = index => getValuePercent(valuesRef.current[index]);\n  const setThumbPercent = (index, percent) => {\n    setThumbValue(index, getPercentValue(percent));\n  };\n  const getRoundedValue = value => Math.round((value - minValue) / step) * step + minValue;\n  const getPercentValue = percent => {\n    const val = percent * (maxValue - minValue) + minValue;\n    return clamp(getRoundedValue(val), minValue, maxValue);\n  };\n\n  // allows disabling individual thumbs in range slider, instead of disable the whole slider\n  const editableThumbsRef = useRef(new Array(values.length).fill(true));\n  const isThumbEditable = index => editableThumbsRef.current[index];\n  const setThumbEditable = (index, editable) => {\n    editableThumbsRef.current[index] = editable;\n  };\n\n  // When the user clicks or drags the track, we want the motion to set and drag the\n  // closest thumb. Hence, we also need to install useMove() on the track element.\n  // Here, we keep track of which index is the \"closest\" to the drag start point.\n  // It is set onMouseDown/onTouchDown; see trackProps below.\n  const realTimeTrackDraggingIndex = useRef(null);\n  const currentPointer = useRef(undefined);\n  const handlePointerDown = e => {\n    if (e.pointerType === 'mouse' && (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey)) {\n      return;\n    }\n    onPointerDown?.();\n\n    // We only trigger track-dragging if the user clicks on the track itself and nothing is currently being dragged.\n    if (trackRef.current && !isDisabled && values.every((_, i) => !draggedThumbs[i])) {\n      const size = trackRef.current.offsetWidth;\n      // Find the closest thumb\n      const trackPosition = trackRef.current.getBoundingClientRect().left;\n      const offset = e.clientX - trackPosition;\n      const percent = offset / size;\n      const value = getPercentValue(percent);\n\n      // to find the closet thumb we split the array based on the first thumb position to the \"right/end\" of the click.\n      let closestThumb;\n      const split = values.findIndex(v => value - v < 0);\n      if (split === 0) {\n        // If the index is zero then the closest thumb is the first one\n        closestThumb = split;\n      } else if (split === -1) {\n        // If no index is found they've clicked past all the thumbs\n        closestThumb = values.length - 1;\n      } else {\n        const lastLeft = values[split - 1];\n        const firstRight = values[split];\n        // Pick the last left/start thumb, unless they are stacked on top of each other, then pick the right/end one\n        if (Math.abs(lastLeft - value) < Math.abs(firstRight - value)) {\n          closestThumb = split - 1;\n        } else {\n          closestThumb = split;\n        }\n      }\n\n      // Confirm that the found closest thumb is editable, not disabled, and move it\n      if (closestThumb >= 0 && isThumbEditable(closestThumb)) {\n        // Don't un-focus anything\n        e.preventDefault();\n        realTimeTrackDraggingIndex.current = closestThumb;\n        setFocusedThumb(closestThumb);\n        currentPointer.current = e.pointerId;\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, true);\n        setThumbValue(closestThumb, value);\n        addGlobalListener(window, 'pointerup', onUpTrack, false);\n      } else {\n        realTimeTrackDraggingIndex.current = null;\n      }\n    }\n  };\n  const currentPosition = useRef(null);\n  const {\n    domProps: moveDomProps\n  } = usePointerEvents({\n    onPointerDown: handlePointerDown,\n    onMoveStart() {\n      currentPosition.current = null;\n    },\n    onMove(e, deltaX) {\n      const size = trackRef.current?.offsetWidth || 0;\n      if (currentPosition.current == null) {\n        currentPosition.current = getThumbPercent(realTimeTrackDraggingIndex.current || 0) * size;\n      }\n      currentPosition.current += deltaX;\n      if (realTimeTrackDraggingIndex.current != null && trackRef.current) {\n        const percent = clamp(currentPosition.current / size, 0, 1);\n        setThumbPercent(realTimeTrackDraggingIndex.current, percent);\n      }\n    },\n    onMoveEnd() {\n      if (realTimeTrackDraggingIndex.current != null) {\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, false);\n        realTimeTrackDraggingIndex.current = null;\n      }\n    }\n  });\n  const domProps = mergeProps(moveDomProps, {\n    onPointerEnter: () => {\n      setIsPointerOver(true);\n    },\n    onPointerLeave: () => {\n      setIsPointerOver(false);\n    },\n    onPointerMove: e => {\n      onPointerMove?.(e);\n    }\n  });\n  const onUpTrack = e => {\n    const id = e.pointerId;\n    if (id === currentPointer.current) {\n      if (realTimeTrackDraggingIndex.current != null) {\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, false);\n        realTimeTrackDraggingIndex.current = null;\n      }\n      removeGlobalListener(window, 'pointerup', onUpTrack, false);\n    }\n  };\n  const id = useId();\n  const labelId = label ? `${id}-label` : undefined;\n  const groupId = `${id}-group`;\n  const thumbIds = [...Array(values.length)].map((v, i) => {\n    return `${id}-thumb-${i}`;\n  });\n  return {\n    domProps,\n    trackRef,\n    isDisabled,\n    step,\n    values,\n    minValue,\n    maxValue,\n    focusedThumb,\n    labelId,\n    groupId,\n    thumbIds,\n    numberFormatter,\n    getThumbPercent,\n    getThumbMinValue,\n    getThumbMaxValue,\n    getThumbValueLabel,\n    isThumbDragging,\n    setThumbValue,\n    updateDraggedThumbs,\n    setThumbEditable,\n    setFocusedThumb,\n    getValueLabel,\n    isPointerOver,\n    showThumbOnHoverOnly,\n    thumbSize\n  };\n}\nfunction replaceIndex(array, index, value) {\n  if (array[index] === value) {\n    return array;\n  }\n  return [...array.slice(0, index), value, ...array.slice(index + 1)];\n}","import React, { useCallback, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { useGlobalListeners, useObjectRef } from '@react-aria/utils';\nimport { createEventHandler } from '@ui/utils/dom/create-event-handler';\nexport function SliderThumb({\n  index,\n  slider,\n  isDisabled: isThumbDisabled,\n  ariaLabel,\n  inputRef,\n  onBlur,\n  fillColor = 'primary'\n}) {\n  const inputObjRef = useObjectRef(inputRef);\n  const {\n    addGlobalListener,\n    removeGlobalListener\n  } = useGlobalListeners();\n  const {\n    step,\n    values,\n    focusedThumb,\n    labelId,\n    thumbIds,\n    isDisabled: isSliderDisabled,\n    getThumbPercent,\n    getThumbMinValue,\n    getThumbMaxValue,\n    getThumbValueLabel,\n    setThumbValue,\n    updateDraggedThumbs,\n    isThumbDragging,\n    setThumbEditable,\n    setFocusedThumb,\n    isPointerOver,\n    showThumbOnHoverOnly,\n    thumbSize = 'w-18 h-18'\n  } = slider;\n  const isDragging = isThumbDragging(index);\n  const value = values[index];\n\n  // Immediately register editability with the state\n  setThumbEditable(index, !isThumbDisabled);\n  const isDisabled = isThumbDisabled || isSliderDisabled;\n  const focusInput = useCallback(() => {\n    if (inputObjRef.current) {\n      inputObjRef.current.focus({\n        preventScroll: true\n      });\n    }\n  }, [inputObjRef]);\n\n  // we will focus the native range input when slider is clicked or thumb is\n  // focused in some other way, and let browser handle keyboard interactions\n  const isFocused = focusedThumb === index;\n  useEffect(() => {\n    if (isFocused) {\n      focusInput();\n    }\n  }, [isFocused, focusInput]);\n  const currentPointer = useRef(undefined);\n  const handlePointerUp = e => {\n    if (e.pointerId === currentPointer.current) {\n      focusInput();\n      updateDraggedThumbs(index, false);\n      removeGlobalListener(window, 'pointerup', handlePointerUp, false);\n    }\n  };\n  const className = clsx('outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200', thumbSize, !isDisabled && 'shadow-md', thumbColor({\n    fillColor,\n    isDisabled,\n    isDragging: isDragging\n  }),\n  // show thumb on hover and while dragging, otherwise \"blur\" event will fire on thumb and dragging will stop\n  !showThumbOnHoverOnly || showThumbOnHoverOnly && isDragging || isPointerOver ? 'visible' : 'invisible');\n  return <div role=\"presentation\" className={className} style={{\n    left: `${Math.max(getThumbPercent(index) * 100, 0)}%`\n  }} onPointerDown={e => {\n    if (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey) {\n      return;\n    }\n    focusInput();\n    currentPointer.current = e.pointerId;\n    updateDraggedThumbs(index, true);\n    addGlobalListener(window, 'pointerup', handlePointerUp, false);\n  }}>\n      <input id={thumbIds[index]} onKeyDown={createEventHandler(() => {\n      updateDraggedThumbs(index, true);\n    })} onKeyUp={createEventHandler(() => {\n      // make sure \"onChangeEnd\" is fired on keyboard navigation\n      updateDraggedThumbs(index, false);\n    })} ref={inputObjRef} tabIndex={!isDisabled ? 0 : undefined} min={getThumbMinValue(index)} max={getThumbMaxValue(index)} step={step} value={value} disabled={isDisabled} aria-label={ariaLabel} aria-labelledby={labelId} aria-orientation=\"horizontal\" aria-valuetext={getThumbValueLabel(index)} onFocus={() => {\n      setFocusedThumb(index);\n    }} onBlur={e => {\n      setFocusedThumb(undefined);\n      updateDraggedThumbs(index, false);\n      onBlur?.(e);\n    }} onChange={e => {\n      setThumbValue(index, parseFloat(e.target.value));\n    }} type=\"range\" className=\"sr-only\" />\n    </div>;\n}\nfunction thumbColor({\n  isDisabled,\n  isDragging,\n  fillColor\n}) {\n  if (isDisabled) {\n    return 'bg-slider-disabled cursor-default';\n  }\n  if (fillColor && fillColor !== 'primary') {\n    return fillColor;\n  }\n  return clsx('hover:bg-primary-dark', isDragging ? 'bg-primary-dark' : 'bg-primary');\n}","import { BaseSlider } from './base-slider';\nimport { useSlider } from './use-slider';\nimport React from 'react';\nimport { SliderThumb } from './slider-thumb';\nimport { useController } from 'react-hook-form';\nimport { mergeProps } from '@react-aria/utils';\nexport function Slider({\n  inputRef,\n  onBlur,\n  ...props\n}) {\n  const {\n    onChange,\n    onChangeEnd,\n    value,\n    defaultValue,\n    ...otherProps\n  } = props;\n  const baseProps = {\n    ...otherProps,\n    // Normalize `value: number[]` to `value: number`\n    value: value != null ? [value] : undefined,\n    defaultValue: defaultValue != null ? [defaultValue] : undefined,\n    onChange: v => {\n      onChange?.(v[0]);\n    },\n    onChangeEnd: v => {\n      onChangeEnd?.(v[0]);\n    }\n  };\n  const slider = useSlider(baseProps);\n  return <BaseSlider {...baseProps} slider={slider}>\n      <SliderThumb fillColor={props.fillColor} index={0} slider={slider} inputRef={inputRef} onBlur={onBlur} />\n    </BaseSlider>;\n}\nexport function FormSlider({\n  name,\n  ...props\n}) {\n  const {\n    field: {\n      onChange,\n      onBlur,\n      value = '',\n      ref\n    }\n  } = useController({\n    name\n  });\n  const formProps = {\n    onChange,\n    onBlur,\n    value: value || '' // avoid issues with \"null\" value when setting form defaults from backend model\n  };\n  return <Slider inputRef={ref} {...mergeProps(formProps, props)} />;\n}","import { useFormContext } from 'react-hook-form';\nimport { appearanceState, useAppearanceStore } from '@common/admin/appearance/appearance-store';\nimport { Fragment } from 'react';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { Trans } from '@ui/i18n/trans';\nimport { FormSlider } from '@ui/forms/slider/slider';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { AppearanceButton } from '@common/admin/appearance/appearance-button';\nimport { ColorIcon } from '@common/admin/appearance/sections/themes/color-icon';\nimport { Link } from 'react-router';\nimport { FormImageSelector } from '@common/uploads/components/image-selector';\nimport { ColorPickerDialog } from '@ui/color-picker/color-picker-dialog';\nexport function LandingPageSectionGeneral() {\n  return <Fragment>\n      <HeaderSection />\n      <div className=\"my-24 border-y py-24\">\n        <AppearanceButton to=\"action-buttons\" elementType={Link} className=\"mb-20\">\n          <Trans message=\"Action buttons\" />\n        </AppearanceButton>\n        <AppearanceButton to=\"primary-features\" elementType={Link}>\n          <Trans message=\"Primary features\" />\n        </AppearanceButton>\n        <AppearanceButton to=\"secondary-features\" elementType={Link}>\n          <Trans message=\"Secondary features\" />\n        </AppearanceButton>\n      </div>\n      <FooterSection />\n    </Fragment>;\n}\nfunction HeaderSection() {\n  const defaultImage = useAppearanceStore(s => s.defaults?.settings.homepage.appearance?.headerImage);\n  return <>\n      <FormTextField label={<Trans message=\"Header title\" />} className=\"mb-20\" name=\"settings.homepage.appearance.headerTitle\" onFocus={() => {\n      appearanceState().preview.setHighlight('[data-testid=\"headerTitle\"]');\n    }} />\n      <FormTextField label={<Trans message=\"Header subtitle\" />} className=\"mb-30\" inputElementType=\"textarea\" rows={4} name=\"settings.homepage.appearance.headerSubtitle\" onFocus={() => {\n      appearanceState().preview.setHighlight('[data-testid=\"headerSubtitle\"]');\n    }} />\n      <FormImageSelector name=\"settings.homepage.appearance.headerImage\" className=\"mb-30\" label={<Trans message=\"Header image\" />} defaultValue={defaultImage} diskPrefix=\"homepage\" />\n      <FormSlider name=\"settings.homepage.appearance.headerImageOpacity\" label={<Trans message=\"Header image opacity\" />} minValue={0} step={0.1} maxValue={1} formatOptions={{\n      style: 'percent'\n    }} />\n      <div className=\"mb-20 text-xs text-muted\">\n        <Trans message=\"In order for overlay colors to appear, header image opacity will need to be less then 100%\" />\n      </div>\n      <ColorPickerTrigger formKey=\"settings.homepage.appearance.headerOverlayColor1\" label={<Trans message=\"Header overlay color 1\" />} />\n      <ColorPickerTrigger formKey=\"settings.homepage.appearance.headerOverlayColor2\" label={<Trans message=\"Header overlay color 2\" />} />\n    </>;\n}\nfunction FooterSection() {\n  const defaultImage = useAppearanceStore(s => s.defaults?.settings.homepage.appearance?.footerImage);\n  return <Fragment>\n      <FormTextField label={<Trans message=\"Footer title\" />} className=\"mb-20\" name=\"settings.homepage.appearance.footerTitle\" onFocus={() => {\n      appearanceState().preview.setHighlight('[data-testid=\"footerTitle\"]');\n    }} />\n      <FormTextField label={<Trans message=\"Footer subtitle\" />} className=\"mb-20\" name=\"settings.homepage.appearance.footerSubtitle\" onFocus={() => {\n      appearanceState().preview.setHighlight('[data-testid=\"footerSubtitle\"]');\n    }} />\n      <FormImageSelector name=\"settings.homepage.appearance.footerImage\" className=\"mb-30\" label={<Trans message=\"Footer background image\" />} defaultValue={defaultImage} diskPrefix=\"homepage\" />\n    </Fragment>;\n}\nfunction ColorPickerTrigger({\n  label,\n  formKey\n}) {\n  const key = formKey;\n  const {\n    watch,\n    setValue\n  } = useFormContext();\n  const formValue = watch(key);\n  const setColor = value => {\n    setValue(formKey, value, {\n      shouldDirty: true\n    });\n  };\n  return <DialogTrigger type=\"popover\" value={formValue} alwaysReturnCurrentValueOnClose onValueChange={newValue => setColor(newValue)} onClose={value => setColor(value)}>\n      <AppearanceButton className=\"capitalize\" startIcon={<ColorIcon viewBox=\"0 0 48 48\" className=\"icon-lg\" style={{\n      fill: formValue\n    }} />}>\n        {label}\n      </AppearanceButton>\n      <ColorPickerDialog />\n    </DialogTrigger>;\n}","import { MenuItemForm } from '@common/admin/menus/menu-item-form';\nimport { Accordion, AccordionItem } from '@ui/accordion/accordion';\nimport { Trans } from '@ui/i18n/trans';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { useState } from 'react';\nexport function LandingPageSectionActionButtons() {\n  const [expandedValues, setExpandedValues] = useState(['cta1']);\n  return <Accordion variant=\"outline\" expandedValues={expandedValues} onExpandedChange={values => {\n    setExpandedValues(values);\n    if (values.length) {\n      appearanceState().preview.setHighlight(`[data-testid=\"${values[0]}\"]`);\n    }\n  }}>\n      <AccordionItem value=\"cta1\" label={<Trans message=\"Header button 1\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta1\" />\n      </AccordionItem>\n      <AccordionItem value=\"ct2\" label={<Trans message=\"Header button 2\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta2\" />\n      </AccordionItem>\n      <AccordionItem value=\"cta3\" label={<Trans message=\"Footer button\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta3\" />\n      </AccordionItem>\n    </Accordion>;\n}","import { Trans } from '@ui/i18n/trans';\nimport { appearanceState, useAppearanceStore } from '@common/admin/appearance/appearance-store';\nimport { useFieldArray } from 'react-hook-form';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { Button } from '@ui/buttons/button';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { useState } from 'react';\nimport { Accordion, AccordionItem } from '@ui/accordion/accordion';\nimport { FormImageSelector } from '@common/uploads/components/image-selector';\nexport function LandingPageSectionPrimaryFeatures() {\n  const {\n    fields,\n    remove,\n    append\n  } = useFieldArray({\n    name: 'settings.homepage.appearance.primaryFeatures'\n  });\n  const [expandedValues, setExpandedValues] = useState([0]);\n  return <div>\n      <Accordion variant=\"outline\" expandedValues={expandedValues} onExpandedChange={values => {\n      setExpandedValues(values);\n      if (values.length) {\n        appearanceState().preview.setHighlight(`[data-testid=\"primary-root-${values[0]}\"]`);\n      }\n    }}>\n        {fields.map((field, index) => {\n        return <AccordionItem key={field.id} value={index} label={<Trans message={`Primary feature ${index + 1}`} />}>\n              <FeatureForm index={index} />\n              <div className=\"text-right\">\n                <Button size=\"xs\" variant=\"outline\" color=\"danger\" onClick={() => {\n              remove(index);\n            }}>\n                  <Trans message=\"Remove\" />\n                </Button>\n              </div>\n            </AccordionItem>;\n      })}\n      </Accordion>\n      <div className=\"mt-20 text-right\">\n        <Button size=\"xs\" variant=\"outline\" color=\"primary\" startIcon={<AddIcon />} onClick={() => {\n        append({});\n        setExpandedValues([fields.length]);\n      }}>\n          <Trans message=\"Add feature\" />\n        </Button>\n      </div>\n    </div>;\n}\nfunction FeatureForm({\n  index\n}) {\n  const defaultImage = useAppearanceStore(s => s.defaults?.settings.homepage.appearance?.primaryFeatures[index]?.image);\n  return <>\n      <FormImageSelector name={`settings.homepage.appearance.primaryFeatures.${index}.image`} className=\"mb-30\" label={<Trans message=\"Image\" />} defaultValue={defaultImage} diskPrefix=\"homepage\" />\n      <FormTextField name={`settings.homepage.appearance.primaryFeatures.${index}.title`} label={<Trans message=\"Title\" />} className=\"mb-20\" onFocus={() => {\n      appearanceState().preview.setHighlight(`[data-testid=\"primary-title-${index}\"]`);\n    }} />\n      <FormTextField name={`settings.homepage.appearance.primaryFeatures.${index}.subtitle`} label={<Trans message=\"Subtitle\" />} className=\"mb-20\" inputElementType=\"textarea\" rows={4} onFocus={() => {\n      appearanceState().preview.setHighlight(`[data-testid=\"primary-subtitle-${index}\"]`);\n    }} />\n    </>;\n}","import { Trans } from '@ui/i18n/trans';\nimport { appearanceState } from '@common/admin/appearance/appearance-store';\nimport { useFieldArray } from 'react-hook-form';\nimport { Button } from '@ui/buttons/button';\nimport { AddIcon } from '@ui/icons/material/Add';\nimport { useState } from 'react';\nimport { FormTextField } from '@ui/forms/input-field/text-field/text-field';\nimport { Accordion, AccordionItem } from '@ui/accordion/accordion';\nimport { FormImageSelector } from '@common/uploads/components/image-selector';\nexport function LandingPageSecondaryFeatures() {\n  const {\n    fields,\n    remove,\n    append\n  } = useFieldArray({\n    name: 'settings.homepage.appearance.secondaryFeatures'\n  });\n  const [expandedValues, setExpandedValues] = useState([0]);\n  return <div>\n      <Accordion variant=\"outline\" expandedValues={expandedValues} onExpandedChange={values => {\n      setExpandedValues(values);\n      if (values.length) {\n        appearanceState().preview.setHighlight(`[data-testid=\"secondary-root-${values[0]}\"]`);\n      }\n    }}>\n        {fields.map((field, index) => {\n        return <AccordionItem key={field.id} value={index} label={<Trans message={`Secondary feature ${index + 1}`} />}>\n              <FeatureForm index={index} />\n              <div className=\"text-right\">\n                <Button size=\"xs\" variant=\"outline\" color=\"danger\" onClick={() => {\n              remove(index);\n            }}>\n                  <Trans message=\"Remove\" />\n                </Button>\n              </div>\n            </AccordionItem>;\n      })}\n      </Accordion>\n      <div className=\"mt-20 text-right\">\n        <Button size=\"xs\" variant=\"outline\" color=\"primary\" startIcon={<AddIcon />} onClick={() => {\n        append({});\n        setExpandedValues([fields.length]);\n      }}>\n          <Trans message=\"Add feature\" />\n        </Button>\n      </div>\n    </div>;\n}\nfunction FeatureForm({\n  index\n}) {\n  return <>\n      <FormImageSelector name={`settings.homepage.appearance.secondaryFeatures.${index}.image`} className=\"mb-30\" label={<Trans message=\"Image\" />} defaultValue={getDefaultImage(index)} diskPrefix=\"homepage\" />\n      <FormTextField name={`settings.homepage.appearance.secondaryFeatures.${index}.title`} label={<Trans message=\"Title\" />} className=\"mb-20\" onFocus={() => {\n      appearanceState().preview.setHighlight(`[data-testid=\"secondary-title-${index}\"]`);\n    }} />\n      <FormTextField name={`settings.homepage.appearance.secondaryFeatures.${index}.subtitle`} label={<Trans message=\"Subtitle\" />} className=\"mb-20\" inputElementType=\"textarea\" rows={4} onFocus={() => {\n      appearanceState().preview.setHighlight(`[data-testid=\"secondary-subtitle-${index}\"]`);\n    }} />\n      <FormTextField name={`settings.homepage.appearance.secondaryFeatures.${index}.description`} label={<Trans message=\"Description\" />} className=\"mb-20\" inputElementType=\"textarea\" rows={4} onFocus={() => {\n      appearanceState().preview.setHighlight(`[data-testid=\"secondary-description-${index}\"]`);\n    }} />\n    </>;\n}\nfunction getDefaultImage(index) {\n  return (appearanceState().defaults?.settings.homepage.appearance).secondaryFeatures[index]?.image;\n}"],"file":"assets/admin-appearance-d1f84551.js"}