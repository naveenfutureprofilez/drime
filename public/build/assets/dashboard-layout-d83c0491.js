import{r as m,cJ as St,j as o,p as D,R as Re,ch as Qe,cb as Ze,ci as Dt,cj as Pt,ao as Je,a_ as Tt,Y as we,cK as Mt,cc as Rt,cL as Ot,cM as Nt,as as de,am as Z,S as Oe,ag as Ne,cN as At,ap as J,bD as se,cO as et,be as Ae,$ as Fe,c3 as ye,by as ve,v as C,ay as Ft,bg as zt,H as ne,T as A,Z as B,c4 as tt,a6 as je,y as Lt,z as nt,D as ze,A as $t,B as st,C as _t,G as rt,I as at,aX as Ut,a as Ce,b$ as ot,V as Ie,bQ as Vt,X as fe,aN as Le,aE as Bt,a0 as Y,bo as te,c0 as Ht,E as Kt,a2 as lt,i as Wt,cP as qt,ah as Gt,cs as Yt,cd as it,cQ as Xt,bw as Qt,aK as ct,aT as Zt,e as Jt,aG as ut,bJ as en,cR as Ve,cS as tn,cT as nn,N as sn,bd as dt,bc as Be,cU as rn}from"./main-e798bedc.js";import{I as an,u as on,d as ln,h as ft,D as mt,i as Pe,j as cn,e as ht,b as un,a as dn,K as fn,f as gt,k as mn,t as hn,C as gn}from"./ArrowBack-7e40eb40.js";import{$ as He,E as vn,C as pn}from"./breadcrumb-f2553d42.js";function vt(){let t=m.useRef(new Map),n=m.useCallback((r,a,l,i)=>{let c=i!=null&&i.once?(...d)=>{t.current.delete(l),l(...d)}:l;t.current.set(l,{type:a,eventTarget:r,fn:c,options:i}),r.addEventListener(a,l,i)},[]),e=m.useCallback((r,a,l,i)=>{var c;let d=((c=t.current.get(l))===null||c===void 0?void 0:c.fn)||l;r.removeEventListener(a,d,i),t.current.delete(l)},[]),s=m.useCallback(()=>{t.current.forEach((r,a)=>{e(r.eventTarget,r.type,a,r.options)})},[e]);return m.useEffect(()=>s,[s]),{addGlobalListener:n,removeGlobalListener:e,removeAllGlobalListeners:s}}function Ke(t,n){let e=window.getComputedStyle(t),s=/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY);return s&&n&&(s=t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth),s}function gr(t,n){let e=t;for(Ke(e,n)&&(e=e.parentElement);e&&!Ke(e,n);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function xn(t){let{ref:n,onInteractOutside:e,isDisabled:s,onInteractOutsideStart:r}=t,a=m.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),l=He(c=>{e&&he(c,n)&&(r&&r(c),a.current.isPointerDown=!0)}),i=He(c=>{e&&e(c)});m.useEffect(()=>{let c=a.current;if(s)return;const d=n.current,u=St(d);if(typeof PointerEvent<"u"){let g=f=>{c.isPointerDown&&he(f,n)&&i(f),c.isPointerDown=!1};return u.addEventListener("pointerdown",l,!0),u.addEventListener("pointerup",g,!0),()=>{u.removeEventListener("pointerdown",l,!0),u.removeEventListener("pointerup",g,!0)}}else{let g=h=>{c.ignoreEmulatedMouseEvents?c.ignoreEmulatedMouseEvents=!1:c.isPointerDown&&he(h,n)&&i(h),c.isPointerDown=!1},f=h=>{c.ignoreEmulatedMouseEvents=!0,c.isPointerDown&&he(h,n)&&i(h),c.isPointerDown=!1};return u.addEventListener("mousedown",l,!0),u.addEventListener("mouseup",g,!0),u.addEventListener("touchstart",l,!0),u.addEventListener("touchend",f,!0),()=>{u.removeEventListener("mousedown",l,!0),u.removeEventListener("mouseup",g,!0),u.removeEventListener("touchstart",l,!0),u.removeEventListener("touchend",f,!0)}}},[n,s,l,i])}function he(t,n){if(t.button>0)return!1;if(t.target){const e=t.target.ownerDocument;if(!e||!e.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return n.current&&!n.current.contains(t.target)}function bn({className:t,children:n,size:e,color:s,radius:r,selectable:a,wrap:l=!0,startButton:i}){return o.jsxs("div",{className:D("flex items-center gap-8",l&&"flex-wrap",t),children:[i,m.Children.map(n,c=>{if(m.isValidElement(c))return m.cloneElement(c,{size:e,color:s,selectable:a,radius:r})})]})}function Te(t){return{id:t,name:`${t}`,description:`${t}`}}function wn(t,n){const e=m.useRef(null),s=Qe(n),{displayWith:r=U=>U.name,validateWith:a,children:l,suggestions:i,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:g,placeholder:f,onOpenChange:h,chipSize:v="sm",openMenuOnFocus:b=!0,showEmptyMessage:x,value:p,defaultValue:w,onChange:y,valueKey:j,isAsync:S,allowCustomValue:P=!0,showDropdownArrow:O,onChipClick:N,alwaysShowAvatar:E=!1,readOnly:z,...I}=t,T=Ze({...t,flexibleHeight:!0}),[L,re]=Cn(t),[ae,oe]=m.useState(!1),k=o.jsx(Oe,{isIndeterminate:!0,size:"w-24 h-24","aria-label":"loading..."}),M=O?o.jsx(Ne,{}):null,{fieldProps:W,inputProps:q}=Dt({...I,focusRef:s,endAdornment:c&&ae?k:M});return o.jsx(Pt,{fieldClassNames:T,...W,children:o.jsxs(an,{ref:e,className:D("flex flex-wrap items-center",T.input),onClick:()=>{var U;(U=s.current)==null||U.focus()},children:[o.jsx(yn,{displayChipUsing:r,onChipClick:N,items:L,setItems:re,chipSize:v,alwaysShowAvatar:E,readOnly:z}),o.jsx(jn,{size:t.size,showEmptyMessage:x,inputProps:q,inputValue:d,onInputValueChange:u,fieldRef:e,inputRef:s,chips:L,setChips:re,validateWith:a,isLoading:c,suggestions:i,placeholder:f,openMenuOnFocus:b,listboxIsOpen:ae,setListboxIsOpen:oe,allowCustomValue:P,readOnly:z,children:l})]})})}function yn({items:t,setItems:n,displayChipUsing:e,chipSize:s,onChipClick:r,alwaysShowAvatar:a,readOnly:l}){const i=Je(),c=m.useCallback(d=>{const u=t.findIndex(f=>f.id===d),g=[...t];return u>-1&&(g.splice(u,1),n(g)),g},[t,n]);return o.jsx(bn,{className:D("max-w-full flex-shrink-0 flex-wrap",s==="xs"?"my-6":"my-8"),size:s,selectable:!0,children:t.map(d=>o.jsx(Tt,{errorMessage:d.errorMessage,adornment:d.image||a?o.jsx(we,{circle:!0,src:d.image,fallback:"initials",label:d.name}):null,onClick:()=>r==null?void 0:r(d),onRemove:l?void 0:()=>{c(d.id).length?i==null||i.focusPrevious({tabbable:!0}):i==null||i.focusLast()},children:e(d)},d.id))})}function jn(t){const{inputRef:n,fieldRef:e,validateWith:s,setChips:r,chips:a,suggestions:l,inputProps:i,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:g,allowCustomValue:f,isLoading:h,size:v,readOnly:b}=t,x=Je(),p=m.useCallback(k=>{k=(k||[]).filter(M=>{const W=!M||!M.id||!M.name;return!(a.findIndex(U=>U.id===(M==null?void 0:M.id))>-1)&&!W}),k.length&&(s&&(k=k.map(M=>s(M))),r([...a,...k]))},[a,r,s]),w=Mt({...t,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:g,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:k=>{L(k)}}),{state:{activeIndex:y,setActiveIndex:j,isOpen:S,setIsOpen:P,inputValue:O,setInputValue:N},refs:E,listboxId:z,collection:I,onInputChange:T}=w,L=k=>{const M=I.size&&y!=null?[...I.values()][y]:null;M!=null&&M.item?p([M.item]):f&&p([Te(M?M.value:k)]),N(""),j(null),P(!1)};Rt(()=>{e.current&&E.reference.current!==e.current&&w.reference(e.current)},[e,w,E]);const{handleTriggerKeyDown:re,handleListboxKeyboardNavigation:ae}=At(w),oe=J(()=>{d&&!S&&P(!0)});return o.jsx(Ot,{listbox:w,mobileOverlay:Nt,isLoading:h,onPointerDown:k=>{k.preventDefault()},children:o.jsx("input",{readOnly:b,type:"text",className:D("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",v==="xs"?"h-20":"h-30"),placeholder:c,...de(i,{ref:n,value:O,onChange:T,onPaste:k=>{const W=k.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(W){k.preventDefault();const q=window.getSelection();q!=null&&q.rangeCount&&(q.deleteFromDocument(),p(W.map(U=>Te(U))))}},"aria-autocomplete":"list","aria-controls":S?z:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:k=>{if(b)return;const M=k.target;if(k.key==="Enter"){k.preventDefault(),L(M.value);return}if(k.key==="Escape"&&S&&(P(!1),N("")),k.key==="ArrowUp"&&S&&(y===0||y==null)){j(null);return}if(y!=null&&(k.key==="ArrowLeft"||k.key==="ArrowRight")){k.preventDefault();return}if((k.key==="ArrowLeft"||k.key==="Backspace"||k.key==="Delete")&&M.selectionStart===0&&y==null&&a.length){x==null||x.focusPrevious({tabbable:!0});return}re(k)||ae(k)},onFocus:b?void 0:oe,onClick:b?void 0:oe})})})}function Cn({onChange:t,value:n,defaultValue:e,valueKey:s}){const r=m.useMemo(()=>We(n),[n]),a=m.useMemo(()=>We(e),[e]),l=m.useCallback(i=>{const c=s?i.map(d=>d[s]):i;t==null||t(c)},[t,s]);return Z(r||void 0,a||[],l)}function We(t){if(t!=null)return t.map(n=>typeof n!="object"?Te(n):n)}const In=Re.forwardRef(wn),vr=se(o.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),G=new Map,ge=new Map,kn=new Map,V={status:"inactive"};function ke({e:t,rect:n,deltaX:e,deltaY:s}){return{rect:n,x:t.clientX,y:t.clientY,deltaX:e??0,deltaY:s??0,nativeEvent:t}}let pt=null;function qe(t){pt=t}function En(t){return{left:t.left,top:t.top,width:t.width,height:t.height}}function Sn(t){const n=new IntersectionObserver(e=>{e.forEach(s=>{const{width:r,height:a,left:l,top:i}=s.boundingClientRect,[c,d]=[...t].find(([,g])=>g.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:r,height:a,left:l,top:i};t.set(c,{...d,rect:u})}),n.disconnect()});[...t.values()].forEach(e=>{e.ref.current&&n.observe(e.ref.current)})}function pr({id:t,disabled:n,ref:e,preview:s,hidePreview:r,...a}){const l=m.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=vt(),d=m.useRef({lastPosition:{x:0,y:0}}).current,u=m.useRef(a);u.current=a,m.useLayoutEffect(()=>(n?G.delete(t):G.set(t,{...G.get(t),id:t,ref:e,type:u.current.type,getData:u.current.getData}),()=>{G.delete(t)}),[t,n,u,e]);const g=x=>{kn.forEach(p=>{var w;p.type===((w=G.get(t))==null?void 0:w.type)&&x(p)})},f=x=>{var S,P;const p=G.get(t),w=e.current,y=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(pt||!w||!p||!y){x.preventDefault(),x.stopPropagation();return}Sn(ge),qe("drag"),r&&Dn(x),x.dataTransfer.effectAllowed="move",d.lastPosition={x:x.clientX,y:x.clientY},d.currentRect=En(w.getBoundingClientRect());const j=ke({rect:d.currentRect,e:x});s!=null&&s.current&&s.current(p,O=>{x.dataTransfer.setDragImage(O,0,0)}),V.status="dragging",V.dragTargetId=t,e.current&&(e.current.dataset.dragging="true"),(P=(S=u.current).onDragStart)==null||P.call(S,j,p),requestAnimationFrame(()=>{g(O=>{var N;return(N=O.onDragStart)==null?void 0:N.call(O,j,p)})}),i(window,"dragover",h,!0)},h=x=>{var P,O;if(x.preventDefault(),!d.currentRect)return;const p=x.clientX-d.lastPosition.x,w=x.clientY-d.lastPosition.y,y={...d.currentRect,left:d.currentRect.left+p,top:d.currentRect.top+w},j=ke({rect:y,e:x,deltaX:p,deltaY:w}),S=G.get(t);S&&((O=(P=u.current).onDragMove)==null||O.call(P,j,S),g(N=>{var E;return(E=N.onDragMove)==null?void 0:E.call(N,j,S)})),d.lastPosition={x:x.clientX,y:x.clientY},d.currentRect=y};return{draggableProps:{draggable:!n,onDragStart:f,onDragEnd:x=>{var y,j;if(c(),!d.currentRect)return;qe(null),ee&&ee.remove();const p=ke({rect:d.currentRect,e:x}),w=G.get(t);w&&((j=(y=u.current).onDragEnd)==null||j.call(y,p,w),g(S=>{var P;return(P=S.onDragEnd)==null?void 0:P.call(S,p,w,V.status)})),requestAnimationFrame(()=>{V.dragTargetId=void 0,V.status="inactive",e.current&&delete e.current.dataset.dragging})},onPointerDown:x=>{d.clickedEl=x.target}},dragHandleRef:l}}let ee;function Dn(t){ee||(ee=new Image,document.body.append(ee),ee.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),t.dataTransfer.setDragImage(ee,0,0)}async function*Pn(t){const n=[];for(const e of t.items)if(e.kind==="file"){const s=e.webkitGetAsEntry();s&&n.push(s)}for(const e of n)if(e.isFile){if(e.name===".DS_Store")continue;const s=await bt(e);yield new et(s,e.fullPath)}else e.isDirectory&&(yield*xt(e))}async function*xt(t){const n=t.createReader();let e;do{e=await new Promise((s,r)=>{n.readEntries(s,r)});for(const s of e)if(s.isFile){if(s.name===".DS_Store")continue;const r=await bt(s);yield new et(r,s.fullPath)}else s.isDirectory&&(yield*xt(s))}while(e.length>0)}function bt(t){return new Promise((n,e)=>t.file(n,e))}async function Tn(t){const n=[];for await(const e of t)n.push(e);return n}const Mn=400;function xr({id:t,disabled:n,ref:e,...s}){const r=m.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,a=m.useRef(s);a.current=s,m.useLayoutEffect(()=>(ge.set(t,{...ge.get(t),disabled:n,id:t,ref:e}),()=>{ge.delete(t)}),[t,a,n,e]);const l=f=>{var b;const h=a.current,v=h.allowDragEventsFromItself||e.current!==((b=f.ref)==null?void 0:b.current);return!!(f!=null&&f.type&&v&&h.types.includes(f.type)&&(!h.acceptsDrop||h.acceptsDrop(f)))},i=f=>{var v,b;const h=ue(f);h&&((b=(v=a.current).onDragLeave)==null||b.call(v,h))};return{droppableProps:n?{}:{onDragOver:f=>{var v,b;f.preventDefault(),f.stopPropagation();const h=ue(f);h&&l(h)&&((b=(v=a.current).onDragOver)==null||b.call(v,h,f))},onDragEnter:f=>{var v,b;if(f.stopPropagation(),r.dragOverElements.add(f.target),r.dragOverElements.size>1)return;const h=ue(f);h&&l(h)&&((b=(v=a.current).onDragEnter)==null||b.call(v,h),clearTimeout(r.dropActivateTimer),typeof a.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var x,p;h&&((p=(x=a.current).onDropActivate)==null||p.call(x,h))},Mn)))},onDragLeave:f=>{f.stopPropagation(),r.dragOverElements.delete(f.target);for(const v of r.dragOverElements)f.currentTarget.contains(v)||r.dragOverElements.delete(v);if(r.dragOverElements.size>0)return;const h=ue(f);h&&l(h)&&(i(f),clearTimeout(r.dropActivateTimer))},onDrop:async f=>{var v,b,x,p;f.preventDefault(),f.stopPropagation(),r.dragOverElements.clear(),i(f),clearTimeout(r.dropActivateTimer);const h=ue(f);if(h)if((b=(v=a.current).onDragLeave)==null||b.call(v,h),!l(h))V.status!=="inactive"&&(V.status="dropFail");else{const w=(p=(x=a.current).onDrop)==null?void 0:p.call(x,h);V.status!=="inactive"&&(V.status=w===!1?"dropFail":"dropSuccess")}}}}}function ue(t){if(V.dragTargetId!=null)return G.get(V.dragTargetId);if(t.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Tn(Pn(t.dataTransfer))}}function br(t){return"next_cursor"in t?t.next_cursor!=null:"last_page"in t?t.current_page<t.last_page:"next_page"in t?t.next_page!=null:t.data.length>0&&t.data.length>=t.per_page}let _=function(t){return t.Select="select",t.DateRangePicker="dateRangePicker",t.SelectModel="selectModel",t.Input="input",t.BooleanToggle="booleanToggle",t.ChipField="chipField",t.Custom="custom",t}({}),F=function(t){return t.eq="=",t.ne="!=",t.gt=">",t.gte=">=",t.lt="<",t.lte="<=",t.has="has",t.notNull="notNull",t.contains="contains",t.notContains="notContains",t.startsWith="startsWith",t.endsWith="endsWith",t.hasAll="hasAll",t.doesntHave="doesntHave",t.between="between",t}({});F.eq,F.ne,F.contains,F.notContains,F.startsWith,F.endsWith,F.notNull;F.eq,F.ne,F.gt,F.gte,F.lt,F.lte,F.notNull;const Rn="user";function On(t){var f,h;const{granularity:n,closeDialogOnSelection:e,...s}=t,r=on(t),a=m.useRef(null),i=Ae()&&n!=="day",c=o.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:r.calendarIsOpen,onOpenChange:r.setCalendarIsOpen,type:"popover",triggerRef:a,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:o.jsx(ln,{state:r})}),d={onClick:v=>{v.stopPropagation(),v.preventDefault(),Nn(v)?r.setCalendarIsOpen(!1):r.setCalendarIsOpen(!0)}},u=r.selectedValue,g=r.setSelectedValue;return o.jsxs(m.Fragment,{children:[o.jsxs(ft,{ref:a,wrapperProps:d,endAdornment:i?void 0:o.jsx(mt,{}),...s,children:[o.jsx(Pe,{isPlaceholder:(f=r.isPlaceholder)==null?void 0:f.start,state:r,segmentProps:d,value:u.start,onChange:v=>{g({start:v,end:u.end})}}),o.jsx(cn,{className:"block flex-shrink-0 text-muted",size:"md"}),o.jsx(Pe,{isPlaceholder:(h=r.isPlaceholder)==null?void 0:h.end,state:r,segmentProps:d,value:u.end,onChange:v=>{g({start:u.start,end:v})}})]}),c]})}function Nn(t){return["hour","minute","dayPeriod"].includes(t.currentTarget.ariaLabel||"")}function An(t){const{field:{onChange:n,onBlur:e,value:s,ref:r},fieldState:{invalid:a,error:l}}=ye({name:t.name}),i={onChange:c=>{n(c?wt(c):null)},onBlur:e,value:Fn(s),invalid:a,errorMessage:l==null?void 0:l.message,inputRef:r};return o.jsx(On,{...de(i,t)})}function Fn(t){const{start:n,end:e,preset:s}=t||{},r={preset:s};try{n&&(r.start=typeof n=="string"?ve(n):n),e&&(r.end=typeof e=="string"?ve(e):e)}catch{}return r}function wt({start:t,end:n,preset:e}={}){const s={preset:e};return t&&(s.start=t.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function yt(t){var n;return{...t,defaultOperator:F.between,control:{type:_.DateRangePicker,defaultValue:((n=t.control)==null?void 0:n.defaultValue)||wt(ht[3].getRangeValue())}}}function zn(t){return yt({key:"created_at",label:C("Date created"),...t})}function Ln(t){return yt({key:"updated_at",label:C("Last updated"),...t})}const $n={key:"type",label:C("Type"),description:C("Type of the file"),defaultOperator:F.eq,control:{type:_.Select,defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}},wr=[$n,{key:"public",label:C("Visibility"),description:C("Whether file is publicly accessible"),defaultOperator:F.eq,control:{type:_.Select,defaultValue:"01",options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}},zn({description:C("Date file was uploaded")}),Ln({description:C("Date file was last changed")}),{key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by"),defaultOperator:F.eq,control:{type:_.SelectModel,model:Rn}}],Ee="filters";function _n(t){if(!t)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(t))),n.map(e=>(e.valueKey!=null&&(e.value=e.valueKey),e))}catch{}return n}function Un(t,n){return!t||(t=n?t.filter(e=>e.value!=="").map(e=>Vn(e,n)):t,t=t.filter(e=>!e.isInactive),!t.length)?"":encodeURIComponent(btoa(JSON.stringify(t)))}function Vn(t,n){var s;const e=n.find(r=>r.key===t.key);if((e==null?void 0:e.control.type)==="select"){const r=(e.control.options||[]).find(a=>a.key===t.value);if(r)return{...t,value:r.value,valueKey:r.key}}return(s=e==null?void 0:e.extraFilters)!=null&&s.length&&(t.extraFilters=e.extraFilters),t}function Bn(t,n){const[e]=Ft(),s=zt(),r=e.get(Ee),a=m.useMemo(()=>{if(!t)return[];const u=_n(r);return(n||[]).forEach(g=>{if(!u.find(f=>f.key===g)){const f=t.find(h=>h.key===g);u.push({key:g,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),u.sort((g,f)=>t.findIndex(h=>h.key===g.key)-t.findIndex(h=>h.key===f.key)),u},[r,n,t]),l=m.useCallback(u=>{const g=[...a];return u.forEach(f=>{const h=typeof f=="object"?f.key:f,v=g.findIndex(b=>b.key===h);v>-1&&g.splice(v,1)}),g},[a]),i=m.useCallback(u=>{const g=Un(u,t);g?e.set(Ee,g):e.delete(Ee),s({search:`?${e}`},{replace:!0})},[t,s,e]),c=m.useCallback(u=>{const f=[...l(u),...u];i(f)},[l,i]),d=m.useCallback(u=>i(l([u])),[l,i]);return{add:c,remove:d,replaceAll:i,decodedFilters:a,encodedFilters:r}}const jt=m.forwardRef((t,n)=>{const{isInactive:e,filter:s,...r}=t;return e?o.jsx(Hn,{filter:s,...r,ref:n}):o.jsx(Kn,{filter:s,...r,ref:n})}),Hn=m.forwardRef(({filter:t,...n},e)=>o.jsx(ne,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:e,endIcon:o.jsx(Ne,{}),...n,children:o.jsx(A,{...t.label})})),Kn=m.forwardRef(({filter:t,children:n,...e},s)=>{const r=t.control.type===_.BooleanToggle;return o.jsxs(ne,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!r&&o.jsx(Ne,{}),ref:s,...e,children:[o.jsx("span",{className:D(!r&&"mr-8 border-r border-r-primary-light pr-8"),children:o.jsx(A,{...t.label})}),n]})});function Wn({filter:t}){const{trans:n}=B();return o.jsx(tt,{size:"sm",name:`${t.key}.value`,selectionMode:"single",showSearchField:t.control.showSearchField,placeholder:t.control.placeholder?n(t.control.placeholder):void 0,searchPlaceholder:t.control.searchPlaceholder?n(t.control.searchPlaceholder):void 0,children:t.control.options.map(e=>o.jsx(je,{value:e.key,children:typeof e.label=="string"?e.label:o.jsx(A,{...e.label})},e.key))})}function me(t){const{onValueChange:n,isInactive:e,filter:s,label:r}=t;return o.jsxs(Fe,{offset:10,type:"popover",onClose:a=>{a!==void 0&&n(a)},children:[o.jsx(jt,{isInactive:e,filter:s,children:r}),o.jsx(qn,{...t})]})}function qn({filter:t,panel:n,value:e,operator:s}){const r=Lt({defaultValues:{[t.key]:{value:e,operator:s}}}),{close:a,formId:l}=nt();return o.jsxs(ze,{size:"xs",children:[o.jsx($t,{children:o.jsx(A,{...t.label})}),o.jsx(st,{padding:"px-14 pt-14 pb-4 max-h-288",children:o.jsxs(_t,{form:r,id:l,onSubmit:i=>{a(i[t.key])},children:[t.description&&o.jsx("div",{className:"mb-14 text-xs text-muted",children:o.jsx(A,{...t.description})}),n]})}),o.jsx(rt,{children:o.jsx(ne,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:o.jsx(A,{message:"Apply"})})})]})}function Gn(t,n,e){return at({queryKey:[...t.split("/"),n],queryFn:()=>Yn(t,n),placeholderData:Ut,...e})}async function Yn(t,n){return Ce.get(t,{params:n}).then(e=>"results"in e.data?e.data:{results:Object.values(e.data).find(r=>Array.isArray(r))})}function Ct(t,n,e){return at({queryKey:[t,n],queryFn:()=>Xn(t,n),...e})}async function Xn(t,n){return Ce.get(t,{params:n}).then(e=>e.data)}function Qn({label:t,className:n,background:e,value:s,defaultValue:r="",placeholder:a=C("Select item..."),searchPlaceholder:l=C("Find an item..."),onChange:i,description:c,errorMessage:d,invalid:u,autoFocus:g,queryParams:f,endpoint:h,disabled:v,required:b}){var N;const x=m.useRef(null),[p,w]=m.useState(""),[y,j]=Z(s,r,i),S=Gn(h,{query:p,...f}),{trans:P}=B(),O=Ze({size:"md"});return y?o.jsxs("div",{className:n,children:[o.jsx("div",{className:O.label,children:t}),o.jsx("div",{className:D("rounded-input border p-8",e,u&&"border-danger"),children:o.jsx(Ie,{initial:!1,mode:"wait",children:o.jsx(Zn,{disabled:v,endpoint:h,modelId:y,queryParams:f,onEditClick:()=>{j(""),w(""),requestAnimationFrame(()=>{var E,z;(E=x.current)==null||E.focus(),(z=x.current)==null||z.click()})}})})}),c&&!d&&o.jsx("div",{className:O.description,children:c}),d&&o.jsx("div",{className:O.error,children:d})]}):o.jsx(Vt,{className:n,showSearchField:!0,invalid:u,errorMessage:d,description:c,color:"white",isAsync:!0,background:e,placeholder:P(a),searchPlaceholder:P(l),label:t,isLoading:S.isFetching,items:(N=S.data)==null?void 0:N.results,inputValue:p,onInputValueChange:w,selectionMode:"single",selectedValue:y,onSelectionChange:j,ref:x,autoFocus:g,disabled:v,required:b,children:E=>o.jsx(je,{value:E.id,description:E.description,startIcon:o.jsx(we,{src:E.image,size:"sm",label:E.name}),children:E.name},E.id)})}function Zn({modelId:t,onEditClick:n,endpoint:e,disabled:s,queryParams:r}){const{data:a,isLoading:l}=Ct(`${e}/${t}`,r);return l||!(a!=null&&a.model)?o.jsx(Jn,{},"skeleton"):o.jsxs(fe.div,{className:D("flex items-center gap-10",s&&"pointer-events-none cursor-not-allowed text-disabled"),...Le,children:[o.jsx(we,{src:a.model.image,label:a.model.name}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm leading-4",children:a.model.name}),o.jsx("div",{className:"text-xs text-muted",children:a.model.description})]}),o.jsx(Bt,{label:o.jsx(A,{message:"Change item"}),children:o.jsx(Y,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:s,children:o.jsx(vn,{})})})]},"preview")}function Jn(){return o.jsxs(fe.div,{className:"flex items-center gap-10",...Le,children:[o.jsx(te,{variant:"rect",size:"w-32 h-32"}),o.jsxs("div",{className:"max-h-[36px] flex-auto",children:[o.jsx(te,{className:"text-xs"}),o.jsx(te,{className:"max-h-8 text-xs"})]}),o.jsx(te,{variant:"icon",size:"w-24 h-24"})]})}function es({name:t,...n}){const{clearErrors:e}=ot(),{field:{onChange:s,value:r=""},fieldState:{invalid:a,error:l}}=ye({name:t});return o.jsx(Qn,{value:r,onChange:i=>{s(i),e(t)},invalid:a,errorMessage:l==null?void 0:l.message,...n})}function ts({filter:t}){return o.jsx(es,{name:`${t.key}.value`,endpoint:t.control.endpoint?t.control.endpoint:`normalized-models/${t.control.model}`})}function ns({filter:t}){return o.jsx(An,{min:t.control.min,max:t.control.max,size:"sm",name:`${t.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const It={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),notNull:C("has any value"),contains:C("contains"),notContains:C("does not contain"),startsWith:C("starts with"),endsWith:C("ends with"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between"),hasAll:C("Include all")};function ss({filter:t}){var r,a;const n=t.control,e=ot(),s=Ht({control:e.control,name:`${t.key}.operator`});return o.jsxs(m.Fragment,{children:[(r=t.operators)!=null&&r.length?o.jsx(tt,{selectionMode:"single",name:`${t.key}.operator`,className:"mb-14",size:"sm",children:(a=t.operators)==null?void 0:a.map(l=>o.jsx(je,{value:l,children:o.jsx(A,{...It[l]})},l))}):null,s==="notNull"?null:o.jsx(Kt,{size:"sm",name:`${t.key}.value`,type:t.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0})]})}function rs({children:t,...n}){const{field:{onChange:e,onBlur:s,value:r=[],ref:a},fieldState:{invalid:l,error:i}}=ye({name:n.name}),c={onChange:e,onBlur:s,value:r,invalid:l,errorMessage:i==null?void 0:i.message};return o.jsx(In,{ref:a,...de(c,n),children:t})}function as({filter:t}){const{trans:n}=B();return o.jsx(rs,{size:"sm",name:`${t.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:t.control.placeholder?n(t.control.placeholder):void 0,displayWith:e=>{const s=t.control.options.find(r=>r.key===e.id);if(s)return typeof s.label=="string"?s.label:s.label.message},suggestions:t.control.options.map(e=>({id:e.key,name:typeof e.label=="string"?e.label:e.label.message})),children:e=>o.jsx(je,{value:e.id,children:o.jsx(A,{message:e.name})},e.id)})}function os(t){switch(t.filter.control.type){case _.DateRangePicker:return o.jsx(ls,{...t});case _.BooleanToggle:return o.jsx(is,{...t});case _.Select:return o.jsx(cs,{...t});case _.ChipField:return o.jsx(us,{...t});case _.Input:return o.jsx(fs,{...t});case _.SelectModel:return o.jsx(ms,{...t});case _.Custom:const n=t.filter.control.listItem;return o.jsx(n,{...t});default:return null}}function ls(t){const{value:n,filter:e}=t;let s;return n.preset!==void 0?s=o.jsx(A,{...ht[n.preset].label}):s=o.jsx(un,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),o.jsx(me,{...t,label:s,panel:o.jsx(ns,{filter:e})})}function is({filter:t,isInactive:n,onValueChange:e}){return o.jsx(jt,{onClick:()=>{e({value:t.control.defaultValue})},filter:t,isInactive:n})}function cs(t){const{filter:n,value:e}=t,s=n.control.options.find(r=>r.key===e);return o.jsx(me,{...t,label:s?typeof s.label=="string"?s.label:o.jsx(A,{...s.label}):null,panel:o.jsx(Wn,{filter:n})})}function us(t){return o.jsx(me,{...t,label:o.jsx(ds,{...t}),panel:o.jsx(as,{filter:t.filter})})}function ds(t){const{trans:n}=B(),{filter:e,value:s}=t,r=s.map(c=>e.control.options.find(d=>d.key===c)),a=3,l=s.length-a,i=o.jsx(m.Fragment,{children:r.filter(Boolean).slice(0,a).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=typeof c.label=="string"?c.label:n(c.label),u})});return l>0?o.jsx(A,{message:":names + :count more",values:{names:i,count:l}}):i}function fs(t){const{filter:n,value:e,operator:s}=t,r=s?o.jsx(A,{...It[s]}):null,a=n.control.inputType==="number"?o.jsx(dn,{value:e}):e;return o.jsx(me,{...t,label:o.jsxs(m.Fragment,{children:[r," ",a]}),panel:o.jsx(ss,{filter:n})})}function ms(t){const{value:n,filter:e}=t,{isLoading:s,data:r}=Ct(e.control.endpoint?`${e.control.endpoint}/${n}`:`normalized-models/${e.control.model}/${n}`,void 0,{enabled:!!n}),a=o.jsxs(m.Fragment,{children:[o.jsx(te,{variant:"avatar",size:"w-18 h-18 mr-6"}),o.jsx(te,{variant:"rect",size:"w-50"})]}),l=o.jsxs(m.Fragment,{children:[o.jsx(we,{size:"xs",src:r==null?void 0:r.model.image,label:r==null?void 0:r.model.name,className:"mr-6"}),r==null?void 0:r.model.name]}),i=s||!r?a:l;return o.jsx(me,{...t,label:i,panel:o.jsx(ts,{filter:e})})}function yr({filters:t,pinnedFilters:n,className:e,wrap:s}){const{decodedFilters:r,remove:a,replaceAll:l}=Bn(t,n);return r.length?o.jsx("div",{className:D("flex items-center gap-6",e,s?"flex-wrap":"overflow-x-auto"),children:r.map((i,c)=>{const d=t.find(g=>g.key===i.key);if(!d)return null;const u=g=>{const f=[...r];f.splice(c,1,{key:d.key,value:g.value,isInactive:!1,operator:g.operator||d.defaultOperator}),l(f)};return o.jsxs("div",{children:[!i.isInactive&&o.jsx(Y,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(i.key)},children:o.jsx(lt,{})}),o.jsx(os,{filter:d,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:u})]},i.key)})}):null}const $e=m.createContext(null);function hs({onMoveStart:t,onMove:n,onMoveEnd:e,minimumMovement:s=0,preventDefault:r,stopPropagation:a=!0,onPress:l,onLongPress:i,...c}){const u=m.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:g,removeGlobalListener:f}=vt(),h=p=>{!u.el||(t==null?void 0:t(p,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},v=p=>{var w;if(p.button===0&&u.id==null){if(u.started=!1,((w=c.onPointerDown)==null?void 0:w.call(c,p))===!1)return;a&&p.stopPropagation(),r&&p.preventDefault(),u.id=p.pointerId,u.el=p.currentTarget,u.lastPosition={x:p.clientX,y:p.clientY},i&&(u.longPressTimer=setTimeout(()=>{i(p,u.el),u.longPressTriggered=!0},400)),(t||n)&&g(window,"pointermove",b,!1),g(window,"pointerup",x,!1),g(window,"pointercancel",x,!1)}},b=p=>{if(p.pointerId===u.id){const w=p.clientX-u.lastPosition.x,y=p.clientY-u.lastPosition.y;(Math.abs(w)>=s||Math.abs(y)>=s)&&!u.started&&h(p),u.started&&(n==null||n(p,w,y),u.lastPosition={x:p.clientX,y:p.clientY})}},x=p=>{var w;if(p.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const y=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(e==null||e(p)),u.el&&(p.type!=="pointercancel"&&((w=c.onPointerUp)==null||w.call(c,p,u.el),p.target&&u.el.contains(p.target)&&(y?i==null||i(p,u.el):l==null||l(p,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,f(window,"pointermove",b,!1),f(window,"pointerup",x,!1),f(window,"pointercancel",x,!1)}};return{domProps:{onPointerDown:J(v)}}}const Ge=se(o.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),gs=Re.createContext(null);function Q(t,n){const{base_url:e}=Wt(),s=m.useContext(gs);return m.useMemo(()=>{if(!t)return{};const a={previewUrl:vs(t,(n==null?void 0:n.preferThumbnail)||!1),downloadUrl:`${e}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||t.hash}`};return s&&(a.previewUrl&&(a.previewUrl=Ye(a.previewUrl,{...s,thumbnail:n!=null&&n.preferThumbnail?"true":""},e)),a.downloadUrl=Ye(a.downloadUrl,s,e)),a},[e,t,n==null?void 0:n.downloadHashes,n==null?void 0:n.preferThumbnail,s])}function vs(t,n){if(t.url){if(qt(t.url))if(n&&t.thumbnail){const e=t.extension==="png"?"png":"jpg";return t.url.replace(new RegExp(t.file_name+"$"),`thumbnail.${e}`)}else return t.url;return`${Gt().settings.base_url}/${t.url}`}}function Ye(t,n,e){const s=new URL(t,e);return Object.entries(n).forEach(([r,a])=>{s.searchParams.append(r,a)}),s.toString()}function Me(t,n){const e=document.createElement("a");e.href=t,n&&(e.download=n),document.body.appendChild(e),e.click(),document.body.removeChild(e)}const jr=se(o.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function pe(t){return Yt()?t.metaKey:t.ctrlKey}function ps(t){const{cellCount:n,rowCount:e}=t;return{onKeyDown:r=>{switch(r.key){case"ArrowLeft":H(r,{cell:{op:"decrement"}},t);break;case"ArrowRight":H(r,{cell:{op:"increment"}},t);break;case"ArrowUp":H(r,{row:{op:"decrement"}},t);break;case"ArrowDown":H(r,{row:{op:"increment"}},t);break;case"PageUp":H(r,{row:{op:"decrement",count:5}},t);break;case"PageDown":H(r,{row:{op:"increment",count:5}},t);break;case"Tab":xs(r);break;case"Home":pe(r)?H(r,{row:{op:"decrement",count:e},cell:{op:"decrement",count:n}},t):H(r,{cell:{op:"decrement",count:n}},t);break;case"End":pe(r)?H(r,{row:{op:"increment",count:e},cell:{op:"increment",count:n}},t):H(r,{cell:{op:"increment",count:n}},t);break}}}}function H(t,n,{cellCount:e,rowCount:s}){var v,b,x,p,w,y,j;if(((v=document.activeElement)==null?void 0:v.tagName)==="input")return;t.preventDefault();const r=t.currentTarget,a=t.target.closest("[aria-colindex]");if(!a||!r)return;const l=a.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),c=parseInt(a.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(c))return;const d=((b=n.row)==null?void 0:b.count)??1;((x=n.row)==null?void 0:x.op)==="increment"?i=Math.min(s,i+d):((p=n.row)==null?void 0:p.op)==="decrement"&&(i=Math.max(1,i-d));const u=((w=n.cell)==null?void 0:w.count)??1;((y=n.cell)==null?void 0:y.op)==="increment"?c=Math.min(e,c+u):((j=n.cell)==null?void 0:j.op)==="decrement"&&(c=Math.max(1,c-u));const g=r.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${c}"]`);if(!g)return;const h=it(g).nextNode()||g;a.setAttribute("tabindex","-1"),h.setAttribute("tabindex","0"),h.focus()}function xs(t){const n=t.currentTarget;if(t.shiftKey)n.focus();else{const e=it(n,{tabbable:!0});let s,r;do r=e.lastChild(),r&&(s=r);while(r);s&&!s.contains(document.activeElement)&&Xt(s)}}const K=m.createContext(null);function kt({index:t,isHeader:n}){const{columns:e,cellHeight:s="h-46",headerCellHeight:r="h-46"}=m.useContext(K),a=e[t],l=a==null?void 0:a.padding;let i="justify-start";return(a==null?void 0:a.align)==="center"?i="justify-center":(a==null?void 0:a.align)==="end"&&(i="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?r:s,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,i,l,a==null?void 0:a.className)}function bs({rowIndex:t,rowIsHovered:n,index:e,item:s,id:r}){const{columns:a}=m.useContext(K),l=a[e],i=m.useMemo(()=>({index:t,isHovered:n,isPlaceholder:s.isPlaceholder}),[t,n,s.isPlaceholder]),c=kt({index:e,isHeader:!1});return o.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":e+1,id:r,className:c,children:o.jsx("div",{className:"w-full min-w-0 overflow-hidden overflow-ellipsis",children:l.body(s,i)})})}function ws(t){return t.shiftKey||pe(t)}function ys({index:t,isSelected:n,isHeader:e}){const s=Qt(),r=Ae(),{hideBorder:a,enableSelection:l,collapseOnMobile:i,onAction:c}=m.useContext(K);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",c&&"cursor-pointer",r&&i&&a?"mb-8 pl-8 pr-0 rounded":"px-16",!a&&"border-b-divider",!a&&t===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!e&&(l||c)&&"focus-visible:bg-focus hover:bg-hover")}const js=["button","a","input","select","textarea"];function Cs({item:t,index:n,renderAs:e,className:s,style:r}){const{selectedRows:a,columns:l,toggleRow:i,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:g,selectionStyle:f,hideHeaderRow:h}=m.useContext(K),v=m.useRef(!1),b=a.includes(t.id),[x,p]=m.useState(!1),w=I=>I.target.closest(js.join(",")),y=I=>{f==="highlight"&&d&&!v.current&&!w(I)&&(I.preventDefault(),I.stopPropagation(),d(t,n))},j=!!a.length,S=I=>{w(I)||(f==="checkbox"?g&&(j||!d)?i(t):d&&d(t,n):f==="highlight"&&(v.current?g&&j?i(t):d==null||d(t,n):g&&c(t,ws(I))))},{domProps:P}=hs({onPointerDown:I=>{v.current=I.pointerType==="touch"},onPress:S,onLongPress:g?()=>{v.current&&i(t)}:void 0}),O=I=>{g&&I.key===" "?(I.preventDefault(),I.stopPropagation(),f==="checkbox"?i(t):c(t)):I.key==="Enter"&&!a.length&&d&&(I.preventDefault(),I.stopPropagation(),d(t,n))},N=I=>{u&&g&&(a.includes(t.id)||c(t)),v.current&&(I.preventDefault(),I.stopPropagation())},E=ys({index:n,isSelected:b}),z=e||"div";return o.jsx(z,{role:"row","aria-rowindex":n+1+(h?0:1),"aria-selected":b,tabIndex:-1,className:D(s,E),item:z==="div"?void 0:t,onDoubleClick:J(y),onKeyDown:J(O),onContextMenu:J(N),onPointerEnter:J(()=>p(!0)),onPointerLeave:J(()=>p(!1)),style:r,...P,children:l.map((I,T)=>o.jsx(bs,{rowIndex:n,rowIsHovered:x,index:T,item:t},`${t.id}-${I.key}`))})}const Is={key:"checkbox",header:()=>o.jsx(Es,{}),align:"center",width:"w-24 flex-shrink-0",body:(t,n)=>n.isPlaceholder?o.jsx(te,{size:"w-24 h-24",variant:"rect"}):o.jsx(ks,{item:t})};function ks({item:t}){const{selectedRows:n,toggleRow:e}=m.useContext(K);return o.jsx(ct,{checked:n.includes(t.id),onChange:()=>e(t)})}function Es(){const{trans:t}=B(),{data:n,selectedRows:e,onSelectionChange:s}=m.useContext(K),r=!!n.length&&n.length===e.length,a=!r&&!!e.length;return o.jsx(ct,{"aria-label":t({message:"Select all"}),isIndeterminate:a,checked:r,onChange:()=>{s(r?[]:n.map(l=>l.id))}})}const Ss=se(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Ds({index:t}){const{columns:n,sortDescriptor:e,onSortChange:s,enableSorting:r}=m.useContext(K),a=n[t],l=kt({index:t,isHeader:!0}),[i,c]=m.useState(!1),d=a.sortingKey||a.key,u=a.allowsSorting&&r,{orderBy:g,orderDir:f}=e||{},h=u&&g===d;let v;h&&f==="asc"?v="ascending":h&&f==="desc"?v="descending":u&&(v="none");const b=()=>{if(!u)return;let w;h&&f==="desc"?w={orderDir:"asc",orderBy:d}:h&&f==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},x=h||i,p={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return o.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":t+1,"aria-sort":v,className:D(l,"text-xs font-medium text-muted",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),b())},onClick:b,children:[a.hideHeader?o.jsx("div",{className:"opacity-0",children:a.header()}):a.header(),o.jsx(Ie,{children:u&&o.jsx(fe.span,{variants:p,animate:x?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"-mt-2 ml-6 inline-block","data-testid":"table-sort-button","aria-hidden":!x,children:o.jsx(Ss,{size:"xs",className:D("text-muted",f==="asc"&&g===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Ps(){const{columns:t}=m.useContext(K);return o.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:t.map((n,e)=>o.jsx(Ds,{index:e},n.key))})}function Cr({className:t,columns:n,collapseOnMobile:e=!0,hideHeaderRow:s=!1,hideBorder:r=!1,data:a,selectedRows:l,defaultSelectedRows:i,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:g=!0,onDelete:f,enableSelection:h=!0,selectionStyle:v="checkbox",ariaLabelledBy:b,selectRowOnContextMenu:x,onAction:p,renderRowAs:w,tableBody:y,meta:j,tableRef:S,closeOnInteractOutside:P=!1,cellHeight:O,headerCellHeight:N,...E}){const z=Ae(),I=!!z&&e;I&&(s=!0,r=!0);const[T,L]=Z(l,i||[],c),[re,ae]=Z(d,void 0,u),oe=m.useCallback(R=>{const $=[...T];if(!$.includes(R.id))$.push(R.id);else{const le=$.indexOf(R.id);$.splice(le,1)}L($)},[T,L]),k=m.useCallback((R,$)=>{let le=[];R&&(le=$?[...T==null?void 0:T.filter(ce=>ce!==R.id),R.id]:[R.id]),L(le)},[T,L]),M=m.useMemo(()=>{const R=n.filter(le=>{const ce=le.visibleInMode||"regular";if(ce==="all"||ce==="compact"&&I||ce==="regular"&&!I)return!0});return h&&v!=="highlight"&&!z&&R.unshift(Is),R},[z,n,h,v,I]),W={isCollapsedMode:I,cellHeight:O,headerCellHeight:N,hideBorder:r,hideHeaderRow:s,selectedRows:T,onSelectionChange:L,enableSorting:g,enableSelection:h,selectionStyle:v,data:a,columns:M,sortDescriptor:re,onSortChange:ae,toggleRow:oe,selectRow:k,onAction:p,selectRowOnContextMenu:x,meta:j,collapseOnMobile:e},q=ps({cellCount:h?M.length+1:M.length,rowCount:a.length+1}),U={renderRowAs:w};y?y=m.cloneElement(y,U):y=o.jsx(Ts,{...U});const Ue=Qe(S);return xn({ref:Ue,onInteractOutside:R=>{P&&h&&(T!=null&&T.length)&&!R.target.closest('[role="dialog"]')&&L([])}}),o.jsx(K.Provider,{value:W,children:o.jsxs("div",{...de(E,q,{onKeyDown:R=>{R.key==="Escape"?(R.preventDefault(),R.stopPropagation(),T!=null&&T.length&&L([])):R.key==="Delete"?(R.preventDefault(),R.stopPropagation(),T!=null&&T.length&&(f==null||f(a.filter($=>T==null?void 0:T.includes($.id))))):pe(R)&&R.key==="a"&&(R.preventDefault(),R.stopPropagation(),h&&L(a.map($=>$.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":a.length+1,"aria-colcount":M.length+1,ref:Ue,"aria-multiselectable":h?!0:void 0,"aria-labelledby":b,className:D(t,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!s&&o.jsx(Ps,{}),y]})})}function Ts({renderRowAs:t}){const{data:n}=m.useContext(K);return o.jsx(m.Fragment,{children:n.map((e,s)=>o.jsx(Cs,{item:e,index:s,renderAs:t},e.id))})}const Ms=2*1024*1024;function Rs({file:t,className:n,iconClassName:e,showImage:s=!0}){const{trans:r}=B(),{previewUrl:a}=Q(t,{preferThumbnail:!0});if(t.file_size&&t.file_size>Ms&&!t.thumbnail&&(s=!1),s&&t.type==="image"&&a){const l=r({message:":fileName thumbnail",values:{fileName:t.name}});return o.jsx("img",{className:D(n,"object-cover"),src:a,alt:l,draggable:!1})}return o.jsx(Zt,{className:e,type:t.type})}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},xe.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function be(){return be=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},be.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ie(t,n,e){var s,r=(s=e.initialDeps)!=null?s:[],a;return function(){var l;e.key&&e.debug!=null&&e.debug()&&(l=Date.now());var i=t(),c=i.length!==r.length||i.some(function(v,b){return r[b]!==v});if(!c)return a;r=i;var d;if(e.key&&e.debug!=null&&e.debug()&&(d=Date.now()),a=n.apply(void 0,i),e.key&&e.debug!=null&&e.debug()){var u=Math.round((Date.now()-l)*100)/100,g=Math.round((Date.now()-d)*100)/100,f=g/16,h=function(b,x){for(b=String(b);b.length<x;)b=" "+b;return b};console.info("%c⏱ "+h(g,5)+" /"+h(u,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(a),a}}function Se(t,n){if(t===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return t}var Os=function(n,e){return Math.abs(n-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ns=function(n){return n},As=function(n){for(var e=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),r=[],a=e;a<=s;a++)r.push(a);return r},Fs=function(n,e){var s=n.scrollElement;if(s){var r=function(i){var c=i.width,d=i.height;e({width:Math.round(c),height:Math.round(d)})};r(s.getBoundingClientRect());var a=new ResizeObserver(function(l){var i=l[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){r({width:c.inlineSize,height:c.blockSize});return}}r(s.getBoundingClientRect())});return a.observe(s,{box:"border-box"}),function(){a.unobserve(s)}}},zs=function(n,e){var s=n.scrollElement;if(s){var r=function(){e(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return r(),s.addEventListener("scroll",r,{passive:!0}),function(){s.removeEventListener("scroll",r)}}},Ls=function(n,e,s){if(e!=null&&e.borderBoxSize){var r=e.borderBoxSize[0];if(r){var a=Math.round(r[s.options.horizontal?"inlineSize":"blockSize"]);return a}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},$s=function(n,e,s){var r,a,l=e.adjustments,i=l===void 0?0:l,c=e.behavior,d=n+i;(r=s.scrollElement)==null||r.scrollTo==null||r.scrollTo((a={},a[s.options.horizontal?"left":"top"]=d,a.behavior=c,a))},_s=function(n){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,r=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(l){l.forEach(function(i){e._measureElement(i.target,i)})}):null)};return{disconnect:function(){var l;return(l=r())==null?void 0:l.disconnect()},observe:function(l){var i;return(i=r())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:function(l){var i;return(i=r())==null?void 0:i.unobserve(l)}}}(),this.range=null,this.setOptions=function(s){Object.entries(s).forEach(function(r){var a=r[0],l=r[1];typeof l>"u"&&delete s[a]}),e.options=be({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ns,rangeExtractor:As,onChange:function(){},measureElement:Ls,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(s){e.options.onChange==null||e.options.onChange(e,s)},this.maybeNotify=ie(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(s){e.notify(s)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(s){return s()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var s=e.options.getScrollElement();e.scrollElement!==s&&(e.cleanup(),e.scrollElement=s,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(r){e.scrollRect=r,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(r){e.scrollAdjustments=0,e.scrollOffset!==r&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<r?"forward":"backward",e.scrollOffset=r,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=ie(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(s,r,a,l){return e.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:r,scrollMargin:a,getItemKey:l}},{key:!1}),this.getFurthestMeasurement=function(s,r){for(var a=new Map,l=new Map,i=r-1;i>=0;i--){var c=s[i];if(!a.has(c.lane)){var d=l.get(c.lane);if(d==null||c.end>d.end?l.set(c.lane,c):c.end<d.end&&a.set(c.lane,!0),a.size===e.options.lanes)break}}return l.size===e.options.lanes?Array.from(l.values()).sort(function(u,g){return u.end-g.end})[0]:void 0},this.getMeasurements=ie(function(){return[e.memoOptions(),e.itemSizeCache]},function(s,r){var a=s.count,l=s.paddingStart,i=s.scrollMargin,c=s.getItemKey,d=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var u=e.measurementsCache.slice(0,d),g=d;g<a;g++){var f=c(g),h=e.options.lanes===1?u[g-1]:e.getFurthestMeasurement(u,g),v=h?h.end:l+i,b=r.get(f),x=typeof b=="number"?b:e.options.estimateSize(g),p=v+x,w=h?h.lane:g%e.options.lanes;u[g]={index:g,start:v,size:x,end:p,key:f,lane:w}}return e.measurementsCache=u,u},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=ie(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(s,r,a){return e.range=s.length>0&&r>0?Us({measurements:s,outerSize:r,scrollOffset:a}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=ie(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(s,r,a,l){return r===null?[]:s(be({},r,{overscan:a,count:l}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(s){var r=e.options.indexAttribute,a=s.getAttribute(r);return a?parseInt(a,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(s,r){var a=e.measurementsCache[e.indexFromElement(s)];if(!a||!s.isConnected){e.measureElementCache.forEach(function(c,d){c===s&&(e.observer.unobserve(s),e.measureElementCache.delete(d))});return}var l=e.measureElementCache.get(a.key);l!==s&&(l&&e.observer.unobserve(l),e.observer.observe(s),e.measureElementCache.set(a.key,s));var i=e.options.measureElement(s,r,e);e.resizeItem(a,i)},this.resizeItem=function(s,r){var a,l=(a=e.itemSizeCache.get(s.key))!=null?a:s.size,i=r-l;i!==0&&(s.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=i,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(s.index),e.itemSizeCache=new Map(e.itemSizeCache.set(s.key,r)),e.notify(!1))},this.measureElement=function(s){s&&e._measureElement(s,void 0)},this.getVirtualItems=ie(function(){return[e.getIndexes(),e.getMeasurements()]},function(s,r){for(var a=[],l=0,i=s.length;l<i;l++){var c=s[l],d=r[c];a.push(d)}return a},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(s){var r=e.getMeasurements();return Se(r[Et(0,r.length-1,function(a){return Se(r[a]).start},s)])},this.getOffsetForAlignment=function(s,r){var a=e.getSize();r==="auto"&&(s<=e.scrollOffset?r="start":s>=e.scrollOffset+a?r="end":r="start"),r==="start"?s=s:r==="end"?s=s-a:r==="center"&&(s=s-a/2);var l=e.options.horizontal?"scrollWidth":"scrollHeight",i=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[l]:e.scrollElement[l]:0,c=i-e.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=function(s,r){r===void 0&&(r="auto"),s=Math.max(0,Math.min(s,e.options.count-1));var a=Se(e.getMeasurements()[s]);if(r==="auto")if(a.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)r="end";else if(a.start<=e.scrollOffset+e.options.scrollPaddingStart)r="start";else return[e.scrollOffset,r];var l=r==="end"?a.end+e.options.scrollPaddingEnd:a.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(l,r),r]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,r){var a=r===void 0?{}:r,l=a.align,i=l===void 0?"start":l,c=a.behavior;e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(s,r){var a=r===void 0?{}:r,l=a.align,i=l===void 0?"auto":l,c=a.behavior;s=Math.max(0,Math.min(s,e.options.count-1)),e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=e.getOffsetForIndex(s,i),u=d[0],g=d[1];e._scrollToOffset(u,{adjustments:void 0,behavior:c}),c!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var f=e.measureElementCache.has(e.options.getItemKey(s));if(f){var h=e.getOffsetForIndex(s,g),v=h[0];Os(v,e.scrollOffset)||e.scrollToIndex(s,{align:g,behavior:c})}else e.scrollToIndex(s,{align:g,behavior:c})}))},this.scrollBy=function(s,r){var a=r===void 0?{}:r,l=a.behavior;e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+s,{adjustments:void 0,behavior:l})},this.getTotalSize=function(){var s;return(((s=e.getMeasurements()[e.options.count-1])==null?void 0:s.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(s,r){var a=r.adjustments,l=r.behavior;e.options.scrollToFn(s,{behavior:l,adjustments:a},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){e.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},Et=function(n,e,s,r){for(;n<=e;){var a=(n+e)/2|0,l=s(a);if(l<r)n=a+1;else if(l>r)e=a-1;else return a}return n>0?n-1:0};function Us(t){for(var n=t.measurements,e=t.outerSize,s=t.scrollOffset,r=n.length-1,a=function(d){return n[d].start},l=Et(0,r,a,s),i=l;i<r&&n[i].end<s+e;)i++;return{startIndex:l,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vs=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Bs(t){var n=m.useReducer(function(){return{}},{})[1],e=xe({},t,{onChange:function(l,i){i?Jt.flushSync(n):n(),t.onChange==null||t.onChange(l,i)}}),s=m.useState(function(){return new _s(e)}),r=s[0];return r.setOptions(e),m.useEffect(function(){return r._didMount()},[]),Vs(function(){return r._willUpdate()}),r}function Ir(t){return Bs(xe({observeElementRect:Fs,observeElementOffset:zs,scrollToFn:$s},t))}const _e=Re.createContext(null);function X({message:t,className:n,allowDownload:e}){const{entries:s,activeIndex:r}=m.useContext(_e),a=s[r],l=t||o.jsx(A,{message:"No file preview available"}),{downloadUrl:i}=Q(a);return o.jsxs("div",{className:D(n,"w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow"),children:[o.jsx("div",{className:"text-lg",children:l}),e&&o.jsx("div",{className:"mt-20 block text-center",children:o.jsx(ne,{variant:"flat",color:"primary",onClick:()=>{i&&Me(i)},children:o.jsx(A,{message:"Download"})})})]})}function Hs(t){const{entry:n,className:e}=t,{trans:s}=B(),{previewUrl:r}=Q(n);return r?o.jsx("img",{className:D(e,"shadow"),src:r,alt:s({message:"Preview for :name",values:{name:n.name}})}):o.jsx(X,{...t})}const Ks=5242880;function Ws(t){const{entry:n,className:e}=t,{trans:s}=B(),[r,a]=m.useState(!1),[l,i]=m.useState(!0),[c,d]=m.useState(!1),[u,g]=m.useState(null),{previewUrl:f}=Q(n);return m.useEffect(()=>{n&&(f?n.file_size>=Ks?(a(!0),i(!1)):qs(f).then(h=>{g(h.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,f]),l?o.jsx(Oe,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):r?o.jsx(X,{...t,message:o.jsx(A,{message:"This file is too large to preview."})}):c?o.jsx(X,{...t,message:o.jsx(A,{message:"There was an issue previewing this file"})}):o.jsx("pre",{className:D("h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm",e),children:o.jsx("div",{className:"container mx-auto",children:`${u}`})})}function qs(t){return Ce.get(t,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Gs(t){const{entry:n,className:e}=t,{previewUrl:s}=Q(n),r=m.useRef(null),[a,l]=m.useState(!1);return m.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),a||!s?o.jsx(X,{...t}):o.jsx("video",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:o.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function Ys(t){const{entry:n,className:e}=t,{previewUrl:s}=Q(n),r=m.useRef(null),[a,l]=m.useState(!1);return m.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),a||!s?o.jsx(X,{...t}):o.jsx("audio",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:o.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function Xs(t){const{entry:n,className:e}=t,{trans:s}=B(),{previewUrl:r}=Q(n);return r?o.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(e,"h-full w-full"),src:`${r}#toolbar=0`}):o.jsx(X,{...t})}function De(t){const{entry:n,className:e}=t,{trans:s}=B(),r=m.useRef(null),[a,l]=m.useState(!1),i=m.useRef(),[c,d]=m.useState(!1),{previewUrl:u}=Q(n);return m.useEffect(()=>{u?n.file_size&&n.file_size>25e6?l(!0):r.current&&(r.current.onload=()=>{clearTimeout(i.current),d(!1)},Qs(u,n).then(g=>{r.current&&(r.current.src=g)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,u]),a?o.jsx(X,{...t}):o.jsxs("div",{className:D(e,"h-full w-full"),children:[c&&o.jsx(Oe,{}),o.jsx("iframe",{ref:r,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("h-full w-full",c&&"hidden")})]})}async function Qs(t,n){const e=new URL(t);if(!e.searchParams.has("shareable_link")){const{data:s}=await Ce.post(`file-entries/${n.id}/add-preview-token`);e.searchParams.append("preview_token",s.preview_token)}return Zs(e)}function Zs(t){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(t.toString())}`}const Xe={text:Ws,video:Gs,audio:Ys,image:Hs,pdf:Xs,spreadsheet:De,powerPoint:De,word:De,"text/rtf":X};function Js(t){const n=t==null?void 0:t.mime,e=t==null?void 0:t.type;return Xe[n]||Xe[e]||X}const er=se(o.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function tr({entries:t,onClose:n,showHeader:e=!0,className:s,headerActionsLeft:r,allowDownload:a=!0,...l}){const i=ut("(max-width: 1024px)"),[c,d]=Z(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),u=t[c],g=m.useMemo(()=>({entries:t,activeIndex:c}),[t,c]),f=Js(u);if(!u)return n==null||n(),null;const h=t.length-1>c,v=()=>{d(c+1)},b=c>0,x=()=>{d(c-1)};return o.jsxs(_e.Provider,{value:g,children:[e&&o.jsx(nr,{actionsLeft:r,isMobile:i,onClose:n,onNext:h?v:void 0,onPrevious:b?x:void 0,allowDownload:a}),o.jsxs("div",{className:D("relative flex-auto overflow-hidden",s),children:[i&&o.jsx(Y,{size:"lg",className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!b,onClick:x,children:o.jsx(en,{})}),o.jsx(Ie,{initial:!1,children:o.jsx(fe.div,{className:"absolute inset-0 flex items-center justify-center",...Le,children:o.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:a})},u.id)}),i&&o.jsx(Y,{size:"lg",className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!h,onClick:v,children:o.jsx(fn,{})})]})]})}function nr({onNext:t,onPrevious:n,onClose:e,isMobile:s,actionsLeft:r,allowDownload:a}){const{entries:l,activeIndex:i}=m.useContext(_e),c=l[i],{downloadUrl:d}=Q(c),f=s?o.jsx(Y,{onClick:()=>{d&&Me(d)},children:o.jsx(Ge,{})}):o.jsx(ne,{startIcon:o.jsx(Ge,{}),variant:"text",onClick:()=>{d&&Me(d)},children:o.jsx(A,{message:"Download"})});return o.jsxs("div",{className:"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted",children:[o.jsxs("div",{className:"flex w-1/3 items-center justify-start gap-4",children:[r,a?f:void 0]}),o.jsxs("div",{className:"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main",children:[o.jsx(Rs,{file:c,iconClassName:"w-16 h-16",showImage:!1}),o.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:c.name})]}),o.jsxs("div",{className:"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap",children:[!s&&o.jsxs(m.Fragment,{children:[o.jsx(Y,{disabled:!n,onClick:n,children:o.jsx(er,{})}),o.jsx("div",{children:i+1}),o.jsx("div",{children:"/"}),o.jsx("div",{children:l.length}),o.jsx(Y,{disabled:!t,onClick:t,children:o.jsx(pn,{})}),o.jsx("div",{className:"mx-20 h-24 w-1 bg-divider"})]}),o.jsx(Y,{radius:"rounded-none",onClick:e,children:o.jsx(lt,{})})]})]})}function kr(t){return o.jsx(ze,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:o.jsx(sr,{...t})})}function sr(t){const{close:n}=nt();return o.jsx(tr,{onClose:n,...t})}function rr(t){const n=gt(),[e,s]=m.useState(!t.value&&!t.defaultValue),r=t.onChange,[a,l]=Z(t.value||n,t.defaultValue||n,j=>{s(!1),r==null||r(j)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:h}=mn(a,t),v=m.useCallback(()=>{s(!0),l(n),r==null||r(null),f(!1)},[n,l,r,f]),[b,x]=m.useState(()=>[Ve(a)]),p=m.useCallback(j=>{i&&j.compare(i)<0?j=i:c&&j.compare(c)>0&&(j=c);const S=a?a.set(j):hn(j,u);l(S),x([Ve(S)]),s(!1)},[l,i,c,a,u]),w=m.useCallback(j=>!e&&tn(a,j),[a,e]),y=m.useCallback(j=>({onClick:()=>{p==null||p(j),h&&(f==null||f(!1))}}),[p,f,h]);return{selectedValue:a,setSelectedValue:l,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:b,setCalendarDates:x,isPlaceholder:e,clear:v,setIsPlaceholder:s,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:h}}function ar({showCalendarFooter:t,...n}){const e=rr(n),s=m.useRef(null),r=gt(),a=t&&o.jsx(rt,{padding:"px-14 pb-14",startAction:o.jsx(ne,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:o.jsx(A,{message:"Clear"})}),children:o.jsx(ne,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(r),e.setCalendarIsOpen(!1)},children:o.jsx(A,{message:"Today"})})}),l=o.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:o.jsxs(ze,{size:"auto",children:[o.jsx(st,{className:"flex items-start gap-40",padding:t?"px-24 pt-20 pb-10":null,children:o.jsx(gn,{state:e,visibleMonths:1})}),a]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),or(c)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return o.jsxs(m.Fragment,{children:[o.jsx(ft,{ref:s,wrapperProps:i,endAdornment:o.jsx(mt,{className:D(n.disabled&&"text-disabled")}),...n,children:o.jsx(Pe,{segmentProps:i,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),l]})}function Er(t){const{min:n,max:e}=t,{trans:s}=B(),{format:r}=nn(),{field:{onChange:a,onBlur:l,value:i=null,ref:c},fieldState:{invalid:d,error:u}}=ye({name:t.name,rules:{validate:h=>{if(!h)return;const v=ve(h);if(n&&v.compare(n)<0)return s({message:"Enter a date after :date",values:{date:r(h)}});if(e&&v.compare(e)>0)return s({message:"Enter a date before :date",values:{date:r(h)}})}}}),g=i?ve(i):null,f={onChange:h=>{a(h&&h.toAbsoluteString())},onBlur:l,value:g,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return o.jsx(ar,{...de(f,t)})}function or(t){return["hour","minute","dayPeriod"].includes(t.currentTarget.ariaLabel||"")}const Sr=se(o.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function Dr({className:t,position:n,children:e,size:s="md",mode:r,overlayPosition:a="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:g,rightSidenavStatus:f,setRightSidenavStatus:h}=m.useContext($e),v=d||r==="overlay";let b=n==="left"?u:f;v&&b==="compact"&&(b="open");const x={open:{display:l,width:ir(b==="compact"?"compact":s)},closed:{width:0,transitionEnd:{display:"none"}}},p=lr(b==="compact"?"compact":s);return o.jsx(fe.div,{variants:x,initial:!1,animate:c||b==="closed"?"closed":"open",transition:{type:"tween",duration:.15},onClick:w=>{const y=w.target;d&&(y.closest("button")||y.closest("a"))&&(g("closed"),h("closed"))},className:D(t,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right",i,p,v&&`${a} bottom-0 top-0 z-20 shadow-2xl`,v&&n==="left"&&"left-0",v&&n==="right"&&"right-0"),children:m.cloneElement(e,{className:D(e.props.className,"w-full h-full overflow-y-auto compact-scrollbar",b==="compact"&&"hidden-scrollbar"),isCompactMode:b==="compact",isOverlayMode:v})})}function lr(t){switch(t){case"compact":return"w-60";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return t||""}}function ir(t){switch(t){case"compact":return 60;case"sm":return 224;case"md":return 240;case"lg":return 288;default:return null}}function Pr({children:t,isScrollable:n=!0,stableScrollbar:e=!0}){return m.cloneElement(t,{className:D(t.props.className,n&&"overflow-y-auto",n&&e&&"stable-scrollbar","dashboard-grid-content","has-[.dashboard-stable-scrollbar]:stable-scrollbar")})}const cr=se(o.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function Tr({children:t,className:n,hideToggleButton:e,...s}){const{isMobileMode:r,leftSidenavStatus:a,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:c}=m.useContext($e),d=c&&!r,u=!e&&(r||c),g=()=>{l(a==="open"?"closed":"open")},f=()=>{const h=a==="compact"?"open":"compact";dt(`${i}.sidenav.compact`,h==="compact"),l(h)};return o.jsx(sn,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:u?o.jsx(Y,{size:"md",onClick:()=>{d?f():g()},children:o.jsx(cr,{})}):void 0,...s,children:t})}function ur(t=!1){m.useEffect(()=>(t?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[t])}function dr(t){const n=m.useRef();return m.useEffect(()=>{n.current=t},[t]),n.current}function Mr({children:t,leftSidenavStatus:n,onLeftSidenavChange:e,rightSidenavStatus:s,compactByDefault:r,initialRightSidenavStatus:a,onRightSidenavChange:l,name:i,leftSidenavCanBeCompact:c,height:d="h-screen",className:u,gridClassName:g="dashboard-grid",blockBodyOverflow:f=!0,...h}){ur(!f);const v=ut("(max-width: 1024px)"),x=m.useMemo(()=>{if(!i)return r??!1;const E=Be(`${i}.sidenav.compact`);return E??r??!1},[i,r])?"compact":"open",[p,w]=Z(n,v?"closed":x,e),y=m.useMemo(()=>{if(v)return"closed";if(a!=null)return a;const E=Be(`${i}.sidenav.right.position`,"open");return E??(a||"closed")},[v,i,a]),[j,S]=Z(s,y,l),P=m.useCallback(E=>{S(E),dt(`${i}.sidenav.right.position`,E)},[S,i]),O=dr(v);m.useEffect(()=>{v!==O&&(v?(w("closed"),P("closed")):(w(x),P(y)))},[v,x,y,O,w,P]);const N=v&&(p==="open"||j==="open");return o.jsx($e.Provider,{value:{leftSidenavStatus:p,setLeftSidenavStatus:w,rightSidenavStatus:j,setRightSidenavStatus:P,leftSidenavCanBeCompact:c,name:i,isMobileMode:v},children:o.jsxs("div",{...h,className:D("relative isolate",g,u,d),children:[t,o.jsx(Ie,{children:N&&o.jsx(rn,{position:"fixed",onClick:()=>{w("closed"),P("closed")}},"dashboard-underlay")})]})})}export{gr as $,kn as A,gs as B,In as C,vr as D,Mr as E,$n as F,Dr as G,Pr as H,Sr as I,Tr as J,tr as K,Bn as L,jr as M,ss as N,ts as O,ns as P,as as Q,Ee as R,Wn as S,K as T,rs as U,dr as V,Rn as W,wr as X,yt as Y,es as Z,vt as _,pr as a,Ss as a0,er as a1,cr as a2,F as b,_ as c,zn as d,Ln as e,$e as f,yr as g,br as h,ge as i,hs as j,pt as k,Sn as l,Q as m,Ge as n,Me as o,Rs as p,Cr as q,ws as r,pe as s,Ir as t,xr as u,bn as v,kr as w,Gn as x,Er as y,Un as z};
//# sourceMappingURL=dashboard-layout-d83c0491.js.map
