import{bP as Qs,r as d,bQ as Jn,bR as Xn,H as Ae,a as F,bg as Zn,bE as M,j as e,bS as er,bi as sr,bT as tr,bG as ar,bU as nr,bI as rr,bH as ir,bV as lr,bb as es,o as w,bu as Be,bW as or,aQ as za,b2 as cr,q as m,p as L,v as D,t as q,I as Y,$ as A,G as j,T as n,y as K,O as me,bX as dr,R as U,a0 as _,D as J,z as ee,A as Z,E as ae,Y as Ys,w as be,Z as $,x as I,B as ne,C as h,aW as Js,a7 as O,ae as Bs,a2 as De,aF as de,aA as Q,bY as ur,ap as le,b7 as us,bZ as ms,h as xe,d as mr,b_ as xr,b9 as gr,b$ as hr,bs as pr,b6 as Xs,b5 as Me,c0 as jr,S as Ps,a9 as Zs,bd as ss,c1 as ts,c2 as At,_ as _e,aU as Ia,aV as Aa,c3 as Ws,ar as as,u as re,c4 as k,a6 as g,c5 as Es,aM as Pt,aN as Et,bA as Pa,al as Tt,c6 as fr,ay as We,c7 as br,c8 as xs,bB as et,V as Ts,X as He,aJ as ds,bp as X,c9 as H,aH as Ea,ca as vr,cb as Ta,cc as Dt,cd as Mt,br as gs,a8 as Lt,ce as ns,ag as yr,cf as Ds,cg as st,ch as wr,a3 as Le,a5 as qe,ci as qt,cj as Rt,ck as Ze,bF as _r,aD as Sr,aE as kr,cl as Nr,cm as Da,cn as Cr,co as Fr,cp as zr,cq as Ir,cr as Ar,cs as Pr,K as Ma,af as La,ad as tt,bt as Er,bM as qa,av as Ra,ct as $t,az as Vt,c as Tr,g as Dr,aP as Mr,bq as Lr,bm as Ot,cu as qr,cv as Rr,aR as $r,cw as Vr,cx as Or,aa as Ur,cy as Hr,cz as Br,cA as $a,cB as Wr,cC as Kr,cD as Ut,cE as Gr,cF as hs,cG as Qr,cH as Yr,cI as Jr,bK as Xr,cJ as Zr,cK as ei,cL as si,cM as ti,ao as ia}from"./main-14f9202e.js";import{D as ai,c as rs,b as ps,A as we,i as at,h as ni,m as _t,d as Oe,a as ri,u as ii,$ as li,f as oi,o as ci,U as di,M as nt,k as ui,r as mi,l as xi,t as gi,I as hi}from"./use-previous-e0b84d27.js";import{S as js,B as pi,a as la}from"./breadcrumb-f6cd9ad0.js";import{a as se,b as Ie,f as ji,k as rt,D as it,C as fi,g as Va,l as bi,$ as Oa,u as vi}from"./table-be4c9f90.js";import{u as lt,D as G,a as ke,b as fe,A as is,c as Se,d as yi,V as Ua,T as wi}from"./transfer-files-page-5afd3b64.js";import{E as Ke}from"./Edit-927f0696.js";import{F as T,S as St}from"./switch-aded0297.js";import{K as ot,e as _i}from"./formatted-number-ff408592.js";import{L as Ht}from"./Link-358c8e0c.js";import{$ as Ha,t as Si,a as ki}from"./theme-value-to-hex-9f184b2d.js";import{T as ct,a as dt,b as Ue,c as Ba,d as Ks}from"./tab-panels-c451a17f.js";import{O as Ni,u as Wa,a as Ci}from"./use-resume-subscription-bf53d83e.js";import{A as Ka}from"./ArrowBack-1d832323.js";import{F as Ga}from"./formatted-bytes-275d14a8.js";import{D as Bt}from"./Download-7ca3ab04.js";import{AdminTwoFactorAuthPage as Fi}from"./admin-2fa-page-4585f7be.js";function zi(s,t){const a=Qs(t);return Ii({filters:{...s,status:"pending"}},a).length}function oa(s,t){return s.findAll(t.filters).map(a=>t.select?t.select(a):a.state)}function Ii(s={},t){const a=Qs(t).getMutationCache(),r=d.useRef(s),i=d.useRef(null);return i.current||(i.current=oa(a,s)),d.useEffect(()=>{r.current=s}),d.useSyncExternalStore(d.useCallback(l=>a.subscribe(()=>{const o=Jn(i.current,oa(a,r.current));i.current!==o&&(i.current=o,Xn.schedule(l))}),[a]),()=>i.current,()=>i.current)}function Ai(){return Ae({queryKey:["admin-setup-alerts"],queryFn:()=>Pi()})}function Pi(){return F.get("admin/setup-alerts").then(s=>s.data)}function Ei(s){return Zn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M96 256h320M96 176h320M96 336h320"},child:[]}]})(s)}const Nh=M(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"}),"KeyboardArrowUpOutlined");function Ti(){const[s,t]=d.useState(!1),a=()=>t(!s),r=()=>{s&&t(!1)},i=er();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"xl:hidden fixed top-0 left-0 w-full bg-[#f6f8fa] text-black flex items-center justify-between px-4 py-3 z-50 shadow-md",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Logo"}),e.jsx("button",{onClick:a,className:"text-2xl",children:s?e.jsx(sr,{}):e.jsx(Ei,{})})]}),e.jsxs("div",{className:`fixed top-0 left-0 h-screen bg-[#f6f8fa] border-r border-[#ddd] flex flex-col px-4 py-6 z-40 transition-all duration-300  w-[260px]   ${s?"translate-x-0":"-translate-x-full"} xl:translate-x-0 xl:static`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"hidden xl:flex justify-start mb-10",children:e.jsx("h2",{className:"text-black text-xl font-bold",children:"Logo"})}),e.jsxs("nav",{className:"flex flex-col space-y-2 mt-10 xl:mt-0",children:[e.jsxs("a",{href:"/admin",onClick:r,className:`flex items-center gap-3 p-3 rounded-lg 
                         text-black hover:bg-[#e5e7eb] transition`,children:[e.jsx(tr,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Dashboard "})]}),e.jsxs("a",{href:"/admin/profile",onClick:r,className:`flex items-center gap-3 p-3 rounded-lg 
                         text-black hover:bg-[#e5e7eb] transition`,children:[e.jsx(ar,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("a",{href:"/admin/transfer-files",onClick:r,className:`flex items-center gap-3 p-3 rounded-lg 
                         text-black hover:bg-[#e5e7eb] transition`,children:[e.jsx(nr,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Transfer Files"})]}),e.jsxs("a",{href:"/admin/settings",onClick:r,className:`flex items-center gap-3 p-3 rounded-lg 
                         text-black hover:bg-[#e5e7eb] transition`,children:[e.jsx(rr,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("a",{href:"/admin/2fa",onClick:r,className:`flex items-center gap-3 p-3 rounded-lg 
                         text-black hover:bg-[#e5e7eb] transition`,children:[e.jsx(ir,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Two-Factor Authentication"})]})]})]}),e.jsx("div",{className:"mt-auto",children:e.jsxs("div",{onClick:()=>{i.mutate()},className:`flex items-center gap-3 p-3 rounded-lg 
             text-black hover:bg-[#e5e7eb] transition cursor-pointer`,children:[e.jsx(lr,{className:"text-pink-500 text-xl"}),e.jsx("span",{children:"Logout"})]})})]})]})}function Di(){const t=es()?"withNavbar":"withoutNavbar";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"layout flex",children:[e.jsx(Ti,{variant:t}),e.jsx(ai,{children:e.jsxs("div",{className:w(t==="withoutNavbar"?"relative":"bg dark:bg-alt"),children:[e.jsx(Mi,{}),e.jsx(Be,{})]})})]})})}function Mi(){const{data:s}=Ai(),[t]=or("admin-setup-alert-dismissed",null),a=!t||Date.now()-t.timestamp>864e5;return!(s!=null&&s.alerts.length)||!a?null:e.jsx("div",{className:"fixed left-24 right-24 top-24 z-10 mx-auto w-max max-w-[calc(100%-48px)] overflow-hidden rounded-panel bg shadow-md",children:e.jsx(Li,{alert:s.alerts[0]})})}function Li({alert:s}){const t=e.jsx("div",{dangerouslySetInnerHTML:{__html:s.description}});return e.jsx(js,{leadingIcon:e.jsx(za,{size:"xs",className:"text-danger"}),onClose:()=>{cr("admin-setup-alert-dismissed",{timestamp:Date.now()})},title:s.title,description:t,color:"neutral"},s.title)}const qi=[{key:"email_verified_at",label:m("Email"),description:m("Email verification status"),defaultOperator:se.ne,control:{type:Ie.Select,defaultValue:"01",options:[{key:"01",label:m("is confirmed"),value:{value:null,operator:se.ne}},{key:"02",label:m("is not confirmed"),value:{value:null,operator:se.eq}}]}},rs({description:m("Date user registered or was created")}),ps({description:m("Date user was last updated")}),{key:"subscriptions",label:m("Subscription"),description:m("Whether user is subscribed or not"),defaultOperator:se.eq,control:{type:Ie.Select,defaultValue:"01",options:[{key:"01",label:m("is subscribed"),value:{value:"*",operator:se.has}},{key:"02",label:m("is not subscribed"),value:{value:"*",operator:se.doesntHave}}]}}];function Ri(){const{endpoint:s,selectedRows:t,setSelectedRows:a,baseQueryKey:r}=lt();return L({mutationFn:()=>$i(s,t),onSuccess:async()=>{await D.invalidateQueries({queryKey:G(s,void 0,r)}),q(m("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),a([])},onError:i=>Y(i,m("Could not delete records"))})}function $i(s,t){return F.delete(`${s}/${t.join(",")}`).then(a=>a.data)}function ls(){return e.jsxs(A,{type:"modal",children:[e.jsx(j,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(n,{message:"Delete"})}),e.jsx(Vi,{})]})}function Vi(){const s=Ri(),{selectedRows:t,setSelectedRows:a}=lt(),{close:r}=K();return e.jsx(me,{isLoading:s.isPending,title:e.jsx(n,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:e.jsx(n,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(n,{message:"Delete"}),isDanger:!0,onConfirm:()=>{s.mutate(void 0,{onSuccess:()=>r(),onError:i=>{dr(i,422)&&(a([]),r())}})}})}const Fs=""+new URL("team-de984127.svg",import.meta.url).href,Pe=U.forwardRef(({children:s,to:t,elementType:a,onClick:r,href:i,download:l,icon:o,disabled:c},u)=>es()?e.jsx(_,{ref:u,variant:"flat",color:"primary",className:"flex-shrink-0",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:o||e.jsx(we,{})}):e.jsx(j,{ref:u,startIcon:o||e.jsx(we,{}),variant:"flat",color:"primary",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:s}));function Oi(s){return L({mutationFn:t=>Ui(s,t),onError:t=>Y(t)})}function Ui(s,t){return F.post(s,t).then(a=>a.data)}function Hi(){const{close:s}=K();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Csv export"})}),e.jsx(Z,{children:e.jsx(n,{message:`Your request is being processed. We'll email you when the report is ready to download. In
            certain cases, it might take a little longer, depending on the number of items beings
            exported and the volume of activity.`})}),e.jsx(ae,{children:e.jsx(j,{variant:"flat",color:"primary",onClick:s,children:e.jsx(n,{message:"Got it"})})})]})}function Qa({endpoint:s,payload:t}){const[a,r]=d.useState(!1),i=Oi(s);return e.jsxs(d.Fragment,{children:[e.jsx(_,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",disabled:i.isPending,onClick:()=>{i.mutate(t,{onSuccess:l=>{l.downloadPath?at(l.downloadPath):r(!0)}})},children:e.jsx(ni,{})}),e.jsx(A,{type:"modal",isOpen:a,onOpenChange:r,children:e.jsx(Hi,{})})]})}function Ge({image:s,label:t,description:a,className:r,labelClassName:i,avatarSize:l="md",alwaysShowAvatar:o,avatarLabel:c,avatarCircle:u}){return e.jsxs("div",{className:w("flex items-center gap-12",r),children:[(s||o)&&e.jsx(Ys,{size:l,className:"flex-shrink-0",src:s,label:c??t,fallback:"initials",circle:u}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:w(i,"overflow-hidden overflow-ellipsis"),children:t}),a&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis text-xs text-muted",children:a})]})]})}const Ya=M(e.jsx("path",{d:"m20 17.17-3.37-3.38c.64.22 1.23.48 1.77.76.97.51 1.58 1.52 1.6 2.62zm1.19 4.02-1.41 1.41-2.61-2.6H4v-2.78c0-1.12.61-2.15 1.61-2.66 1.29-.66 2.87-1.22 4.67-1.45L1.39 4.22 2.8 2.81l18.39 18.38zM15.17 18l-3-3H12c-2.37 0-4.29.73-5.48 1.34-.32.16-.52.5-.52.88V18h9.17zM12 6c1.1 0 2 .9 2 2 0 .86-.54 1.59-1.3 1.87l1.48 1.48C15.28 10.64 16 9.4 16 8c0-2.21-1.79-4-4-4-1.4 0-2.64.72-3.35 1.82l1.48 1.48C10.41 6.54 11.14 6 12 6z"}),"PersonOffOutlined");function Bi(s,t){return L({mutationFn:a=>Wi(t,a),onSuccess:async()=>{q(m("User suspended")),await D.invalidateQueries({queryKey:["users"]})},onError:a=>be(a,s)})}function Wi(s,t){return F.post(`users/ban/${s}`,t).then(a=>a.data)}function Ja({user:s}){const{trans:t}=$(),{close:a,formId:r}=K(),i=I({defaultValues:{permanent:!0}}),l=i.watch("permanent"),o=Bi(i,s.id);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}})}),e.jsx(Z,{children:e.jsxs(ne,{id:r,form:i,onSubmit:c=>o.mutate(c,{onSuccess:()=>a(!0)}),children:[e.jsx(_t,{name:"ban_until",label:e.jsx(n,{message:"Suspend until"}),disabled:l}),e.jsx(T,{name:"permanent",className:"mt-12",children:e.jsx(n,{message:"Permanent"})}),e.jsx(h,{className:"mt-24",name:"comment",inputElementType:"textarea",maxLength:250,label:e.jsx(n,{message:"Reason"}),placeholder:t(m("Optional"))})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:r,variant:"flat",color:"primary",type:"submit",disabled:o.isPending,children:e.jsx(n,{message:"Suspend"})})]})]})}function Xa(s){return L({mutationFn:()=>Ki(s),onSuccess:()=>{q(m("User unsuspended")),D.invalidateQueries({queryKey:["users"]})},onError:t=>Y(t)})}function Ki(s){return F.delete(`users/unban/${s}`).then(t=>t.data)}function Gi(){return L({mutationFn:s=>Qi(s),onSuccess:async s=>{q(m(`Impersonating User "${s.user.name}"`)),window.location.href="/"},onError:s=>Y(s)})}function Qi(s){return F.post(`admin/users/impersonate/${s.userId}`,s).then(t=>t.data)}const ca=[{key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(Ge,{image:s.image,label:s.name,description:s.email,alwaysShowAvatar:!0,avatarCircle:!0})},{key:"roles",header:()=>e.jsx(n,{message:"Roles"}),body:s=>{var t;return e.jsx(ji,{radius:"rounded",size:"xs",children:(t=s==null?void 0:s.roles)==null?void 0:t.map(a=>e.jsx(Js,{selectable:!0,children:e.jsx(O,{className:w("capitalize"),target:"_blank",to:`/admin/roles/${a.id}/edit`,children:e.jsx(n,{message:a.name})})},a.id))})}},{key:"subscribed",header:()=>e.jsx(n,{message:"Subscribed"}),width:"w-96",body:s=>{var t;return(t=s.subscriptions)!=null&&t.filter(a=>a.valid).length?e.jsx(Bs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})}},{key:"banned_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Suspended"}),width:"w-96",body:s=>s.banned_at?e.jsx(Bs,{className:"text-danger icon-md"}):null},{key:"last_login",width:"w-110",header:()=>e.jsx(n,{message:"Last active"}),body:s=>s.last_login?e.jsx("time",{children:e.jsx(de,{date:s.last_login.created_at})}):"-"},{key:"createdAt",allowsSorting:!0,width:"w-110",header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx("time",{children:e.jsx(de,{date:s.created_at})})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(O,{to:`${s.id}/details`,children:e.jsx(Q,{label:e.jsx(n,{message:"Edit user"}),children:e.jsx(_,{size:"md",children:e.jsx(Ke,{})})})}),s.banned_at?e.jsx(Yi,{user:s}):e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Suspend user"}),children:e.jsx(_,{size:"md",children:e.jsx(Ya,{})})}),e.jsx(Ja,{user:s})]}),e.jsx(Ji,{user:s})]})}];function Yi({user:s}){const t=Xa(s.id);return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Remove suspension"}),children:e.jsx(_,{size:"md",color:"danger",children:e.jsx(Ya,{})})}),e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}}),body:e.jsx(n,{message:"Are you sure you want to remove suspension from this user?"}),confirm:e.jsx(n,{message:"Unsuspend"})})]})}function Ji({user:s}){const t=Gi();return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Login as user"}),children:e.jsx(_,{size:"md",children:e.jsx(ur,{})})}),e.jsx(me,{title:e.jsx(n,{message:"Login as “:name“",values:{name:s.name}}),isLoading:t.isPending,body:e.jsx(n,{message:"Are you sure you want to login as this user?"}),confirm:e.jsx(n,{message:"Login"}),onConfirm:()=>{t.mutate({userId:s.id})}})]})}function Xi(s){const t=le();return L({mutationFn:a=>Zi(a),onSuccess:()=>{q(m("User created")),D.invalidateQueries({queryKey:G("users")}),t("/admin/users")},onError:a=>be(a,s)})}function Zi(s){return s.roles&&(s.roles=s.roles.map(t=>t.id)),F.post("users",s).then(t=>t.data)}function el(){const s=I(),t=Xi(s),a=le(),{close:r,formId:i}=K();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Create user"})}),e.jsx(Z,{children:e.jsxs(ne,{id:i,form:s,onSubmit:l=>{t.mutate(l,{onSuccess:o=>{r(),a(`${o.user.id}/details`,{replace:!0})}})},children:[e.jsx(us,{children:e.jsx(ms,{className:"mb-24",name:"image",diskPrefix:"avatars",label:e.jsx(n,{message:"Avatar"}),showRemoveButton:!0})}),e.jsx(h,{required:!0,className:"mb-24",name:"email",type:"email",label:e.jsx(n,{message:"Email"})}),e.jsx(h,{className:"mb-24",name:"first_name",label:e.jsx(n,{message:"First name"})}),e.jsx(h,{className:"mb-24",name:"last_name",label:e.jsx(n,{message:"Last name"})}),e.jsx(h,{required:!0,name:"password",type:"password",label:e.jsx(n,{message:"Password"})})]})}),e.jsxs(ae,{children:[e.jsx(j,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:i,disabled:t.isPending,children:e.jsx(n,{message:"Create"})})]})]})}function sl(){const{billing:s}=xe(),t=s.enable?ca:ca.filter(a=>a.key!=="subscribed");return e.jsx(d.Fragment,{children:e.jsx(ke,{endpoint:"users",title:e.jsx(n,{message:"Users"}),filters:qi,columns:t,actions:e.jsx(tl,{}),queryParams:{with:"subscriptions,bans,lastLogin"},selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:Fs,title:e.jsx(n,{message:"No users have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})})}function tl(){return e.jsxs(d.Fragment,{children:[e.jsx(Qa,{endpoint:"users/csv/export"}),e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new user"})}),e.jsx(el,{})]})]})}const al=s=>(t,a,r)=>{const i=r.subscribe;return r.subscribe=(o,c,u)=>{let x=o;if(c){const p=(u==null?void 0:u.equalityFn)||Object.is;let f=o(r.getState());x=b=>{const v=o(b);if(!p(f,v)){const y=f;c(f=v,y)}},u!=null&&u.fireImmediately&&c(f,f)}return i(x)},s(t,a,r)},nl=al,rl={preview:{defaultRoute:"/",navigationRoutes:[]},sections:{general:{label:m("General"),position:1},themes:{label:m("Themes"),position:2},menus:{label:m("Menus"),position:3,config:{availableRoutes:["/","/login","/register","/contact","/pricing","/account-settings","/admin","/admin/appearance","/admin/settings","/admin/plans","/admin/subscriptions","/admin/users","/admin/roles","/admin/pages","/admin/tags","/admin/files","/admin/localizations","/admin/ads","/admin/logs","/admin/settings/authentication","/admin/settings/branding","/admin/settings/cache","/admin/settings/providers","/api-docs"],positions:["admin-navbar","admin-sidebar","custom-page-navbar","auth-page-footer","auth-dropdown","account-settings-page","billing-page","checkout-page-navbar","checkout-page-footer","pricing-table-page","contact-us-page","notifications-page","footer","footer-secondary"]}},"custom-code":{label:m("Custom Code"),position:4},"seo-settings":{label:m("SEO Settings"),position:5}}},zs=mr.all([rl,xr]);let Za=()=>{};const il=new Promise(s=>Za=s),Qe=gr()(nl((s,t)=>({defaults:null,iframeWindow:null,isDirty:!1,setIsDirty:a=>{s(()=>({isDirty:a}))},config:zs,setDefaults:a=>{s({defaults:{...a}})},setIframeWindow:a=>{s({iframeWindow:a}),a.addEventListener("message",r=>{r.data.source==="be-appearance-preview"&&r.data.type==="appLoaded"&&Za()})},preview:{setValues:a=>{const r=t().iframeWindow;Ss(r,{type:"setValues",values:a})},setThemeFont:a=>{const r=t().iframeWindow;Ss(r,{type:"setThemeFont",value:a})},setThemeValue:(a,r)=>{const i=t().iframeWindow;Ss(i,{type:"setThemeValue",name:a,value:r})},setActiveTheme:a=>{const r=t().iframeWindow;Ss(r,{type:"setActiveTheme",themeId:a})},setCustomCode:(a,r)=>{const i=t().iframeWindow;Ss(i,{type:"setCustomCode",mode:a,value:r})},setHighlight:a=>{var l;let r=null;const i=(l=t().iframeWindow)==null?void 0:l.document;i&&a&&(r=i.querySelector(a)),r&&requestAnimationFrame(()=>{r&&r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}}})));function Ss(s,t){s&&s.postMessage({source:"be-appearance-editor",...t},"*")}function R(){return Qe.getState()}function ut(){return Ae(ll)}const ll={queryKey:["fetchAdminSettings"],queryFn:()=>ol(),staleTime:1/0,select:Gs};function ol(){return F.get("settings").then(s=>s.data)}function Gs(s){for(const t in s)Array.isArray(s[t])?s[t]=s[t].map(Gs):typeof s[t]=="object"?s[t]=Gs(s[t]):typeof s[t]=="number"?s[t]=s[t].toString():s[t]==null&&(s[t]="");return s}function en(){return Ae({queryKey:["admin/appearance/values"],queryFn:()=>cl(),staleTime:1/0,select:Gs})}function Ms(){const{data:s}=en();return s.values}function cl(){return F.get("admin/appearance/values").then(s=>s.data)}function dl(){var o,c;const{pathname:s}=Me(),a=(c=(o=jr().at(-1))==null?void 0:o.handle)==null?void 0:c.previewRoute,r=s.split("/")[3],i=zs.sections[r],l=(i==null?void 0:i.previewRoute)||zs.preview.defaultRoute||"/";return a?`${l}/${a}`:l}function ul(){const{isAppearanceEditorActive:s}=hr(),{data:t}=en(),{base_url:a}=xe(),r=d.useRef(null),i=dl();if(d.useEffect(()=>{t!=null&&t.defaults&&!R().defaults&&R().setDefaults(t.defaults)},[t]),d.useEffect(()=>{r.current&&R().setIframeWindow(r.current.contentWindow)},[]),s)return e.jsx(pr,{to:"/admin"});const l=new URL(i&&i!=="/"?`${a}/${i}`:`${a}`);return l.searchParams.append("appearanceEditor","true"),e.jsxs("div",{className:"h-screen items-center md:flex",children:[e.jsx(Xs,{children:e.jsx(n,{message:"Appearance"})}),e.jsx(ml,{values:t==null?void 0:t.values}),e.jsx("div",{className:"relative h-full flex-auto",children:e.jsx("iframe",{ref:r,className:"h-full w-full max-md:hidden",src:l.toString()},i)})]})}function ml({values:s}){const t=e.jsx("div",{className:"flex h-full flex-auto items-center justify-center",children:e.jsx(Ps,{isIndeterminate:!0,"aria-label":"Loading editor"})});return e.jsx("div",{className:"relative z-10 h-full w-full border-r bg shadow-lg @container md:w-320",children:s?e.jsx(Be,{}):t})}const ue=d.forwardRef(({startIcon:s,children:t,className:a,description:r,endIcon:i,...l},o)=>e.jsxs(Zs,{ref:o,display:"flex",className:w("relative mb-10 h-54 w-full items-center gap-10 rounded-input border bg px-14 text-sm hover:bg-hover",a,l.disabled&&"pointer-events-none opacity-50"),variant:null,...l,children:[s,e.jsxs("span",{className:"block min-w-0",children:[e.jsx("span",{className:"block",children:t}),r&&e.jsx("span",{className:"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted",children:r})]}),e.jsx("div",{className:"ml-auto",children:i??e.jsx(ot,{"aria-hidden":!0,className:"text-muted icon-sm"})})]}));function xl(){const s=ss(),{trans:t}=$(),{fields:a,append:r}=ts({name:"settings.menus",keyName:"key"});return e.jsxs(d.Fragment,{children:[e.jsx("div",{children:a.map((i,l)=>e.jsx(ue,{to:`${l}`,elementType:O,children:i.name},i.key))}),e.jsx("div",{className:"text-right",children:e.jsx(j,{variant:"outline",color:"primary",startIcon:e.jsx(we,{}),size:"xs",onClick:()=>{const i=At(10);r({name:t(m("New menu :number",{values:{number:a.length+1}})),id:i,positions:[],items:[]}),s(`${a.length}`)},children:e.jsx(n,{message:"Create menu"})})})]})}function sn(){const s=zs.sections.menus.config;return s?s.availableRoutes.map(t=>({id:t,label:t,action:t,type:"route",target:"_self"})):[]}function tn(s){return s&&s.charAt(0).toUpperCase()+s.slice(1)}function an({title:s=e.jsx(n,{message:"Add menu item"})}){const{data:t}=_e(["menuItemCategories"]),a=(t==null?void 0:t.menuItemCategories)||[],r=sn();return e.jsxs(J,{size:"sm",children:[e.jsx(ee,{children:s}),e.jsx(Z,{children:e.jsxs(is,{variant:"outline",children:[e.jsx(Se,{label:e.jsx(n,{message:"Link"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(gl,{})}),e.jsx(Se,{label:e.jsx(n,{message:"Route"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(da,{items:r})}),a.map(i=>e.jsx(Se,{label:e.jsx(n,{message:i.name}),children:e.jsx(da,{items:i.items})},i.name))]})})]})}function gl(){const s=I({defaultValues:{id:At(6),type:"link",target:"_blank"}}),{close:t}=K();return e.jsxs(ne,{form:s,onSubmit:a=>{t(a)},children:[e.jsx(h,{required:!0,name:"label",label:e.jsx(n,{message:"Label"}),className:"mb-20"}),e.jsx(h,{required:!0,type:"url",name:"action",placeholder:"https://",label:e.jsx(n,{message:"Url"}),className:"mb-20"}),e.jsx("div",{className:"text-right",children:e.jsx(j,{type:"submit",variant:"flat",color:"primary",size:"xs",children:e.jsx(n,{message:"Add to menu"})})})]})}function da({items:s}){const{close:t}=K();return e.jsx(Ia,{children:s.map(a=>e.jsx(Aa,{startIcon:e.jsx(we,{size:"sm"}),onSelected:()=>{if(a.label){const r=a.label.split("/").pop();a.label=r?tn(r):a.label,a.id=At(6)}a.target||(a.target="_self"),t(a)},children:a.label},a.id))})}const hl=M(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined"),pl=""+new URL("dropdown-menu-c9b3bd6a.svg",import.meta.url).href,jl={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e:s,ref:t,item:a,sortSession:r,onDropPositionChange:i})=>{var u;const l=r.dropPosition;let o=null;const c=(u=Oe.get(a))==null?void 0:u.rect;if(c){const x=c.top+c.height/2;s.clientY<=x?o="before":s.clientY>=x&&(o="after")}if(o!==l){const x=r.sortables.indexOf(a);if(r.dropPosition=o,i==null||i(r.dropPosition),ua(r),t.current)if(r.dropPosition==="after")bt(t.current,"bottom",r);else if(x===0)bt(t.current,"top",r);else{const b=r.sortables[x-1],v=Oe.get(b);v!=null&&v.ref.current&&bt(v.ref.current,"bottom",r)}const p=r.sortables.indexOf(a);if(r.activeIndex===p){r.finalIndex=r.activeIndex;return}(x>r.activeIndex?"after":"before")==="after"?r.finalIndex=r.dropPosition==="before"?p-1:p:r.finalIndex=r.dropPosition==="after"?p+1:p}},onDragEnd:s=>{ua(s)}};function ua(s){s!=null&&s.linePreviewEl&&(s.linePreviewEl.style.borderBottomColor="",s.linePreviewEl.style.borderTopColor="",s.linePreviewEl=void 0)}function bt(s,t,a){const r="rgb(var(--be-primary))";t==="top"?s.style.borderTopColor=r:s.style.borderBottomColor=r,a&&(a.linePreviewEl=s)}function nn(s,t,a){const r=Ws(t,0,s.length-1),i=Ws(a,0,s.length-1);if(r===i)return s;const l=s[r],o=i<r?-1:1;for(let c=r;c!==i;c+=o)s[c]=s[c+o];return s[i]=l,s}function rn(s,t,a){const r=s.slice();return r.splice(a<0?r.length+a:a,0,r.splice(t,1)[0]),r}const fl="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",bl={onDragStart:s=>{s.sortables.forEach((t,a)=>{const r=Oe.get(t);r!=null&&r.ref.current&&(r.ref.current.style.transition=fl,(s==null?void 0:s.activeIndex)===a&&(r.ref.current.style.opacity="0.4"))})},onDragEnter:(s,t,a)=>{nn(s.sortables,a,t);const r=s.sortables.map(i=>{var l;return(l=Oe.get(i))==null?void 0:l.rect});s.sortables.forEach((i,l)=>{if(!s)return;const o=rn(r,t,s.activeIndex),c=r[l],u=o[l],x=Oe.get(i);if(x!=null&&x.ref.current&&u&&c){const p=u.left-c.left,f=u.top-c.top;x.ref.current.style.transform=`translate3d(${p}px, ${f}px, 0)`}}),s.finalIndex=t},onDragOver:()=>{},onDragEnd:s=>{s.sortables.forEach(t=>{const a=Oe.get(t);a!=null&&a.ref.current&&(a.ref.current.style.transform="",a.ref.current.style.transition="",a.ref.current.style.opacity="",a.ref.current.style.zIndex="")})}},vl={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(s,t,a)=>{var i;const r=(i=Oe.get(s.sortables[a]))==null?void 0:i.ref.current;r&&(yl(r,a,t),nn(s.sortables,a,t),s.finalIndex=t)},onDragEnd:()=>{}};function yl(s,t,a){const r=s.parentElement;if(a<0)r.prepend(s);else{t>-1&&t<=a&&a++;const i=r.children.item(a);i?i.before(s):r.append(s)}}let V=null;const Os={line:jl,liveSort:bl,moveNode:vl};function wl({item:s,items:t,type:a,ref:r,onSortEnd:i,onSortStart:l,onDragEnd:o,preview:c,disabled:u,onDropPositionChange:x,strategy:p="liveSort"}){d.useEffect(()=>{V&&V.sortables.length!==t.length&&(V.sortables=[...t],V.activeIndex=t.indexOf(s))},[t,s]);const{draggableProps:f,dragHandleRef:b}=ri({id:s,ref:r,type:a,preview:c,disabled:u,onDragStart:()=>{var y;V={sortables:[...t],activeSortable:s,activeIndex:t.indexOf(s),finalIndex:t.indexOf(s),dropPosition:null,ref:r,scrollParent:r.current?li(r.current):void 0,scrollListener:()=>{oi(Oe)}},Os[p].onDragStart(V),l==null||l(),(y=V.scrollParent)==null||y.addEventListener("scroll",V.scrollListener)},onDragEnd:()=>{var y;V&&(V.dropPosition=null,x==null||x(V.dropPosition),V.activeIndex!==V.finalIndex&&(i==null||i(V.activeIndex,V.finalIndex)),(y=V.scrollParent)==null||y.removeEventListener("scroll",V.scrollListener),Os[p].onDragEnd(V),o==null||o(),V=null)},getData:()=>{}}),{droppableProps:v}=ii({id:s,ref:r,types:[a],disabled:u,allowDragEventsFromItself:!0,onDragOver:(y,S)=>{V&&Os[p].onDragOver({e:S,ref:r,item:s,sortSession:V,onDropPositionChange:x})},onDragEnter:()=>{if(!V)return;const y=V.sortables.indexOf(s),S=V.sortables.indexOf(V.activeSortable);Os[p].onDragEnter(V,y,S)},onDragLeave:()=>{V&&(V.dropPosition=null,x==null||x(V.dropPosition))}});return{sortableProps:{...as(f,v)},dragHandleRef:b}}function _l(){const{menuIndex:s}=re(),t=ss(),{getValues:a}=k(),r=`settings.menus.${s}`,i=a(r);return d.useEffect(()=>{i?R().preview.setHighlight(`[data-menu-id="${i.id}"]`):t("/admin/appearance/menus")},[t,i]),i?e.jsx(Sl,{menuFormPath:r}):null}function Sl({menuFormPath:s}){const{site:{has_mobile_app:t}}=xe(),a=Qe(i=>{var l;return(l=i.config)==null?void 0:l.sections.menus.config}),r=d.useMemo(()=>{const i=[...a==null?void 0:a.positions];return t&&i.push("mobile-app-about"),i.map(l=>({key:l,name:l.replaceAll("-"," ")}))},[a,t]);return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-30 border-b pb-30",children:[e.jsx(h,{name:`${s}.name`,label:e.jsx(n,{message:"Menu name"}),className:"mb-20",autoFocus:!0}),e.jsx(rt,{chipSize:"sm",name:`${s}.positions`,valueKey:"id",label:e.jsx(n,{message:"Menu positions"}),description:e.jsx(n,{message:"Where should this menu appear on the site"}),children:r.map(i=>e.jsx(g,{value:i.key,capitalizeFirst:!0,children:i.name},i.key))})]}),e.jsx(kl,{formPath:`${s}.items`}),e.jsx("div",{className:"text-right",children:e.jsx(Nl,{})})]})}function kl({formPath:s}){const t=ss(),a=k(),r=Es({control:a.control,name:s});return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between gap-16",children:[e.jsx(n,{message:"Menu items"}),e.jsxs(A,{type:"popover",placement:"right",offset:20,onClose:i=>{i&&(a.setValue(s,[...r,i],{shouldDirty:!0}),t(`${r.length}`))},children:[e.jsx(j,{variant:"outline",color:"primary",size:"xs",startIcon:e.jsx(we,{}),children:e.jsx(n,{message:"Add"})}),e.jsx(an,{})]})]}),e.jsxs("div",{className:"mt-20 flex-shrink-0",children:[r.map((i,l)=>e.jsx(Cl,{item:i,items:r,index:l,onSortEnd:(o,c)=>{a.setValue(s,rn(r,o,c),{shouldDirty:!0})}},i.id)),r.length?null:e.jsx(Pt,{size:"xs",className:"my-40",image:e.jsx(Et,{src:pl}),title:e.jsx(n,{message:"No menu items yet"}),description:e.jsx(n,{message:"Click “add“ button to start adding links, pages, routes and other items to this menu. "})})]})]})}function Nl(){const s=ss(),t=re(),a=parseInt(t.menuIndex),r=k(),i="settings.menus",l=Es({control:r.control,name:i}),o=l[a];return o?e.jsxs(A,{type:"modal",onClose:c=>{c&&(r.setValue(i,l.filter((u,x)=>x!=a),{shouldDirty:!0}),s("/admin/appearance/menus"))},children:[e.jsx(j,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(it,{}),children:e.jsx(n,{message:"Delete menu"})}),e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"Delete menu"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.name}}),confirm:e.jsx(n,{message:"Delete"})})]}):null}function Cl({item:s,items:t,index:a,onSortEnd:r}){const i=d.useRef(null),{sortableProps:l,dragHandleRef:o}=wl({item:s,items:t,type:"menuEditorSortable",ref:i,onSortEnd:r,strategy:"liveSort"}),c=s.icon&&Pa(s.icon),u=e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted",children:[c&&e.jsx(c,{size:"sm"}),"(",e.jsx(n,{message:"No label..."}),")"]});return e.jsx(d.Fragment,{children:e.jsx(ue,{elementType:O,to:`${a}`,ref:i,...l,children:e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsx(_,{ref:o,size:"sm",children:e.jsx(hl,{className:"text-muted hover:cursor-move"})}),e.jsx("div",{children:s.label||u})]})})})}const Fl=U.forwardRef(({valueListKey:s="permissions",...t},a)=>{const{data:r}=_e([s]),i=(r==null?void 0:r.permissions)||(r==null?void 0:r.workspacePermissions),[l,o]=Tt(t.value,[],t.onChange),[c,u]=d.useState(!1);if(!i)return null;const x=ln(i,l,c),p=f=>{const b=[...l],v=b.findIndex(y=>y.id===f.id);v>-1&&b.splice(v,1,f),o(b)};return e.jsxs(d.Fragment,{children:[e.jsx(is,{variant:"outline",ref:a,children:x.map(({groupName:f,items:b,anyChecked:v})=>e.jsx(Se,{label:e.jsx(n,{message:Kt(f)}),startIcon:v?e.jsx(fr,{size:"sm"}):void 0,children:e.jsx(Ia,{children:b.map(y=>{const S=l.findIndex(z=>z.id===y.id),C=S>-1;return e.jsxs("div",{children:[e.jsx(Aa,{onSelected:()=>{if(C){const z=[...l];z.splice(S,1),o(z)}else o([...l,y])},endSection:e.jsx(St,{tabIndex:-1,checked:C,onChange:()=>{}}),description:e.jsx(n,{message:y.description}),children:e.jsx(n,{message:y.display_name||y.name})}),C&&e.jsx(zl,{permission:y,onChange:p})]},y.id)})})},f))}),e.jsx(St,{className:"mt-30",checked:c,onChange:f=>{u(f.target.checked)},children:e.jsx(n,{message:"Show advanced permissions"})})]})});function zl({permission:s,onChange:t}){var r;if(!((r=s==null?void 0:s.restrictions)!=null&&r.length))return null;const a=(i,l)=>{const o=br(s,c=>{const u=c.restrictions.find(x=>x.name===i);u&&(u.value=l)});t==null||t(o)};return e.jsx("div",{className:"px-40 py-20",children:s.restrictions.map((i,l)=>{const o=l===s.restrictions.length-1,c=e.jsx(n,{message:Kt(i.name)}),u=i.description?e.jsx(n,{message:i.description}):void 0;return i.type==="bool"?e.jsx(St,{description:u,className:w(!o&&"mb-30"),checked:!!i.value,onChange:x=>{a(i.name,x.target.checked)},children:c},i.name):e.jsx(We,{size:"sm",label:c,description:u,type:"number",className:w(!o&&"mb-30"),value:i.value||"",onChange:x=>{a(i.name,x.target.value===""?void 0:parseInt(x.target.value))}},i.name)})})}function Wt(s){const{field:{onChange:t,value:a=[],ref:r}}=xs({name:s.name}),i={onChange:t,value:a};return e.jsx(Fl,{ref:r,...as(i,s)})}const Kt=s=>tn(s.replace("_"," "));function ln(s,t,a){const r=[];return s.forEach(i=>{const l=t.findIndex(c=>c.id===i.id);if(!a&&i.advanced)return;let o=r.find(c=>c.groupName===i.group);if(o||(o={groupName:i.group,anyChecked:!1,items:[]},r.push(o)),l>-1){const c={...i,restrictions:Il(i.restrictions,t[l].restrictions)};o.anyChecked=!0,o.items.push(c)}else o.items.push(i)}),r}function Il(s,t){return s==null?void 0:s.map(a=>{const r=t.find(i=>i.name===a.name);return r?{...a,value:r.value}:a})}const vt={grid:"flex flex-wrap gap-24",button:"flex flex-col items-center rounded hover:bg-hover h-90 aspect-square"},Al=[...Array(60).keys()],Pl=U.lazy(()=>et(()=>import("./icon-list-d1bf942d.js"),["./icon-list-d1bf942d.js","./main-14f9202e.js","./main-555b0ffb.css","./use-previous-e0b84d27.js","./table-be4c9f90.js","./Edit-927f0696.js","./formatted-number-ff408592.js","./switch-aded0297.js","./breadcrumb-f6cd9ad0.js","./ArrowBack-1d832323.js","./GridView-1bb7c9e7.js","./CalendarToday-6fd0562f.js","./transfer-files-page-5afd3b64.js","./Link-358c8e0c.js","./Download-7ca3ab04.js","./Folder-e5913fb7.js","./Message-bcac010f.js","./use-resume-subscription-bf53d83e.js","./TaskAlt-bb44f258.js","./TrendingFlat-1229157a.js","./theme-value-to-hex-9f184b2d.js","./tab-panels-c451a17f.js","./formatted-bytes-275d14a8.js","./admin-2fa-page-4585f7be.js"],import.meta.url));function El({onIconSelected:s}){const{trans:t}=$(),[a,r]=U.useState("");return e.jsxs("div",{className:"py-4",children:[e.jsx(We,{className:"mb-20",value:a,onChange:i=>{r(i.target.value)},placeholder:t({message:"Search icons..."})}),e.jsx(Ts,{mode:"wait",children:e.jsx(d.Suspense,{fallback:e.jsx(He.div,{...ds,className:vt.grid,children:Al.map((i,l)=>e.jsx("div",{className:vt.button,children:e.jsx(X,{variant:"rect"})},l))}),children:e.jsx(He.div,{...ds,className:vt.grid,children:e.jsx(Pl,{searchQuery:a,onIconSelected:s})})})})]})}function Tl(){return e.jsxs(J,{size:"w-850",className:"min-h-dialog",children:[e.jsx(ee,{children:e.jsx(n,{message:"Select icon"})}),e.jsx(Z,{children:e.jsx(Dl,{})})]})}function Dl(){const{close:s}=K();return e.jsx(El,{onIconSelected:t=>{s(t)}})}function os({formPathPrefix:s,hideRoleAndPermissionFields:t}){const{trans:a}=$(),r=i=>s?`${s}.${i}`:i;return e.jsxs(d.Fragment,{children:[e.jsx(h,{className:"mb-20",name:r("label"),label:e.jsx(n,{message:"Label"}),placeholder:a(m("No label...")),startAppend:e.jsx(Ml,{prefixName:r})}),e.jsx(Ll,{prefixName:r}),e.jsx(Vl,{prefixName:r}),!t&&e.jsxs(d.Fragment,{children:[e.jsx(ql,{prefixName:r}),e.jsx(Rl,{prefixName:r}),e.jsx($l,{prefixName:r})]})]})}function Ml({prefixName:s,...t}){const{watch:a,setValue:r}=k(),i=s("icon"),l=a(i),o=l&&Pa(l);return e.jsxs(A,{type:"modal",onClose:c=>{(c||c===null)&&r(i,c,{shouldDirty:!0})},children:[e.jsx(_,{className:"text-muted icon-sm",variant:"outline",size:"md",...t,children:o?e.jsx(o,{}):e.jsx(Ke,{})}),e.jsx(Tl,{})]})}function Ll({prefixName:s}){const t=k(),a=t.watch(s("type")),r=ci(a),{data:i}=_e(["menuItemCategories"]),l=(i==null?void 0:i.menuItemCategories)||[],o=l.find(x=>x.type===a),{trans:c}=$(),u=sn();return d.useEffect(()=>{r&&r!==a&&t.setValue(s("action"),"")},[a,r,t,s]),e.jsxs(d.Fragment,{children:[e.jsxs(H,{className:"mb-20",name:s("type"),selectionMode:"single",label:e.jsx(n,{message:"Type"}),children:[e.jsx(g,{value:"link",children:e.jsx(n,{message:"Custom link"})}),e.jsx(g,{value:"route",children:e.jsx(n,{message:"Site page"})}),l.map(x=>e.jsx(g,{value:x.type,children:x.name},x.type))]}),a==="link"&&e.jsx(h,{className:"mb-20",required:!0,type:"url",name:s("action"),placeholder:c({message:"Enter a url..."}),label:e.jsx(n,{message:"Url"})}),a==="route"&&e.jsx(H,{className:"mb-20",required:!0,items:u,name:s("action"),label:e.jsx(n,{message:"Page"}),searchPlaceholder:c(m("Search pages")),showSearchField:!0,selectionMode:"single",children:x=>e.jsx(g,{value:x.id,children:x.label},x.id)}),o&&e.jsx(H,{className:"mb-20",required:!0,items:o.items,name:s("action"),showSearchField:!0,searchPlaceholder:c(m("Search...")),selectionMode:"single",label:e.jsx(n,{message:o.name}),children:x=>e.jsx(g,{value:x.action,children:e.jsx(n,{message:x.label})})})]})}function ql({prefixName:s}){const{data:t}=_e(["roles","permissions"]),a=(t==null?void 0:t.roles)||[],{trans:r}=$();return e.jsx(rt,{className:"my-20",placeholder:r({message:"Add role..."}),label:e.jsx(n,{message:"Only show if user has role"}),name:s("roles"),chipSize:"sm",suggestions:a,valueKey:"id",displayWith:i=>{var l;return(l=a.find(o=>o.id===i.id))==null?void 0:l.name},children:i=>e.jsx(g,{value:i.id,capitalizeFirst:!0,children:e.jsx(n,{message:i.name})},i.id)})}function Rl({prefixName:s}){const{data:t}=_e(["roles","permissions"]),{trans:a}=$(),r=d.useMemo(()=>ln((t==null?void 0:t.permissions)||[],[],!1),[t==null?void 0:t.permissions]);return e.jsx(rt,{label:e.jsx(n,{message:"Only show if user has permissions"}),placeholder:a({message:"Add permission..."}),chipSize:"sm",suggestions:r,name:s("permissions"),valueKey:"name",children:({groupName:i,items:l})=>e.jsx(Ea,{label:Kt(i),children:l.map(o=>e.jsx(g,{value:o.name,description:e.jsx(n,{message:o.description}),children:e.jsx(n,{message:o.display_name||o.name})},o.name))},i)})}function $l({prefixName:s}){const{billing:t}=xe();return t.enable?e.jsxs(H,{selectionMode:"single",className:"mt-20",label:e.jsx(n,{message:"Subscription status"}),name:s("subscriptionStatus"),children:[e.jsx(g,{value:"subscribed",children:e.jsx(n,{message:"Only show if user is subscribed"})}),e.jsx(g,{value:"unsubscribed",children:e.jsx(n,{message:"Only show if user is not subscribed"})}),e.jsx(g,{value:null,children:e.jsx(n,{message:"Always show"})})]}):null}function Vl({prefixName:s}){return e.jsxs(H,{className:"mt-20",selectionMode:"single",name:s("target"),label:e.jsx(n,{message:"Open link in"}),children:[e.jsx(g,{value:"_self",children:e.jsx(n,{message:"Same window"})}),e.jsx(g,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})}function Ol(){const{menuIndex:s,menuItemIndex:t}=re();return e.jsx(Ul,{itemsPath:`settings.menus.${s}.items`,itemIndex:t})}function Ul({itemsPath:s,itemIndex:t}){const a=le(),{getValues:r}=k(),i=r(`${s}.${t}`);return d.useEffect(()=>{i?R().preview.setHighlight(`[data-menu-item-id="${i.id}"]`):a("..",{relative:"path",replace:!0})},[a,i]),i?e.jsx(Hl,{itemsPath:s,itemIndex:t}):null}function Hl({itemsPath:s,itemIndex:t}){return e.jsxs(d.Fragment,{children:[e.jsx(os,{formPathPrefix:`${s}.${t}`}),e.jsx("div",{className:"mt-40 text-right",children:e.jsx(Bl,{itemsPath:s,itemIndex:t})})]})}function Bl({itemsPath:s,itemIndex:t}){const a=le(),{fields:r}=ts({name:s}),{setValue:i,getValues:l}=k(),o=r[+t];return e.jsxs(A,{type:"modal",onClose:c=>{if(c&&t){const u=l(s);i(s,u.filter((x,p)=>p!==+t),{shouldDirty:!0}),a("..",{relative:"path",replace:!0})}},children:[e.jsx(j,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(it,{}),children:e.jsx(n,{message:"Delete this item"})}),e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"Delete item"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.label}}),confirm:e.jsx(n,{message:"Delete"})})]})}const on=["appearance-editor-save"];function Wl(){return L({mutationKey:on,mutationFn:s=>Kl(s),onSuccess:async s=>{D.setQueryData(["admin/appearance/values"],s),q(m("Changes saved"))},onError:s=>Y(s)})}function Kl(s){return F.post("admin/appearance",{changes:s}).then(t=>t.data)}function cn({isBlocked:s,allowedPath:t}){const{state:a,reset:r,proceed:i}=vr(({nextLocation:l})=>s&&(!t||!l.pathname.includes(t)));return d.useEffect(()=>{const l=o=>{s&&(o.preventDefault(),o.returnValue=!0)};return window.addEventListener("beforeunload",l),()=>window.removeEventListener("beforeunload",l)},[s]),e.jsx(A,{type:"modal",isOpen:a==="blocked",onClose:l=>{a==="blocked"&&(l?i():r())},children:e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"You have unsaved changes"}),body:e.jsx(n,{message:"Your changes will be lost if you continue. Are you sure you want to discard them?"}),close:e.jsx(n,{message:"Stay here"}),confirm:e.jsx(n,{message:"Discard changes"})})})}function Ls({children:s,breadcrumb:t,form:a,blockerAllowedPath:r}){const{isDirty:i}=Ta({control:a.control});d.useEffect(()=>(R().setIsDirty(i),()=>R().setIsDirty(!1)),[i]),d.useEffect(()=>{const o=a.watch(c=>{R().preview.setValues(c)});return()=>o.unsubscribe()},[a]);const l=Wl();return e.jsxs(d.Fragment,{children:[e.jsx(Gt,{breadcrumb:t,children:e.jsx(us,{children:e.jsx(ne,{className:"h-full flex-auto",id:"appearance-editor",form:a,onSubmit:o=>{l.mutate(o,{onSuccess:()=>a.reset(o)})},children:s})})}),e.jsx(cn,{isBlocked:i,allowedPath:r})]})}function Gt({breadcrumb:s,children:t}){return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(Gl,{}),s,e.jsx("div",{className:"flex-auto overflow-y-auto",children:e.jsx("div",{className:"flex h-full flex-col px-14 py-20",children:t})})]})}function Gl(){const{state:s}=Me(),t=zi({mutationKey:on})>0,a=Qe(r=>r.isDirty);return e.jsxs("div",{className:"flex h-50 flex-shrink-0 items-center border-b pr-10",children:[e.jsx(_,{border:"border-r",className:"text-muted",elementType:O,to:(s==null?void 0:s.prevPath)||"/admin",replace:!0,children:e.jsx(De,{})}),e.jsx("div",{className:"pl-10",children:e.jsx(n,{message:"Appearance editor"})}),e.jsx(j,{variant:"flat",color:"primary",className:"ml-auto block",disabled:!a||t,type:"submit",form:"appearance-editor",children:a?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Saved"})})]})}function Ql(){const s=Me();return new URL(".",window.origin+s.pathname).pathname.replace(/\/$/,"")}function fs({children:s,backLink:t}){const a=d.Children.toArray(s),r=Ql(),i=[e.jsx(n,{message:"Customizing"},"mainLabel")];a.length>1&&i.push(a[0]);const l=a.length>1?a.slice(1):a;return e.jsxs("div",{className:"flex h-60 flex-shrink-0 items-center border-b",children:[e.jsx(_,{iconSize:"md",radius:"rounded-none",className:"h-full w-50 flex-shrink-0 text-muted",elementType:O,to:t??r,children:e.jsx(Dt,{})}),e.jsxs("div",{className:"min-w-0 border-l p-10",children:[e.jsx(ma,{items:i,className:"text-xs text-muted"}),e.jsx(ma,{items:l,isEmphasized:!0,className:"mt-2 text-sm"})]})]})}function ma({items:s,className:t,isEmphasized:a}){return e.jsx("div",{className:w("flex items-center gap-4",t),children:s.map((r,i)=>{const l=s.length-1===i;return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:w("min-w-0 overflow-hidden overflow-ellipsis whitespace-nowrap",l&&a&&"text-primary"),children:r}),!l&&(a?e.jsx(ot,{className:"flex-shrink-0 text-muted",size:"font-inherit"}):e.jsx("div",{children:"•"}))]},i)})})}function Yl(){const s=Ms(),t=I({defaultValues:{settings:{branding:{favicon:s.settings.branding.favicon,logo_light:s.settings.branding.logo_light,logo_dark:s.settings.branding.logo_dark,logo_light_mobile:s.settings.branding.logo_light_mobile,logo_dark_mobile:s.settings.branding.logo_dark_mobile,site_description:s.settings.branding.site_description}},appearance:{env:{app_name:s.appearance.env.app_name}}}});return e.jsxs(Ls,{form:t,breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"General"})}),children:[e.jsx(ks,{label:e.jsx(n,{message:"Favicon"}),description:e.jsx(n,{message:"This will generate different size favicons. Image should be at least 512x512 in size."}),type:"favicon"}),e.jsx(ks,{label:e.jsx(n,{message:"Light logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds."}),type:"logo_light"}),e.jsx(ks,{label:e.jsx(n,{message:"Dark logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds. Will default to light logo if left empty."}),type:"logo_dark"}),e.jsx(ks,{label:e.jsx(n,{message:"Mobile light logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds on mobile. Will default to desktop logo if left empty."}),type:"logo_light_mobile"}),e.jsx(ks,{label:e.jsx(n,{message:"Mobile dark logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds on mobile. Will default to desktop if left empty."}),type:"logo_dark_mobile"}),e.jsx(Jl,{}),e.jsx(Xl,{})]})}function ks({label:s,description:t,type:a}){const r=Qe(i=>{var l;return(l=i.defaults)==null?void 0:l.settings.branding[a]});return e.jsx(ms,{name:`settings.branding.${a}`,className:"mb-30 border-b pb-30",label:s,description:t,diskPrefix:"branding_media",defaultValue:r,onChange:()=>{R().preview.setHighlight('[data-logo="navbar"]')}})}function Jl(){return e.jsx(h,{name:"appearance.env.app_name",required:!0,className:"mt-20",label:e.jsx(n,{message:"Site name"})})}function Xl(){return e.jsx(h,{name:"settings.branding.site_description",className:"mt-20",inputElementType:"textarea",rows:4,label:e.jsx(n,{message:"Site description"})})}function Zl(s=1,t=1e4){const a=new Uint32Array(1);window.crypto.getRandomValues(a);const r=a[0]/(4294967295+1);return s=Math.ceil(s),t=Math.floor(t),Math.floor(r*(t-s+1))+s}function eo({type:s,children:t,disabled:a}){const{trans:r}=$(),i=ss(),{watch:l,getValues:o,setValue:c}=k();return e.jsxs(d.Fragment,{children:[t,e.jsx("div",{className:"mb-20",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(we,{}),disabled:a,onClick:()=>{var p;const u=(p=R().defaults)==null?void 0:p.appearance.themes.light,x=o("appearance.themes");c("appearance.themes",[...x,{id:Zl(),name:r(m("New theme")),values:u,type:s}],{shouldDirty:!0}),i(`${x.length}`)},children:e.jsx(n,{message:"New theme"})})}),l("appearance.themes").map((u,x)=>e.jsx(ue,{to:`${x}`,elementType:Mt,disabled:a,children:u.name},u.id))]})}const so=U.lazy(()=>et(()=>import("./ace-editor-9eba428a.js"),["./ace-editor-9eba428a.js","./main-14f9202e.js","./main-555b0ffb.css","./index-f297e297.js"],import.meta.url));function Qt({defaultValue:s,mode:t="html",title:a,onSave:r,isSaving:i,footerStartAction:l,beautify:o,editorRef:c}){const[u,x]=d.useState(s),[p,f]=d.useState(!0);return e.jsxs(J,{size:"fullscreen",className:"h-full w-full",children:[e.jsx(ee,{children:a}),e.jsx(Z,{className:"relative flex-auto",padding:"p-0",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"flex h-400 w-full items-center justify-center",children:e.jsx(Ps,{"aria-label":"Loading editor...",isIndeterminate:!0,size:"md"})}),children:e.jsx(so,{beautify:o,mode:t,onChange:b=>x(b),defaultValue:u||"",onIsValidChange:f,editorRef:c})})}),e.jsx(to,{disabled:!p||i,value:u,onSave:r,startAction:l})]})}function to({disabled:s,value:t,onSave:a,startAction:r}){const{close:i}=K();return e.jsxs(ae,{dividerTop:!0,startAction:r,children:[e.jsx(j,{onClick:()=>i(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{disabled:s,variant:"flat",color:"primary",onClick:()=>{a?a(t):i(t)},children:e.jsx(n,{message:"Save"})})]})}function dn(s){return Ae({queryKey:["admin","seo-tags",s],queryFn:()=>ao(s)})}function ao(s){return F.get(`admin/appearance/seo-tags/${s}`).then(t=>t.data)}function no(s){const t=Qs();return L({mutationFn:a=>ro(s,a.tags),onSuccess:async()=>{await t.invalidateQueries({queryKey:["admin","seo-tags",s]}),q(m("Updated SEO tags"))},onError:a=>Y(a)})}function ro(s,t){return F.put(`admin/appearance/seo-tags/${s}`,{tags:t}).then(a=>a.data)}var Fa;const un=((Fa=zs.sections["seo-settings"].config)==null?void 0:Fa.pages)||[],mn=un.map(s=>s.key);function io(){const{isLoading:s}=dn(mn);return e.jsx(Gt,{breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"SEO"})}),children:s?e.jsx(gs,{}):e.jsx(d.Fragment,{children:un.map(t=>e.jsx(lo,{label:t.label,name:t.key},t.key))})})}function lo({label:s,name:t}){const{data:a,isLoading:r}=dn(mn);return e.jsxs(A,{type:"modal",children:[e.jsx(ue,{disabled:r,children:e.jsx(n,{...s})}),a?e.jsx(oo,{name:t,value:a[t]}):null]})}function oo({name:s,value:t}){const{close:a}=K(),r=no(s),i=d.useRef(null),l=e.jsx(j,{variant:"outline",color:"primary",onClick:()=>{i.current&&i.current.editor.setValue(t.original)},children:e.jsx(n,{message:"Reset to original"})});return e.jsx(Qt,{mode:"php_laravel_blade",title:e.jsx(n,{message:"Edit SEO meta tags"}),footerStartAction:l,editorRef:i,defaultValue:t.custom||t.original,isSaving:r.isPending,beautify:!1,onSave:o=>{o!=null&&r.mutate({tags:o},{onSuccess:()=>a()})}})}function co(){const s=Ms(),t=I({defaultValues:{appearance:{custom_code:{css:s.appearance.custom_code.css,html:s.appearance.custom_code.html}}}});return e.jsxs(Ls,{form:t,breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"Custom code"})}),children:[e.jsx(xa,{mode:"css"}),e.jsx(xa,{mode:"html"})]})}function xa({mode:s}){const{getValues:t}=k(),{setValue:a}=k(),r=s==="html"?e.jsx(n,{message:"Custom HTML & JavaScript"}):e.jsx(n,{message:"Custom CSS"});return e.jsxs(A,{type:"modal",onClose:i=>{i!=null&&(a(`appearance.custom_code.${s}`,i,{shouldDirty:!0}),R().preview.setCustomCode(s,i))},children:[e.jsx(ue,{children:r}),e.jsx(Qt,{title:r,defaultValue:t(`appearance.custom_code.${s}`)||"",mode:s})]})}const uo=""+new URL("articles-8bfd9f17.svg",import.meta.url).href,mo=s=>{const t=s.customPages.types.length>1?[{control:{type:Ie.Select,defaultValue:"default",options:s.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))},key:"type",label:m("Type"),description:m("Type of the page"),defaultOperator:se.eq}]:[];return[{key:"user_id",label:m("User"),description:m("User page was created by"),defaultOperator:se.eq,control:{type:Ie.SelectModel,model:di}},...t,rs({description:m("Date page was created")}),ps({description:m("Date page was last updated")})]},xo=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Slug"}),body:s=>e.jsx(O,{target:"_blank",to:`/pages/${s.slug}`,className:Lt,children:s.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(n,{message:"Owner"}),body:s=>s.user&&e.jsx(Ge,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(_,{size:"md",className:"text-muted",elementType:O,to:`${s.id}/edit`,children:e.jsx(Ke,{})})}];function go(){const s=d.useContext(ns),t=d.useMemo(()=>mo(s),[s]);return e.jsx(ke,{endpoint:"custom-pages",title:e.jsx(n,{message:"Custom pages"}),filters:t,columns:xo,queryParams:{with:"user"},actions:e.jsx(ho,{}),selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:uo,title:e.jsx(n,{message:"No pages have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching pages"})})})}function ho(){return e.jsx(Pe,{elementType:O,to:"new",children:e.jsx(n,{message:"New page"})})}const po=[{label:m("Drive"),to:"drive"},{label:m("Guest Uploads"),to:"guest-uploads"}],jo=[{label:m("General"),to:"general",position:1},...po,yr().settings.billing.integrated&&{label:m("Subscriptions"),to:"subscriptions",position:2},{label:m("Localization"),to:"localization",position:3},{label:m("Authentication"),to:"authentication",position:4},{label:m("Uploading"),to:"uploading",position:5},{label:m("Outgoing email"),to:"outgoing-email",position:6},{label:m("Cache"),to:"cache",position:7},{label:m("Analytics"),to:"analytics",position:8},{label:m("Logging"),to:"logging",position:9},{label:m("Queue"),to:"queue",position:10},{label:m("Recaptcha"),to:"recaptcha",position:11},{label:m("GDPR"),to:"gdpr",position:12},{label:m("Menus"),to:"/admin/appearance/menus",position:13},{label:m("Seo"),to:"/admin/appearance/seo-settings",position:14},{label:m("Themes"),to:"/admin/appearance/themes",position:15}].filter(Boolean),fo=jo;function bo({className:s,navConfig:t}){const a=es(),r=d.useMemo(()=>(t??fo).sort((l,o)=>(l.position??0)-(o.position??0)),[t]);return e.jsxs("div",{className:w(s,"container mx-auto min-h-full items-start gap-30 p-24 md:flex"),children:[e.jsx(Xs,{children:e.jsx(n,{message:"Settings"})}),a?e.jsx(vo,{navConfig:r}):e.jsx(yo,{navConfig:r}),e.jsx("div",{className:"relative max-w-500 flex-auto md:px-30",children:e.jsx(Be,{})})]})}function vo({navConfig:s}){const{pathname:t}=Me(),a=ss(),r=t.split("/").pop();return e.jsx(Ds,{minWidth:"min-w-none",className:"mb-24 w-full bg",selectionMode:"single",selectedValue:r,onSelectionChange:i=>{a(i,{state:{prevPath:t}})},children:s.map(i=>e.jsx(g,{value:i.to,children:e.jsx(n,{...i.label})},i.to))})}function yo({navConfig:s}){const{pathname:t}=Me();return e.jsx("div",{className:"sticky top-24 w-240 flex-shrink-0",children:s.map(a=>e.jsx(Mt,{to:a.to,state:{prevPath:t},className:({isActive:r})=>w("mb-8 block whitespace-nowrap rounded-button p-14 text-sm transition-bg-color",r?"bg-primary/6 font-semibold text-primary":"hover:bg-hover"),children:e.jsx(n,{...a.label})},a.to))})}function wo(){return L({mutationFn:()=>_o(),onSuccess:()=>{q(m("Sitemap generated"))},onError:s=>Y(s)})}function _o(){return F.post("sitemap/generate").then(s=>s.data)}function xn(s){return L({mutationFn:t=>So(t),onSuccess:t=>(q(m("Settings updated"),{position:"bottom-right"}),D.setQueryData(["fetchAdminSettings"],t)),onError:t=>be(t,s)})}function So({client:s,server:t,files:a}){const r=new FormData;return s&&r.set("client",JSON.stringify(s)),t&&r.set("server",JSON.stringify(t)),Object.entries(a||{}).forEach(([i,l])=>{r.set(i,l)}),F.post("settings",r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data)}function ye(){return e.jsx("div",{className:"bg-divider-lighter my-30 h-1"})}function ko(){return e.jsxs(He.div,{className:"text-sm",...ds,children:[e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsxs("div",{className:"mt-10 flex items-center gap-8",children:[e.jsx(X,{variant:"rect",size:"h-20 w-20"}),e.jsx(X,{className:"max-w-64 text-xs"})]})]}),e.jsx(ye,{}),e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsx(X,{className:"mt-10 max-w-4/5 text-xs"})]}),e.jsx(ye,{}),e.jsxs("div",{children:[e.jsx(X,{className:"mb-4 max-w-140"}),e.jsx(X,{variant:"rect",size:"h-42 w-full"}),e.jsx(X,{className:"mt-10 max-w-[90%] text-xs"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-20 flex items-center gap-12",children:[e.jsx(X,{variant:"rect",size:"h-20 w-40",radius:"rounded-full"}),e.jsx(X,{className:"max-w-140"})]}),e.jsx(X,{className:"mt-10 max-w-240 text-xs"})]}),e.jsx(ye,{}),e.jsxs("div",{children:[e.jsx(X,{variant:"rect",size:"h-30 w-132",radius:"rounded-button"}),e.jsxs("div",{className:"mt-14",children:[e.jsx(X,{className:"max-w-240"}),e.jsx(X,{className:"max-w-384"})]})]}),e.jsx("div",{className:"mt-40",children:e.jsx(X,{variant:"rect",size:"h-36 w-132",radius:"rounded-button"})})]})}function ge({children:s,form:t}){const a=xn(t),{isDirty:r}=Ta({control:t.control});return e.jsxs(He.section,{...ds,children:[e.jsxs(ne,{form:t,onBeforeSubmit:()=>{const i=t.formState.errors,l=Object.keys(i).filter(o=>o.endsWith("_group"));t.clearErrors(l)},onSubmit:i=>{a.mutate(i,{onSuccess:()=>t.reset(i)})},children:[s,e.jsx("div",{className:"mt-40",children:e.jsx(j,{type:"submit",variant:"flat",color:"primary",startIcon:a.isPending?e.jsx(Ps,{size:"xs",isIndeterminate:!0}):null,disabled:a.isPending||!r,children:e.jsx(n,{message:"Save changes"})})})]}),e.jsx(cn,{isBlocked:r})]},"settings-form")}function he({title:s,description:t,headerMargin:a="mb-40",children:r,isLoading:i}){const{data:l}=ut();return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:a,children:[e.jsx("h2",{className:"mb-4 text-xl",children:s}),e.jsx("div",{className:"text-sm text-muted",children:t})]}),e.jsx(Ts,{initial:!1,mode:"wait",children:l&&!i?r(l):e.jsx(ko,{},"settings-skeleton")})]})}function bs({link:s,className:t}){const{site:a}=xe();return a.hide_docs_button?null:e.jsxs("div",{className:w("flex items-center gap-8",t),children:[e.jsx(Ht,{size:"sm"}),e.jsx(st,{href:s,children:e.jsx(n,{message:"Learn more"})})]})}function No(){return e.jsx(he,{title:e.jsx(n,{message:"General"}),description:e.jsx(n,{message:"Configure site url, homepage, theme and other general settings."}),children:s=>e.jsx(Co,{data:s})})}function Co({data:s}){var a,r,i,l;const t=I({defaultValues:{client:{homepage:{type:((a=s.client.homepage)==null?void 0:a.type)??"landingPage",value:((r=s.client.homepage)==null?void 0:r.value)??""},themes:{default_id:(i=s.client.themes)!=null&&i.default_id?parseInt(s.client.themes.default_id):0,user_change:((l=s.client.themes)==null?void 0:l.user_change)??!1}}}});return e.jsxs(ge,{form:t,children:[e.jsx(Fo,{}),e.jsx(ye,{}),e.jsx(zo,{}),e.jsx(ye,{}),e.jsx(Io,{}),e.jsx(ye,{}),e.jsx(Ao,{})]})}function Fo(){const{data:s}=ut();if(!s)return null;let t=null;const a=s.server,r=a.newAppUrl&&a.newAppUrl!==a.app_url;return r&&(t=e.jsx("div",{className:"mt-20 text-sm text-danger",children:e.jsx(n,{values:{baseUrl:a.app_url,currentUrl:a.newAppUrl,b:i=>e.jsx("b",{children:i})},message:"Base site url is set as <b>:baseUrl</b> in configuration, but current url is <b>:currentUrl</b>. It is recommended to set the primary url you want to use in configuration file and then redirect all other url versions to this primary version via cpanel or .htaccess file."})})),e.jsxs(d.Fragment,{children:[e.jsx(We,{readOnly:!0,invalid:!!r,value:a.app_url,label:e.jsx(n,{message:"Primary site url"}),description:e.jsx(bs,{link:"https://support.vebto.com/hc/articles/35/primary-site-url"})}),t]})}function zo(){var i,l;const{watch:s}=k(),{homepage:t}=d.useContext(ns),{data:a}=_e(["menuItemCategories"]),r=s("client.homepage.type");return e.jsxs("div",{children:[e.jsxs(H,{name:"client.homepage.type",selectionMode:"single",label:e.jsx(n,{message:"Site home page"}),description:e.jsx(n,{message:"Which page should be used as site homepage."}),children:[t.options.map(o=>e.jsx(g,{value:o.value,children:e.jsx(n,{...o.label})},o.value)),(i=a==null?void 0:a.menuItemCategories)==null?void 0:i.map(o=>e.jsx(g,{value:o.type,children:o.name},o.type))]}),(l=a==null?void 0:a.menuItemCategories)==null?void 0:l.map(o=>r===o.type?e.jsx(H,{className:"mt-24",name:"client.homepage.value",selectionMode:"single",label:e.jsx(n,{message:"Homepage :name",values:{name:o.name}}),children:o.items.map(c=>e.jsx(g,{value:`${c.model_id}`,children:c.label},c.label))},o.name):null)]})}function Io(){const s=wr(t=>t.data.themes);return e.jsxs(d.Fragment,{children:[e.jsxs(H,{className:"mb-20",name:"client.themes.default_id",selectionMode:"single",label:e.jsx(n,{message:"Default site theme"}),description:e.jsx(n,{message:"Which theme to use for users that have not chosen a theme manually."}),children:[e.jsx(g,{value:0,children:e.jsx(n,{message:"System"})}),s.map(t=>e.jsx(g,{value:t.id,children:t.name},t.id))]}),e.jsx(T,{name:"client.themes.user_change",description:e.jsx(n,{message:"Allow users to manually change site theme."}),children:e.jsx(n,{message:"Allow theme change"})})]})}function Ao(){const s=wo(),{base_url:t}=xe(),a=`${t}/storage/sitemaps/sitemap-index.xml`,r=e.jsx(st,{href:a,children:a});return e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"outline",size:"xs",color:"primary",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(n,{message:"Generate sitemap"})}),e.jsx("div",{className:"mt-14 text-sm text-muted",children:e.jsx(n,{message:"Once generated, sitemap url will be: :url",values:{url:r}})})]})}const Yt=M(e.jsx("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"}));function ga(s){return Ha(s).toString("rgb").replace("rgb(","").replace(")","").replace(/, ?/g," ")}const Po=M(e.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined");function Eo(){const{getValues:s,setValue:t}=k(),{themeIndex:a}=re(),r=s(`appearance.themes.${+a}`);return e.jsxs(A,{type:"modal",onClose:i=>{i&&s("appearance.themes").forEach((l,o)=>{if(l.id===i.id){t(`appearance.themes.${o}`,i,{shouldDirty:!0});return}if(i.default_light){t(`appearance.themes.${o}`,{...l,default_light:!1},{shouldDirty:!0});return}if(i.default_dark){t(`appearance.themes.${o}`,{...l,default_dark:!1},{shouldDirty:!0});return}})},children:[e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(Po,{}),children:e.jsx(n,{message:"Settings"})}),e.jsx(To,{theme:r})]})}function To({theme:s}){const t=I({defaultValues:s}),{close:a,formId:r}=K();return d.useEffect(()=>{const i=t.watch((l,{name:o})=>{o==="default_light"&&l.default_light&&t.setValue("default_dark",!1),o==="default_dark"&&l.default_dark&&t.setValue("default_light",!1)});return()=>i.unsubscribe()},[t]),e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Update settings"})}),e.jsx(Z,{children:e.jsxs(ne,{form:t,id:r,onSubmit:i=>{a(i)},children:[e.jsx(h,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",autoFocus:!0}),e.jsx(T,{name:"is_dark",className:"mb-20 border-b pb-20",description:e.jsx(n,{message:"Whether this theme has light text on dark background."}),children:e.jsx(n,{message:"Dark theme"})}),e.jsx(T,{name:"default_light",className:"mb-30",description:e.jsx(n,{message:"When light mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for light mode"})}),e.jsx(T,{name:"default_dark",description:e.jsx(n,{message:"When dark mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for dark mode"})})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{a()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:r,disabled:!t.formState.isDirty,children:e.jsx(n,{message:"Save"})})]})]})}const Do=M(e.jsx("path",{d:"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z"}),"RestartAltOutlined");function Mo(){const s=le(),{themeIndex:t}=re(),[a,r]=d.useState(!1),{setValue:i,getValues:l}=k(),o=()=>{if(l("appearance.themes").length<=1){q.danger(m("At least one theme is required"));return}t&&(s("..",{relative:"path",replace:!0}),i("appearance.themes",l("appearance.themes").filter((c,u)=>u!==+t),{shouldDirty:!0}))};return e.jsxs(d.Fragment,{children:[e.jsxs(Le,{onItemSelected:c=>{if(c==="delete")r(!0);else if(c==="reset"){const u=`appearance.themes.${+t}`,x=l(`${u}.is_dark`)?R().defaults.appearance.themes.dark:R().defaults.appearance.themes.light;Object.entries(x).forEach(([p,f])=>{R().preview.setThemeValue(p,f)}),R().preview.setThemeFont(null),i(`${u}.values`,x,{shouldDirty:!0}),i(`${u}.font`,void 0,{shouldDirty:!0})}},children:[e.jsx(_,{size:"md",className:"text-muted",children:e.jsx(nt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"reset",startIcon:e.jsx(Do,{}),children:e.jsx(n,{message:"Reset colors"})}),e.jsx(g,{value:"delete",startIcon:e.jsx(it,{}),children:e.jsx(n,{message:"Delete"})})]})]}),e.jsx(A,{type:"modal",isOpen:a,onClose:c=>{c&&o(),r(!1)},children:e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"Delete theme"}),body:e.jsx(n,{message:"Are you sure you want to delete this theme?"}),confirm:e.jsx(n,{message:"Delete"})})})]})}function vs(){return(vs=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s}).apply(this,arguments)}function mt(s,t){if(s==null)return{};var a,r,i={},l=Object.keys(s);for(r=0;r<l.length;r++)t.indexOf(a=l[r])>=0||(i[a]=s[a]);return i}function Is(s){var t=d.useRef(s),a=d.useRef(function(r){t.current&&t.current(r)});return t.current=s,a.current}var As=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=1),s>a?a:s<t?t:s},Ns=function(s){return"touches"in s},kt=function(s){return s&&s.ownerDocument.defaultView||self},ha=function(s,t,a){var r=s.getBoundingClientRect(),i=Ns(t)?function(l,o){for(var c=0;c<l.length;c++)if(l[c].identifier===o)return l[c];return l[0]}(t.touches,a):t;return{left:As((i.pageX-(r.left+kt(s).pageXOffset))/r.width),top:As((i.pageY-(r.top+kt(s).pageYOffset))/r.height)}},pa=function(s){!Ns(s)&&s.preventDefault()},gn=U.memo(function(s){var t=s.onMove,a=s.onKey,r=mt(s,["onMove","onKey"]),i=d.useRef(null),l=Is(t),o=Is(a),c=d.useRef(null),u=d.useRef(!1),x=d.useMemo(function(){var v=function(C){pa(C),(Ns(C)?C.touches.length>0:C.buttons>0)&&i.current?l(ha(i.current,C,c.current)):S(!1)},y=function(){return S(!1)};function S(C){var z=u.current,P=kt(i.current),E=C?P.addEventListener:P.removeEventListener;E(z?"touchmove":"mousemove",v),E(z?"touchend":"mouseup",y)}return[function(C){var z=C.nativeEvent,P=i.current;if(P&&(pa(z),!function(ce,B){return B&&!Ns(ce)}(z,u.current)&&P)){if(Ns(z)){u.current=!0;var E=z.changedTouches||[];E.length&&(c.current=E[0].identifier)}P.focus(),l(ha(P,z,c.current)),S(!0)}},function(C){var z=C.which||C.keyCode;z<37||z>40||(C.preventDefault(),o({left:z===39?.05:z===37?-.05:0,top:z===40?.05:z===38?-.05:0}))},S]},[o,l]),p=x[0],f=x[1],b=x[2];return d.useEffect(function(){return b},[b]),U.createElement("div",vs({},r,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),Jt=function(s){return s.filter(Boolean).join(" ")},hn=function(s){var t=s.color,a=s.left,r=s.top,i=r===void 0?.5:r,l=Jt(["react-colorful__pointer",s.className]);return U.createElement("div",{className:l,style:{top:100*i+"%",left:100*a+"%"}},U.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},te=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=Math.pow(10,t)),Math.round(a*s)/a},Lo=function(s){return Oo(Nt(s))},Nt=function(s){return s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?te(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?te(parseInt(s.substring(6,8),16)/255,2):1}},qo=function(s){return Vo($o(s))},Ro=function(s){var t=s.s,a=s.v,r=s.a,i=(200-t)*a/100;return{h:te(s.h),s:te(i>0&&i<200?t*a/100/(i<=100?i:200-i)*100:0),l:te(i/2),a:te(r,2)}},Ct=function(s){var t=Ro(s);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},$o=function(s){var t=s.h,a=s.s,r=s.v,i=s.a;t=t/360*6,a/=100,r/=100;var l=Math.floor(t),o=r*(1-a),c=r*(1-(t-l)*a),u=r*(1-(1-t+l)*a),x=l%6;return{r:te(255*[r,c,o,o,u,r][x]),g:te(255*[u,r,r,c,o,o][x]),b:te(255*[o,o,u,r,r,c][x]),a:te(i,2)}},Us=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},Vo=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=i<1?Us(te(255*i)):"";return"#"+Us(t)+Us(a)+Us(r)+l},Oo=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=Math.max(t,a,r),o=l-Math.min(t,a,r),c=o?l===t?(a-r)/o:l===a?2+(r-t)/o:4+(t-a)/o:0;return{h:te(60*(c<0?c+6:c)),s:te(l?o/l*100:0),v:te(l/255*100),a:i}},Uo=U.memo(function(s){var t=s.hue,a=s.onChange,r=Jt(["react-colorful__hue",s.className]);return U.createElement("div",{className:r},U.createElement(gn,{onMove:function(i){a({h:360*i.left})},onKey:function(i){a({h:As(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":te(t),"aria-valuemax":"360","aria-valuemin":"0"},U.createElement(hn,{className:"react-colorful__hue-pointer",left:t/360,color:Ct({h:t,s:100,v:100,a:1})})))}),Ho=U.memo(function(s){var t=s.hsva,a=s.onChange,r={backgroundColor:Ct({h:t.h,s:100,v:100,a:1})};return U.createElement("div",{className:"react-colorful__saturation",style:r},U.createElement(gn,{onMove:function(i){a({s:100*i.left,v:100-100*i.top})},onKey:function(i){a({s:As(t.s+100*i.left,0,100),v:As(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+te(t.s)+"%, Brightness "+te(t.v)+"%"},U.createElement(hn,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Ct(t)})))}),pn=function(s,t){if(s===t)return!0;for(var a in s)if(s[a]!==t[a])return!1;return!0},Bo=function(s,t){return s.toLowerCase()===t.toLowerCase()||pn(Nt(s),Nt(t))};function Wo(s,t,a){var r=Is(a),i=d.useState(function(){return s.toHsva(t)}),l=i[0],o=i[1],c=d.useRef({color:t,hsva:l});d.useEffect(function(){if(!s.equal(t,c.current.color)){var x=s.toHsva(t);c.current={hsva:x,color:t},o(x)}},[t,s]),d.useEffect(function(){var x;pn(l,c.current.hsva)||s.equal(x=s.fromHsva(l),c.current.color)||(c.current={hsva:l,color:x},r(x))},[l,s,r]);var u=d.useCallback(function(x){o(function(p){return Object.assign({},p,x)})},[]);return[l,u]}var Ko=typeof window<"u"?d.useLayoutEffect:d.useEffect,Go=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},ja=new Map,Qo=function(s){Ko(function(){var t=s.current?s.current.ownerDocument:document;if(t!==void 0&&!ja.has(t)){var a=t.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,ja.set(t,a);var r=Go();r&&a.setAttribute("nonce",r),t.head.appendChild(a)}},[])},Yo=function(s){var t=s.className,a=s.colorModel,r=s.color,i=r===void 0?a.defaultColor:r,l=s.onChange,o=mt(s,["className","colorModel","color","onChange"]),c=d.useRef(null);Qo(c);var u=Wo(a,i,l),x=u[0],p=u[1],f=Jt(["react-colorful",t]);return U.createElement("div",vs({},o,{ref:c,className:f}),U.createElement(Ho,{hsva:x,onChange:p}),U.createElement(Uo,{hue:x.h,onChange:p,className:"react-colorful__last-control"}))},Jo={defaultColor:"000",toHsva:Lo,fromHsva:function(s){return qo({h:s.h,s:s.s,v:s.v,a:1})},equal:Bo},Xo=function(s){return U.createElement(Yo,vs({},s,{colorModel:Jo}))},Zo=/^#?([0-9A-F]{3,8})$/i,ec=function(s){var t=s.color,a=t===void 0?"":t,r=s.onChange,i=s.onBlur,l=s.escape,o=s.validate,c=s.format,u=s.process,x=mt(s,["color","onChange","onBlur","escape","validate","format","process"]),p=d.useState(function(){return l(a)}),f=p[0],b=p[1],v=Is(r),y=Is(i),S=d.useCallback(function(z){var P=l(z.target.value);b(P),o(P)&&v(u?u(P):P)},[l,u,o,v]),C=d.useCallback(function(z){o(z.target.value)||b(l(a)),y(z)},[a,l,o,y]);return d.useEffect(function(){b(l(a))},[a,l]),U.createElement("input",vs({},x,{value:c?c(f):f,spellCheck:"false",onChange:S,onBlur:C}))},fa=function(s){return"#"+s},sc=function(s){var t=s.prefixed,a=s.alpha,r=mt(s,["prefixed","alpha"]),i=d.useCallback(function(o){return o.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),l=d.useCallback(function(o){return function(c,u){var x=Zo.exec(c),p=x?x[1].length:0;return p===3||p===6||!!u&&p===4||!!u&&p===8}(o,a)},[a]);return U.createElement(ec,vs({},r,{escape:i,format:t?fa:void 0,process:fa,validate:l}))};const tc=[{color:"rgb(255, 255, 255)",name:m("White")},{color:"rgb(239,245,245)",name:m("Solitude")},{color:"rgb(245,213,174)",name:m("Wheat")},{color:"rgb(253,227,167)",name:m("Cape Honey")},{color:"rgb(242,222,186)",name:m("Milk punch")},{color:"rgb(97,118,75)",name:m("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:m("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:m("Cosmic Latte")},{color:"rgb(233,119,119)",name:m("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:m("Sundown")},{color:"rgb(30,139,195)",name:m("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:m("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:m("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:m("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:m("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:m("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:m("Comet"),foreground:"rgb(255, 255, 255)"}];function ac({onChange:s,value:t,colors:a}){const r=a.map(i=>{const l=t===i;return e.jsx(Zs,{onClick:()=>{s==null||s(i)},className:w("relative block flex-shrink-0 w-26 h-26 border rounded",l&&"shadow-md"),style:{backgroundColor:i},children:l&&e.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return e.jsx("div",{className:"flex flex-wrap gap-6",children:r})}const nc=tc.map(({color:s})=>s).slice(0,14);function rc({defaultValue:s,onChange:t,colorPresets:a,showInput:r}){const[i,l]=d.useState(s),o=a||nc,c=qt({size:"sm"});return e.jsxs("div",{children:[e.jsx(Xo,{className:"!w-auto",color:i,onChange:u=>{t==null||t(u),l(u)}}),e.jsxs("div",{className:"px-12 py-20",children:[o&&e.jsx(ac,{colors:o,onChange:u=>{if(u){const x=Ha(u).toString("hex");t==null||t(x),l(x)}},value:i}),r&&e.jsx("div",{className:"pt-20",children:e.jsx(sc,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:i,onChange:u=>{t==null||t(u),l(u)}})})]})]})}function Xt({hideFooter:s=!1,showInput:t=!0}){const{close:a,value:r,setValue:i,initialValue:l}=K();return e.jsxs(J,{size:"2xs",children:[e.jsx(rc,{showInput:t,defaultValue:l||"",onChange:o=>i(o)}),!s&&e.jsxs(ae,{dividerTop:!0,children:[e.jsx(j,{variant:"text",size:"xs",onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",size:"xs",onClick:()=>a(r),children:e.jsx(n,{message:"Apply"})})]})]})}const ba=[{label:m("Accent"),value:"primary",bgColor:"bg-primary",previewBgColor:"text-primary"},{label:m("Background"),value:"bg",bgColor:"bg-background",previewBgColor:"text-background"},{label:m("Background alt"),value:"bg-alt",bgColor:"bg-alt",previewBgColor:"text-background-alt"},{label:m("Transparent"),value:"transparent",bgColor:"bg-transparent",previewBgColor:"text-transparent"}];function ic(){var o;const{themeIndex:s}=re(),{watch:t,setValue:a}=k(),r=`appearance.themes.${s}.values.--be-navbar-color`,i=t(r),l=(o=ba.find(({value:c})=>c===i))==null?void 0:o.previewBgColor;return e.jsxs(Le,{placement:"right",selectionMode:"single",selectedValue:i,onSelectionChange:c=>{a(r,c,{shouldDirty:!0})},children:[e.jsx(ue,{startIcon:e.jsx(Yt,{viewBox:"0 0 48 48",className:w("icon-lg",l)}),children:e.jsx(n,{message:"Navbar"})}),e.jsx(qe,{children:ba.map(({label:c,value:u,bgColor:x})=>e.jsx(g,{value:u,startIcon:e.jsx("div",{className:w("h-20 w-20 rounded border",x)}),children:e.jsx(n,{...c})},u))})]})}function lc({children:s,marginTop:t="mt-22"}){return e.jsx("div",{className:w("mb-6 text-sm font-semibold",t),children:s})}const oc=[{label:m("Background"),key:"--be-background"},{label:m("Background alt"),key:"--be-background-alt"},{label:m("Foreground"),key:"--be-foreground-base"},{label:m("Accent light"),key:"--be-primary-light"},{label:m("Accent"),key:"--be-primary"},{label:m("Accent dark"),key:"--be-primary-dark"},{label:m("Text on accent"),key:"--be-on-primary"},{label:m("Chip"),key:"--be-background-chip"}];function cc(){const s=ss(),{themeIndex:t}=re(),{getValues:a,watch:r}=k(),i=a(`appearance.themes.${+t}`),l=r(`appearance.themes.${+t}.font.family`);return d.useEffect(()=>{i||s("..",{relative:"path",replace:!0})},[s,i]),d.useEffect(()=>{let o=!1;return i!=null&&i.id&&il.then(()=>{o||R().preview.setActiveTheme(i.id)}),()=>{o=!0,R().preview.setActiveTheme(null)}},[i==null?void 0:i.id]),i?e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-10",children:[e.jsx(Eo,{}),e.jsx(Mo,{})]}),e.jsxs("div",{children:[e.jsx(ue,{elementType:O,to:"font",description:l||e.jsx(n,{message:"System"}),children:e.jsx(n,{message:"Font"})}),e.jsx(ue,{elementType:O,to:"radius",children:e.jsx(n,{message:"Rounding"})}),e.jsx(lc,{children:e.jsx(n,{message:"Colors"})}),e.jsx(ic,{}),oc.map(o=>e.jsx(dc,{colorName:o.key,label:e.jsx(n,{...o.label}),initialThemeValue:i.values[o.key],theme:i},o.key))]})]}):null}function dc({label:s,theme:t,colorName:a,initialThemeValue:r}){const{setValue:i}=k(),{themeIndex:l}=re(),[o,c]=d.useState(r),u=x=>{c(x),R().preview.setThemeValue(a,x)};return d.useEffect(()=>{c(r)},[r]),e.jsxs(A,{value:Si(o),type:"popover",placement:"right",offset:10,onValueChange:x=>{u(ga(x))},onClose:(x,{valueChanged:p,initialValue:f})=>{x&&p?i(`appearance.themes.${+l}.values.${a}`,ga(x),{shouldDirty:!0}):u(f)},children:[e.jsx(ue,{className:"capitalize",startIcon:e.jsx(Yt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:`rgb(${o})`}}),children:s}),e.jsx(Xt,{})]})}function oe({children:s,name:t,separatorBottom:a=!0,separatorTop:r=!0}){const{formState:{errors:i}}=k(),l=d.useRef(null),o=i[t];return d.useEffect(()=>{var c;o&&((c=l.current)==null||c.scrollIntoView({behavior:"smooth"}))},[o]),e.jsxs("div",{className:w(a&&"border-b mb-20 pb-20",r&&"border-t mt-20 pt-20",o&&"border-y-error"),ref:l,children:[s(!!o),o&&e.jsx("div",{className:"text-danger text-sm mt-20",dangerouslySetInnerHTML:{__html:o.message}})]})}function Ft({children:s,...t}){const{field:{onChange:a,onBlur:r,value:i=[],ref:l},fieldState:{invalid:o,error:c}}=xs({name:t.name}),u=d.useMemo(()=>{const p=i;return typeof p=="string"?JSON.parse(p):p},[i]),x={onChange:a,onBlur:r,value:u,invalid:o,errorMessage:c==null?void 0:c.message};return e.jsx(fi,{valueKey:"name",ref:l,...as(x,t)})}function uc(){return e.jsx(he,{title:e.jsx(n,{message:"Subscriptions"}),description:e.jsx(n,{message:"Configure gateway integration, accepted cards, invoices and other related settings."}),children:s=>e.jsx(mc,{data:s})})}function mc({data:s}){var r,i,l,o,c,u,x,p,f,b,v,y,S,C,z,P,E;const{trans:t}=$(),a=I({defaultValues:{client:{billing:{enable:((r=s.client.billing)==null?void 0:r.enable)??!1,accepted_cards:((i=s.client.billing)==null?void 0:i.accepted_cards)??[],paypal_test_mode:((l=s.client.billing)==null?void 0:l.paypal_test_mode)??!1,paypal:{enable:((c=(o=s.client.billing)==null?void 0:o.paypal)==null?void 0:c.enable)??!1},stripe:{enable:((x=(u=s.client.billing)==null?void 0:u.stripe)==null?void 0:x.enable)??!1},invoice:{address:((f=(p=s.client.billing)==null?void 0:p.invoice)==null?void 0:f.address)??"",notes:((v=(b=s.client.billing)==null?void 0:b.invoice)==null?void 0:v.notes)??""}}},server:{paypal_client_id:((y=s.server)==null?void 0:y.paypal_client_id)??"",paypal_secret:((S=s.server)==null?void 0:S.paypal_secret)??"",paypal_webhook_id:((C=s.server)==null?void 0:C.paypal_webhook_id)??"",stripe_key:((z=s.server)==null?void 0:z.stripe_key)??"",stripe_secret:((P=s.server)==null?void 0:P.stripe_secret)??"",stripe_webhook_secret:((E=s.server)==null?void 0:E.stripe_webhook_secret)??""}}});return e.jsx(ge,{form:a,children:e.jsxs(ct,{children:[e.jsxs(dt,{children:[e.jsx(Ue,{children:e.jsx(n,{message:"General"})}),e.jsx(Ue,{children:e.jsx(n,{message:"Invoices"})})]}),e.jsxs(Ba,{className:"pt-30",children:[e.jsxs(Ks,{children:[e.jsx(T,{name:"client.billing.enable",description:e.jsx(n,{message:"Enable or disable all subscription related functionality across the site."}),children:e.jsx(n,{message:"Enable subscriptions"})}),e.jsx(ye,{}),e.jsx(xc,{}),e.jsx(gc,{}),e.jsx(ye,{}),e.jsx(Ft,{label:e.jsx(n,{message:"Accepted cards"}),name:"client.billing.accepted_cards",placeholder:t({message:"Add new card..."})})]}),e.jsxs(Ks,{children:[e.jsx(h,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice address"}),name:"client.billing.invoice.address",className:"mb-30"}),e.jsx(h,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice notes"}),description:e.jsx(n,{message:"Default notes to show under `notes` section of user invoice. Optional."}),name:"client.billing.invoice.notes"})]})]})]})})}function xc(){const{watch:s}=k(),t=s("client.billing.paypal.enable");return e.jsxs("div",{className:"mb-30",children:[e.jsx(T,{name:"client.billing.paypal.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable PayPal payment gateway integration."}),e.jsx(bs,{className:"mt-6",link:"https://support.vebto.com/hc/articles/147/configuring-paypal"})]}),children:e.jsx(n,{message:"PayPal gateway"})}),t?e.jsx(oe,{name:"paypal_group",children:a=>e.jsxs(d.Fragment,{children:[e.jsx(h,{name:"server.paypal_client_id",label:e.jsx(n,{message:"PayPal Client ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(h,{name:"server.paypal_secret",label:e.jsx(n,{message:"PayPal Secret"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(h,{name:"server.paypal_webhook_id",label:e.jsx(n,{message:"PayPal Webhook ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(T,{name:"client.billing.paypal_test_mode",invalid:a,description:e.jsx("div",{children:e.jsx(n,{message:"Allows testing PayPal payments with sandbox accounts."})}),children:e.jsx(n,{message:"PayPal test mode"})})]})}):null]})}function gc(){const{watch:s}=k(),t=s("client.billing.stripe.enable");return e.jsxs(d.Fragment,{children:[e.jsx(T,{name:"client.billing.stripe.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable Stripe payment gateway integration."}),e.jsx(bs,{className:"mt-6",link:"https://support.vebto.com/hc/articles/148/configuring-stripe"})]}),children:e.jsx(n,{message:"Stripe gateway"})}),t?e.jsx(oe,{name:"stripe_group",separatorBottom:!1,children:a=>e.jsxs(d.Fragment,{children:[e.jsx(h,{name:"server.stripe_key",label:e.jsx(n,{message:"Stripe publishable key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(h,{name:"server.stripe_secret",label:e.jsx(n,{message:"Stripe secret key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(h,{name:"server.stripe_webhook_secret",label:e.jsx(n,{message:"Stripe webhook signing secret"}),className:"mb-20",invalid:a})]})}):null]})}function hc(){const s=_e(["timezones","localizations"]);return e.jsx(he,{title:e.jsx(n,{message:"Localization"}),description:e.jsx(n,{message:"Configure global date, time and language settings."}),isLoading:s.isLoading,children:t=>e.jsx(pc,{data:t,timezones:s.data.timezones,localizations:s.data.localizations})})}function pc({data:s,timezones:t,localizations:a}){var o;const r=_i(),{trans:i}=$(),l=I({defaultValues:{client:{dates:{default_timezone:s.client.dates.default_timezone??"auto",format:s.client.dates.format??"auto"},locale:{default:((o=s.client.locale)==null?void 0:o.default)??"auto"},i18n:{enable:s.client.i18n.enable??!0}}}});return e.jsxs(ge,{form:l,children:[e.jsxs(H,{className:"mb-30",required:!0,name:"client.dates.default_timezone",showSearchField:!0,selectionMode:"single",label:e.jsx(n,{message:"Default timezone"}),searchPlaceholder:i(m("Search timezones")),description:e.jsx(n,{message:"Which timezone should be selected by default for new users and guests."}),children:[e.jsx(g,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries(t).map(([c,u])=>e.jsx(Ea,{label:c,children:u.map(x=>e.jsx(g,{value:x.value,children:x.text},x.value))},c))]}),e.jsxs(H,{name:"client.locale.default",className:"mb-30",selectionMode:"single",label:e.jsx(n,{message:"Default language"}),description:e.jsx(n,{message:"Which localization should be selected by default for new users and guests."}),children:[e.jsx(g,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),a.map(c=>e.jsx(g,{value:c.language,capitalizeFirst:!0,children:c.name},c.language))]}),e.jsxs(Rt,{required:!0,className:"mb-30",size:"sm",name:"client.dates.format",orientation:"vertical",label:e.jsx(n,{message:"Date verbosity"}),description:e.jsx(n,{message:"Default verbosity for all dates displayed across the site. Month/day order and separators will be adjusted automatically, based on user's locale."}),children:[e.jsx(Ze,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries(_r).map(([c,u])=>e.jsx(Ze,{value:c,children:e.jsx(de,{date:r,options:u})},c))]}),e.jsx(T,{name:"client.i18n.enable",description:e.jsx(n,{message:"If disabled, site will always be shown in default language and user will not be able to change their locale."}),children:e.jsx(n,{message:"Enable translations"})})]})}function jc(){return e.jsx(he,{title:e.jsx(n,{message:"Authentication"}),description:e.jsx(n,{message:"Configure registration, social login and related 3rd party integrations."}),children:s=>e.jsx(fc,{data:s})})}function fc({data:s}){var a,r,i,l,o,c,u,x,p,f,b,v,y,S,C,z,P,E,ce,B,pe,Ne,ie;const t=I({defaultValues:{client:{require_email_confirmation:((a=s.client)==null?void 0:a.require_email_confirmation)??!1,registration:{disable:((r=s.client.registration)==null?void 0:r.disable)??!1},social:{requireAccount:((i=s.client.social)==null?void 0:i.requireAccount)??!1,compact_buttons:((l=s.client.social)==null?void 0:l.compact_buttons)??!1,envato:{enable:((c=(o=s.client.social)==null?void 0:o.envato)==null?void 0:c.enable)??!1},google:{enable:((x=(u=s.client.social)==null?void 0:u.google)==null?void 0:x.enable)??!1},facebook:{enable:((f=(p=s.client.social)==null?void 0:p.facebook)==null?void 0:f.enable)??!1},twitter:{enable:((v=(b=s.client.social)==null?void 0:b.twitter)==null?void 0:v.enable)??!1}},single_device_login:s.client.single_device_login??!1,auth:{domain_blacklist:((y=s.client.auth)==null?void 0:y.domain_blacklist)??""}},server:{envato_id:((S=s.server)==null?void 0:S.envato_id)??"",envato_secret:((C=s.server)==null?void 0:C.envato_secret)??"",envato_personal_token:((z=s.server)==null?void 0:z.envato_personal_token)??"",google_id:((P=s.server)==null?void 0:P.google_id)??"",google_secret:((E=s.server)==null?void 0:E.google_secret)??"",facebook_id:((ce=s.server)==null?void 0:ce.facebook_id)??"",facebook_secret:((B=s.server)==null?void 0:B.facebook_secret)??"",twitter_id:((pe=s.server)==null?void 0:pe.twitter_id)??"",twitter_secret:((Ne=s.server)==null?void 0:Ne.twitter_secret)??"",mail_setup:((ie=s.server)==null?void 0:ie.mail_setup)??!1}}});return e.jsxs(ge,{form:t,children:[e.jsx(vc,{}),e.jsx(T,{className:"mb-24",name:"client.registration.disable",description:e.jsx(n,{message:"All registration related functionality will be disabled and hidden from users."}),children:e.jsx(n,{message:"Disable registration"})}),e.jsx(T,{className:"mb-24",name:"client.social.requireAccount",description:e.jsx(n,{message:"If enabled, user will only be able to login via particular social site, if they have connected it from their account settings page."}),children:e.jsx(n,{message:"Social login requires existing account"})}),e.jsx(T,{className:"mb-24",name:"client.single_device_login",description:e.jsx(n,{message:"Only allow one device to be logged into user account at the same time."}),children:e.jsx(n,{message:"Single device login"})}),e.jsx(T,{name:"client.social.compact_buttons",description:e.jsx(n,{message:"Use compact design for social login buttons."}),children:e.jsx(n,{message:"Compact buttons"})}),e.jsx(yc,{}),e.jsx(wc,{}),e.jsx(_c,{}),e.jsx(Sc,{}),e.jsx(ye,{}),e.jsx(h,{inputElementType:"textarea",rows:3,className:"mt-24",name:"client.auth.domain_blacklist",label:e.jsx(n,{message:"Domain blacklist"}),description:e.jsx(n,{message:"Comma separated list of domains. Users will not be able to register or login using any email adress from specified domains."})})]})}function bc(){const{watch:s}=k();return s("server.mail_setup")?null:e.jsx("p",{className:"mt-10 rounded-panel border p-10 text-sm text-danger",children:e.jsx(n,{message:"Outgoing mail method needs to be setup before enabling this setting. <a>Fix now</a>",values:{a:a=>e.jsx(j,{elementType:O,variant:"outline",size:"xs",display:"flex",className:"mt-10 max-w-max",to:"/admin/settings/outgoing-email",children:a})}})})}function vc(){return e.jsx(T,{className:"mb-30",name:"client.require_email_confirmation",description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Require newly registered users to validate their email address before being able to login."}),e.jsx(bc,{})]}),children:e.jsx(n,{message:"Require email confirmation"})})}function yc(){var r;const{watch:s}=k(),t=xe(),a=s("client.social.envato.enable");return(r=t.envato)!=null&&r.enable?e.jsx(oe,{separatorBottom:!1,name:"envato_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsx(T,{invalid:i,name:"client.social.envato.enable",description:e.jsx(n,{message:"Enable logging into the site via envato."}),children:e.jsx(n,{message:"Envato login"})}),!!a&&e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:i,className:"mt-30",name:"server.envato_id",label:e.jsx(n,{message:"Envato ID"}),required:!0}),e.jsx(h,{invalid:i,className:"mt-30",name:"server.envato_secret",label:e.jsx(n,{message:"Envato secret"}),required:!0}),e.jsx(h,{invalid:i,className:"mt-30",name:"server.envato_personal_token",label:e.jsx(n,{message:"Envato personal token"}),required:!0})]})]})}):null}function wc(){const{watch:s}=k(),t=s("client.social.google.enable");return e.jsx(oe,{name:"google_group",children:a=>e.jsxs(e.Fragment,{children:[e.jsx(T,{invalid:a,name:"client.social.google.enable",description:e.jsx(n,{message:"Enable logging into the site via google."}),children:e.jsx(n,{message:"Google login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:a,className:"mt-30",name:"server.google_id",label:e.jsx(n,{message:"Google client ID"}),required:!0}),e.jsx(h,{className:"mt-30",name:"server.google_secret",label:e.jsx(n,{message:"Google client secret"}),required:!0})]})]})})}function _c(){const{watch:s}=k(),t=s("client.social.facebook.enable");return e.jsx(oe,{name:"facebook_group",separatorTop:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(T,{invalid:a,name:"client.social.facebook.enable",description:e.jsx(n,{message:"Enable logging into the site via facebook."}),children:e.jsx(n,{message:"Facebook login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:a,className:"mt-30",name:"server.facebook_id",label:e.jsx(n,{message:"Facebook app ID"}),required:!0}),e.jsx(h,{invalid:a,className:"mt-30",name:"server.facebook_secret",label:e.jsx(n,{message:"Facebook app secret"}),required:!0})]})]})})}function Sc(){const{watch:s}=k(),t=s("client.social.twitter.enable");return e.jsx(oe,{name:"twitter_group",separatorTop:!1,separatorBottom:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(T,{invalid:a,name:"client.social.twitter.enable",description:e.jsx(n,{message:"Enable logging into the site via twitter."}),children:e.jsx(n,{message:"Twitter login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:a,className:"mt-30",name:"server.twitter_id",label:e.jsx(n,{message:"Twitter ID"}),required:!0}),e.jsx(h,{invalid:a,className:"mt-30",name:"server.twitter_secret",label:e.jsx(n,{message:"Twitter secret"}),required:!0})]})]})})}const kc=["B","KB","MB","GB","TB","PB"];function va(s,t){if(s==null)return 0;switch(t){case"KB":return s*1024;case"MB":return s*1024**2;case"GB":return s*1024**3;case"TB":return s*1024**4;case"PB":return s*1024**5;default:return s}}const Nc=0x630000000000,Cs=U.forwardRef(({name:s,...t},a)=>{const{field:{onChange:r,onBlur:i,value:l="",ref:o},fieldState:{invalid:c,error:u}}=xs({name:s}),[x,p]=d.useState(""),[f,b]=d.useState("MB");d.useEffect(()=>{if(l==null||l===""){p("");return}const{amount:S,unit:C}=Cc({bytes:Math.min(l,Nc)});b(C||"MB"),p(Number.isNaN(S)?"":S)},[l,f]);const v={onChange:S=>{const C=parseInt(S.target.value);if(Number.isNaN(C))r(C);else{const z=va(parseInt(S.target.value),f);r(z)}},onBlur:i,value:x,invalid:c,errorMessage:u==null?void 0:u.message,inputRef:o},y=e.jsx(Ds,{minWidth:"min-w-80",selectionMode:"single",selectedValue:f,disabled:!l,inputRadius:"rounded-l-none rounded-r-input",onSelectionChange:S=>{const C=va(x||0,S);r(C)},children:kc.slice(0,5).map(S=>e.jsx(g,{value:S,children:S==="B"?"Bytes":S},S))});return e.jsx(We,{...as(v,t),type:"number",ref:a,endAppend:y})}),Cc=Sr(({bytes:s})=>{const t=kr(s);if(!t)return{amount:"",unit:"MB"};let a=parseInt(t.split(" ")[0]);return a=Math.round(a),{amount:a,unit:t.split(" ")[1]}});function Fc(){return F.get("uploads/server-max-file-size").then(s=>s.data)}function zc(){return Ae({queryKey:["MaxServerUploadSize"],queryFn:()=>Fc()})}function Ic(){return L({mutationFn:s=>Ac(s),onError:s=>Y(s)})}function Ac(s){return F.post("settings/uploading/dropbox-refresh-token",s).then(t=>t.data)}function Pc({isInvalid:s}){const{watch:t,setValue:a}=k(),r=t("server.storage_dropbox_app_key"),i=t("server.storage_dropbox_app_secret");return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_key",label:e.jsx(n,{message:"Dropbox application key"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_secret",label:e.jsx(n,{message:"Dropbox application secret"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-20",name:"server.storage_dropbox_refresh_token",label:e.jsx(n,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(A,{type:"modal",onClose:l=>{l&&a("server.storage_dropbox_refresh_token",l)},children:[e.jsx(j,{variant:"outline",color:"primary",size:"xs",disabled:!r||!i,children:e.jsx(n,{message:"Get dropbox refresh token"})}),e.jsx(Ec,{appKey:r,appSecret:i})]})]})}function Ec({appKey:s,appSecret:t}){const a=I(),{formId:r,close:i}=K(),l=Ic();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Connected dropbox account"})}),e.jsx(Z,{children:e.jsxs(ne,{id:r,form:a,onSubmit:o=>{l.mutate({app_key:s,app_secret:t,access_code:o.accessCode},{onSuccess:c=>{i(c.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 border-b pb-20",children:[e.jsx("div",{className:"mb-10 text-sm text-muted",children:e.jsx(n,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(j,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(n,{message:"Get access code"})})]}),e.jsx(h,{name:"accessCode",label:e.jsx(n,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{i()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",form:r,type:"submit",disabled:!s||!t||l.isPending,children:e.jsx(n,{message:"Connect"})})]})]})}function Tc(){const{trans:s}=$();return L({mutationFn:()=>Dc(),onSuccess:()=>{q(s(m("CORS file updated")))},onError:t=>Y(t)})}function Dc(){return F.post("s3/cors/upload").then(s=>s.data)}function Mc(){return e.jsx(he,{title:e.jsx(n,{message:"Uploading"}),description:e.jsx(n,{message:"Configure size and type of files that users are able to upload. This will affect all uploads across the site."}),children:s=>e.jsx(Lc,{data:s})})}function Lc({data:s}){const{trans:t}=$(),a=I({defaultValues:{client:{uploads:{max_size:s.client.uploads.max_size??0,chunk_size:s.client.uploads.chunk_size??0,available_space:s.client.uploads.available_space??0,allowed_extensions:s.client.uploads.allowed_extensions??[],blocked_extensions:s.client.uploads.blocked_extensions??[],s3_direct_upload:s.client.uploads.s3_direct_upload??!1}},server:{static_file_delivery:s.server.static_file_delivery??"",uploads_disk_driver:s.server.uploads_disk_driver??"local",public_disk_driver:s.server.public_disk_driver??"local",storage_s3_key:s.server.storage_s3_key??"",storage_s3_secret:s.server.storage_s3_secret??"",storage_s3_region:s.server.storage_s3_region??"",storage_s3_bucket:s.server.storage_s3_bucket??"",storage_s3_endpoint:s.server.storage_s3_endpoint??"",storage_digitalocean_key:s.server.storage_digitalocean_key??"",storage_digitalocean_secret:s.server.storage_digitalocean_secret??"",storage_digitalocean_region:s.server.storage_digitalocean_region??"",storage_digitalocean_bucket:s.server.storage_digitalocean_bucket??"",storage_backblaze_key:s.server.storage_backblaze_key??"",storage_backblaze_secret:s.server.storage_backblaze_secret??"",storage_backblaze_region:s.server.storage_backblaze_region??"",storage_backblaze_bucket:s.server.storage_backblaze_bucket??"",storage_ftp_host:s.server.storage_ftp_host??"",storage_ftp_username:s.server.storage_ftp_username??"",storage_ftp_password:s.server.storage_ftp_password??"",storage_ftp_root:s.server.storage_ftp_root??"",storage_ftp_port:s.server.storage_ftp_port??"21",storage_ftp_passive:s.server.storage_ftp_passive??!1,storage_ftp_ssl:s.server.storage_ftp_ssl??!1,storage_dropbox_app_key:s.server.storage_dropbox_app_key??"",storage_dropbox_app_secret:s.server.storage_dropbox_app_secret??"",storage_dropbox_refresh_token:s.server.storage_dropbox_refresh_token??""}}});return e.jsxs(ge,{form:a,children:[e.jsx(Rc,{}),e.jsx($c,{}),e.jsx(Vc,{}),e.jsx(oe,{name:"static_delivery_group",children:r=>e.jsxs(Rt,{invalid:r,size:"sm",name:"server.static_file_delivery",orientation:"vertical",label:e.jsx(n,{message:"File delivery optimization"}),description:e.jsx(n,{message:"Both X-Sendfile and X-Accel need to be enabled on the server first. When enabled, it will reduce server memory and CPU usage when previewing or downloading files, especially for large files."}),children:[e.jsx(Ze,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(Ze,{value:"xsendfile",children:e.jsx(n,{message:"X-Sendfile (Apache)"})}),e.jsx(Ze,{value:"xaccel",children:e.jsx(n,{message:"X-Accel (Nginx)"})})]})}),e.jsx(Cs,{className:"mb-30",name:"client.uploads.chunk_size",min:1,label:e.jsx(n,{message:"Chunk size"}),placeholder:"Infinity",description:e.jsx(n,{message:"Size (in bytes) for each file chunk. It should only be changed if there is a maximum upload size on your server or proxy (for example cloudflare). If chunk size is larger then limit on the server, uploads will fail."})}),e.jsx(qc,{}),e.jsx(ye,{}),e.jsx(Cs,{min:1,name:"client.uploads.max_size",className:"mb-30",label:e.jsx(n,{message:"Maximum file size"}),description:e.jsx(n,{message:"Maximum size (in bytes) for a single file user can upload."})}),e.jsx(Cs,{min:1,name:"client.uploads.available_space",className:"mb-30",label:e.jsx(n,{message:"Available space"}),description:e.jsx(n,{message:"Disk space (in bytes) each user uploads are allowed to take up. This can be overridden per user."})}),e.jsx(Ft,{name:"client.uploads.allowed_extensions",className:"mb-30",label:e.jsx(n,{message:"Allowed extensions"}),placeholder:t(m("Add extension...")),description:e.jsx(n,{message:"List of allowed file types (jpg, mp3, pdf etc.). Leave empty to allow all file types."})}),e.jsx(Ft,{name:"client.uploads.blocked_extensions",label:e.jsx(n,{message:"Blocked extensions"}),placeholder:t(m("Add extension...")),description:e.jsx(n,{message:"Prevent uploading of these file types, even if they are allowed above."})})]})}function qc(){const{data:s}=zc();return e.jsx(js,{color:"warning",description:e.jsx(n,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:t=>e.jsx("b",{children:t})}})})}function Rc(){const{watch:s,clearErrors:t}=k();return s("server.uploads_disk_driver")?e.jsxs(H,{className:"mb-30",selectionMode:"single",name:"server.uploads_disk_driver",label:e.jsx(n,{message:"User Uploads Storage Method"}),description:e.jsx(n,{message:"Where should user private file uploads be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(g,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(g,{value:"ftp",children:"FTP"}),e.jsx(g,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(g,{value:"backblaze_s3",children:"Backblaze"}),e.jsx(g,{value:"s3",children:"Amazon S3 (Or compatible service)"}),e.jsx(g,{value:"dropbox",children:"Dropbox"}),e.jsx(g,{value:"rackspace",children:"Rackspace"})]}):null}function $c(){const{watch:s,clearErrors:t}=k();return s("server.public_disk_driver")?e.jsxs(H,{label:e.jsx(n,{message:"Public Uploads Storage Method"}),selectionMode:"single",name:"server.public_disk_driver",description:e.jsx(n,{message:"Where should user public uploads (like avatars) be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(g,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(g,{value:"s3",children:"Amazon S3"}),e.jsx(g,{value:"ftp",children:"FTP"}),e.jsx(g,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(g,{value:"backblaze_s3",children:"Backblaze"})]}):null}function Vc(){const{watch:s}=k(),t=[s("server.uploads_disk_driver"),s("server.public_disk_driver")];return t[0]==="local"&&t[1]==="local"?null:e.jsx(oe,{separatorBottom:!1,name:"storage_group",children:a=>{if(t.includes("s3"))return e.jsx(Oc,{isInvalid:a});if(t.includes("ftp"))return e.jsx(Bc,{isInvalid:a});if(t.includes("dropbox"))return e.jsx(Pc,{isInvalid:a});if(t.includes("digitalocean_s3"))return e.jsx(Uc,{isInvalid:a});if(t.includes("backblaze_s3"))return e.jsx(Hc,{isInvalid:a})}})}function Oc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_s3_key",label:e.jsx(n,{message:"Amazon S3 key"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_s3_secret",label:e.jsx(n,{message:"Amazon S3 secret"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_s3_region",label:e.jsx(n,{message:"Amazon S3 region"}),placeholder:"us-east-1"}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_s3_bucket",label:e.jsx(n,{message:"Amazon S3 bucket"}),required:!0}),e.jsx(h,{invalid:s,name:"server.storage_s3_endpoint",label:e.jsx(n,{message:"Amazon S3 endpoint"}),description:e.jsx(n,{message:"Only change endpoint if you are using another S3 compatible storage service."})}),e.jsx(Zt,{invalid:s})]})}function Uc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_key",label:e.jsx(n,{message:"DigitalOcean key"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_secret",label:e.jsx(n,{message:"DigitalOcean secret"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_region",label:e.jsx(n,{message:"DigitalOcean region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-east-1",required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_bucket",label:e.jsx(n,{message:"DigitalOcean bucket"}),required:!0}),e.jsx(Zt,{invalid:s})]})}function Hc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_backblaze_key",label:e.jsx(n,{message:"Backblaze KeyID"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_backblaze_secret",label:e.jsx(n,{message:"Backblaze applicationKey"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_backblaze_region",label:e.jsx(n,{message:"Backblaze Region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-west-002",required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_backblaze_bucket",label:e.jsx(n,{message:"Backblaze bucket name"}),required:!0}),e.jsx(Zt,{invalid:s})]})}function Zt({invalid:s}){var i,l;const t=Tc(),{data:a}=ut(),r=((i=a==null?void 0:a.server.uploads_disk_driver)==null?void 0:i.endsWith("s3"))||((l=a==null?void 0:a.server.public_disk_driver)==null?void 0:l.endsWith("s3"));return e.jsxs(d.Fragment,{children:[e.jsx(T,{className:"mt-30",invalid:s,name:"client.uploads.s3_direct_upload",description:e.jsxs("div",{children:[e.jsx("p",{children:e.jsx(n,{message:"Upload files directly from the browser to s3 without going through the server. It will save on server bandwidth and should result in faster upload times. This should be enabled, unless storage provider does not support multipart uploads."})}),e.jsx("p",{className:"mt-10",children:e.jsx(n,{message:"If s3 provider is not configured to allow uploads from browser, this can be done automatically via CORS button below, when valid credentials are saved."})})]}),children:e.jsx(n,{message:"Direct upload"})}),e.jsx(j,{variant:"flat",color:"primary",size:"xs",className:"mt-20",onClick:()=>{t.mutate()},disabled:!r||t.isPending,children:e.jsx(n,{message:"Configure CORS"})})]})}function Bc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_ftp_host",label:e.jsx(n,{message:"FTP hostname"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_ftp_username",label:e.jsx(n,{message:"FTP username"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_ftp_password",label:e.jsx(n,{message:"FTP password"}),type:"password",required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_ftp_root",label:e.jsx(n,{message:"FTP directory"}),placeholder:"/"}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.storage_ftp_port",label:e.jsx(n,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(T,{invalid:s,name:"server.storage_ftp_passive",className:"mb-30",children:e.jsx(n,{message:"Passive"})}),e.jsx(T,{invalid:s,name:"server.storage_ftp_ssl",children:e.jsx(n,{message:"SSL"})})]})}function Wc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.mailgun_domain",label:e.jsx(n,{message:"Mailgun domain"}),description:e.jsx(n,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.mailgun_secret",label:e.jsx(n,{message:"Mailgun API key"}),description:e.jsx(n,{message:"Should start with `key-`"}),required:!0}),e.jsx(h,{invalid:s,name:"server.mailgun_endpoint",label:e.jsx(n,{message:"Mailgun endpoint"}),description:e.jsx(n,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function Kc({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.mail_host",label:e.jsx(n,{message:"SMTP host"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.mail_username",label:e.jsx(n,{message:"SMTP username"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",type:"password",name:"server.mail_password",label:e.jsx(n,{message:"SMTP password"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",type:"number",name:"server.mail_port",label:e.jsx(n,{message:"SMTP port"})}),e.jsxs(H,{selectionMode:"single",invalid:s,className:"mb-30",name:"server.mail_encryption",label:e.jsx(n,{message:"SMTP encryption"}),children:[e.jsx(g,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(g,{value:"tls",children:e.jsx(n,{message:"TLS"})}),e.jsx(g,{value:"ssl",children:e.jsx(n,{message:"SSL"})})]})]})}function Gc({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.ses_key",label:e.jsx(n,{message:"SES key"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.ses_secret",label:e.jsx(n,{message:"SES secret"}),required:!0}),e.jsx(h,{invalid:s,name:"server.ses_region",label:e.jsx(n,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function Qc({isInvalid:s}){return e.jsx(h,{invalid:s,name:"server.postmark_token",label:e.jsx(n,{message:"Postmark token"}),required:!0})}const ya=M([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function Yc(){const{watch:s,setValue:t}=k(),{connectSocial:a}=Nr(),r=s("server.connectedGmailAccount"),i=async()=>{const c=await a("secure/settings/mail/gmail/connect");if((c==null?void 0:c.status)==="SUCCESS"){const u=c.callbackData.profile.email;t("server.connectedGmailAccount",u),q(m("Connected gmail account: :email",{values:{email:u}}))}},l=e.jsx(j,{variant:"outline",color:"primary",startIcon:e.jsx(ya,{}),onClick:()=>i(),children:e.jsx(n,{message:"Connect gmail account"})}),o=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(ya,{size:"lg"}),r,e.jsx(j,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>i(),children:e.jsx(n,{message:"Reconnect"})})]});return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Gmail account"})}),r?o:l]})}function Jc(){const{watch:s,clearErrors:t}=k(),a=s("server.mail_driver"),r=[];return a==="mailgun"&&r.push(Wc),a==="smtp"&&r.push(Kc),a==="ses"&&r.push(Gc),a==="postmark"&&r.push(Qc),a==="gmailApi"&&r.push(Yc),e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(H,{onSelectionChange:()=>{t()},invalid:i,selectionMode:"single",name:"server.mail_driver",label:e.jsx(n,{message:"Outgoing mail method"}),description:e.jsxs("div",{children:[e.jsx(n,{message:"Which method should be used for sending outgoing application emails (like registration confirmation)"}),e.jsx(bs,{className:"mt-8",link:"https://support.vebto.com/hc/articles/42/44/76/outgoing-emails"})]}),children:[e.jsx(g,{value:"mailgun",children:"Mailgun"}),e.jsx(g,{value:"gmailApi",children:"Gmail Api"}),e.jsx(g,{value:"smtp",children:"SMTP"}),e.jsx(g,{value:"postmark",children:"Postmark"}),e.jsx(g,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(g,{value:"sendmail",children:"SendMail"}),e.jsx(g,{value:"log",children:"Log (Email will be saved to error log)"})]}),r.length?e.jsx("div",{className:"mt-30",children:r.map((l,o)=>e.jsx(l,{isInvalid:i},o))}):null]})})}function Xc(){return e.jsx(he,{title:e.jsx(n,{message:"Outgoing email settings"}),description:e.jsx(n,{message:"Change outgoing email handlers, email credentials and other related settings."}),children:s=>e.jsx(Zc,{data:s})})}function Zc({data:s}){var a;const t=I({defaultValues:{server:{mail_from_address:s.server.mail_from_address??"",mail_from_name:s.server.mail_from_name??"",mail_driver:s.server.mail_driver??"",mailgun_domain:s.server.mailgun_domain??"",mailgun_secret:s.server.mailgun_secret??"",mailgun_endpoint:s.server.mailgun_endpoint??"",mail_host:s.server.mail_host??"",mail_username:s.server.mail_username??"",mail_password:s.server.mail_password??"",mail_port:s.server.mail_port??"",mail_encryption:s.server.mail_encryption??"",ses_key:s.server.ses_key??"",ses_secret:s.server.ses_secret??"",ses_region:s.server.ses_region??"",postmark_token:s.server.postmark_token??"",connectedGmailAccount:s.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((a=s.client.mail)==null?void 0:a.contact_page_address)??""}}}});return e.jsxs(ge,{form:t,children:[e.jsx(h,{id:"outgoing-emails",className:"mb-30",type:"email",name:"server.mail_from_address",label:e.jsx(n,{message:"From address"}),description:e.jsx(n,{message:"All outgoing application emails will be sent from this email address."}),required:!0}),e.jsx(ed,{}),e.jsx(h,{className:"mb-30",name:"server.mail_from_name",label:e.jsx(n,{message:"From name"}),description:e.jsx(n,{message:"All outgoing application emails will be sent using this name."}),required:!0}),e.jsx(js,{color:"warning",description:e.jsx(n,{message:"Your selected mail method must be authorized to send emails using this address and name."})}),e.jsx(ye,{}),e.jsx(Jc,{})]})}function ed(){const{base_url:s}=xe(),t=`${s}/contact`,a=e.jsx(st,{href:t,children:t});return e.jsx(h,{className:"mb-30",type:"email",name:"client.mail.contact_page_address",label:e.jsx(n,{message:"Contact page address"}),description:e.jsx(n,{values:{contactPageUrl:a},message:"Where emails from :contactPageUrl page should be sent to."})})}function sd(){return F.post("cache/flush").then(s=>s.data)}function td(){return L({mutationFn:()=>sd(),onSuccess:()=>{q(m("Cache cleared"))},onError:s=>Y(s)})}function ad(){return e.jsx(he,{title:e.jsx(n,{message:"Cache settings"}),description:e.jsx(n,{message:"Select cache provider and manually clear cache."}),children:s=>e.jsx(nd,{data:s})})}function nd({data:s}){const t=td(),a=I({defaultValues:{server:{cache_driver:s.server.cache_driver??"file",memcached_host:s.server.memcached_host??"",memcached_port:s.server.memcached_port??""}}});return e.jsxs(ge,{form:a,children:[e.jsx(rd,{}),e.jsx(j,{type:"button",variant:"outline",size:"xs",color:"primary",disabled:t.isPending,onClick:()=>t.mutate(),children:e.jsx(n,{message:"Clear cache"})}),e.jsx(js,{color:"warning",className:"mt-30",description:e.jsx(n,{message:'"File" is the best option for most cases and should not be changed, unless you are familiar with another cache method and have it set up on the server already.'})})]})}function rd(){const{watch:s,clearErrors:t}=k(),a=s("server.cache_driver");let r=null;return a==="memcached"&&(r=id),e.jsx(oe,{separatorTop:!1,name:"cache_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(H,{invalid:i,onSelectionChange:()=>t(),selectionMode:"single",name:"server.cache_driver",label:e.jsx(n,{message:"Cache method"}),description:e.jsx(n,{message:"Which method should be used for storing and retrieving cached items."}),children:[e.jsx(g,{value:"file",children:e.jsx(n,{message:"File (Default)"})}),e.jsx(g,{value:"array",children:e.jsx(n,{message:"None"})}),e.jsx(g,{value:"apc",children:"APC"}),e.jsx(g,{value:"memcached",children:"Memcached"}),e.jsx(g,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function id({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.memcached_host",label:e.jsx(n,{message:"Memcached host"}),required:!0}),e.jsx(h,{invalid:s,type:"number",name:"server.memcached_port",label:e.jsx(n,{message:"Memcached port"}),required:!0})]})}function ld(){return e.jsx(he,{title:e.jsx(n,{message:"Error logging"}),description:e.jsx(n,{message:"Configure site error logging and related 3rd party integrations."}),children:s=>e.jsx(od,{data:s})})}function od({data:s}){const t=I({defaultValues:{server:{sentry_dsn:s.server.sentry_dsn??""}}});return e.jsxs(ge,{form:t,children:[e.jsx(cd,{}),e.jsx(js,{className:"mt-30",color:"positive",description:e.jsx(n,{values:{a:a=>e.jsx(st,{href:"https://sentry.io",children:a})},message:"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production."})})]})}function cd(){const{clearErrors:s}=k();return e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"logging_group",children:t=>e.jsx(h,{onChange:()=>s(),invalid:t,name:"server.sentry_dsn",type:"url",minLength:30,label:e.jsx(n,{message:"Sentry DSN"})})})}function dd(){return Ae({queryKey:["queue-stats"],queryFn:()=>ud(),refetchInterval:5e3})}function ud(){return F.get("horizon/api/stats").then(s=>s.data)}function md(){return e.jsx(he,{title:e.jsx(n,{message:"Queue"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Queues allow to defer time consuming tasks, such as sending an email, until a later time. They are fully optional and do not provide any additional functionality."}),e.jsx(bs,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(xd,{data:s})})}function xd({data:s}){const t=I({defaultValues:{server:{queue_driver:s.server.queue_driver??"sync",sqs_queue_key:s.server.sqs_queue_key??"",sqs_queue_secret:s.server.sqs_queue_secret??"",sqs_queue_prefix:s.server.sqs_queue_prefix??"",sqs_queue_name:s.server.sqs_queue_name??"",sqs_queue_region:s.server.sqs_queue_region??""}}}),a=t.watch("server.queue_driver");return e.jsxs(ge,{form:t,children:[a!=="sync"&&e.jsx(gd,{}),e.jsx(hd,{})]})}function gd(){const{base_url:s}=xe(),{data:t}=dd(),a=t==null?void 0:t.status;return e.jsx("div",{className:"mb-30 flex h-32 items-center justify-between gap-14",children:a&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:w("min-w-108 flex w-max items-center gap-8 rounded-button px-10 py-4 text-sm capitalize",a==="running"&&"bg-positive-lighter",a==="inactive"&&"bg-danger-lighter",a==="paused"&&"bg-chip"),children:[e.jsx("div",{className:w("h-10 w-10 rounded-full",a==="running"&&"bg-positive",a==="inactive"&&"bg-danger",a==="paused"&&"bg-chip")}),e.jsx(n,{message:`Worker ${a}`})]}),e.jsx(j,{variant:"outline",size:"xs",elementType:"a",href:`${s}/horizon`,target:"_blank",endIcon:e.jsx(Ni,{}),children:e.jsx(n,{message:"Monitor"})})]})})}function hd(){const{watch:s,clearErrors:t}=k(),a=s("server.queue_driver");let r=null;return a==="sqs"&&(r=pd),e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(H,{invalid:i,onSelectionChange:()=>{t()},selectionMode:"single",name:"server.queue_driver",label:e.jsx(n,{message:"Queue method"}),required:!0,children:[e.jsx(g,{value:"sync",children:e.jsx(n,{message:"None (Default)"})}),e.jsx(g,{value:"beanstalkd",children:"Beanstalkd"}),e.jsx(g,{value:"database",children:e.jsx(n,{message:"Database"})}),e.jsx(g,{value:"sqs",children:e.jsx(n,{message:"SQS (Amazon simple queue service)"})}),e.jsx(g,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function pd({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(h,{invalid:s,className:"mb-30",name:"server.sqs_queue_key",label:e.jsx(n,{message:"SQS queue key"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.sqs_queue_secret",label:e.jsx(n,{message:"SQS queue secret"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.sqs_queue_prefix",label:e.jsx(n,{message:"SQS queue prefix"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.sqs_queue_name",label:e.jsx(n,{message:"SQS queue name"}),required:!0}),e.jsx(h,{invalid:s,className:"mb-30",name:"server.sqs_queue_region",label:e.jsx(n,{message:"SQS queue region"}),required:!0})]})}function jd(){return e.jsx(he,{title:e.jsx(n,{message:"Websockets"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Configure websockets provider responsible for all realtime functionality on the site."}),e.jsx(bs,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(fd,{data:s})})}function fd({data:s}){const t=I({defaultValues:{server:{broadcast_driver:s.server.broadcast_driver??"null",pusher_app_id:s.server.pusher_app_id??"",pusher_app_key:s.server.pusher_app_key??"",pusher_app_secret:s.server.pusher_app_secret??"",pusher_app_cluster:s.server.pusher_app_cluster??"",reverb_app_id:s.server.reverb_app_id??"",reverb_app_key:s.server.reverb_app_key??"",reverb_app_secret:s.server.reverb_app_secret??"",reverb_host:s.server.reverb_host??"",reverb_port:s.server.reverb_port??"",reverb_scheme:s.server.reverb_scheme??"https",ably_app_id:s.server.ably_app_id??"",ably_app_key:s.server.ably_app_key??"",ably_app_secret:s.server.ably_app_secret??""}}});return e.jsx(ge,{form:t,children:e.jsx(bd,{})})}function bd(){const{clearErrors:s,control:t}=k(),a=Es({control:t,name:"server.broadcast_driver"});let r=null;return a==="pusher"?r=vd:a==="ably"&&(r=yd),e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(H,{invalid:i,onSelectionChange:()=>s(),selectionMode:"single",name:"server.broadcast_driver",label:e.jsx(n,{message:"Websockets provider"}),required:!0,children:[e.jsx(g,{value:"null",children:e.jsx(n,{message:"None (Disabled)"})}),e.jsx(g,{value:"reverb",children:"Local"}),e.jsx(g,{value:"pusher",children:"Pusher"}),e.jsx(g,{value:"ably",children:e.jsx(n,{message:"Ably"})})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function vd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{name:"server.pusher_app_id",label:e.jsx(n,{message:"Pusher app ID"}),className:"mb-30",required:!0}),e.jsx(h,{name:"server.pusher_app_key",label:e.jsx(n,{message:"Pusher app key"}),className:"mb-30",required:!0}),e.jsx(h,{name:"server.pusher_app_secret",label:e.jsx(n,{message:"Pusher app secret"}),className:"mb-30",required:!0}),e.jsx(h,{name:"server.pusher_app_cluster",label:e.jsx(n,{message:"Pusher app cluster"}),className:"mb-30",placeholder:"mt1",required:!0})]})}function yd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(h,{name:"server.ably_app_id",label:e.jsx(n,{message:"Ably app ID"}),className:"mb-30",required:!0}),e.jsx(h,{name:"server.ably_app_key",label:e.jsx(n,{message:"Ably app key"}),className:"mb-30",required:!0}),e.jsx(h,{name:"server.ably_app_secret",label:e.jsx(n,{message:"Ably app secret"}),className:"mb-30",required:!0})]})}function wd(){return e.jsx(he,{title:e.jsx(n,{message:"Recaptcha"}),description:e.jsx(n,{message:"Configure google recaptcha integration and credentials."}),children:s=>e.jsx(_d,{data:s})})}function _d({data:s}){var r,i,l,o,c,u,x,p;const{settings:t}=d.useContext(ns),a=I({defaultValues:{client:{recaptcha:{enable:{link_creation:((i=(r=s.client.recaptcha)==null?void 0:r.enable)==null?void 0:i.link_creation)??!1,contact:((o=(l=s.client.recaptcha)==null?void 0:l.enable)==null?void 0:o.contact)??!1,register:((u=(c=s.client.recaptcha)==null?void 0:c.enable)==null?void 0:u.register)??!1},site_key:((x=s.client.recaptcha)==null?void 0:x.site_key)??"",secret_key:((p=s.client.recaptcha)==null?void 0:p.secret_key)??""}}}});return e.jsxs(ge,{form:a,children:[(t==null?void 0:t.showRecaptchaLinkSwitch)&&e.jsx(T,{className:"mb-30",name:"client.recaptcha.enable.link_creation",description:e.jsx(n,{message:"Enable recaptcha integration when creating links from homepage or user dashboard."}),children:e.jsx(n,{message:"Link creation"})}),e.jsx(T,{className:"mb-30",name:"client.recaptcha.enable.contact",description:e.jsx(n,{message:'Enable recaptcha integration for "contact us" page.'}),children:e.jsx(n,{message:"Contact page"})}),e.jsx(T,{className:"mb-30",name:"client.recaptcha.enable.register",description:e.jsx(n,{message:"Enable recaptcha integration for registration page."}),children:e.jsx(n,{message:"Registration page"})}),e.jsx(Sd,{})]})}function Sd(){const{clearErrors:s}=k();return e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"recaptcha_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"client.recaptcha.site_key",label:e.jsx(n,{message:"Recaptcha v3 site key"})}),e.jsx(h,{onChange:()=>{s()},invalid:t,name:"client.recaptcha.secret_key",label:e.jsx(n,{message:"Recaptcha v3 secret key"})})]})})}const kd=U.forwardRef((s,t)=>{const a=Da(t),{fieldProps:r,inputProps:i}=Cr({...s,focusRef:a}),l=qt(s);return e.jsx(Fr,{ref:t,fieldClassNames:l,...r,children:e.jsx("input",{type:"file",ref:a,...i,className:w(l.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})})});function Nd({name:s,...t}){const{field:{onChange:a,onBlur:r,ref:i},fieldState:{invalid:l,error:o}}=xs({name:s}),[c,u]=U.useState(""),x={onChange:p=>{var f;a((f=p.target.files)==null?void 0:f[0]),u(p.target.value)},onBlur:r,value:c,invalid:l,errorMessage:o==null?void 0:o.message};return e.jsx(kd,{ref:i,...as(x,t)})}function Cd(){return e.jsx(he,{title:e.jsx(n,{message:"Analytics"}),description:e.jsx(n,{message:"Configure google analytics integration and credentials."}),children:s=>e.jsx(Fd,{data:s})})}function Fd({data:s}){var a,r;const t=I({defaultValues:{files:{certificate:""},server:{analytics_property_id:s.server.analytics_property_id??""},client:{analytics:{tracking_code:((a=s.client.analytics)==null?void 0:a.tracking_code)??"",gchart_api_key:((r=s.client.analytics)==null?void 0:r.gchart_api_key)??""}}}});return e.jsx(ge,{form:t,children:e.jsx(zd,{})})}function zd(){const{clearErrors:s}=k();return e.jsx(oe,{separatorTop:!1,separatorBottom:!1,name:"analytics_group",children:t=>e.jsxs(d.Fragment,{children:[e.jsx(Nd,{className:"mb-30",onChange:()=>s(),invalid:t,name:"files.certificate",accept:".json",label:e.jsx(n,{message:"Google service account key file (.json)"})}),e.jsx(h,{className:"mb-30",onChange:()=>s(),invalid:t,name:"server.analytics_property_id",type:"number",label:e.jsx(n,{message:"Google analytics property ID"})}),e.jsx(h,{className:"mb-30",onChange:()=>s(),invalid:t,name:"client.analytics.tracking_code",placeholder:"G-******",min:"1",max:"20",description:e.jsx(n,{message:"Google analytics measurement ID only, not the whole javascript snippet."}),label:e.jsx(n,{message:"Google tag manager measurement ID"})}),e.jsx(h,{name:"client.analytics.gchart_api_key",label:e.jsx(n,{message:"Google maps javascript API key"}),description:e.jsx(n,{message:"Only required in order to show world geochart on integrated analytics pages."})})]})})}function jn(){const[s,t]=d.useState(!1),a=d.useRef(),r=d.useCallback(i=>{var l;if(i){const o=new IntersectionObserver(([c])=>t(c.intersectionRatio<1),{threshold:[1]});a.current=o,o.observe(i)}else a.current&&((l=a.current)==null||l.disconnect())},[]);return{isSticky:s,sentinelRef:r}}function xt({onSubmit:s,form:t,title:a,subTitle:r,children:i,actions:l,backButton:o,isLoading:c=!1,disableSaveWhenNotDirty:u=!1,wrapInContainer:x=!0,submitButtonText:p,variant:f="sticky"}){const{isSticky:b,sentinelRef:v}=jn(),y=u?Object.keys(t.formState.dirtyFields).length:!0,S=e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:c||!y,children:p??e.jsx(n,{message:"Save"})});return e.jsxs(ne,{onSubmit:s,onBeforeSubmit:()=>t.clearErrors(),form:t,className:"relative",children:[f==="sticky"&&e.jsx("div",{ref:v}),e.jsx(fn,{wrapInContainer:x,startActions:o,subTitle:r,endActions:e.jsxs(d.Fragment,{children:[l,f==="sticky"&&S]}),className:w(b&&"bg shadow",f==="sticky"&&"sticky"),children:a}),e.jsx("div",{className:x?"container mx-auto px-24 pb-24":void 0,children:e.jsx("div",{className:"rounded",children:i})}),f==="popup"&&e.jsx(vn,{saveButton:S,isLoading:c})]})}function fn({className:s,wrapInContainer:t,children:a,subTitle:r,startActions:i,endActions:l}){return e.jsx("div",{className:w("top-0 z-10 my-12 transition-shadow md:my-24",s),children:e.jsxs("div",{className:w("flex items-center gap-24 py-14 md:items-start",t&&"container mx-auto px-24"),children:[i,e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis md:mr-64",children:[e.jsx("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-xl md:text-3xl",children:a}),r&&e.jsx("div",{className:"mt-4",children:r})]}),e.jsx("div",{className:"mr-auto"}),l]})})}function bn({label:s,children:t,margin:a="mb-48",labelMargin:r="mb-16"}){return e.jsxs("section",{className:w(a),children:[e.jsx("div",{className:w(r,"text-lg font-semibold"),children:s}),t]})}function vn({saveButton:s,isLoading:t}){const{formState:a,reset:r}=k();return e.jsx(Ts,{children:a.isDirty&&e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"invisible h-92"}),e.jsxs(He.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.2},className:"fixed bottom-0 left-0 right-0 z-20 flex items-center justify-center gap-16 border-t bg px-12 py-28 shadow-[rgba(0,0,0,0.2)_0px_0px_10px]",children:[e.jsx(j,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),s??e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:t,children:e.jsx(n,{message:"Save changes"})})]},"dirty-panel")]})})}function Id({user:s,badge:t}){var i,l;const a=s.banned_at!==null,r=(l=(i=s.bans)==null?void 0:i[0])==null?void 0:l.comment;return e.jsxs("div",{className:"container mx-auto mb-44 mt-38 px-24",children:[e.jsxs("div",{className:"flex gap-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ad,{user:s}),e.jsx("div",{className:"absolute right-0 top-2",children:t})]}),e.jsxs("div",{children:[!!s.roles.length&&e.jsx(Js,{radius:"rounded-panel",size:"sm",className:"mb-6 w-max",children:s.roles[0].name}),e.jsx("h1",{className:"text-2xl font-semibold",children:s.name}),e.jsx("div",{className:"mt-4 text-sm text-muted",children:s.email})]})]}),a&&e.jsxs("div",{className:"mt-24 flex w-max items-center gap-8 rounded-panel bg-danger-lighter px-10 py-6 text-sm text-danger-darker",children:[e.jsx(zr,{size:"sm"}),r?e.jsx(n,{message:"Suspended: :reason",values:{reason:r}}):e.jsx(n,{message:"Suspended"})]})]})}function Ad({user:s}){const t=Ir({user:s}),a=Ar({user:s}),[r,i]=d.useState(s.image);return e.jsx(us,{children:e.jsx(Pr,{value:r,diskPrefix:"avatars",variant:"avatar",stretchPreview:!0,previewSize:"w-90 h-90",placeholderIcon:e.jsx(Ys,{label:s.name,size:"w-full h-full text-2xl",circle:!0}),showRemoveButton:!0,onChange:l=>{const o={onSuccess:()=>i(l)};l?t.mutate({url:l},o):a.mutate(void 0,o)}})})}function Pd(s){const{pathname:t}=Me(),a=t.split("/").pop();return d.useState(()=>{const r=s.findIndex(i=>i.uri===a);return r===-1?0:r})}const Ed=[{uri:"details",label:m("Details")},{uri:"permissions",label:m("Roles & permissions")},{uri:"security",label:m("Security")},{uri:"date",label:m("Date & time")},{uri:"api",label:m("API")}];function Td({user:s,tabs:t}){const{user:a,hasPermission:r}=Ma(),{api:i}=xe(),l=(i==null?void 0:i.integrated)&&r("api.access"),o=d.useMemo(()=>t.filter(x=>!(x.uri==="api"&&!l||x.uri==="security"&&s.id!==(a==null?void 0:a.id))),[s.id,a==null?void 0:a.id,l,t]),[c,u]=Pd(o);return e.jsx("div",{className:"container mx-auto px-24",children:e.jsxs(ct,{selectedTab:c,onTabChange:u,overflow:"overflow-visible",children:[e.jsx(dt,{className:"mb-24",children:o.map(x=>e.jsx(Ue,{elementType:O,to:x.uri,children:e.jsx(n,{...x.label})},x.uri))}),e.jsx(Be,{context:s})]})})}function Dd(){const{trans:s}=$();return L({mutationFn:t=>Md(t.userId),onSuccess:async()=>{await D.invalidateQueries({queryKey:G("users")}),q(s(m("User deleted")))},onError:t=>Y(t)})}function Md(s){return F.delete(`users/${s}`).then(t=>t.data)}function Ld({user:s,children:t}){const a=Xa(s.id),r=s.banned_at!==null,[i,l]=d.useState(!1);return e.jsxs(d.Fragment,{children:[e.jsx(A,{type:"modal",isOpen:i,onOpenChange:l,children:e.jsx(qd,{userId:s.id})}),e.jsxs(Le,{children:[e.jsx(j,{className:"ml-auto",variant:"outline",size:"sm",endIcon:e.jsx(La,{}),children:e.jsx(n,{message:"Actions"})}),e.jsxs(qe,{children:[t,e.jsx(g,{value:"toggleSuspension",onSelected:()=>{r?a.mutate():tt(Ja,{user:s})},children:r?e.jsx(n,{message:"Unsuspend user"}):e.jsx(n,{message:"Suspend user"})}),e.jsx(g,{value:"delete",onSelected:()=>{l(!0)},children:e.jsx(n,{message:"Delete user"})})]})]})]})}function qd({userId:s}){const t=Dd(),{close:a}=K(),r=le();return e.jsx(me,{isDanger:!0,isLoading:t.isPending,title:e.jsx(n,{message:"Delete user"}),confirm:e.jsx(n,{message:"Delete"}),body:e.jsx(n,{message:"Are you sure you want to delete this user?"}),onConfirm:()=>{t.mutate({userId:s},{onSuccess:()=>{a(),r("..",{relative:"path"})}})}})}function Rd(){var a;const{userId:s}=re(),t=Er(s,{with:["subscriptions","roles","permissions","bans"]});return e.jsxs(d.Fragment,{children:[e.jsx(Xs,{children:e.jsx(n,{message:"Edit user"})}),(a=t.data)!=null&&a.user?e.jsx($d,{user:t.data.user}):e.jsx(qa,{query:t})]})}function $d({user:s}){return e.jsxs(d.Fragment,{children:[e.jsx(fn,{wrapInContainer:!0,startActions:e.jsx(_,{elementType:O,to:"..",relative:"path",size:"sm",iconSize:"md",children:e.jsx(Ka,{})}),endActions:e.jsx(Ld,{user:s}),children:e.jsx(n,{message:"Edit user"})}),e.jsx(Id,{user:s}),e.jsx(Td,{tabs:Ed,user:s})]})}const Vd=M(e.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"}),"TranslateOutlined"),ea=s=>{const t=["getLocaleWithLines"];return s!=null&&t.push(s),t};function Od(s){return Ae({queryKey:ea(s),queryFn:()=>Ud(s),staleTime:1/0})}function Ud(s){return F.get(`localizations/${s}`).then(t=>t.data)}function Hd({id:s,...t}){return F.put(`localizations/${s}`,t).then(a=>a.data)}function yn(s){return L({mutationFn:t=>Hd(t),onSuccess:()=>{q(m("Localization updated")),D.invalidateQueries({queryKey:G("localizations")}),D.invalidateQueries({queryKey:ea()})},onError:t=>s?be(t,s):Y(t)})}function Bd({localization:s}){const{trans:t}=$(),{formId:a,close:r}=K(),i=I({defaultValues:{id:s.id,name:s.name,language:s.language}}),{data:l}=_e(["languages"]),o=(l==null?void 0:l.languages)||[],c=yn(i);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Update localization"})}),e.jsx(Z,{children:e.jsxs(ne,{form:i,id:a,onSubmit:u=>{c.mutate(u,{onSuccess:r})},children:[e.jsx(h,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(H,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:t(m("Search languages")),children:o.map(u=>e.jsx(g,{value:u.code,children:u.name},u.code))})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:r,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:a,disabled:c.isPending,children:e.jsx(n,{message:"Save"})})]})]})}function Wd(s){return F.post("localizations",s).then(t=>t.data)}function Kd(s){const t=Qs();return L({mutationFn:a=>Wd(a),onSuccess:()=>{q(m("Localization created")),t.invalidateQueries({queryKey:G("localizations")})},onError:a=>be(a,s)})}function Gd(){const{trans:s}=$(),{formId:t,close:a}=K(),r=I({defaultValues:{language:"en"}}),{data:i}=_e(["languages"]),l=(i==null?void 0:i.languages)||[],o=Kd(r);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Create localization"})}),e.jsx(Z,{children:e.jsxs(ne,{form:r,id:t,onSubmit:c=>{o.mutate(c,{onSuccess:a})},children:[e.jsx(h,{autoFocus:!0,name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(H,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:s(m("Search languages")),children:l.map(c=>e.jsx(g,{value:c.code,children:c.name},c.code))})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:a,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:t,disabled:o.isPending,children:e.jsx(n,{message:"Save"})})]})]})}const Qd=""+new URL("around-the-world-df9b11c5.svg",import.meta.url).href;function wn(){return L({mutationFn:s=>Yd(s),onSuccess:async()=>{await D.invalidateQueries({queryKey:G("localizations")}),await D.invalidateQueries({queryKey:ea()}),q(m("Translation file uploaded"))},onError:s=>Y(s)})}function Yd({localeId:s,file:t}){const a=new FormData;return a.append("file",t.native),F.post(`localizations/${s}/upload`,a).then(r=>r.data)}const Jd=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(n,{message:"Language code"}),body:s=>s.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(Q,{label:e.jsx(n,{message:"Translate"}),children:e.jsx(_,{size:"md",elementType:O,to:`${s.id}/translate`,children:e.jsx(Vd,{})})}),e.jsx(us,{children:e.jsx(eu,{locale:s})})]})}];function Xd(){return e.jsx(ke,{endpoint:"localizations",title:e.jsx(n,{message:"Localizations"}),columns:Jd,actions:e.jsx(Zd,{}),selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:Qd,title:e.jsx(n,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching localizations"})})})}function Zd(){return e.jsx(d.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new localization"})}),e.jsx(Gd,{})]})})}function eu({locale:s}){const t=wn();return e.jsxs(Le,{children:[e.jsx(_,{disabled:t.isPending,children:e.jsx(nt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"translate",elementType:O,to:`${s.id}/translate`,children:e.jsx(n,{message:"Translate"})}),e.jsx(g,{value:"rename",onSelected:()=>tt(Bd,{localization:s}),children:e.jsx(n,{message:"Rename"})}),e.jsx(g,{value:"download",onSelected:()=>at(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(g,{value:"upload",onSelected:async()=>{const a=await Ra({types:[$t.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function su(){const{formId:s,close:t}=K(),a=I();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Add translation"})}),e.jsx(Z,{children:e.jsxs(ne,{form:a,id:s,onSubmit:r=>{t(r)},children:[e.jsx(js,{className:"mb-30",title:e.jsx(n,{message:"Add a new translation, if it does not exist already."}),description:e.jsx(n,{message:"This should only need to be done for things like custom menu items."})}),e.jsx(h,{inputElementType:"textarea",rows:2,autoFocus:!0,name:"key",label:e.jsx(n,{message:"Translation key"}),className:"mb-30",required:!0}),e.jsx(h,{inputElementType:"textarea",rows:2,name:"value",label:e.jsx(n,{message:"Translation value"}),required:!0})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:t,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:s,children:e.jsx(n,{message:"Add"})})]})]})}function tu(){const{localeId:s}=re(),{data:t,isLoading:a}=Od(s),r=t==null?void 0:t.localization;return a||!r?e.jsx(gs,{}):e.jsx(au,{localization:r})}function au({localization:s}){const[t,a]=d.useState(s.lines||{}),r=le(),i=yn(),[l,o]=d.useState("");return e.jsxs("form",{className:"flex h-full flex-col p-14 md:p-24",onSubmit:c=>{c.preventDefault(),i.mutate({id:s.id,lines:t},{onSuccess:()=>{r("/admin/localizations")}})},children:[e.jsx(nu,{localization:s,setLines:a,lines:t,searchQuery:l,setSearchQuery:o,isLoading:i.isPending}),e.jsx(ru,{lines:t,setLines:a,searchQuery:l})]})}function nu({localization:s,searchQuery:t,setSearchQuery:a,isLoading:r,lines:i,setLines:l}){const o=le(),c=es(),{trans:u}=$();return e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs(pi,{size:"lg",className:"mb-16",children:[e.jsx(la,{onSelected:()=>{o("/admin/localizations")},children:e.jsx(n,{message:"Localizations"})}),e.jsx(la,{children:e.jsx(n,{message:":locale translations",values:{locale:s.name}})})]}),e.jsxs("div",{className:"mb-24 flex items-center gap-32 md:gap-12",children:[e.jsx("div",{className:"max-w-440 flex-auto",children:e.jsx(We,{value:t,onChange:x=>a(x.target.value),startAdornment:e.jsx(Vt,{}),placeholder:u({message:"Type to search..."})})}),e.jsxs(A,{type:"modal",onClose:x=>{if(x){const p={...i};p[x.key]=x.value,l(p)}},children:[!c&&e.jsx(j,{className:"ml-auto",variant:"outline",color:"primary",startIcon:e.jsx(we,{}),children:e.jsx(n,{message:"Add new"})}),e.jsx(su,{})]}),e.jsx(iu,{locale:s}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:r,children:c?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Save translations"})})]})]})}function ru({searchQuery:s,lines:t,setLines:a}){const r=d.useMemo(()=>Object.entries(t).filter(([o,c])=>{const u=s==null?void 0:s.toLowerCase();return!u||(o==null?void 0:o.toLowerCase().includes(u))||(c==null?void 0:c.toLowerCase().includes(u))}),[t,s]),i=d.useRef(null),l=ui({count:r.length,getScrollElement:()=>i.current,estimateSize:()=>123});return e.jsx("div",{className:"flex-auto overflow-y-auto",ref:i,children:e.jsx("div",{className:"relative w-full",style:{height:`${l.getTotalSize()}px`},children:l.getVirtualItems().map(o=>{const[c,u]=r[o.index];return e.jsx("div",{className:"absolute left-0 top-0 w-full",style:{height:`${o.size}px`,transform:`translateY(${o.start}px)`},children:e.jsxs("div",{className:"mb-10 rounded border md:mr-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-24 border-b px-10 py-2",children:[e.jsx("label",{className:"flex-auto text-xs font-semibold",htmlFor:c,children:c}),e.jsx(_,{size:"xs",className:"text-muted",onClick:()=>{const x={...t};delete x[c],a(x)},children:e.jsx(De,{})})]}),e.jsx("div",{children:e.jsx("textarea",{id:c,name:c,defaultValue:u,className:"block w-full resize-none rounded bg-inherit p-10 text-sm outline-none focus-visible:ring-2",rows:2,onChange:x=>{const p={...t};p[c]=x.target.value,a(p)}})})]})},c)})})})}function iu({locale:s}){const t=wn();return e.jsxs(Le,{children:[e.jsx(_,{variant:"outline",size:"sm",color:"primary",disabled:t.isPending,children:e.jsx(nt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"download",onSelected:()=>at(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(g,{value:"upload",onSelected:async()=>{const a=await Ra({types:[$t.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function lu(s){const{close:t}=K(),{image:a,images:r}=s,[i,l]=Tt(s.activeIndex,s.defaultActiveIndex,s.onActiveIndexChange),o=a||(r==null?void 0:r[i]);return e.jsx(J,{size:"fullscreenTakeover",background:"bg-black/80",children:e.jsxs(Z,{padding:"p-0",className:"h-full w-full",children:[e.jsx(_,{size:"lg",color:"paper",className:"absolute right-0 top-0 z-20 text-white",onClick:()=>{t()},children:e.jsx(De,{})}),e.jsxs("div",{className:"relative flex h-full w-full items-center justify-center p-40",children:[r!=null&&r.length?e.jsx(_,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 left-20 top-0 my-auto",disabled:i<1,onClick:()=>{l(i-1)},children:e.jsx(Dt,{})}):null,e.jsx("img",{src:o,alt:"",className:"max-h-full w-auto object-contain shadow"}),r!=null&&r.length?e.jsx(_,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 right-20 top-0 my-auto",disabled:i+1===(r==null?void 0:r.length),onClick:()=>{l(i+1)},children:e.jsx(ot,{})}):null]})]})})}function ou(){var t;const s=ut();return e.jsxs("div",{className:"container mx-auto p-12 md:p-24",children:[e.jsx(Xs,{children:e.jsx(n,{message:"Ads"})}),e.jsx("h1",{className:"mb-20 text-2xl font-light md:mb-40 md:text-3xl",children:e.jsx(n,{message:"Predefined Ad slots"})}),s.isLoading?e.jsx(Ps,{isIndeterminate:!0}):e.jsx(cu,{defaultValues:((t=s.data)==null?void 0:t.client.ads)||{}})]})}function cu({defaultValues:s}){const{admin:{ads:t}}=d.useContext(ns),a=I({defaultValues:{client:{ads:s}}}),r=xn(a);return e.jsxs(ne,{form:a,onSubmit:i=>{r.mutate(i)},children:[t.map(i=>e.jsx(du,{adConfig:i},i.slot)),e.jsx(T,{name:"client.ads.disable",className:"mb-30",description:e.jsx(n,{message:"Disable all add related functionality across the site."}),children:e.jsx(n,{message:"Disable ads"})}),e.jsx(j,{type:"submit",variant:"flat",color:"primary",disabled:r.isPending,children:e.jsx(n,{message:"Save"})})]})}function du({adConfig:s}){return e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(h,{className:"mb-30 flex-auto",name:`client.${s.slot}`,inputElementType:"textarea",rows:8,label:e.jsx(n,{...s.description})}),e.jsxs(A,{type:"modal",children:[e.jsx("button",{type:"button",className:"cursor-zoom-in overflow-hidden rounded outline-none transition hover:scale-105 focus-visible:ring max-md:hidden",children:e.jsx("img",{src:s.image,className:"h-[186px] w-auto border",alt:"Ad slot example"})}),e.jsx(lu,{image:s.image})]})]})}function uu(){const s=Qe(a=>{var r;return(r=a.config)==null?void 0:r.sections}),t=d.useMemo(()=>s?Object.entries(s||[]).map(([a,r])=>({...r,key:a})).sort((a,r)=>((a==null?void 0:a.position)||1)-((r==null?void 0:r.position)||1)):[],[s]);return e.jsx(Gt,{children:t.map(a=>e.jsx(ue,{to:a.key,elementType:Mt,children:e.jsx(n,{...a.label})},a.key))})}const mu=[{key:"type",label:m("Type"),description:m("Type of the role"),defaultOperator:se.ne,control:{type:Ie.Select,defaultValue:"01",options:[{key:"01",label:m("Sitewide"),value:"sitewide"},{key:"02",label:m("Workspace"),value:"workspace"}]}},rs({description:m("Date role was created")}),ps({description:m("Date role was last updated")})],xu=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Role"}),body:s=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(n,{message:s.name})}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.description?e.jsx(n,{message:s.description}):void 0})]})},{key:"type",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(O,{to:`${s.id}/edit`,children:e.jsx(_,{size:"md",className:"text-muted",children:e.jsx(Ke,{})})})}];function gu(){return e.jsx(ke,{endpoint:"roles",title:e.jsx(n,{message:"Roles"}),columns:xu,filters:mu,actions:e.jsx(hu,{}),selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:Fs,title:e.jsx(n,{message:"No roles have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching roles"})})})}function hu(){return e.jsxs(d.Fragment,{children:[e.jsx(Qa,{endpoint:"roles/csv/export"}),e.jsx(Pe,{elementType:O,to:"new",children:e.jsx(n,{message:"Add new role"})})]})}const _n=s=>`roles/${s}`;function pu(){const{roleId:s}=re();return Ae({queryKey:[_n(s)],queryFn:()=>ju(s)})}function ju(s){return F.get(_n(s)).then(t=>t.data)}const Sn=s=>`roles/${s}`;function fu(){const{trans:s}=$(),t=le();return L({mutationFn:a=>bu(a),onSuccess:a=>{q(s(m("Role updated"))),D.invalidateQueries({queryKey:[Sn(a.role.id)]}),D.invalidateQueries({queryKey:G("roles")}),t("/admin/roles")},onError:a=>Y(a)})}function bu({id:s,...t}){return F.put(Sn(s),t).then(a=>a.data)}function kn({isInternal:s=!1}){const{trans:t}=$(),{workspaces:a}=xe(),{watch:r,setValue:i}=k(),l=r("type");return e.jsxs(e.Fragment,{children:[e.jsx(h,{label:e.jsx(n,{message:"Name"}),name:"name",className:"mb-20",required:!0}),e.jsx(h,{label:e.jsx(n,{message:"Description"}),name:"description",inputElementType:"textarea",placeholder:t(m("Role description...")),rows:4,className:"mb-20"}),a.integrated&&e.jsxs(H,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",className:"mb-20",description:e.jsx(n,{message:"Whether this role will be assigned to users globally on the site or only within workspaces."}),children:[e.jsx(g,{value:"sitewide",children:e.jsx(n,{message:"Sitewide"})}),e.jsx(g,{value:"workspace",children:e.jsx(n,{message:"Workspace"})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(T,{name:"default",className:"mb-20",description:e.jsx(n,{message:"Assign this role to new users automatically."}),children:e.jsx(n,{message:"Default"})}),l==="sitewide"&&e.jsx(T,{name:"guests",description:e.jsx(n,{message:"Assign this role to guests (not logged in users)."}),children:e.jsx(n,{message:"Guests"})})]}),e.jsxs("div",{className:"mb-14 mt-30 flex items-end justify-between gap-12",children:[e.jsx("h2",{className:"text-lg leading-tight",children:e.jsx(n,{message:"Permissions"})}),e.jsx(j,{variant:"outline",size:"xs",onClick:()=>i("permissions",[]),children:e.jsx(n,{message:"Remove all"})})]}),e.jsx(Wt,{name:"permissions",valueListKey:l==="sitewide"?"permissions":"workspacePermissions"})]})}function vu({multiple:s=!1,endpoint:t="normalized-models/user"}){var f;const{close:a}=K(),[r,i]=d.useState(""),{trans:l}=$(),o=Va(t,{query:r,perPage:14}),c=((f=o.data)==null?void 0:f.results)||[],[u,x]=d.useState([]),p=e.jsx(Pt,{className:"pt-20",size:"sm",title:e.jsx(n,{message:"No matching users"}),description:e.jsx(n,{message:"Try another search query"}),image:e.jsx(Et,{src:Fs})});return e.jsxs(J,{children:[e.jsx(ee,{children:s?e.jsx(n,{message:"Select users"}):e.jsx(n,{message:"Select a user"})}),e.jsxs(Z,{children:[e.jsx(We,{autoFocus:!0,size:"sm",className:"mb-20",startAdornment:e.jsx(Vt,{}),placeholder:l(m("Search for user by name or email")),value:r,onChange:b=>{i(b.target.value)}}),!o.isLoading&&!c.length&&p,e.jsx("div",{className:"grid grid-cols-2 gap-x-10",children:c.map(b=>e.jsx(yu,{isSelected:!!u.find(v=>v.id===b.id),user:b,onSelected:v=>{s?u.find(y=>y.id===v.id)?x(u.filter(y=>y.id!==v.id)):x([...u,v]):a(v)}},b.id))})]}),s&&e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",onClick:()=>a(u),disabled:!u.length,children:e.jsx(n,{message:"Select"})})]})]})}function yu({user:s,onSelected:t,isSelected:a}){return e.jsxs("div",{className:w("flex items-center gap-10 rounded border-1 p-10 outline-none ring-offset-4 focus-visible:ring",a?"border-primary bg-primary/5 hover:bg-primary/10":"border-transparent hover:bg-hover"),role:"button",tabIndex:0,onClick:()=>{t(s)},onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t(s))},children:[e.jsx(Ys,{src:s.image,label:s.name,circle:!0}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-hidden text-ellipsis text-muted",children:s.description})]})]},s.id)}function wu(s){return L({mutationFn:({userIds:t})=>_u({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{q(m("Removed [one 1 user|other :count users] from “{role}“",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>Y(t)})}function _u({roleId:s,userIds:t}){return F.post(`roles/${s}/remove-users`,{userIds:t}).then(a=>a.data)}function Su(s){return L({mutationFn:({userIds:t})=>ku({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{q(m("Assigned [one 1 user|other :count users] to {role}",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>Y(t)})}function ku({roleId:s,userIds:t}){return F.post(`roles/${s}/add-users`,{userIds:t}).then(a=>a.data)}const Nn={key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(Ge,{image:s.image,label:s.name,description:s.email})},Nu=[Nn,{key:"first_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"First name"}),body:s=>s.first_name},{key:"last_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last name"}),body:s=>s.last_name},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Assigned at"}),body:s=>e.jsx(de,{date:s.created_at})}],Cu=[Nn];function Fu({role:s}){const t=es();return s.guests||s.type==="workspace"?e.jsx("div",{className:"pb-10 pt-30",children:e.jsx(fe,{image:Fs,title:e.jsx(n,{message:"Users can't be assigned to this role"})})}):e.jsx(yi,{endpoint:"users",columns:t?Cu:Nu,queryParams:{roleId:`${s.id}`},actions:e.jsx(zu,{role:s}),selectedActions:e.jsx(Iu,{role:s}),emptyStateMessage:e.jsx(fe,{image:Fs,title:e.jsx(n,{message:"No users have been assigned to this role yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})}function zu({role:s}){const t=Su(s);return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate({userIds:[a.id]},{onSuccess:()=>{D.invalidateQueries({queryKey:G("users",{roleId:`${s.id}`})})}})},children:[e.jsx(j,{variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(n,{message:"Assign user"})}),e.jsx(vu,{})]})}function Iu({role:s}){const t=wu(s),{selectedRows:a}=lt();return e.jsxs(A,{type:"modal",onClose:r=>{r&&t.mutate({userIds:a},{onSuccess:()=>{D.invalidateQueries({queryKey:G("users",{roleId:`${s.id}`})})}})},children:[e.jsx(j,{variant:"flat",color:"danger",disabled:t.isPending,children:e.jsx(n,{message:"Remove users"})}),e.jsx(me,{title:e.jsx(n,{message:"Remove [one 1 user|other :count users] from “:name“ role?",values:{count:a.length,name:s.name}}),body:e.jsx(n,{message:"This will permanently remove the users."}),confirm:e.jsx(n,{message:"Remove"}),isDanger:!0})]})}function Au(){const s=pu();return s.status!=="success"?e.jsx(gs,{}):e.jsx(Pu,{role:s.data.role})}function Pu({role:s}){const t=I({defaultValues:s}),a=fu();return e.jsx(xt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ role",values:{name:s.name}}),isLoading:a.isPending,children:e.jsxs(ct,{isLazy:!0,children:[e.jsxs(dt,{children:[e.jsx(Ue,{children:e.jsx(n,{message:"Settings"})}),e.jsx(Ue,{children:e.jsx(n,{message:"Users"})})]}),e.jsxs(Ba,{className:"pt-20",children:[e.jsx(Ks,{children:e.jsx(kn,{isInternal:s.internal})}),e.jsx(Ks,{children:e.jsx(Fu,{role:s})})]})]})})}const Eu="roles";function Tu(s){const{trans:t}=$();return L({mutationFn:a=>Du(a),onSuccess:()=>{q(t(m("Created new role"))),D.invalidateQueries({queryKey:G("roles")})},onError:a=>be(a,s)})}function Du({id:s,...t}){return F.post(Eu,t).then(a=>a.data)}function Mu(){const s=I({defaultValues:{type:"sitewide"}}),t=Tu(s),a=le();return e.jsx(xt,{form:s,onSubmit:r=>{t.mutate(r,{onSuccess:i=>{a(`/admin/roles/${i.role.id}/edit`)}})},title:e.jsx(n,{message:"Add new role"}),isLoading:t.isPending,children:e.jsx(kn,{})})}const Lu=s=>[{key:"type",label:m("Type"),description:m("Type of the tag"),defaultOperator:se.ne,control:{type:Ie.Select,defaultValue:s[0].name,options:s.map(t=>({key:t.name,label:m(t.name),value:t.name}))}},rs({description:m("Date tag was created")}),ps({description:m("Date tag was last updated")})],Cn=""+new URL("software-engineer-ba026106.svg",import.meta.url).href;function Fn({form:s,onSubmit:t,formId:a}){const{tags:{types:r}}=d.useContext(ns),i=s.watch("type"),l=!!r.find(o=>o.name===i&&o.system);return e.jsxs(ne,{id:a,form:s,onSubmit:t,children:[e.jsx(h,{name:"name",label:e.jsx(n,{message:"Name"}),description:e.jsx(n,{message:"Unique tag identifier."}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(h,{name:"display_name",label:e.jsx(n,{message:"Display name"}),description:e.jsx(n,{message:"User friendly tag name."}),className:"mb-20"}),e.jsx(H,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",disabled:l,children:r.filter(o=>!o.system).map(o=>e.jsx(g,{value:o.name,children:e.jsx(n,{message:o.name})},o.name))})]})}var zn={exports:{}};(function(s,t){(function(a,r,i){s.exports=i(),s.exports.default=i()})("slugify",Tr,function(){var a=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(l,o){if(typeof l!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var c=r[o.locale]||{},u=o.replacement===void 0?"-":o.replacement,x=o.trim===void 0?!0:o.trim,p=l.normalize().split("").reduce(function(f,b){var v=c[b];return v===void 0&&(v=a[b]),v===void 0&&(v=b),v===u&&(v=" "),f+v.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(p=p.replace(/[^A-Za-z0-9\s]/g,"")),x&&(p=p.trim()),p=p.replace(/\s+/g,u),o.lower&&(p=p.toLowerCase()),p}return i.extend=function(l){Object.assign(a,l)},i})})(zn);var qu=zn.exports;const Ru=Dr(qu);function sa(s,t="-",a=!1){if(!s)return s;let r=Ru(s,{lower:!0,replacement:t,strict:a,remove:/[*+~.()'"!:@?\|/\\#]/g});return r||(r=s.replace(/\s+/g,"-").toLowerCase()),r}function $u(s){const{trans:t}=$();return L({mutationFn:a=>Vu(a),onSuccess:()=>{q(t(m("Tag created"))),D.invalidateQueries({queryKey:G("tags")})},onError:a=>be(a,s)})}function Vu(s){return s.name=sa(s.name),F.post("tags",s).then(t=>t.data)}function Ou(){const{close:s,formId:t}=K(),{tags:{types:a}}=d.useContext(ns),r=I({defaultValues:{type:a[0].name}}),i=$u(r);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(Z,{children:e.jsx(Fn,{formId:t,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{s()}})}})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:t,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}function Uu(s){const{trans:t}=$();return L({mutationFn:a=>Hu(a),onSuccess:()=>{q(t(m("Tag updated"))),D.invalidateQueries({queryKey:G("tags")})},onError:a=>be(a,s)})}function Hu({id:s,...t}){return t.name&&(t.name=sa(t.name)),F.put(`tags/${s}`,t).then(a=>a.data)}function Bu({tag:s}){const{close:t,formId:a}=K(),r=I({defaultValues:{id:s.id,name:s.name,display_name:s.display_name,type:s.type}}),i=Uu(r);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Update “:name“ tag",values:{name:s.name}})}),e.jsx(Z,{children:e.jsx(Fn,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const Wu=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"type",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>s.type},{key:"display_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Display name"}),body:s=>s.display_name},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(A,{type:"modal",children:[e.jsx(_,{size:"md",className:"text-muted",children:e.jsx(Ke,{})}),e.jsx(Bu,{tag:s})]})}];function Ku(){const{tags:s}=d.useContext(ns),t=d.useMemo(()=>Lu(s.types),[s.types]);return e.jsx(ke,{endpoint:"tags",title:e.jsx(n,{message:"Tags"}),columns:Wu,filters:t,actions:e.jsx(Gu,{}),selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:Cn,title:e.jsx(n,{message:"No tags have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching tags"})})})}function Gu(){return e.jsx(e.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(Ou,{})]})})}const Qu=""+new URL("upload-cabfc914.svg",import.meta.url).href,Yu=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.file_name})]})},{key:"owner_id",allowsSorting:!0,width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Uploader"}),body:s=>{var a,r;const t=((a=s.users)==null?void 0:a.find(i=>i.owns_entry))??((r=s.users)==null?void 0:r[0]);return t?e.jsx(Ge,{image:t.image,label:t.name,description:t.email}):null}},{key:"type",width:"w-100 flex-shrink-0",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(Mr,{type:s.type,className:"h-24 w-24 overflow-hidden"}),e.jsx("div",{className:"capitalize",children:s.type})]})},{key:"public",allowsSorting:!0,width:"w-60 flex-shrink-0",header:()=>e.jsx(n,{message:"Public"}),body:s=>s.public?e.jsx(Bs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})},{key:"file_size",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"File size"}),body:s=>e.jsx(Ga,{bytes:s.file_size})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(A,{type:"modal",children:[e.jsx(_,{size:"md",className:"text-muted",children:e.jsx(Ua,{})}),e.jsx(xi,{entries:[s]})]})}];function Ju(){return e.jsx(ke,{endpoint:"file-entries",title:e.jsx(n,{message:"Uploaded files and folders"}),columns:Yu,filters:mi,selectedActions:e.jsx(ls,{}),emptyStateMessage:e.jsx(fe,{image:Qu,title:e.jsx(n,{message:"Nothing has been uploaded yet"}),filteringTitle:e.jsx(n,{message:"No matching files or folders"})})})}const Xu=[{key:"ends_at",label:m("Status"),description:m("Whether subscription is active or cancelled"),defaultOperator:se.eq,control:{type:Ie.Select,defaultValue:"active",options:[{key:"active",label:m("Active"),value:{value:null,operator:se.eq}},{key:"cancelled",label:m("Cancelled"),value:{value:null,operator:se.ne}}]}},{control:{type:Ie.Select,defaultValue:"stripe",options:[{key:"stripe",label:m("Stripe"),value:"stripe"},{key:"paypal",label:m("PayPal"),value:"paypal"},{key:"none",label:m("None"),value:"none"}]},key:"gateway_name",label:m("Gateway"),description:m("With which payment provider was subscription created"),defaultOperator:se.eq},gi({key:"renews_at",label:m("Renew date"),description:m("Date subscription will renew")}),rs({description:m("Date subscription was created")}),ps({description:m("Date subscription was last updated")})],Zu=""+new URL("subscriptions-7eacea42.svg",import.meta.url).href;function em(s){const{trans:t}=$();return L({mutationFn:a=>sm(a),onSuccess:()=>{q(t(m("Subscription updated"))),D.invalidateQueries({queryKey:G("billing/subscriptions")})},onError:a=>be(a,s)})}function sm({id:s,...t}){return F.put(`billing/subscriptions/${s}`,t).then(a=>a.data)}function In({form:s,onSubmit:t,formId:a}){var o,c;const r=Lr(),i=s.watch("product_id"),l=(o=r.data)==null?void 0:o.products.find(u=>u.id===i);return e.jsxs(ne,{id:a,form:s,onSubmit:t,children:[e.jsx(bi,{name:"user_id",className:"mb-20",endpoint:"normalized-models/user",label:e.jsx(n,{message:"User"})}),e.jsx(H,{name:"product_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Plan"}),children:(c=r.data)==null?void 0:c.products.filter(u=>!u.free).map(u=>e.jsx(g,{value:u.id,children:e.jsx(n,{message:u.name})},u.id))}),!(l!=null&&l.free)&&e.jsx(H,{name:"price_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Price"}),children:l==null?void 0:l.prices.map(u=>e.jsx(g,{value:u.id,children:e.jsx(Ot,{price:u})},u.id))}),e.jsx(h,{inputElementType:"textarea",rows:3,name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20"}),e.jsx(_t,{className:"mb-20",name:"renews_at",granularity:"day",label:e.jsx(n,{message:"Renews at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})}),e.jsx(_t,{className:"mb-20",name:"ends_at",granularity:"day",label:e.jsx(n,{message:"Ends at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})})]})}function tm({subscription:s}){const{close:t,formId:a}=K(),r=I({defaultValues:{id:s.id,product_id:s.product_id,price_id:s.price_id,description:s.description,renews_at:s.renews_at,ends_at:s.ends_at,user_id:s.user_id}}),i=em(r);return e.jsxs(J,{size:"md",children:[e.jsx(ee,{children:e.jsx(n,{message:"Update subscription"})}),e.jsx(Z,{children:e.jsx(In,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const An="billing/subscriptions";function am(s){const{trans:t}=$();return L({mutationFn:a=>nm(a),onSuccess:()=>{q(t(m("Subscription created"))),D.invalidateQueries({queryKey:G(An)})},onError:a=>be(a,s)})}function nm(s){return F.post(An,s).then(t=>t.data)}function rm(){const{close:s,formId:t}=K(),a=I({}),r=am(a);return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(Z,{children:e.jsx(In,{formId:t,form:a,onSubmit:i=>{r.mutate(i,{onSuccess:()=>{s()}})}})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:t,disabled:r.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const im=M(e.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"PauseOutlined"),lm=M(e.jsx("path",{d:"M10 8.64 15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"}),"PlayArrowOutlined"),gt="billing/subscriptions",om=[{key:"user_id",allowsSorting:!0,width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Customer"}),body:s=>s.user&&e.jsx(Ge,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"status",width:"w-100 flex-shrink-0",header:()=>e.jsx(n,{message:"Status"}),body:s=>e.jsx(Js,{size:"xs",color:s.valid?"positive":"danger",radius:"rounded",className:"w-max",children:s.gateway_status})},{key:"product_id",allowsSorting:!0,header:()=>e.jsx(n,{message:"Plan"}),body:s=>{var t;return(t=s.product)==null?void 0:t.name}},{key:"gateway_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Gateway"}),body:s=>e.jsx("span",{className:"capitalize",children:s.gateway_name})},{key:"renews_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Renews at"}),body:s=>e.jsx(de,{date:s.renews_at})},{key:"ends_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Ends at"}),body:s=>e.jsx(de,{date:s.ends_at})},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx(de,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-[168px] flex-shrink-0",body:s=>e.jsx(um,{subscription:s})}];function cm(){return e.jsx(ke,{endpoint:gt,title:e.jsx(n,{message:"Subscriptions"}),columns:om,filters:Xu,actions:e.jsx(dm,{}),enableSelection:!1,selectedActions:e.jsx(ls,{}),queryParams:{with:"product"},emptyStateMessage:e.jsx(fe,{image:Zu,title:e.jsx(n,{message:"No subscriptions have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching subscriptions"})})})}function dm(){return e.jsx(e.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(rm,{})]})})}function um({subscription:s}){return e.jsxs(d.Fragment,{children:[e.jsxs(A,{type:"modal",children:[e.jsx(_,{size:"md",className:"text-muted",children:e.jsx(Ke,{})}),e.jsx(tm,{subscription:s})]}),s.cancelled&&s.on_grace_period?e.jsx(xm,{subscription:s}):null,s.active?e.jsx(mm,{subscription:s}):null,e.jsx(gm,{subscription:s})]})}function mm({subscription:s}){const t=Wa(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{D.invalidateQueries({queryKey:G(gt)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Cancel subscription"}),children:e.jsx(_,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(im,{})})}),e.jsx(me,{title:e.jsx(n,{message:"Cancel subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to cancel this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on grace period until their next scheduled renewal date. Subscription can be renewed until that date by user or from admin area."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function xm({subscription:s}){const t=Ci(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{D.invalidateQueries({queryKey:G(gt)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Renew subscription"}),children:e.jsx(_,{size:"md",className:"text-muted",onClick:a,disabled:t.isPending,children:e.jsx(lm,{})})}),e.jsx(me,{title:e.jsx(n,{message:"Resume subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to resume this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on their original plan and billing cycle."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function gm({subscription:s}){const t=Wa(),a=()=>{t.mutate({subscriptionId:s.id,delete:!0},{onSuccess:()=>{D.invalidateQueries({queryKey:G(gt)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Delete subscription"}),children:e.jsx(_,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(De,{})})}),e.jsx(me,{isDanger:!0,title:e.jsx(n,{message:"Delete subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to delete this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will permanently delete the subscription and immediately cancel it on billing gateway. Subscription will not be renewable anymore."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}const hm=M(e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"SyncOutlined");function pm(){const{trans:s}=$();return L({mutationFn:()=>jm(),onSuccess:()=>{q(s(m("Plans synced")))},onError:t=>Y(t,m("Could not sync plans"))})}function jm(){return F.post("billing/products/sync").then(s=>s.data)}const fm=s=>`billing/products/${s}`;function bm(){const{trans:s}=$();return L({mutationFn:t=>vm(t),onSuccess:()=>{q(s(m("Plan deleted"))),D.invalidateQueries({queryKey:G("billing/products")})},onError:t=>Y(t)})}function vm({productId:s}){return F.delete(fm(s)).then(t=>t.data)}const ym=[{key:"subscriptions",label:m("Subscriptions"),description:m("Whether plan has any active subscriptions"),defaultOperator:se.eq,control:{type:Ie.Select,defaultValue:"01",options:[{key:"01",label:m("Has active subscriptions"),value:{value:"*",operator:se.has}},{key:"02",label:m("Does not have active subscriptions"),value:{value:"*",operator:se.doesntHave}}]}},rs({description:m("Date plan was created")}),ps({description:m("Date plan was last updated")})],wm=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Name"}),body:s=>{const t=s.prices[0];return e.jsx(Ge,{label:s.name,description:s.free?e.jsx(n,{message:"Free"}):e.jsx(Ot,{price:t})})}},{key:"created_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Created"}),body:s=>e.jsx(de,{date:s.created_at})},{key:"updated_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(de,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),visibleInMode:"all",hideHeader:!0,align:"end",maxWidth:"max-w-84",body:s=>e.jsxs(d.Fragment,{children:[e.jsx(_,{size:"md",className:"text-muted",elementType:O,to:`/admin/plans/${s.id}/edit`,children:e.jsx(Ke,{})}),e.jsx(Sm,{product:s})]})}];function _m(){const s=le();return e.jsx(ke,{endpoint:"billing/products",title:e.jsx(n,{message:"Subscription plans"}),columns:wm,actions:e.jsx(km,{}),enableSelection:!1,filters:ym,onRowAction:t=>{s(`/admin/plans/${t.id}/edit`)},emptyStateMessage:e.jsx(fe,{image:Cn,title:e.jsx(n,{message:"No plans have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching plans"})})})}function Sm({product:s}){const t=bm();return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate({productId:s.id})},children:[e.jsx(Q,{label:e.jsx(n,{message:"Delete plan"}),children:e.jsx(_,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(it,{})})}),e.jsx(me,{title:e.jsx(n,{message:"Delete plan"}),body:e.jsx(n,{message:"Are you sure you want to delete this plan?"}),confirm:e.jsx(n,{message:"Delete"})})]})}function km(){const s=pm();return e.jsxs(d.Fragment,{children:[e.jsx(Q,{label:e.jsx(n,{message:"Sync plans with Stripe & PayPal"}),children:e.jsx(_,{color:"primary",variant:"outline",size:"sm",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(hm,{})})}),e.jsx(Pe,{elementType:O,to:"/admin/plans/new",children:e.jsx(n,{message:"Add new plan"})})]})}const Pn=s=>`billing/products/${s}`;function Nm(){const{productId:s}=re();return Ae({queryKey:[Pn(s)],queryFn:()=>Cm(s)})}function Cm(s){return F.get(Pn(s)).then(t=>t.data)}const zt=[{key:"day1",label:m("Daily"),interval:"day",interval_count:1},{key:"week1",label:m("Weekly"),interval:"week",interval_count:1},{key:"month1",label:m("Monthly"),interval:"month",interval_count:1},{key:"month3",label:m("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:m("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:m("Yearly"),interval:"year",interval_count:1},{key:"custom",label:m("Custom"),interval:null,interval_count:null}];function Fm({index:s,onRemovePrice:t}){const{trans:a}=$(),r=_e(["currencies"]),i=d.useMemo(()=>{var v;return(v=r.data)!=null&&v.currencies?Object.values(r.data.currencies):[]},[r.data]),{watch:l,getValues:o}=k(),c=!l("id"),u=l(`prices.${s}.id`)==null,x=l(`prices.${s}.subscriptions_count`)||0,[p,f]=d.useState(()=>{const v=o(`prices.${s}.interval`),y=o(`prices.${s}.interval_count`),S=zt.find(C=>C.key===`${v}${y}`);return S?S.key:"custom"}),b=c||u||!x;return e.jsxs(d.Fragment,{children:[!b&&e.jsx("p",{className:"mb-20 max-w-500 text-sm text-muted",children:e.jsx(n,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:x}})}),e.jsx(h,{required:!0,disabled:!b,label:e.jsx(n,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${s}.amount`,className:"mb-20"}),e.jsx(H,{required:!0,disabled:!b,label:e.jsx(n,{message:"Currency"}),name:`prices.${s}.currency`,items:i,showSearchField:!0,searchPlaceholder:a(m("Search currencies")),selectionMode:"single",className:"mb-20",children:v=>e.jsx(g,{value:v.code,children:`${v.code}: ${v.name}`},v.code)}),e.jsx(zm,{disabled:!b,index:s,value:p,onValueChange:f}),p==="custom"&&e.jsx(Im,{disabled:!b,index:s}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",disabled:!b,onClick:()=>{t()},children:e.jsx(n,{message:"Delete price"})})})]})}function zm({index:s,value:t,onValueChange:a,disabled:r}){const{setValue:i}=k();return e.jsx(Ds,{label:e.jsx(n,{message:"Billing period"}),disabled:r,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:l=>{if(a(l),l!=="custom"){const o=zt.find(c=>c.key===l);o&&(i(`prices.${s}.interval`,o.interval),i(`prices.${s}.interval_count`,o.interval_count))}},children:zt.map(l=>e.jsx(g,{value:l.key,children:e.jsx(n,{...l.label})},l.key))})}function Im({index:s,disabled:t}){const{watch:a}=k(),r=a(`prices.${s}.interval`);let i;return r==="day"?i=365:r==="week"?i=52:i=12,e.jsxs("div",{className:"flex w-min rounded border",children:[e.jsx("div",{className:"flex items-center px-18 text-sm",children:e.jsx(n,{message:"Every"})}),e.jsx(h,{inputShadow:"shadow-none",inputBorder:"border-none",className:"w-80 border-l border-r",name:`prices.${s}.interval_count`,type:"number",min:1,max:i,disabled:t,required:!0}),e.jsxs(H,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${s}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(g,{value:"day",children:e.jsx(n,{message:"Days"})}),e.jsx(g,{value:"week",children:e.jsx(n,{message:"Weeks"})}),e.jsx(g,{value:"month",children:e.jsx(n,{message:"Months"})})]})]})}function En(){return e.jsxs(d.Fragment,{children:[e.jsx(h,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(h,{name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(H,{name:"position",selectionMode:"single",label:e.jsx(n,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(g,{value:0,children:e.jsx(n,{message:"First"})}),e.jsx(g,{value:1,children:e.jsx(n,{message:"Second"})}),e.jsx(g,{value:2,children:e.jsx(n,{message:"Third"})}),e.jsx(g,{value:3,children:e.jsx(n,{message:"Fourth"})}),e.jsx(g,{value:4,children:e.jsx(n,{message:"Fifth"})})]}),e.jsx(Cs,{className:"mb-30",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:s=>e.jsx(O,{className:Lt,target:"_blank",to:"/admin/settings/uploading",children:s})},message:"Total storage space all user uploads are allowed to take up."})}),e.jsx(T,{name:"recommended",className:"mb-20",description:e.jsx(n,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(n,{message:"Recommend"})}),e.jsx(T,{name:"hidden",className:"mb-20",description:e.jsx(n,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(n,{message:"Hidden"})}),e.jsx(T,{name:"free",className:"mb-20",description:e.jsx(n,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(n,{message:"Free"})}),e.jsx(It,{children:e.jsx(n,{message:"Feature list"})}),e.jsx(Am,{}),e.jsx(Pm,{}),e.jsx(It,{children:e.jsx(n,{message:"Permissions"})}),e.jsx(Wt,{name:"permissions"})]})}function It({children:s}){return e.jsx("h2",{className:"mb-20 mt-40 text-base font-semibold",children:s})}function Am(){const{fields:s,append:t,remove:a}=ts({name:"feature_list"});return e.jsxs("div",{children:[s.map((r,i)=>e.jsxs("div",{className:"mb-10 flex gap-10",children:[e.jsx(h,{name:`feature_list.${i}.value`,size:"sm",className:"flex-auto"}),e.jsx(_,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{a(i)},children:e.jsx(De,{})})]},r.id)),e.jsx(j,{variant:"text",color:"primary",startIcon:e.jsx(we,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(n,{message:"Add another line"})})]})}function Pm(){var l;const{watch:s,formState:{errors:t}}=k(),{fields:a,append:r,remove:i}=ts({name:"prices",keyName:"key"});return s("free")?null:e.jsxs(d.Fragment,{children:[e.jsx(It,{children:e.jsx(n,{message:"Pricing"})}),((l=t.prices)==null?void 0:l.message)&&e.jsx("div",{className:"mb-20 text-sm text-danger",children:t.prices.message}),e.jsx(is,{variant:"outline",className:"mb-10",children:a.map((o,c)=>e.jsx(Se,{label:e.jsx(Ot,{price:o}),children:e.jsx(Fm,{index:c,onRemovePrice:()=>{i(c)}})},o.key))}),e.jsx(j,{variant:"text",color:"primary",startIcon:e.jsx(we,{}),size:"xs",onClick:()=>{r({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(n,{message:"Add another price"})})]})}const Tn=s=>`billing/products/${s}`;function Em(s){const{trans:t}=$(),a=le();return L({mutationFn:r=>Tm(r),onSuccess:r=>{q(t(m("Plan updated"))),D.invalidateQueries({queryKey:[Tn(r.product.id)]}),D.invalidateQueries({queryKey:G("billing/products")}),a("/admin/plans")},onError:r=>be(r,s)})}function Tm({id:s,...t}){const a={...t,feature_list:t.feature_list.map(r=>r.value)};return F.put(Tn(s),a).then(r=>r.data)}function Dm(){const s=Nm();return s.status!=="success"?e.jsx(gs,{}):e.jsx(Mm,{product:s.data.product})}function Mm({product:s}){const t=I({defaultValues:{...s,feature_list:s.feature_list.map(r=>({value:r}))}}),a=Em(t);return e.jsx(xt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ plan",values:{name:s.name}}),isLoading:a.isPending,children:e.jsx(En,{})})}const Dn="billing/products";function Lm(s){const{trans:t}=$(),a=le();return L({mutationFn:r=>qm(r),onSuccess:()=>{q(t(m("Plan created"))),D.invalidateQueries({queryKey:[Dn]}),D.invalidateQueries({queryKey:G("billing/products")}),a("/admin/plans")},onError:r=>be(r,s)})}function qm(s){const t={...s,feature_list:s.feature_list.map(a=>a.value)};return F.post(Dn,t).then(a=>a.data)}function Rm(){const s=I({defaultValues:{free:!1,recommended:!1}}),t=Lm(s);return e.jsx(xt,{form:s,onSubmit:a=>{t.mutate(a)},title:e.jsx(n,{message:"Create new plan"}),isLoading:t.isPending,children:e.jsx(En,{})})}function $m(){const s=_e(["menuItemCategories"]);return e.jsx(he,{title:e.jsx(n,{message:"GDPR"}),description:e.jsx(n,{message:"Configure settings related to EU General Data Protection Regulation."}),isLoading:s.isLoading,children:t=>e.jsx(Vm,{data:t})})}function Vm({data:s}){var a,r,i,l;const t=I({defaultValues:{client:{cookie_notice:{enable:((a=s.client.cookie_notice)==null?void 0:a.enable)??!1,button:((r=s.client.cookie_notice)==null?void 0:r.button)??{},position:((i=s.client.cookie_notice)==null?void 0:i.position)??"bottom"},registration:{policies:((l=s.client.registration)==null?void 0:l.policies)??[]}}}});return e.jsxs(ge,{form:t,children:[e.jsx(Om,{}),e.jsx(ye,{}),e.jsx(Um,{})]})}function Om(){const{watch:s}=k(),t=s("client.cookie_notice.enable");return e.jsxs("div",{children:[e.jsx(T,{name:"client.cookie_notice.enable",className:"mb-20",description:e.jsx(n,{message:"Whether cookie notice should be shown automatically to users from EU until it is accepted."}),children:e.jsx(n,{message:"Enable cookie notice"})}),t&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 border-b pb-6",children:[e.jsx("div",{className:"mb-20 border-b pb-10 text-sm font-medium",children:e.jsx(n,{message:"Information button"})}),e.jsx("div",{className:"mb-20",children:e.jsx(os,{hideRoleAndPermissionFields:!0,formPathPrefix:"client.cookie_notice.button"})})]}),e.jsxs(H,{name:"client.cookie_notice.position",selectionMode:"single",label:e.jsx(n,{message:"Cookie notice position"}),className:"mb-20",children:[e.jsx(g,{value:"top",children:e.jsx(n,{message:"Top"})}),e.jsx(g,{value:"bottom",children:e.jsx(n,{message:"Bottom"})})]})]})]})}function Um(){const{fields:s,append:t,remove:a}=ts({name:"client.registration.policies"});return k(),e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Registration policies"})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(n,{message:"Create policies that will be shown on registration page. User will be required to accept them by toggling a checkbox."})}),e.jsx(is,{className:"mt-16",variant:"outline",children:s.map((r,i)=>e.jsx(Se,{label:r.label,chevronPosition:"left",endAppend:e.jsx(_,{variant:"text",color:"danger",size:"sm",onClick:()=>a(i),children:e.jsx(De,{})}),children:e.jsx(os,{hideRoleAndPermissionFields:!0,formPathPrefix:`client.registration.policies.${i}`})},r.id))}),e.jsxs(A,{type:"modal",onClose:r=>{r&&t(r)},children:[e.jsx(j,{className:"mt-12",variant:"link",color:"primary",startIcon:e.jsx(we,{}),size:"xs",children:e.jsx(n,{message:"Add another policy"})}),e.jsx(an,{title:e.jsx(n,{message:"Add policy"})})]})]})}function Hm(s){const{pageId:t}=re(),a=`${s||"custom-pages"}/${t}`;return L({mutationFn:r=>Bm(r,a),onError:r=>Y(r),onSuccess:async()=>{await D.invalidateQueries({queryKey:["custom-pages"]}),await D.invalidateQueries({queryKey:G(a)}),q(m("Page updated"))}})}function Bm(s,t){return F.put(`${t}`,s).then(a=>a.data)}function Mn(){const[s,t]=d.useState(!1),{trans:a}=$(),i=k().watch("title"),l=a({message:"Title"});return s?e.jsx(h,{placeholder:l,autoFocus:!0,className:"mb-30",onBlur:()=>{t(!1)},name:"title",required:!0}):e.jsxs("h1",{tabIndex:0,onClick:()=>{t(!0)},onFocus:()=>{t(!0)},className:w("cursor-pointer rounded hover:bg-primary/focus",!i&&"text-muted"),children:[i||l,e.jsx(Ke,{className:"mx-8 mt-8 align-top text-muted icon-sm"})]})}function Wm({host:s,value:t="",placeholder:a,onChange:r,className:i,inputRef:l,onInputBlur:o,showLinkIcon:c=!0,pattern:u,minLength:x,maxLength:p,hideButton:f,...b}){const{base_url:v}=xe(),y=b.prefix?`/${b.prefix}`:"",S=b.suffix?`/${b.suffix}`:"",[C,z]=d.useState(!1),[P,E]=d.useState(t);s=s||v,d.useEffect(()=>{E(t)},[t]);const ce=()=>{C?(z(!1),P&&(r==null||r(P))):z(!0)};let B="";return P?B=P:a&&(B=sa(a)),e.jsxs("div",{className:w("flex items-center",i),children:[c&&e.jsx(Ht,{className:"text-muted icon-md"}),e.jsxs("div",{className:"ml-6 mr-14 text-primary",children:[s,y,!C&&B&&e.jsxs(d.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium",children:B})]}),C?null:S]}),C&&e.jsx(We,{pattern:u,minLength:x,maxLength:p,onKeyDown:pe=>{pe.key==="Enter"&&ce()},ref:l,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:P,onBlur:o,onChange:pe=>{E(pe.target.value)}}),!f&&e.jsx(j,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{ce()},children:C?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Edit"})})]})}const Km=M(e.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),Gm=M(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function Qm({editor:s}){return e.jsxs("span",{children:[e.jsx(_,{size:"md",disabled:!s.can().undo(),onClick:()=>{s.commands.focus(),s.commands.undo()},children:e.jsx(Km,{})}),e.jsx(_,{size:"md",disabled:!s.can().redo(),onClick:()=>{s.commands.focus(),s.commands.redo()},children:e.jsx(Gm,{})})]})}const Ln=M(e.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"CodeOutlined");function Ym({editor:s}){return e.jsxs(A,{type:"modal",onClose:t=>{t!=null&&(s==null||s.commands.setContent(t))},children:[e.jsx(j,{variant:"text",startIcon:e.jsx(Ln,{}),children:e.jsx(n,{message:"Source"})}),e.jsx(Qt,{title:e.jsx(n,{message:"Source code"}),defaultValue:s.getHTML()})]})}function cs(){return e.jsx("div",{className:"self-stretch mx-4 w-1 bg-divider flex-shrink-0"})}const Jm=M(e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),"FormatBoldOutlined"),Xm=M(e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),Zm=M(e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined");function ex({editor:s,size:t}){return e.jsxs("span",{className:w("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Bold"}),children:e.jsx(_,{size:t,color:s.isActive("bold")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBold()},children:e.jsx(Jm,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Italic"}),children:e.jsx(_,{size:t,color:s.isActive("italic")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleItalic()},children:e.jsx(Xm,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Underline"}),children:e.jsx(_,{size:t,color:s.isActive("underline")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleUnderline()},children:e.jsx(Zm,{})})})]})}const sx=M(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulletedOutlined"),tx=M(e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");function ax({editor:s,size:t}){const a=s.isActive("bulletList"),r=s.isActive("orderedList");return e.jsxs("span",{className:w("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Bulleted list"}),children:e.jsx(_,{size:t,color:a?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBulletList()},children:e.jsx(sx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Numbered list"}),children:e.jsx(_,{size:t,color:r?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleOrderedList()},children:e.jsx(tx,{})})})]})}function nx(s,{text:t,target:a,href:r}){s.state.selection.empty&&t?s.commands.insertContent(`<a href="${r}" target="${a}">${t}</a>`):s.state.selection.empty||(r?s.chain().focus().extendMarkRange("link").setLink({href:r,target:a}).run():s.chain().focus().extendMarkRange("link").unsetLink().run())}function rx({editor:s,size:t}){return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Insert link"}),children:e.jsx(_,{size:t,className:w("flex-shrink-0"),children:e.jsx(Ht,{})})}),e.jsx(ix,{editor:s})]})}function ix({editor:s}){const t=s.getAttributes("link").href,a=s.state.doc.textBetween(s.state.selection.from,s.state.selection.to,""),r=I({defaultValues:{href:t,text:a,target:"_blank"}}),{formId:i,close:l}=K();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(Z,{children:e.jsxs(ne,{form:r,id:i,onSubmit:o=>{nx(s,o),l()},children:[e.jsx(h,{name:"href",label:e.jsx(n,{message:"URL"}),autoFocus:!0,type:"url",className:"mb-20"}),e.jsx(h,{name:"text",label:e.jsx(n,{message:"Text to display"}),className:"mb-20"}),e.jsxs(H,{selectionMode:"single",name:"target",label:e.jsx(n,{message:"Open link in..."}),children:[e.jsx(g,{value:"_self",children:e.jsx(n,{message:"Current window"})}),e.jsx(g,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})]})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:l,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{type:"submit",form:i,variant:"flat",color:"primary",children:e.jsx(n,{message:"Save"})})]})]})}const lx=M(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined"),ox=2097152;function cx({editor:s,size:t,diskPrefix:a="page_media"}){const{selectAndUploadFile:r}=qr(),i=()=>{r({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[$t.image],maxFileSize:ox},metadata:{diskPrefix:a,disk:Rr.public},onSuccess:l=>{s.commands.focus(),s.commands.setImage({src:l.url})}})};return e.jsx(Q,{label:e.jsx(n,{message:"Insert image"}),children:e.jsx(_,{size:t,onClick:i,className:w("flex-shrink-0"),children:e.jsx(lx,{})})})}const dx=M(e.jsx("path",{d:"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z"}),"FormatClearOutlined");function ux({editor:s,size:t}){return e.jsx(Q,{label:e.jsx(n,{message:"Clear formatting"}),children:e.jsx(_,{className:w("flex-shrink-0"),size:t,onClick:()=>{s.chain().focus().clearNodes().unsetAllMarks().run()},children:e.jsx(dx,{})})})}const mx=M(e.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined"),xx=M([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHighOutlined"),gx=M(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z"}),"NoteOutlined"),hx=M([e.jsx("path",{d:"M9.5 7.5v9l7-4.5z"},"0"),e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z"},"1")],"SmartDisplayOutlined");function px({editor:s,size:t}){const[a,r]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{onItemSelected:i=>{i==="hr"?(s.commands.focus(),s.commands.setHorizontalRule()):i==="embed"?r("embed"):(s.commands.focus(),s.commands.addInfo({type:i}))},children:[e.jsx(_,{variant:"text",size:t,className:w("flex-shrink-0"),children:e.jsx(nt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"hr",startIcon:e.jsx(mx,{}),children:e.jsx(n,{message:"Horizontal rule"})}),e.jsx(g,{value:"embed",startIcon:e.jsx(hx,{}),children:e.jsx(n,{message:"Embed"})}),e.jsx(g,{value:"important",startIcon:e.jsx(xx,{}),children:e.jsx(n,{message:"Important"})}),e.jsx(g,{value:"warning",startIcon:e.jsx($r,{}),children:e.jsx(n,{message:"Warning"})}),e.jsx(g,{value:"success",startIcon:e.jsx(gx,{}),children:e.jsx(n,{message:"Note"})})]})]}),e.jsx(A,{type:"modal",isOpen:!!a,onClose:()=>{r(!1)},children:e.jsx(jx,{editor:s})})]})}function jx({editor:s}){const t=s.getAttributes("embed").src,a=I({defaultValues:{src:t}}),{formId:r,close:i}=K();return e.jsxs(J,{children:[e.jsx(ee,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(Z,{children:e.jsx(ne,{form:a,id:r,onSubmit:l=>{s.commands.setEmbed(l),i()},children:e.jsx(h,{name:"src",label:e.jsx(n,{message:"Embed URL"}),autoFocus:!0,type:"url",required:!0})})}),e.jsxs(ae,{children:[e.jsx(j,{onClick:i,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{type:"submit",form:r,disabled:!a.formState.isValid,variant:"flat",color:"primary",children:e.jsx(n,{message:"Add"})})]})]})}function ze({children:s,modifier:t,separator:a="+"}){const r=Vr()?e.jsx("span",{className:"text-base align-middle",children:"⌘"}):"Ctrl";return e.jsxs("kbd",{className:"text-xs text-muted",children:[t&&e.jsxs(e.Fragment,{children:[r,a]}),s]})}function fx({editor:s,size:t}){return e.jsxs(Le,{floatingMinWidth:"w-256",onItemSelected:a=>{s.commands.focus(),typeof a=="string"&&a.startsWith("h")?s.commands.toggleHeading({level:parseInt(a.replace("h",""))}):a==="code"?s.commands.toggleCode():a==="strike"?s.commands.toggleStrike():a==="super"?s.commands.toggleSuperscript():a==="sub"?s.commands.toggleSubscript():a==="blockquote"?s.commands.toggleBlockquote():a==="paragraph"&&s.commands.setParagraph()},children:[e.jsx(j,{className:w("flex-shrink-0"),variant:"text",size:t,endIcon:e.jsx(La,{}),children:e.jsx(n,{message:"Format"})}),e.jsxs(qe,{children:[e.jsx(g,{value:"h1",endSection:e.jsx(ze,{modifier:!0,children:"Alt+1"}),children:e.jsx(n,{message:"Heading :number",values:{number:1}})}),e.jsx(g,{value:"h2",endSection:e.jsx(ze,{modifier:!0,children:"Alt+2"}),children:e.jsx(n,{message:"Heading :number",values:{number:2}})}),e.jsx(g,{value:"h3",endSection:e.jsx(ze,{modifier:!0,children:"Alt+3"}),children:e.jsx(n,{message:"Heading :number",values:{number:3}})}),e.jsx(g,{value:"h4",endSection:e.jsx(ze,{modifier:!0,children:"Alt+4"}),children:e.jsx(n,{message:"Heading :number",values:{number:4}})}),e.jsx(g,{value:"code",endSection:e.jsx(ze,{modifier:!0,children:"E"}),children:e.jsx(n,{message:"Code"})}),e.jsx(g,{value:"strike",endSection:e.jsx(ze,{modifier:!0,children:"Shift+X"}),children:e.jsx(n,{message:"Strikethrough"})}),e.jsx(g,{value:"super",endSection:e.jsx(ze,{modifier:!0,separator:" ",children:"."}),children:e.jsx(n,{message:"Superscript"})}),e.jsx(g,{value:"sub",endSection:e.jsx(ze,{modifier:!0,separator:" ",children:","}),children:e.jsx(n,{message:"Subscript"})}),e.jsx(g,{value:"blockquote",endSection:e.jsx(ze,{modifier:!0,children:"Shift+B"}),children:e.jsx(n,{message:"Blockquote"})}),e.jsx(g,{value:"paragraph",endSection:e.jsx(ze,{modifier:!0,children:"Alt+0"}),children:e.jsx(n,{message:"Paragraph"})})]})]})}const bx=M(e.jsx("path",{d:"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z"}),"FormatColorTextOutlined"),vx=M(e.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined");function yx({editor:s,size:t}){const[a,r]=d.useState(!1),i=s.getAttributes("textStyle").color,l=s.getAttributes("textStyle").backgroundColor;return e.jsxs(d.Fragment,{children:[e.jsxs("span",{className:w("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(_,{size:t,color:i?"primary":null,onClick:()=>{r("text")},children:e.jsx(bx,{})}),e.jsx(_,{size:t,color:l?"primary":null,onClick:()=>{r("bg")},children:e.jsx(vx,{})})]}),e.jsx(A,{defaultValue:a==="text"?"#000000":"#FFFFFF",type:"modal",isOpen:!!a,onClose:o=>{o&&(a==="text"?s.commands.setColor(o):s.commands.setBackgroundColor(o)),r(!1)},children:e.jsx(Xt,{})})]})}const wx=M(e.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),_x=M(e.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),Sx=M(e.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),kx=M(e.jsx("path",{d:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"}),"FormatAlignJustifyOutlined"),Hs={left:{icon:wx,label:m("Align left")},center:{icon:_x,label:m("Align center")},right:{icon:Sx,label:m("Align right")},justify:{icon:kx,label:m("Justify")}};function Nx({editor:s,size:t}){const a=Object.keys(Hs).find(i=>s.isActive({textAlign:i}))||"left",r=a?Hs[a].icon:Hs.left.icon;return e.jsxs(Le,{floatingWidth:"auto",selectionMode:"single",selectedValue:a,onSelectionChange:i=>{s.commands.focus(),s.commands.setTextAlign(i)},children:[e.jsx(_,{size:t,color:a?"primary":null,className:w("flex-shrink-0"),children:e.jsx(r,{})}),e.jsx(qe,{children:Object.entries(Hs).map(([i,l])=>{const o=l.icon;return e.jsx(g,{value:i,startIcon:e.jsx(o,{size:"md"}),capitalizeFirst:!0,children:e.jsx(n,{message:l.label.message})},i)})})]})}const Cx=M(e.jsx("path",{d:"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentDecreaseOutlined"),Fx=M(e.jsx("path",{d:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentIncreaseOutlined");function zx({editor:s,size:t}){return e.jsxs("span",{className:w("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Decrease indent"}),children:e.jsx(_,{size:t,onClick:()=>{s.commands.focus(),s.commands.outdent()},children:e.jsx(Cx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Increase indent"}),children:e.jsx(_,{size:t,onClick:()=>{s.commands.focus(),s.commands.indent()},children:e.jsx(Fx,{})})})]})}function Ix({editor:s,size:t}){const a=s.getAttributes("codeBlock").language||"";return e.jsxs(Le,{selectionMode:"single",selectedValue:a,onSelectionChange:r=>{s.commands.toggleCodeBlock({language:r})},children:[e.jsx(Q,{label:e.jsx(n,{message:"Codeblock"}),children:e.jsx(_,{className:w("flex-shrink-0"),size:t,color:a?"primary":null,children:e.jsx(Ln,{})})}),e.jsxs(qe,{children:[e.jsx(g,{value:"html",children:"HTML"}),e.jsx(g,{value:"javascript",children:"JavaScript"}),e.jsx(g,{value:"css",children:"CSS"}),e.jsx(g,{value:"php",children:"PHP"}),e.jsx(g,{value:"shell",children:"Shell"}),e.jsx(g,{value:"bash",children:"Bash"}),e.jsx(g,{value:"ruby",children:"Ruby"}),e.jsx(g,{value:"python",children:"Python"}),e.jsx(g,{value:"java",children:"Java"}),e.jsx(g,{value:"c++",children:"C++"})]})]})}const wa="flex items-center px-4 h-42 text-muted border-b overflow-hidden";function Ax({editor:s,size:t="md",justify:a="justify-center",hideInsertButton:r=!1,imageDiskPrefix:i}){const l=es(),[o,c]=d.useState(!1);return e.jsxs("div",{className:w(o?"h-84":"h-42"),children:[e.jsxs("div",{className:w(wa,a,"relative z-20"),children:[e.jsx(fx,{editor:s,size:t}),e.jsx(cs,{}),e.jsx(ex,{editor:s,size:t}),e.jsx(cs,{}),e.jsx(Nx,{editor:s,size:t}),e.jsx(zx,{editor:s,size:t}),e.jsx(cs,{}),l?e.jsx(_,{className:"flex-shrink-0",color:o?"primary":null,size:t,onClick:()=>{c(!o)},children:o?e.jsx(Or,{}):e.jsx(Ur,{})}):e.jsx(_a,{editor:s,size:t,hideInsertButton:r,imageDiskPrefix:i})]}),e.jsx(Ts,{children:o&&e.jsx(He.div,{className:w(wa,a,"absolute flex h-full w-full"),initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},children:e.jsx(_a,{editor:s,size:t,imageDiskPrefix:i})})})]})}function _a({editor:s,size:t="md",hideInsertButton:a,imageDiskPrefix:r}){return e.jsxs(d.Fragment,{children:[e.jsx(ax,{editor:s,size:t}),e.jsx(cs,{}),e.jsx(rx,{editor:s,size:t}),e.jsx(cx,{editor:s,size:t,diskPrefix:r}),!a&&e.jsx(px,{editor:s,size:t}),e.jsx(cs,{}),e.jsx(yx,{editor:s,size:t}),e.jsx(cs,{}),e.jsx(Ix,{editor:s,size:t}),e.jsx(ux,{editor:s,size:t})]})}function qn({editor:s,allowSlugEditing:t=!0,onSave:a,saveButton:r,isLoading:i=!1,backLink:l,slugPrefix:o="pages",imageDiskPrefix:c}){const{isSticky:u,sentinelRef:x}=jn(),p=es();return e.jsxs(d.Fragment,{children:[e.jsx("div",{ref:x}),e.jsxs("div",{className:w("sticky top-0 z-10 mb-20 bg",u&&"shadow"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start",children:[!p&&e.jsxs(d.Fragment,{children:[e.jsx(j,{variant:"text",size:"sm",elementType:O,to:l,relative:"path",startIcon:e.jsx(Ka,{}),children:e.jsx(n,{message:"Back"})}),e.jsx("div",{className:"mr-auto",children:t&&e.jsx(Ex,{name:"slug",showLinkIcon:!1,prefix:o})})]}),s&&e.jsx(Qm,{editor:s}),!p&&e.jsx(Ym,{editor:s}),a&&e.jsx(Px,{onSave:()=>{a(s.getHTML())},isLoading:i}),r]}),e.jsx(Ax,{editor:s,size:"sm",imageDiskPrefix:c})]})]})}function Px({onSave:s,isLoading:t}){const r=k().watch("title");return e.jsx(j,{variant:"flat",size:"sm",color:"primary",className:"min-w-90",disabled:t||!r,onClick:()=>s(),children:e.jsx(n,{message:"Save"})})}function Ex({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=xs({name:s}),o=d.useRef(!1),{watch:c,setValue:u}=k();return d.useEffect(()=>{const x=c((p,{name:f})=>{f==="title"&&!o.current&&u("slug",p.title)});return()=>x.unsubscribe()},[c,u]),e.jsx(Wm,{className:w(!i&&"invisible"),onChange:x=>{o.current=!0,a(x)},onInputBlur:r,value:i,inputRef:l,...t})}const Tx=U.lazy(()=>et(()=>import("./article-body-editor-bffd008f.js"),["./article-body-editor-bffd008f.js","./main-14f9202e.js","./main-555b0ffb.css","./c-169d8f0b.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Dx(){const s=Hr();return s.data?e.jsxs(d.Fragment,{children:[e.jsx(Br,{query:s}),e.jsx(Mx,{page:s.data.page})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx(qa,{query:s})})}function Mx({page:s}){const t=le(),a=Hm(),r=I({defaultValues:{title:s.title,slug:s.slug,body:s.body}}),i=l=>{a.mutate({...r.getValues(),body:l},{onSuccess:()=>t("../..",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(gs,{}),children:e.jsx(Tx,{initialContent:s.body,children:(l,o)=>e.jsx(us,{children:e.jsxs($a,{...r,children:[e.jsx(qn,{editor:o,backLink:"../..",isLoading:a.isPending,onSave:i}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Mn,{}),l]})})]})})})})}function Lx(s){const t=s||"custom-pages";return L({mutationFn:a=>qx(a,t),onError:a=>Y(a),onSuccess:async()=>{await D.invalidateQueries({queryKey:["custom-pages"]}),await D.invalidateQueries({queryKey:G(t)}),q(m("Page created"))}})}function qx(s,t){return F.post(`${t}`,s).then(a=>a.data)}const Rx=U.lazy(()=>et(()=>import("./article-body-editor-bffd008f.js"),["./article-body-editor-bffd008f.js","./main-14f9202e.js","./main-555b0ffb.css","./c-169d8f0b.js","./article-body-editor-c0ff5600.css"],import.meta.url));function $x(){const s=le(),t=Lx(),a=I(),r=i=>{t.mutate({...a.getValues(),body:i},{onSuccess:()=>s("../",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(gs,{}),children:e.jsx(Rx,{children:(i,l)=>e.jsx(us,{children:e.jsxs($a,{...a,children:[e.jsx(qn,{editor:l,isLoading:t.isPending,onSave:r,backLink:"../"}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Mn,{}),i]})})]})})})})}const Vx=""+new URL("font-a5a81d1a.svg",import.meta.url).href;function Ox({state:{filters:s,setFilters:t}}){const{trans:a}=$();return e.jsxs("div",{className:"mb-24 items-center gap-24 @xs:flex",children:[e.jsx(We,{className:"mb-12 flex-auto @xs:mb-0",value:s.query,onChange:r=>{t({...s,query:r.target.value})},startAdornment:e.jsx(Vt,{}),placeholder:a(m("Search fonts"))}),e.jsxs(Ds,{className:"flex-auto",selectionMode:"single",selectedValue:s.category,onSelectionChange:r=>{t({...s,category:r})},children:[e.jsx(g,{value:"",children:e.jsx(n,{message:"All categories"})}),e.jsx(g,{value:"serif",children:e.jsx(n,{message:"Serif"})}),e.jsx(g,{value:"sans-serif",children:e.jsx(n,{message:"Sans serif"})}),e.jsx(g,{value:"display",children:e.jsx(n,{message:"Display"})}),e.jsx(g,{value:"handwriting",children:e.jsx(n,{message:"Handwriting"})}),e.jsx(g,{value:"monospace",children:e.jsx(n,{message:"Monospace"})})]})]})}const Ux=[{label:m("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function Hx(s,t){return s.reduce((a,r,i)=>{const l=Math.floor(i/t);return a[l]||(a[l]=[]),a[l].push(r),a},[])}function Bx(s){const t=Wr({usage:"search",...s});return d.useMemo(()=>({startsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(0,r.length),r)===0)},endsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(-r.length),r)===0)},contains(a,r){if(r.length===0)return!0;a=a.normalize("NFC"),r=r.normalize("NFC");let i=0;const l=r.length;for(;i+l<=a.length;i++){const o=a.slice(i,i+l);if(t.compare(r,o)===0)return!0}return!1}}),[t])}function Wx({value:s,onChange:t}){const{data:a,isLoading:r}=_e(["googleFonts"]),[i,l]=d.useState(0),[o,c]=d.useState({query:"",category:(s==null?void 0:s.category)??""}),{contains:u}=Bx({sensitivity:"base"}),x=d.useMemo(()=>Ux.concat((a==null?void 0:a.googleFonts)??[]),[a==null?void 0:a.googleFonts]),p=d.useMemo(()=>x.filter(y=>{var S;return u(y.family,o.query)&&(!o.category||((S=y.category)==null?void 0:S.toLowerCase())===o.category.toLowerCase())}),[x,o,u]),f=d.useMemo(()=>Hx(p,20),[p]),b=f[i];d.useEffect(()=>{if(a&&(s!=null&&s.family)){const y=p.findIndex(S=>S.family===s.family);y>=0&&l(Math.floor(y/20))}},[a,p,s==null?void 0:s.family]),d.useEffect(()=>{const y="font-selector";b!=null&&b.length&&Kr(b,{id:y})},[b,i]);const v=d.useCallback(y=>{c(y),l(0)},[]);return{fonts:b||[],currentPage:i,filteredFonts:p||[],setCurrentPage:l,isLoading:r,filters:o,setFilters:v,value:s,onChange:t,pages:f}}function Kx({state:{currentPage:s=0,setCurrentPage:t,filteredFonts:a,pages:r}}){const i=(a==null?void 0:a.length)||0;return e.jsxs("div",{className:"mt-30 flex items-center justify-end gap-24 border-t pt-14 text-sm",children:[i>0&&e.jsx("div",{children:e.jsx(n,{message:":from - :to of :total",values:{from:s*20+1,to:Math.min((s+1)*20,i),total:i}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(_,{disabled:s<1,onClick:()=>{t(Math.max(0,s-1))},children:e.jsx(Dt,{})}),e.jsx(_,{disabled:s>=r.length-1,onClick:()=>{t(s+1)},children:e.jsx(ot,{})})]})]})}function Gx(s){const t=Wx(s);return e.jsxs("div",{className:s.className,children:[e.jsx(Ox,{state:t}),e.jsx(Ts,{initial:!1,mode:"wait",children:e.jsx(Qx,{state:t})}),e.jsx(Kx,{state:t})]})}function Qx({state:s}){const{isLoading:t,fonts:a}=s,r="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?e.jsx(Jx,{className:r}):a!=null&&a.length?e.jsx(He.div,{...ds,className:r,children:a==null?void 0:a.map(i=>e.jsx(Yx,{font:i,state:s},i.family))},"font-list"):e.jsx(Pt,{className:"mt-60",size:"sm",image:e.jsx(Et,{src:Vx}),title:e.jsx(n,{message:"No matching fonts"}),description:e.jsx(n,{message:"Try another search query or different category"})})}function Yx({font:s,state:{value:t,onChange:a}}){const r=(t==null?void 0:t.family)===s.family,i=s.family.split(",")[0].replace(/"/g,"");return e.jsxs(Zs,{display:"block",onClick:()=>{a(s)},children:[e.jsx("span",{className:w("flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl",r&&"ring-2 ring-primary ring-offset-2"),children:e.jsx("span",{style:{fontFamily:s.family},children:"Aa"})}),e.jsx("span",{className:w("mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",r&&"text-primary"),children:s.label?e.jsx(n,{...s.label}):i})]},s.family)}function Jx({className:s}){const t=Array.from(Array(20).keys());return e.jsx(He.div,{...ds,className:s,children:t.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square",children:e.jsx(X,{display:"block",variant:"rect"})}),e.jsx(X,{className:"mt-6 text-sm"})]},a))},"font-list-skeleton")}function Xx(){const{setValue:s,watch:t}=k(),{themeIndex:a}=re(),r=`appearance.themes.${a}.font`;return e.jsx(Gx,{value:t(r),onChange:i=>{s(r,i,{shouldDirty:!0}),R().preview.setThemeFont(i)}})}const Zx={"rounded-none":{label:m("Square"),value:"0px"},rounded:{label:m("Small"),value:"0.25rem"},"rounded-md":{label:m("Medium"),value:"0.375rem"},"rounded-lg":{label:m("Large"),value:"0.5rem"},"rounded-xl":{label:m("Larger"),value:"0.75rem"},"rounded-full":{label:m("Pill"),value:"9999px"}};function eg(){return e.jsxs("div",{className:"space-y-24",children:[e.jsx(yt,{label:e.jsx(n,{message:"Button rounding"}),name:"button-radius"}),e.jsx(yt,{label:e.jsx(n,{message:"Input rounding"}),name:"input-radius"}),e.jsx(yt,{label:e.jsx(n,{message:"Panel rounding"}),name:"panel-radius",hidePill:!0})]})}function yt({label:s,name:t,hidePill:a}){const{themeIndex:r}=re(),{watch:i,setValue:l}=k(),o=`appearance.themes.${r}.values.--be-${t}`,c=i(o);return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10 text-sm font-semibold",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-10 text-sm",children:Object.entries(Zx).filter(([u])=>!a||!u.includes("full")).map(([u,{label:x,value:p}])=>e.jsx(sg,{radius:u,isActive:p===c,onClick:()=>{l(o,p,{shouldDirty:!0}),R().preview.setThemeValue(`--be-${t}`,p)},children:e.jsx(n,{...x})},u))})]})}function sg({radius:s,children:t,isActive:a,onClick:r}){return e.jsx(Zs,{display:"block",className:w("h-36 border-2 hover:bg-hover",s,a&&"border-primary"),onClick:r,children:t})}const Sa=["schedule","error","outgoing-email"];function tg(){const{pathname:s}=Me(),t=s.split("/").pop(),a=Sa.includes(t)?Sa.indexOf(t):0;return e.jsxs(ct,{className:"p-12 md:p-24",selectedTab:a,children:[e.jsxs(dt,{className:"mb-24",children:[e.jsx(Ue,{elementType:O,to:"/admin/logs/schedule",replace:!0,children:e.jsx(n,{message:"Schedule"})}),e.jsx(Ue,{elementType:O,to:"/admin/logs/error",replace:!0,children:e.jsx(n,{message:"Error"})}),e.jsx(Ue,{elementType:O,to:"/admin/logs/outgoing-email",replace:!0,children:e.jsx(n,{message:"Email"})})]}),e.jsx(Be,{})]})}function ag({value:s}){return s?e.jsx(Bs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})}function Rn(){const{trans:s}=$();return L({mutationFn:t=>ng(t),onSuccess:async(t,a)=>{await D.invalidateQueries({queryKey:G("logs/schedule")}),q.positive(s(m("Command reran")))},onError:t=>Y(t)})}function ng({id:s}){return F.post(`logs/schedule/rerun/${s}`).then(t=>t.data)}const rg=M(e.jsx("path",{d:"M21 12V6c0-1.1-.9-2-2-2h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5V10h14v2h2zm-2-4H5V6h14v2zm-3.36 12c.43 1.45 1.77 2.5 3.36 2.5 1.93 0 3.5-1.57 3.5-3.5s-1.57-3.5-3.5-3.5c-.95 0-1.82.38-2.45 1H18V18h-4v-4h1.5v1.43c.9-.88 2.14-1.43 3.5-1.43 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.44-1.72-4.9-4h1.54z"}),"EventRepeatOutlined"),ig=[{key:"command",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsx(Ge,{label:s.command,description:s.output})},{key:"ran_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last ran at"}),body:s=>e.jsx(Ut,{date:s.ran_at})},{key:"duration",allowsSorting:!0,header:()=>e.jsx(n,{message:"Duration"}),body:s=>`${s.duration}ms`},{key:"exit_code",allowsSorting:!0,header:()=>e.jsx(n,{message:"Completed"}),body:s=>e.jsx(ag,{value:s.exit_code===0})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(lg,{item:s})}];function lg({item:s}){const t=Rn();return e.jsx(Q,{label:e.jsx(n,{message:"Rerun now"}),children:e.jsx(_,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(rg,{})})})}const og=""+new URL("timeline-172fbeee.svg",import.meta.url).href;function cg(){return e.jsx(ke,{padding:"pt-12 md:pt-24",endpoint:"logs/schedule",title:e.jsx(n,{message:"CRON schedule log"}),columns:ig,actions:e.jsx(dg,{}),enableSelection:!1,emptyStateMessage:e.jsx(fe,{image:og,title:e.jsx(n,{message:"No scheduled commands have ran yet"}),filteringTitle:e.jsx(n,{message:"No matching scheduled commands"})})})}function dg(){return e.jsx(Pe,{elementType:"a",href:"api/v1/logs/schedule/download",download:!0,icon:e.jsx(Bt,{}),children:e.jsx(n,{message:"Download log"})})}const ug=""+new URL("bug-fixing-bd601a66.svg",import.meta.url).href,mg=[{key:"message",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Message"}),body:s=>s.message},{key:"datetime",header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Ut,{date:s.datetime})},{key:"severity",header:()=>e.jsx(n,{message:"Severity"}),body:s=>e.jsxs("span",{className:w("flex items-center gap-6 text-xs capitalize",s.level==="error"?"text-danger":"text-primary"),children:[s.level==="error"?e.jsx(za,{size:"sm"}):e.jsx(hi,{size:"sm"}),s.level]})}];function xg({error:s}){return e.jsxs(J,{size:"fullscreen",children:[e.jsx(ee,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(j,{variant:"outline",size:"xs",onClick:()=>gg(s),children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Error details"})}),e.jsx(Z,{children:e.jsx("pre",{className:"whitespace-pre-wrap break-words text-xs leading-5",children:s.exception})})]})}function gg(s){const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s.exception)),t.setAttribute("download",`error-${s.id}.log`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function hg(){const{trans:s}=$();return L({mutationFn:t=>pg(t),onSuccess:async()=>{await D.invalidateQueries({queryKey:G("logs/error")}),q(s(m("Log file deleted")))},onError:t=>Y(t)})}function pg({identifier:s}){return F.delete(`logs/error/${s}`).then(t=>t.data)}function jg(){return e.jsx(ke,{padding:"pt-12 md:pt-24",endpoint:"logs/error",title:e.jsx(n,{message:"Error log"}),onRowAction:s=>{tt(xg,{error:s})},columns:mg,actions:e.jsx(fg,{}),enableSelection:!1,emptyStateMessage:e.jsx(fe,{image:ug,title:e.jsx(n,{message:"No errors have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching error log entries"})})})}function fg(){var l,o,c;const{query:s,setParams:t}=lt(),a=d.useRef(!1),[r,i]=d.useState(null);return d.useEffect(()=>{var u,x;if((x=(u=s.data)==null?void 0:u.files)!=null&&x.length&&!a.current){a.current=!0;const p=s.data.files[0].identifier;i(s.data.files[0].identifier),p!==s.data.selectedFile&&t({file:s.data.files[0].identifier})}},[s.data,t,a]),e.jsxs(d.Fragment,{children:[e.jsx(bg,{files:((l=s.data)==null?void 0:l.files)??null,selectedFile:r,onSelected:u=>{i(u.identifier),t({file:u.identifier})}}),e.jsx(j,{variant:"outline",color:"danger",disabled:!r,onClick:()=>tt(vg,{identifier:r}),children:e.jsx(n,{message:"Delete"})}),r&&e.jsx(Pe,{elementType:"a",download:(c=(o=s.data)==null?void 0:o.files.find(u=>u.identifier===r))==null?void 0:c.name,href:`api/v1/logs/error/${r}/download`,icon:e.jsx(Bt,{}),children:e.jsx(n,{message:"Download log"})})]})}function bg({files:s,selectedFile:t,onSelected:a}){return s?s.length?e.jsx(Ds,{selectionMode:"single",selectedValue:t,size:"sm",minWidth:"min-w-[210px]",children:s==null?void 0:s.map(r=>e.jsxs(g,{value:r.identifier,onSelected:()=>a(r),children:[r.name," (",e.jsx(Ga,{bytes:r.size}),")"]},r.identifier))}):null:e.jsx(X,{variant:"rect",className:"max-w-[210px]"})}function vg({identifier:s}){const t=hg();return e.jsx(me,{title:e.jsx(n,{message:"Delete log file"}),body:e.jsx(n,{message:"Are you sure you want to delete this log file?"}),confirm:e.jsx(n,{message:"Delete"}),onConfirm:()=>t.mutate({identifier:s},{onSuccess:()=>Gr()}),isLoading:t.isPending,isDanger:!0})}const yg=""+new URL("opened-4dded9dc.svg",import.meta.url).href;function wg(s){return Ae({queryKey:["logs/outgoing-email",s],queryFn:()=>_g(s)})}function _g(s){return F.get(`logs/outgoing-email/${s}`).then(t=>t.data)}function Sg({logItemId:s}){const{data:t}=wg(s),{base_url:a}=xe();return e.jsxs(J,{size:"fullscreen",children:[e.jsx(ee,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(j,{variant:"outline",size:"xs",disabled:!t,type:"button",onClick:t?()=>at(`${a}/api/v1/logs/outgoing-email/${s}/download`):void 0,children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Email preview"})}),e.jsx(Z,{children:t?e.jsx("iframe",{srcDoc:t.logItem.parsed_message.body.html,className:"h-max w-full border-none",onLoad:r=>{const i=r.target;i.style.height=i.contentWindow.document.body.scrollHeight+"px"}}):e.jsx("div",{className:"flex min-h-200 items-center justify-center",children:e.jsx(Ps,{isIndeterminate:!0})})})]})}const kg=[{key:"message_id",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Subject"}),body:s=>e.jsx(Ge,{label:s.subject,description:s.message_id})},{key:"status",allowsSorting:!0,header:()=>e.jsx(n,{message:"Status"}),body:s=>{switch(s.status){case"sent":return e.jsx(wt,{color:"positive",children:e.jsx(n,{message:"Sent"})});case"not-sent":return e.jsx(wt,{color:void 0,children:e.jsx(n,{message:"Not sent"})});case"error":return e.jsx(wt,{color:"danger",children:e.jsx(n,{message:"Error"})})}}},{key:"from",allowsSorting:!0,header:()=>e.jsx(n,{message:"From"}),body:s=>s.from},{key:"to",allowsSorting:!0,header:()=>e.jsx(n,{message:"To"}),body:s=>s.to},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Ut,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(Ng,{item:s})}];function Ng({item:s}){const t=Rn();return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Preview"}),children:e.jsx(_,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(Ua,{})})}),e.jsx(Sg,{logItemId:s.id})]})}function wt({color:s,children:t}){return e.jsx(Js,{color:s,size:"xs",className:"w-max min-w-50 text-center",children:t})}const Cg=[{key:"status",label:m("Status"),description:m("Status of the outgoing email"),defaultOperator:se.eq,control:{type:Ie.Select,defaultValue:"01",options:[{key:"01",label:m("Not sent"),value:"no-sent"},{key:"02",label:m("Sent"),value:"sent"},{key:"03",label:m("Error"),value:"error"}]}},rs({description:m("Date email send was attempted")})];function Fg(){return e.jsx(ke,{padding:"pt-12 md:pt-24",endpoint:"logs/outgoing-email",title:e.jsx(n,{message:"Outgoing email"}),columns:kg,filters:Cg,actions:e.jsx(zg,{}),enableSelection:!1,emptyStateMessage:e.jsx(fe,{image:yg,title:e.jsx(n,{message:"No outgoing emails have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching emails"})})})}function zg(){return e.jsx(Pe,{elementType:"a",href:"api/v1/logs/outgoing-email/download",download:!0,icon:e.jsx(Bt,{}),children:e.jsx(n,{message:"Download log"})})}function $n({endpoint:s}){const[t,a]=d.useState(""),{data:r}=Va(s??"normalized-models/role",{query:t}),{hasPermission:i}=Ma();return e.jsx(bn,{label:e.jsx(n,{message:"Roles"}),children:e.jsx(rt,{className:"mb-30",name:"roles",suggestions:r==null?void 0:r.results,inputValue:t,onInputValueChange:a,alwaysShowAvatar:!0,readOnly:!i("users.update"),children:l=>e.jsx(g,{value:l.id,startIcon:e.jsx(Ys,{label:l.name}),children:l.name},l.id)})})}function Ig(s,t){const a=le();return L({mutationFn:r=>Ag(s,r),onSuccess:(r,i)=>{q(m("User updated")),D.invalidateQueries({queryKey:["users"]}),a("/admin/users")},onError:r=>be(r,t)})}function Ag(s,t){return t.roles&&(t.roles=t.roles.map(a=>a.id)),F.put(`users/${s}`,t).then(a=>a.data)}function Vn({form:s,children:t}){const a=hs(),r=Ig(a.id,s);return e.jsxs(ne,{onSubmit:i=>{r.mutate(i)},onBeforeSubmit:()=>s.clearErrors(),form:s,children:[t,e.jsx(vn,{isLoading:r.isPending})]})}function Pg(){const s=hs(),t=I({defaultValues:{first_name:s.first_name??"",last_name:s.last_name??"",roles:s.roles,email_verified_at:!!s.email_verified_at,available_space:s.available_space}});return e.jsxs(Vn,{form:t,children:[e.jsxs("div",{className:"mb-24 flex gap-44",children:[e.jsx(h,{name:"first_name",label:e.jsx(n,{message:"First name"}),className:"flex-auto"}),e.jsx(h,{name:"last_name",label:e.jsx(n,{message:"Last name"}),className:"flex-auto"})]}),e.jsx(Cs,{className:"mb-24",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:a=>e.jsx(O,{className:Lt,target:"_blank",to:"/admin/settings/uploading",children:a})},message:"Total storage space all user uploads are allowed to take up. If left empty, this value will be inherited from any roles or subscriptions user has, or from 'Available space' setting in <a>Uploading</a> settings page."})}),e.jsx(Eg,{user:s}),e.jsx($n,{})]})}function Eg({user:s}){const t=Qr(),{require_email_confirmation:a}=xe();return e.jsxs("div",{className:"mb-44",children:[e.jsx(T,{className:"mb-30",disabled:!a,name:"email_verified_at",description:e.jsx(n,{message:"Whether email address has been confirmed. User will not be able to login until address is confirmed, unless confirmation is disabled from settings page."}),children:e.jsx(n,{message:"Email confirmed"})}),e.jsx(j,{size:"xs",variant:"outline",color:"primary",disabled:!a||t.isPending||!!s.email_verified_at,onClick:()=>{t.mutate({email:s.email})},children:e.jsx(n,{message:"Resend email"})})]})}function Tg(){const s=hs(),t=I({defaultValues:{permissions:s.permissions,roles:s.roles}});return e.jsxs(Vn,{form:t,children:[e.jsx($n,{}),e.jsx(bn,{label:e.jsx(n,{message:"Permissions"}),children:e.jsx(Wt,{name:"permissions"})})]})}function Dg(){const s=hs();return e.jsx(Yr,{user:s})}function Mg(){const s=hs();return e.jsx(Jr,{user:s})}function Lg(){const s=hs();return e.jsxs("div",{children:[e.jsx(Xr,{}),e.jsx(Zr,{user:s}),e.jsx(ei,{user:s}),e.jsx(si,{})]})}function qg(){const s=Ms(),t=I({defaultValues:{appearance:{themes:s.appearance.themes.filter(a=>a.type==="site")}}});return e.jsx(Ls,{form:t,breadcrumb:e.jsx(Rg,{form:t}),blockerAllowedPath:"themes",children:e.jsx(Be,{})})}function Rg({form:s,children:t}){const{pathname:a}=Me(),r=a.split("/").pop(),{themeIndex:i}=re(),l=Es({control:s.control,name:"appearance.themes"}),o=i?l[i]:null;return e.jsxs(fs,{children:[t,e.jsx(n,{message:"Themes"}),o&&e.jsx("span",{children:o.name}),r==="font"&&e.jsx(n,{message:"Font"}),r==="radius"&&e.jsx(n,{message:"Rounding"})]})}function $g(){const s=Ms(),t=I({defaultValues:{settings:{menus:s.settings.menus}}});return e.jsx(Ls,{form:t,breadcrumb:e.jsx(Vg,{form:t}),blockerAllowedPath:"menus",children:e.jsx(Be,{})})}function Vg({form:s}){const{menuIndex:t,menuItemIndex:a}=re(),r=Es({control:s.control,name:"settings.menus"}),i=t?r[t]:null,l=a&&i?i.items[a]:null;return e.jsxs(fs,{children:[e.jsx(n,{message:"Menus"}),i&&e.jsx("span",{children:i.name}),l&&e.jsx("span",{children:l.label})]})}function Og(){return e.jsx(he,{title:e.jsx(n,{message:"Drive"}),description:e.jsx(n,{message:"Configure defaults for drive user dashboard."}),children:s=>e.jsx(Ug,{data:s})})}function Ug({data:s}){var a,r,i;const t=I({defaultValues:{client:{drive:{default_view:((a=s.client.drive)==null?void 0:a.default_view)??"list",send_share_notification:((r=s.client.drive)==null?void 0:r.send_share_notification)??!1},share:{suggest_emails:((i=s.client.share)==null?void 0:i.suggest_emails)??!1}}}});return e.jsxs(ge,{form:t,children:[e.jsxs(Rt,{required:!0,className:"mb-30",size:"md",name:"client.drive.default_view",orientation:"vertical",label:e.jsx(n,{message:"Default view mode"}),description:e.jsx(n,{message:"Which view mode should user drive use by default."}),children:[e.jsx(Ze,{value:"list",children:e.jsx(n,{message:"List"})}),e.jsx(Ze,{value:"grid",children:e.jsx(n,{message:"Grid"})})]}),e.jsx(T,{className:"mb-30",name:"client.drive.send_share_notification",description:e.jsx(n,{message:"Send a notification to user when a file or folder is shared with them."}),children:e.jsx(n,{message:"Share notifications"})}),e.jsx(T,{name:"client.share.suggest_emails",description:e.jsx(n,{message:"Suggest email address of existing users when sharing a file or folder."}),children:e.jsx(n,{message:"Suggest emails"})})]})}function Hg(){const s=Ms(),t=I({defaultValues:{settings:{homepage:{appearance:{headerTitle:s.settings.homepage.appearance.headerTitle??"",headerSubtitle:s.settings.homepage.appearance.headerSubtitle??"",headerImage:s.settings.homepage.appearance.headerImage??"",headerImageOpacity:s.settings.homepage.appearance.headerImageOpacity??"",headerOverlayColor1:s.settings.homepage.appearance.headerOverlayColor1??"",headerOverlayColor2:s.settings.homepage.appearance.headerOverlayColor2??"",footerTitle:s.settings.homepage.appearance.footerTitle??"",footerSubtitle:s.settings.homepage.appearance.footerSubtitle??"",footerImage:s.settings.homepage.appearance.footerImage??"",primaryFeatures:s.settings.homepage.appearance.primaryFeatures??[],secondaryFeatures:s.settings.homepage.appearance.secondaryFeatures??[],actions:s.settings.homepage.appearance.actions??[]}}}}});return e.jsx(Ls,{form:t,breadcrumb:e.jsx(Bg,{}),blockerAllowedPath:"landing-page",children:e.jsx(Be,{})})}function Bg(){const{pathname:s}=Me(),t=s.split("/").pop();return e.jsxs(fs,{children:[e.jsx(n,{message:"Landing page"}),t==="action-buttons"&&e.jsx(n,{message:"Action buttons"}),t==="primary-features"&&e.jsx(n,{message:"Primary features"}),t==="secondary-features"&&e.jsx(n,{message:"Secondary features"})]})}function Wg(s){const{size:t="md",inline:a,label:r,showValueLabel:i=!!r,className:l,width:o="w-full",slider:c,children:u,trackColor:x="primary",fillColor:p="primary"}=s,{domProps:f,trackRef:b,getThumbPercent:v,getThumbValueLabel:y,labelId:S,groupId:C,thumbIds:z,isDisabled:P,numberFormatter:E,minValue:ce,maxValue:B,step:pe,values:Ne,getValueLabel:ie}=c;let Re="",Ce=Math.max([...E.format(ce)].length,[...E.format(B)].length,[...E.format(pe)].length);ie?Re=ie(Ne[0]):Ne.length===1?Re=y(0):Ne.length===2&&(Re=`${y(0)} – ${y(1)}`,Ce=3+2*Math.max(Ce,[...E.format(ce)].length,[...E.format(B)].length));const ys=qt({size:t,disabled:P,labelDisplay:"flex"}),Ye=w("touch-none",l,o,{"flex items-center":a});return e.jsxs("div",{className:Ye,role:"group",id:C,children:[(r||i)&&e.jsxs("div",{className:w(ys.label,"select-none"),children:[r&&e.jsx("label",{onClick:()=>{var Je;(Je=document.getElementById(z[0]))==null||Je.focus()},id:S,htmlFor:C,children:r}),i&&e.jsx("output",{htmlFor:z[0],className:"ml-auto text-right","aria-live":"off",style:Ce?{width:`${Ce}ch`,minWidth:`${Ce}ch`}:void 0,children:Re})]}),e.jsxs("div",{ref:b,className:w("relative",Kg(s)),...f,role:"presentation",children:[e.jsx("div",{className:w("absolute inset-0 m-auto rounded",Gg(x,P),ka(t))}),e.jsx("div",{className:w("absolute inset-0 my-auto rounded",Qg(p,P),ka(t)),style:{width:`${Math.max(v(0)*100,0)}%`}}),u]})]})}function Kg({size:s,wrapperHeight:t}){if(t)return t;switch(s){case"xs":return"h-14";case"sm":return"h-20";default:return"h-30"}}function ka(s){switch(s){case"xs":return"h-2";case"sm":return"h-3";default:return"h-4"}}function Gg(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return s}}function Qg(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return s}}function Yg({minValue:s=0,maxValue:t=100,isDisabled:a=!1,step:r=1,formatOptions:i,onChangeEnd:l,onPointerDown:o,label:c,getValueLabel:u,showThumbOnHoverOnly:x,thumbSize:p,onPointerMove:f,...b}){const[v,y]=d.useState(!1),S=ti(i),{addGlobalListener:C,removeGlobalListener:z}=Oa(),P=d.useRef(null),[E,ce]=Tt(b.value?b.value:void 0,b.defaultValue??[s],b.onChange),B=d.useRef(null);B.current=E;const[pe,Ne]=d.useState(new Array(E.length).fill(!1)),ie=d.useRef(null);ie.current=pe;function Re(N){return S.format(N)}const Ce=N=>{var W;return((W=ie.current)==null?void 0:W[N])||!1},ys=N=>Re(E[N]),Ye=N=>N===0?s:E[N-1],Je=N=>N===E.length-1?t:E[N+1],$e=(N,W)=>{if(a||!ht(N)||!B.current)return;const Fe=Ye(N),Ve=Je(N);W=ki(W,Fe,Ve,r),B.current=Na(B.current,N,W),ce(B.current)},Ee=(N,W)=>{var Ve;if(a||!ht(N))return;const Fe=(Ve=ie.current)==null?void 0:Ve[N];ie.current=Na(ie.current||[],N,W),Ne(ie.current),l&&Fe&&!ie.current.some(Boolean)&&l(B.current||[])},[qs,ws]=d.useState(void 0),Rs=N=>{const W=Math.min(1,(N-s)/(t-s));return isNaN(W)?0:W},$s=N=>Rs(B.current[N]),je=(N,W)=>{$e(N,ta(W))},On=N=>Math.round((N-s)/r)*r+s,ta=N=>{const W=N*(t-s)+s;return Ws(On(W),s,t)},aa=d.useRef(new Array(E.length).fill(!0)),ht=N=>aa.current[N],Un=(N,W)=>{aa.current[N]=W},ve=d.useRef(null),na=d.useRef(void 0),Hn=N=>{if(!(N.pointerType==="mouse"&&(N.button!==0||N.altKey||N.ctrlKey||N.metaKey))&&(o==null||o(),P.current&&!a&&E.every((W,Fe)=>!pe[Fe]))){const W=P.current.offsetWidth,Fe=P.current.getBoundingClientRect().left,jt=(N.clientX-Fe)/W,Vs=ta(jt);let Te;const Xe=E.findIndex(ft=>Vs-ft<0);if(Xe===0)Te=Xe;else if(Xe===-1)Te=E.length-1;else{const ft=E[Xe-1],Yn=E[Xe];Math.abs(ft-Vs)<Math.abs(Yn-Vs)?Te=Xe-1:Te=Xe}Te>=0&&ht(Te)?(N.preventDefault(),ve.current=Te,ws(Te),na.current=N.pointerId,Ee(ve.current,!0),$e(Te,Vs),C(window,"pointerup",ra,!1)):ve.current=null}},_s=d.useRef(null),{domProps:Bn}=vi({onPointerDown:Hn,onMoveStart(){_s.current=null},onMove(N,W){var Ve;const Fe=((Ve=P.current)==null?void 0:Ve.offsetWidth)||0;if(_s.current==null&&(_s.current=$s(ve.current||0)*Fe),_s.current+=W,ve.current!=null&&P.current){const jt=Ws(_s.current/Fe,0,1);je(ve.current,jt)}},onMoveEnd(){ve.current!=null&&(Ee(ve.current,!1),ve.current=null)}}),Wn=as(Bn,{onPointerEnter:()=>{y(!0)},onPointerLeave:()=>{y(!1)},onPointerMove:N=>{f==null||f(N)}}),ra=N=>{N.pointerId===na.current&&(ve.current!=null&&(Ee(ve.current,!1),ve.current=null),z(window,"pointerup",ra,!1))},pt=d.useId(),Kn=c?`${pt}-label`:void 0,Gn=`${pt}-group`,Qn=[...Array(E.length)].map((N,W)=>`${pt}-thumb-${W}`);return{domProps:Wn,trackRef:P,isDisabled:a,step:r,values:E,minValue:s,maxValue:t,focusedThumb:qs,labelId:Kn,groupId:Gn,thumbIds:Qn,numberFormatter:S,getThumbPercent:$s,getThumbMinValue:Ye,getThumbMaxValue:Je,getThumbValueLabel:ys,isThumbDragging:Ce,setThumbValue:$e,updateDraggedThumbs:Ee,setThumbEditable:Un,setFocusedThumb:ws,getValueLabel:u,isPointerOver:v,showThumbOnHoverOnly:x,thumbSize:p}}function Na(s,t,a){return s[t]===a?s:[...s.slice(0,t),a,...s.slice(t+1)]}function Jg({index:s,slider:t,isDisabled:a,ariaLabel:r,inputRef:i,onBlur:l,fillColor:o="primary"}){const c=Da(i),{addGlobalListener:u,removeGlobalListener:x}=Oa(),{step:p,values:f,focusedThumb:b,labelId:v,thumbIds:y,isDisabled:S,getThumbPercent:C,getThumbMinValue:z,getThumbMaxValue:P,getThumbValueLabel:E,setThumbValue:ce,updateDraggedThumbs:B,isThumbDragging:pe,setThumbEditable:Ne,setFocusedThumb:ie,isPointerOver:Re,showThumbOnHoverOnly:Ce,thumbSize:ys="w-18 h-18"}=t,Ye=pe(s),Je=f[s];Ne(s,!a);const $e=a||S,Ee=d.useCallback(()=>{c.current&&c.current.focus({preventScroll:!0})},[c]),qs=b===s;d.useEffect(()=>{qs&&Ee()},[qs,Ee]);const ws=d.useRef(void 0),Rs=je=>{je.pointerId===ws.current&&(Ee(),B(s,!1),x(window,"pointerup",Rs,!1))},$s=w("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",ys,!$e&&"shadow-md",Xg({fillColor:o,isDisabled:$e,isDragging:Ye}),!Ce||Ce&&Ye||Re?"visible":"invisible");return e.jsx("div",{role:"presentation",className:$s,style:{left:`${Math.max(C(s)*100,0)}%`},onPointerDown:je=>{je.button!==0||je.altKey||je.ctrlKey||je.metaKey||(Ee(),ws.current=je.pointerId,B(s,!0),u(window,"pointerup",Rs,!1))},children:e.jsx("input",{id:y[s],onKeyDown:ia(()=>{B(s,!0)}),onKeyUp:ia(()=>{B(s,!1)}),ref:c,tabIndex:$e?void 0:0,min:z(s),max:P(s),step:p,value:Je,disabled:$e,"aria-label":r,"aria-labelledby":v,"aria-orientation":"horizontal","aria-valuetext":E(s),onFocus:()=>{ie(s)},onBlur:je=>{ie(void 0),B(s,!1),l==null||l(je)},onChange:je=>{ce(s,parseFloat(je.target.value))},type:"range",className:"sr-only"})})}function Xg({isDisabled:s,isDragging:t,fillColor:a}){return s?"bg-slider-disabled cursor-default":a&&a!=="primary"?a:w("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function Zg({inputRef:s,onBlur:t,...a}){const{onChange:r,onChangeEnd:i,value:l,defaultValue:o,...c}=a,u={...c,value:l!=null?[l]:void 0,defaultValue:o!=null?[o]:void 0,onChange:p=>{r==null||r(p[0])},onChangeEnd:p=>{i==null||i(p[0])}},x=Yg(u);return e.jsx(Wg,{...u,slider:x,children:e.jsx(Jg,{fillColor:a.fillColor,index:0,slider:x,inputRef:s,onBlur:t})})}function eh({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=xs({name:s}),o={onChange:a,onBlur:r,value:i||""};return e.jsx(Zg,{inputRef:l,...as(o,t)})}function sh(){return e.jsxs(d.Fragment,{children:[e.jsx(th,{}),e.jsxs("div",{className:"my-24 border-y py-24",children:[e.jsx(ue,{to:"action-buttons",elementType:O,className:"mb-20",children:e.jsx(n,{message:"Action buttons"})}),e.jsx(ue,{to:"primary-features",elementType:O,children:e.jsx(n,{message:"Primary features"})}),e.jsx(ue,{to:"secondary-features",elementType:O,children:e.jsx(n,{message:"Secondary features"})})]}),e.jsx(ah,{})]})}function th(){const s=Qe(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.headerImage});return e.jsxs(e.Fragment,{children:[e.jsx(h,{label:e.jsx(n,{message:"Header title"}),className:"mb-20",name:"settings.homepage.appearance.headerTitle",onFocus:()=>{R().preview.setHighlight('[data-testid="headerTitle"]')}}),e.jsx(h,{label:e.jsx(n,{message:"Header subtitle"}),className:"mb-30",inputElementType:"textarea",rows:4,name:"settings.homepage.appearance.headerSubtitle",onFocus:()=>{R().preview.setHighlight('[data-testid="headerSubtitle"]')}}),e.jsx(ms,{name:"settings.homepage.appearance.headerImage",className:"mb-30",label:e.jsx(n,{message:"Header image"}),defaultValue:s,diskPrefix:"homepage"}),e.jsx(eh,{name:"settings.homepage.appearance.headerImageOpacity",label:e.jsx(n,{message:"Header image opacity"}),minValue:0,step:.1,maxValue:1,formatOptions:{style:"percent"}}),e.jsx("div",{className:"mb-20 text-xs text-muted",children:e.jsx(n,{message:"In order for overlay colors to appear, header image opacity will need to be less then 100%"})}),e.jsx(Ca,{formKey:"settings.homepage.appearance.headerOverlayColor1",label:e.jsx(n,{message:"Header overlay color 1"})}),e.jsx(Ca,{formKey:"settings.homepage.appearance.headerOverlayColor2",label:e.jsx(n,{message:"Header overlay color 2"})})]})}function ah(){const s=Qe(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.footerImage});return e.jsxs(d.Fragment,{children:[e.jsx(h,{label:e.jsx(n,{message:"Footer title"}),className:"mb-20",name:"settings.homepage.appearance.footerTitle",onFocus:()=>{R().preview.setHighlight('[data-testid="footerTitle"]')}}),e.jsx(h,{label:e.jsx(n,{message:"Footer subtitle"}),className:"mb-20",name:"settings.homepage.appearance.footerSubtitle",onFocus:()=>{R().preview.setHighlight('[data-testid="footerSubtitle"]')}}),e.jsx(ms,{name:"settings.homepage.appearance.footerImage",className:"mb-30",label:e.jsx(n,{message:"Footer background image"}),defaultValue:s,diskPrefix:"homepage"})]})}function Ca({label:s,formKey:t}){const a=t,{watch:r,setValue:i}=k(),l=r(a),o=c=>{i(t,c,{shouldDirty:!0})};return e.jsxs(A,{type:"popover",value:l,alwaysReturnCurrentValueOnClose:!0,onValueChange:c=>o(c),onClose:c=>o(c),children:[e.jsx(ue,{className:"capitalize",startIcon:e.jsx(Yt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:l}}),children:s}),e.jsx(Xt,{})]})}function nh(){const[s,t]=d.useState(["cta1"]);return e.jsxs(is,{variant:"outline",expandedValues:s,onExpandedChange:a=>{t(a),a.length&&R().preview.setHighlight(`[data-testid="${a[0]}"]`)},children:[e.jsx(Se,{value:"cta1",label:e.jsx(n,{message:"Header button 1"}),children:e.jsx(os,{formPathPrefix:"settings.homepage.appearance.actions.cta1"})}),e.jsx(Se,{value:"ct2",label:e.jsx(n,{message:"Header button 2"}),children:e.jsx(os,{formPathPrefix:"settings.homepage.appearance.actions.cta2"})}),e.jsx(Se,{value:"cta3",label:e.jsx(n,{message:"Footer button"}),children:e.jsx(os,{formPathPrefix:"settings.homepage.appearance.actions.cta3"})})]})}function rh(){const{fields:s,remove:t,append:a}=ts({name:"settings.homepage.appearance.primaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(is,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&R().preview.setHighlight(`[data-testid="primary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(Se,{value:o,label:e.jsx(n,{message:`Primary feature ${o+1}`}),children:[e.jsx(ih,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(we,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function ih({index:s}){const t=Qe(a=>{var r,i,l;return(l=(i=(r=a.defaults)==null?void 0:r.settings.homepage.appearance)==null?void 0:i.primaryFeatures[s])==null?void 0:l.image});return e.jsxs(e.Fragment,{children:[e.jsx(ms,{name:`settings.homepage.appearance.primaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:t,diskPrefix:"homepage"}),e.jsx(h,{name:`settings.homepage.appearance.primaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{R().preview.setHighlight(`[data-testid="primary-title-${s}"]`)}}),e.jsx(h,{name:`settings.homepage.appearance.primaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{R().preview.setHighlight(`[data-testid="primary-subtitle-${s}"]`)}})]})}function lh(){const{fields:s,remove:t,append:a}=ts({name:"settings.homepage.appearance.secondaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(is,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&R().preview.setHighlight(`[data-testid="secondary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(Se,{value:o,label:e.jsx(n,{message:`Secondary feature ${o+1}`}),children:[e.jsx(oh,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(we,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function oh({index:s}){return e.jsxs(e.Fragment,{children:[e.jsx(ms,{name:`settings.homepage.appearance.secondaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:ch(s),diskPrefix:"homepage"}),e.jsx(h,{name:`settings.homepage.appearance.secondaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{R().preview.setHighlight(`[data-testid="secondary-title-${s}"]`)}}),e.jsx(h,{name:`settings.homepage.appearance.secondaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{R().preview.setHighlight(`[data-testid="secondary-subtitle-${s}"]`)}}),e.jsx(h,{name:`settings.homepage.appearance.secondaryFeatures.${s}.description`,label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{R().preview.setHighlight(`[data-testid="secondary-description-${s}"]`)}})]})}function ch(s){var t,a;return(a=((t=R().defaults)==null?void 0:t.settings.homepage.appearance).secondaryFeatures[s])==null?void 0:a.image}const Ch=Object.freeze(Object.defineProperty({__proto__:null,AdminLayout:Di,AdminSettingsPage:bo,AdminTwoFactorAuthPage:Fi,AdsPage:ou,AppearanceEditorPage:ul,AppearanceMenuEditor:_l,AppearanceMenuItemEditor:Ol,AuthenticationSettings:jc,CacheSettings:ad,CreateCustomPage:$x,CreatePlanPage:Rm,CreateRolePage:Mu,CustomCodeSection:co,CustomPageDatablePage:go,DriveSettings:Og,EditCustomPage:Dx,EditPlanPage:Dm,EditRolePage:Au,ErrorLogDatatable:jg,FileEntryIndexPage:Ju,GdprSettings:$m,GeneralSection:Yl,GeneralSettings:No,LandingPageAppearanceForm:Hg,LandingPageSecondaryFeatures:lh,LandingPageSectionActionButtons:nh,LandingPageSectionGeneral:sh,LandingPageSectionPrimaryFeatures:rh,LocalizationIndex:Xd,LocalizationSettings:hc,LoggingSettings:ld,LogsPage:tg,MenuEditorForm:$g,MenuList:xl,OutgoingEmailLogDatatable:Fg,OutgoingEmailSettings:Xc,PlansIndexPage:_m,QueueSettings:md,RecaptchaSettings:wd,ReportsSettings:Cd,RolesIndexPage:gu,ScheduleLogDatatable:cg,SectionList:uu,SeoSection:io,SubscriptionSettings:uc,SubscriptionsIndexPage:cm,TagIndexPage:Ku,ThemeEditor:cc,ThemeEditorForm:qg,ThemeFontPanel:Xx,ThemeList:eo,ThemeRadiusPanel:eg,TransferFilesPage:wi,TranslationManagementPage:tu,UpdateUserApiTab:Mg,UpdateUserDatetimeTab:Dg,UpdateUserDetailsTab:Pg,UpdateUserPage:Rd,UpdateUserPermissionsTab:Tg,UpdateUserSecurityTab:Lg,UploadingSettings:Mc,UserDatatable:sl,WebsocketSettings:jd},Symbol.toStringTag,{value:"Module"}));export{Ln as C,hl as D,rg as E,_x as F,mx as H,lx as I,Nh as K,gx as N,im as P,Gm as R,hx as S,Vd as T,Km as U,kx as a,wx as b,Sx as c,Jm as d,dx as e,vx as f,bx as g,Cx as h,Fx as i,Xm as j,sx as k,tx as l,Zm as m,Ya as n,lm as o,xx as p,Do as q,hm as r,Po as s,vt as t,Bx as u,Ch as v};
//# sourceMappingURL=app-admin-routes.lazy-6029f70c.js.map
