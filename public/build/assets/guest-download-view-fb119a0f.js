import{r as d,j as e,bi as y,T as t,aH as g,a as v}from"./main-d24739ed.js";const k=({files:a,totalSize:x,expiresAt:i,hash:o,hasPassword:n})=>{const[l,w]=d.useState(""),[c,u]=d.useState(!1),[b,j]=d.useState(!n),[p,m]=d.useState("");console.log("GuestDownloadView props:",{files:a,totalSize:x,expiresAt:i,hash:o,hasPassword:n});const h=async s=>{if(s.preventDefault(),!!l.trim()){u(!0),m("");try{(await v.post(`guest/upload/${o}/verify-password`,{password:l})).data.valid?j(!0):m("Incorrect password. Please try again.")}catch{m("Error verifying password. Please try again.")}finally{u(!1)}}};return n&&!b?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(y,{className:"w-8 h-8 text-yellow-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.jsx(t,{message:"Password Protected"})}),e.jsx("p",{className:"text-gray-600 mb-6",children:e.jsx(t,{message:"This file share is password protected. Please enter the password to access the files."})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"password",value:l,onChange:s=>w(s.target.value),placeholder:"Enter password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,autoFocus:!0}),p&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:p})]}),e.jsx("button",{type:"submit",disabled:c||!l.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:c?e.jsx(t,{message:"Verifying..."}):e.jsx(t,{message:"Access Files"})})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white text-black rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium  mb-3",children:e.jsx(t,{message:"Download Files"})}),e.jsx("div",{className:"space-y-2",children:(a==null?void 0:a.map((s,r)=>e.jsx("div",{className:"flex items-center gap-3 bg-white border border-black rounded-lg p-3",children:e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-sm font-medium ",children:s.name||s.filename||s.original_filename}),e.jsx("div",{className:"text-xs ",children:g(s.file_size||s.size||0)})]})},r)))||[]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:e.jsx(t,{message:"Total size:"})}),e.jsx("span",{className:"font-medium",children:g(x)})]}),i&&e.jsx("div",{className:"mt-2 text-xs ",children:e.jsx(t,{message:"Expires on :date",values:{date:new Date(i).toLocaleDateString()}})})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg transition-colors",onClick:()=>{if(!o){alert("Invalid download link.");return}const s=n&&l?`?password=${encodeURIComponent(l)}`:"";if(a&&a.length===1){const r=a[0],f=`/download/${o}/${r.id}${s}`;window.open(f,"_blank")}else if(a&&a.length>1){const r=`/download/${o}${s}`;window.open(r,"_blank")}else alert("No files available for download.")},children:e.jsx(t,{message:"Download all"})})})]})};export{k as G};
//# sourceMappingURL=guest-download-view-fb119a0f.js.map
