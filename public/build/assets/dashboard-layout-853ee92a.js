import{r as h,cI as Pt,j as a,o as E,R as Ee,cg as Je,ca as et,ch as Mt,ci as Rt,an as tt,aZ as Ft,X as xe,cJ as At,cb as Ot,cK as Tt,cL as zt,ar as de,al as Z,O as Pe,af as Me,cM as Nt,ao as J,bC as se,cN as nt,bd as Re,_ as Fe,c2 as ve,bx as ge,q as C,ax as Lt,bf as $t,G as ne,T,Y as B,c3 as st,a5 as be,x as _t,y as rt,D as Ae,z as Vt,A as ot,B as Ut,E as at,H as it,aW as Bt,a as we,b_ as lt,S as ye,bP as Ht,V as fe,aM as Oe,aD as Wt,$ as Y,bn as te,b$ as Kt,C as qt,a1 as ct,h as Gt,cO as Yt,ag as Xt,cr as Qt,cc as ut,cP as Zt,bv as Jt,aJ as dt,aS as en,b as tn,aF as ft,bI as nn,cQ as Le,cR as sn,cS as rn,N as on,bc as ht,bb as $e,cT as an}from"./main-7d383477.js";import{I as ln,u as cn,d as un,h as mt,D as gt,i as Ie,j as dn,e as pt,b as fn,a as hn,K as mn,f as xt,k as gn,t as pn,C as xn}from"./ArrowBack-e4433c80.js";import{$ as _e,E as vn,C as bn}from"./breadcrumb-860a0a6c.js";function vt(){let e=h.useRef(new Map),n=h.useCallback((s,o,l,i)=>{let u=i!=null&&i.once?(...d)=>{e.current.delete(l),l(...d)}:l;e.current.set(l,{type:o,eventTarget:s,fn:u,options:i}),s.addEventListener(o,u,i)},[]),t=h.useCallback((s,o,l,i)=>{var u;let d=((u=e.current.get(l))===null||u===void 0?void 0:u.fn)||l;s.removeEventListener(o,d,i),e.current.delete(l)},[]),r=h.useCallback(()=>{e.current.forEach((s,o)=>{t(s.eventTarget,s.type,o,s.options)})},[t]);return h.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function Ve(e,n){if(!e)return!1;let t=window.getComputedStyle(e),r=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return r&&n&&(r=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),r}function xr(e,n){let t=e;for(Ve(t,n)&&(t=t.parentElement);t&&!Ve(t,n);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function wn(e){let{ref:n,onInteractOutside:t,isDisabled:r,onInteractOutsideStart:s}=e,o=h.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),l=_e(u=>{t&&Ue(u,n)&&(s&&s(u),o.current.isPointerDown=!0)}),i=_e(u=>{t&&t(u)});h.useEffect(()=>{let u=o.current;if(r)return;const d=n.current,c=Pt(d);if(typeof PointerEvent<"u"){let g=f=>{u.isPointerDown&&Ue(f,n)&&i(f),u.isPointerDown=!1};return c.addEventListener("pointerdown",l,!0),c.addEventListener("click",g,!0),()=>{c.removeEventListener("pointerdown",l,!0),c.removeEventListener("click",g,!0)}}},[n,r,l,i])}function Ue(e,n){if(e.button>0)return!1;if(e.target){const t=e.target.ownerDocument;if(!t||!t.documentElement.contains(e.target)||e.target.closest("[data-react-aria-top-layer]"))return!1}return n.current?!e.composedPath().includes(n.current):!1}function yn({className:e,children:n,size:t,color:r,radius:s,selectable:o,wrap:l=!0,startButton:i}){return a.jsxs("div",{className:E("flex items-center gap-8",l&&"flex-wrap",e),children:[i,h.Children.map(n,u=>{if(h.isValidElement(u))return h.cloneElement(u,{size:t,color:r,selectable:o,radius:s})})]})}function Se(e){return{id:e,name:`${e}`,description:`${e}`}}function jn(e,n){const t=h.useRef(null),r=Je(n),{displayWith:s=V=>V.name,validateWith:o,children:l,suggestions:i,isLoading:u,inputValue:d,onInputValueChange:c,onItemSelected:g,placeholder:f,onOpenChange:m,chipSize:p="sm",openMenuOnFocus:w=!0,showEmptyMessage:v,value:x,defaultValue:b,onChange:y,valueKey:j,isAsync:D,allowCustomValue:P=!0,showDropdownArrow:A,onChipClick:O,alwaysShowAvatar:S=!1,readOnly:N,...k}=e,M=et({...e,flexibleHeight:!0}),[L,re]=In(e),[oe,ae]=h.useState(!1),I=a.jsx(Pe,{isIndeterminate:!0,size:"w-24 h-24","aria-label":"loading..."}),R=A?a.jsx(Me,{}):null,{fieldProps:K,inputProps:q}=Mt({...k,focusRef:r,endAdornment:u&&oe?I:R});return a.jsx(Rt,{fieldClassNames:M,...K,children:a.jsxs(ln,{ref:t,className:E("flex flex-wrap items-center",M.input),onClick:()=>{var V;(V=r.current)==null||V.focus()},children:[a.jsx(Cn,{displayChipUsing:s,onChipClick:O,items:L,setItems:re,chipSize:p,alwaysShowAvatar:S,readOnly:N}),a.jsx(kn,{size:e.size,showEmptyMessage:v,inputProps:q,inputValue:d,onInputValueChange:c,fieldRef:t,inputRef:r,chips:L,setChips:re,validateWith:o,isLoading:u,suggestions:i,placeholder:f,openMenuOnFocus:w,listboxIsOpen:oe,setListboxIsOpen:ae,allowCustomValue:P,readOnly:N,children:l})]})})}function Cn({items:e,setItems:n,displayChipUsing:t,chipSize:r,onChipClick:s,alwaysShowAvatar:o,readOnly:l}){const i=tt(),u=h.useCallback(d=>{const c=e.findIndex(f=>f.id===d),g=[...e];return c>-1&&(g.splice(c,1),n(g)),g},[e,n]);return a.jsx(yn,{className:E("max-w-full flex-shrink-0 flex-wrap",r==="xs"?"my-6":"my-8"),size:r,selectable:!0,children:e.map(d=>a.jsx(Ft,{errorMessage:d.errorMessage,adornment:d.image||o?a.jsx(xe,{circle:!0,src:d.image,fallback:"initials",label:d.name}):null,onClick:()=>s==null?void 0:s(d),onRemove:l?void 0:()=>{u(d.id).length?i==null||i.focusPrevious({tabbable:!0}):i==null||i.focusLast()},children:t(d)},d.id))})}function kn(e){const{inputRef:n,fieldRef:t,validateWith:r,setChips:s,chips:o,suggestions:l,inputProps:i,placeholder:u,openMenuOnFocus:d,listboxIsOpen:c,setListboxIsOpen:g,allowCustomValue:f,isLoading:m,size:p,readOnly:w}=e,v=tt(),x=h.useCallback(I=>{I=(I||[]).filter(R=>{const K=!R||!R.id||!R.name;return!(o.findIndex(V=>V.id===(R==null?void 0:R.id))>-1)&&!K}),I.length&&(r&&(I=I.map(R=>r(R))),s([...o,...I]))},[o,s,r]),b=At({...e,clearInputOnItemSelection:!0,isOpen:c,onOpenChange:g,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:I=>{L(I)}}),{state:{activeIndex:y,setActiveIndex:j,isOpen:D,setIsOpen:P,inputValue:A,setInputValue:O},refs:S,listboxId:N,collection:k,onInputChange:M}=b,L=I=>{const R=k.size&&y!=null?[...k.values()][y]:null;R!=null&&R.item?x([R.item]):f&&x([Se(R?R.value:I)]),O(""),j(null),P(!1)};Ot(()=>{t.current&&S.reference.current!==t.current&&b.reference(t.current)},[t,b,S]);const{handleTriggerKeyDown:re,handleListboxKeyboardNavigation:oe}=Nt(b),ae=J(()=>{d&&!D&&P(!0)});return a.jsx(Tt,{listbox:b,mobileOverlay:zt,isLoading:m,onPointerDown:I=>{I.preventDefault()},children:a.jsx("input",{readOnly:w,type:"text",className:E("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",p==="xs"?"h-20":"h-30"),placeholder:u,...de(i,{ref:n,value:A,onChange:M,onPaste:I=>{const K=I.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(K){I.preventDefault();const q=window.getSelection();q!=null&&q.rangeCount&&(q.deleteFromDocument(),x(K.map(V=>Se(V))))}},"aria-autocomplete":"list","aria-controls":D?N:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:I=>{if(w)return;const R=I.target;if(I.key==="Enter"){I.preventDefault(),L(R.value);return}if(I.key==="Escape"&&D&&(P(!1),O("")),I.key==="ArrowUp"&&D&&(y===0||y==null)){j(null);return}if(y!=null&&(I.key==="ArrowLeft"||I.key==="ArrowRight")){I.preventDefault();return}if((I.key==="ArrowLeft"||I.key==="Backspace"||I.key==="Delete")&&R.selectionStart===0&&y==null&&o.length){v==null||v.focusPrevious({tabbable:!0});return}re(I)||oe(I)},onFocus:w?void 0:ae,onClick:w?void 0:ae})})})}function In({onChange:e,value:n,defaultValue:t,valueKey:r}){const s=h.useMemo(()=>Be(n),[n]),o=h.useMemo(()=>Be(t),[t]),l=h.useCallback(i=>{const u=r?i.map(d=>d[r]):i;e==null||e(u)},[e,r]);return Z(s||void 0,o||[],l)}function Be(e){if(e!=null)return e.map(n=>typeof n!="object"?Se(n):n)}const Sn=Ee.forwardRef(jn),vr=se(a.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),G=new Map,me=new Map,Dn=new Map,U={status:"inactive"};function je({e,rect:n,deltaX:t,deltaY:r}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:r??0,nativeEvent:e}}let bt=null;function He(e){bt=e}function En(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Pn(e){const n=new IntersectionObserver(t=>{t.forEach(r=>{const{width:s,height:o,left:l,top:i}=r.boundingClientRect,[u,d]=[...e].find(([,g])=>g.ref.current===r.target)||[];if(u==null||d==null)return;const c={width:s,height:o,left:l,top:i};e.set(u,{...d,rect:c})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function br({id:e,disabled:n,ref:t,preview:r,hidePreview:s,...o}){const l=h.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:u}=vt(),d=h.useRef({lastPosition:{x:0,y:0}}).current,c=h.useRef(o);c.current=o,h.useLayoutEffect(()=>(n?G.delete(e):G.set(e,{...G.get(e),id:e,ref:t,type:c.current.type,getData:c.current.getData}),()=>{G.delete(e)}),[e,n,c,t]);const g=v=>{Dn.forEach(x=>{var b;x.type===((b=G.get(e))==null?void 0:b.type)&&v(x)})},f=v=>{var D,P;const x=G.get(e),b=t.current,y=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(bt||!b||!x||!y){v.preventDefault(),v.stopPropagation();return}Pn(me),He("drag"),s&&Mn(v),v.dataTransfer.effectAllowed="move",d.lastPosition={x:v.clientX,y:v.clientY},d.currentRect=En(b.getBoundingClientRect());const j=je({rect:d.currentRect,e:v});r!=null&&r.current&&r.current(x,A=>{v.dataTransfer.setDragImage(A,0,0)}),U.status="dragging",U.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(P=(D=c.current).onDragStart)==null||P.call(D,j,x),requestAnimationFrame(()=>{g(A=>{var O;return(O=A.onDragStart)==null?void 0:O.call(A,j,x)})}),i(window,"dragover",m,!0)},m=v=>{var P,A;if(v.preventDefault(),!d.currentRect)return;const x=v.clientX-d.lastPosition.x,b=v.clientY-d.lastPosition.y,y={...d.currentRect,left:d.currentRect.left+x,top:d.currentRect.top+b},j=je({rect:y,e:v,deltaX:x,deltaY:b}),D=G.get(e);D&&((A=(P=c.current).onDragMove)==null||A.call(P,j,D),g(O=>{var S;return(S=O.onDragMove)==null?void 0:S.call(O,j,D)})),d.lastPosition={x:v.clientX,y:v.clientY},d.currentRect=y};return{draggableProps:{draggable:!n,onDragStart:f,onDragEnd:v=>{var y,j;if(u(),!d.currentRect)return;He(null),ee&&ee.remove();const x=je({rect:d.currentRect,e:v}),b=G.get(e);b&&((j=(y=c.current).onDragEnd)==null||j.call(y,x,b),g(D=>{var P;return(P=D.onDragEnd)==null?void 0:P.call(D,x,b,U.status)})),requestAnimationFrame(()=>{U.dragTargetId=void 0,U.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:v=>{d.clickedEl=v.target}},dragHandleRef:l}}let ee;function Mn(e){ee||(ee=new Image,document.body.append(ee),ee.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(ee,0,0)}async function*Rn(e){const n=[];for(const t of e.items)if(t.kind==="file"){const r=t.webkitGetAsEntry();r&&n.push(r)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const r=await yt(t);yield new nt(r,t.fullPath)}else t.isDirectory&&(yield*wt(t))}async function*wt(e){const n=e.createReader();let t;do{t=await new Promise((r,s)=>{n.readEntries(r,s)});for(const r of t)if(r.isFile){if(r.name===".DS_Store")continue;const s=await yt(r);yield new nt(s,r.fullPath)}else r.isDirectory&&(yield*wt(r))}while(t.length>0)}function yt(e){return new Promise((n,t)=>e.file(n,t))}async function Fn(e){const n=[];for await(const t of e)n.push(t);return n}const An=400;function wr({id:e,disabled:n,ref:t,...r}){const s=h.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=h.useRef(r);o.current=r,h.useLayoutEffect(()=>(me.set(e,{...me.get(e),disabled:n,id:e,ref:t}),()=>{me.delete(e)}),[e,o,n,t]);const l=f=>{var w;const m=o.current,p=m.allowDragEventsFromItself||t.current!==((w=f.ref)==null?void 0:w.current);return!!(f!=null&&f.type&&p&&m.types.includes(f.type)&&(!m.acceptsDrop||m.acceptsDrop(f)))},i=f=>{var p,w;const m=ue(f);m&&((w=(p=o.current).onDragLeave)==null||w.call(p,m))};return{droppableProps:n?{}:{onDragOver:f=>{var p,w;f.preventDefault(),f.stopPropagation();const m=ue(f);m&&l(m)&&((w=(p=o.current).onDragOver)==null||w.call(p,m,f))},onDragEnter:f=>{var p,w;if(f.stopPropagation(),s.dragOverElements.add(f.target),s.dragOverElements.size>1)return;const m=ue(f);m&&l(m)&&((w=(p=o.current).onDragEnter)==null||w.call(p,m),clearTimeout(s.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(s.dropActivateTimer=setTimeout(()=>{var v,x;m&&((x=(v=o.current).onDropActivate)==null||x.call(v,m))},An)))},onDragLeave:f=>{f.stopPropagation(),s.dragOverElements.delete(f.target);for(const p of s.dragOverElements)f.currentTarget.contains(p)||s.dragOverElements.delete(p);if(s.dragOverElements.size>0)return;const m=ue(f);m&&l(m)&&(i(f),clearTimeout(s.dropActivateTimer))},onDrop:async f=>{var p,w,v,x;f.preventDefault(),f.stopPropagation(),s.dragOverElements.clear(),i(f),clearTimeout(s.dropActivateTimer);const m=ue(f);if(m)if((w=(p=o.current).onDragLeave)==null||w.call(p,m),!l(m))U.status!=="inactive"&&(U.status="dropFail");else{const b=(x=(v=o.current).onDrop)==null?void 0:x.call(v,m);U.status!=="inactive"&&(U.status=b===!1?"dropFail":"dropSuccess")}}}}}function ue(e){if(U.dragTargetId!=null)return G.get(U.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Fn(Rn(e.dataTransfer))}}function yr(e){return"next_cursor"in e?e.next_cursor!=null:"last_page"in e?e.current_page<e.last_page:"next_page"in e?e.next_page!=null:e.data.length>0&&e.data.length>=e.per_page}let _=function(e){return e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e}({}),z=function(e){return e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.notNull="notNull",e.contains="contains",e.notContains="notContains",e.startsWith="startsWith",e.endsWith="endsWith",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e}({});z.eq,z.ne,z.contains,z.notContains,z.startsWith,z.endsWith,z.notNull;z.eq,z.ne,z.gt,z.gte,z.lt,z.lte,z.notNull;const On="user";function Tn(e){var f,m;const{granularity:n,closeDialogOnSelection:t,...r}=e,s=cn(e),o=h.useRef(null),i=Re()&&n!=="day",u=a.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:s.calendarIsOpen,onOpenChange:s.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsx(un,{state:s})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),zn(p)?s.setCalendarIsOpen(!1):s.setCalendarIsOpen(!0)}},c=s.selectedValue,g=s.setSelectedValue;return a.jsxs(h.Fragment,{children:[a.jsxs(mt,{ref:o,wrapperProps:d,endAdornment:i?void 0:a.jsx(gt,{}),...r,children:[a.jsx(Ie,{isPlaceholder:(f=s.isPlaceholder)==null?void 0:f.start,state:s,segmentProps:d,value:c.start,onChange:p=>{g({start:p,end:c.end})}}),a.jsx(dn,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(Ie,{isPlaceholder:(m=s.isPlaceholder)==null?void 0:m.end,state:s,segmentProps:d,value:c.end,onChange:p=>{g({start:c.start,end:p})}})]}),u]})}function zn(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function Nn(e){const{field:{onChange:n,onBlur:t,value:r,ref:s},fieldState:{invalid:o,error:l}}=ve({name:e.name}),i={onChange:u=>{n(u?jt(u):null)},onBlur:t,value:Ln(r),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:s};return a.jsx(Tn,{...de(i,e)})}function Ln(e){const{start:n,end:t,preset:r}=e||{},s={preset:r};try{n&&(s.start=typeof n=="string"?ge(n):n),t&&(s.end=typeof t=="string"?ge(t):t)}catch{}return s}function jt({start:e,end:n,preset:t}={}){const r={preset:t};return e&&(r.start=e.toAbsoluteString()),n&&(r.end=n.toAbsoluteString()),r}function Ct(e){var n;return{...e,defaultOperator:z.between,control:{type:_.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||jt(pt[3].getRangeValue())}}}function $n(e){return Ct({key:"created_at",label:C("Date created"),...e})}function _n(e){return Ct({key:"updated_at",label:C("Last updated"),...e})}const Vn={key:"type",label:C("Type"),description:C("Type of the file"),defaultOperator:z.eq,control:{type:_.Select,defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}},jr=[Vn,{key:"public",label:C("Visibility"),description:C("Whether file is publicly accessible"),defaultOperator:z.eq,control:{type:_.Select,defaultValue:"01",options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}},$n({description:C("Date file was uploaded")}),_n({description:C("Date file was last changed")}),{key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by"),defaultOperator:z.eq,control:{type:_.SelectModel,model:On}}],Ce="filters";function Un(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function Bn(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>Hn(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Hn(e,n){var r;const t=n.find(s=>s.key===e.key);if((t==null?void 0:t.control.type)==="select"){const s=(t.control.options||[]).find(o=>o.key===e.value);if(s)return{...e,value:s.value,valueKey:s.key}}return(r=t==null?void 0:t.extraFilters)!=null&&r.length&&(e.extraFilters=t.extraFilters),e}function Wn(e,n){const[t]=Lt(),r=$t(),s=t.get(Ce),o=h.useMemo(()=>{if(!e)return[];const c=Un(s);return(n||[]).forEach(g=>{if(!c.find(f=>f.key===g)){const f=e.find(m=>m.key===g);c.push({key:g,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),c.sort((g,f)=>e.findIndex(m=>m.key===g.key)-e.findIndex(m=>m.key===f.key)),c},[s,n,e]),l=h.useCallback(c=>{const g=[...o];return c.forEach(f=>{const m=typeof f=="object"?f.key:f,p=g.findIndex(w=>w.key===m);p>-1&&g.splice(p,1)}),g},[o]),i=h.useCallback(c=>{const g=Bn(c,e);g?t.set(Ce,g):t.delete(Ce),r({search:`?${t}`},{replace:!0})},[e,r,t]),u=h.useCallback(c=>{const f=[...l(c),...c];i(f)},[l,i]),d=h.useCallback(c=>i(l([c])),[l,i]);return{add:u,remove:d,replaceAll:i,decodedFilters:o,encodedFilters:s}}const kt=h.forwardRef((e,n)=>{const{isInactive:t,filter:r,...s}=e;return t?a.jsx(Kn,{filter:r,...s,ref:n}):a.jsx(qn,{filter:r,...s,ref:n})}),Kn=h.forwardRef(({filter:e,...n},t)=>a.jsx(ne,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:a.jsx(Me,{}),...n,children:a.jsx(T,{...e.label})})),qn=h.forwardRef(({filter:e,children:n,...t},r)=>{const s=e.control.type===_.BooleanToggle;return a.jsxs(ne,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!s&&a.jsx(Me,{}),ref:r,...t,children:[a.jsx("span",{className:E(!s&&"mr-8 border-r border-r-primary-light pr-8"),children:a.jsx(T,{...e.label})}),n]})});function Gn({filter:e}){const{trans:n}=B();return a.jsx(st,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>a.jsx(be,{value:t.key,children:typeof t.label=="string"?t.label:a.jsx(T,{...t.label})},t.key))})}function he(e){const{onValueChange:n,isInactive:t,filter:r,label:s}=e;return a.jsxs(Fe,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[a.jsx(kt,{isInactive:t,filter:r,children:s}),a.jsx(Yn,{...e})]})}function Yn({filter:e,panel:n,value:t,operator:r}){const s=_t({defaultValues:{[e.key]:{value:t,operator:r}}}),{close:o,formId:l}=rt();return a.jsxs(Ae,{size:"xs",children:[a.jsx(Vt,{children:a.jsx(T,{...e.label})}),a.jsx(ot,{padding:"px-14 pt-14 pb-4 max-h-288",children:a.jsxs(Ut,{form:s,id:l,onSubmit:i=>{o(i[e.key])},children:[e.description&&a.jsx("div",{className:"mb-14 text-xs text-muted",children:a.jsx(T,{...e.description})}),n]})}),a.jsx(at,{children:a.jsx(ne,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:a.jsx(T,{message:"Apply"})})})]})}function Xn(e,n,t){return it({queryKey:[...e.split("/"),n],queryFn:()=>Qn(e,n),placeholderData:Bt,...t})}async function Qn(e,n){return we.get(e,{params:n}).then(t=>"results"in t.data?t.data:{results:Object.values(t.data).find(s=>Array.isArray(s))})}function It(e,n,t){return it({queryKey:[e,n],queryFn:()=>Zn(e,n),...t})}async function Zn(e,n){return we.get(e,{params:n}).then(t=>t.data)}function Jn({label:e,className:n,background:t,value:r,defaultValue:s="",placeholder:o=C("Select item..."),searchPlaceholder:l=C("Find an item..."),onChange:i,description:u,errorMessage:d,invalid:c,autoFocus:g,queryParams:f,endpoint:m,disabled:p,required:w}){var O;const v=h.useRef(null),[x,b]=h.useState(""),[y,j]=Z(r,s,i),D=Xn(m,{query:x,...f}),{trans:P}=B(),A=et({size:"md"});return y?a.jsxs("div",{className:n,children:[a.jsx("div",{className:A.label,children:e}),a.jsx("div",{className:E("rounded-input border p-8",t,c&&"border-danger"),children:a.jsx(ye,{initial:!1,mode:"wait",children:a.jsx(es,{disabled:p,endpoint:m,modelId:y,queryParams:f,onEditClick:()=>{j(""),b(""),requestAnimationFrame(()=>{var S,N;(S=v.current)==null||S.focus(),(N=v.current)==null||N.click()})}})})}),u&&!d&&a.jsx("div",{className:A.description,children:u}),d&&a.jsx("div",{className:A.error,children:d})]}):a.jsx(Ht,{className:n,showSearchField:!0,invalid:c,errorMessage:d,description:u,color:"white",isAsync:!0,background:t,placeholder:P(o),searchPlaceholder:P(l),label:e,isLoading:D.isFetching,items:(O=D.data)==null?void 0:O.results,inputValue:x,onInputValueChange:b,selectionMode:"single",selectedValue:y,onSelectionChange:j,ref:v,autoFocus:g,disabled:p,required:w,children:S=>a.jsx(be,{value:S.id,description:S.description,startIcon:a.jsx(xe,{src:S.image,size:"sm",label:S.name}),children:S.name},S.id)})}function es({modelId:e,onEditClick:n,endpoint:t,disabled:r,queryParams:s}){const{data:o,isLoading:l}=It(`${t}/${e}`,s);return l||!(o!=null&&o.model)?a.jsx(ts,{},"skeleton"):a.jsxs(fe.div,{className:E("flex items-center gap-10",r&&"pointer-events-none cursor-not-allowed text-disabled"),...Oe,children:[a.jsx(xe,{src:o.model.image,label:o.model.name}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm leading-4",children:o.model.name}),a.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),a.jsx(Wt,{label:a.jsx(T,{message:"Change item"}),children:a.jsx(Y,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:r,children:a.jsx(vn,{})})})]},"preview")}function ts(){return a.jsxs(fe.div,{className:"flex items-center gap-10",...Oe,children:[a.jsx(te,{variant:"rect",size:"w-32 h-32"}),a.jsxs("div",{className:"max-h-[36px] flex-auto",children:[a.jsx(te,{className:"text-xs"}),a.jsx(te,{className:"max-h-8 text-xs"})]}),a.jsx(te,{variant:"icon",size:"w-24 h-24"})]})}function ns({name:e,...n}){const{clearErrors:t}=lt(),{field:{onChange:r,value:s=""},fieldState:{invalid:o,error:l}}=ve({name:e});return a.jsx(Jn,{value:s,onChange:i=>{r(i),t(e)},invalid:o,errorMessage:l==null?void 0:l.message,...n})}function ss({filter:e}){return a.jsx(ns,{name:`${e.key}.value`,endpoint:e.control.endpoint?e.control.endpoint:`normalized-models/${e.control.model}`})}function rs({filter:e}){return a.jsx(Nn,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const St={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),notNull:C("has any value"),contains:C("contains"),notContains:C("does not contain"),startsWith:C("starts with"),endsWith:C("ends with"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between"),hasAll:C("Include all")};function os({filter:e}){var s,o;const n=e.control,t=lt(),r=Kt({control:t.control,name:`${e.key}.operator`});return a.jsxs(h.Fragment,{children:[(s=e.operators)!=null&&s.length?a.jsx(st,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",children:(o=e.operators)==null?void 0:o.map(l=>a.jsx(be,{value:l,children:a.jsx(T,{...St[l]})},l))}):null,r==="notNull"?null:a.jsx(qt,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0})]})}function as({children:e,...n}){const{field:{onChange:t,onBlur:r,value:s=[],ref:o},fieldState:{invalid:l,error:i}}=ve({name:n.name}),u={onChange:t,onBlur:r,value:s,invalid:l,errorMessage:i==null?void 0:i.message};return a.jsx(Sn,{ref:o,...de(u,n),children:e})}function is({filter:e}){const{trans:n}=B();return a.jsx(as,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{const r=e.control.options.find(s=>s.key===t.id);if(r)return typeof r.label=="string"?r.label:r.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:typeof t.label=="string"?t.label:t.label.message})),children:t=>a.jsx(be,{value:t.id,children:a.jsx(T,{message:t.name})},t.id)})}function ls(e){switch(e.filter.control.type){case _.DateRangePicker:return a.jsx(cs,{...e});case _.BooleanToggle:return a.jsx(us,{...e});case _.Select:return a.jsx(ds,{...e});case _.ChipField:return a.jsx(fs,{...e});case _.Input:return a.jsx(ms,{...e});case _.SelectModel:return a.jsx(gs,{...e});case _.Custom:const n=e.filter.control.listItem;return a.jsx(n,{...e});default:return null}}function cs(e){const{value:n,filter:t}=e;let r;return n.preset!==void 0?r=a.jsx(T,{...pt[n.preset].label}):r=a.jsx(fn,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),a.jsx(he,{...e,label:r,panel:a.jsx(rs,{filter:t})})}function us({filter:e,isInactive:n,onValueChange:t}){return a.jsx(kt,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function ds(e){const{filter:n,value:t}=e,r=n.control.options.find(s=>s.key===t);return a.jsx(he,{...e,label:r?typeof r.label=="string"?r.label:a.jsx(T,{...r.label}):null,panel:a.jsx(Gn,{filter:n})})}function fs(e){return a.jsx(he,{...e,label:a.jsx(hs,{...e}),panel:a.jsx(is,{filter:e.filter})})}function hs(e){const{trans:n}=B(),{filter:t,value:r}=e,s=r.map(u=>t.control.options.find(d=>d.key===u)),o=3,l=r.length-o,i=a.jsx(h.Fragment,{children:s.filter(Boolean).slice(0,o).map((u,d)=>{let c="";return d!==0&&(c+=", "),c+=typeof u.label=="string"?u.label:n(u.label),c})});return l>0?a.jsx(T,{message:":names + :count more",values:{names:i,count:l}}):i}function ms(e){const{filter:n,value:t,operator:r}=e,s=r?a.jsx(T,{...St[r]}):null,o=n.control.inputType==="number"?a.jsx(hn,{value:t}):t;return a.jsx(he,{...e,label:a.jsxs(h.Fragment,{children:[s," ",o]}),panel:a.jsx(os,{filter:n})})}function gs(e){const{value:n,filter:t}=e,{isLoading:r,data:s}=It(t.control.endpoint?`${t.control.endpoint}/${n}`:`normalized-models/${t.control.model}/${n}`,void 0,{enabled:!!n}),o=a.jsxs(h.Fragment,{children:[a.jsx(te,{variant:"avatar",size:"w-18 h-18 mr-6"}),a.jsx(te,{variant:"rect",size:"w-50"})]}),l=a.jsxs(h.Fragment,{children:[a.jsx(xe,{size:"xs",src:s==null?void 0:s.model.image,label:s==null?void 0:s.model.name,className:"mr-6"}),s==null?void 0:s.model.name]}),i=r||!s?o:l;return a.jsx(he,{...e,label:i,panel:a.jsx(ss,{filter:t})})}function Cr({filters:e,pinnedFilters:n,className:t,wrap:r}){const{decodedFilters:s,remove:o,replaceAll:l}=Wn(e,n);return s.length?a.jsx("div",{className:E("flex items-center gap-6",t,r?"flex-wrap":"overflow-x-auto"),children:s.map((i,u)=>{const d=e.find(g=>g.key===i.key);if(!d)return null;const c=g=>{const f=[...s];f.splice(u,1,{key:d.key,value:g.value,isInactive:!1,operator:g.operator||d.defaultOperator}),l(f)};return a.jsxs("div",{children:[!i.isInactive&&a.jsx(Y,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{o(i.key)},children:a.jsx(ct,{})}),a.jsx(ls,{filter:d,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:c})]},i.key)})}):null}const Te=h.createContext(null);function ps({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:r=0,preventDefault:s,stopPropagation:o=!0,onPress:l,onLongPress:i,...u}){const c=h.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:g,removeGlobalListener:f}=vt(),m=x=>{!c.el||(e==null?void 0:e(x,c.el))===!1||(c.originalTouchAction=c.el.style.touchAction,c.el.style.touchAction="none",c.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",c.started=!0)},p=x=>{var b;if(x.button===0&&c.id==null){if(c.started=!1,((b=u.onPointerDown)==null?void 0:b.call(u,x))===!1)return;o&&x.stopPropagation(),s&&x.preventDefault(),c.id=x.pointerId,c.el=x.currentTarget,c.lastPosition={x:x.clientX,y:x.clientY},i&&(c.longPressTimer=setTimeout(()=>{i(x,c.el),c.longPressTriggered=!0},400)),(e||n)&&g(window,"pointermove",w,!1),g(window,"pointerup",v,!1),g(window,"pointercancel",v,!1)}},w=x=>{if(x.pointerId===c.id){const b=x.clientX-c.lastPosition.x,y=x.clientY-c.lastPosition.y;(Math.abs(b)>=r||Math.abs(y)>=r)&&!c.started&&m(x),c.started&&(n==null||n(x,b,y),c.lastPosition={x:x.clientX,y:x.clientY})}},v=x=>{var b;if(x.pointerId===c.id){c.longPressTimer&&clearTimeout(c.longPressTimer);const y=c.longPressTriggered;c.longPressTriggered=!1,c.started&&(t==null||t(x)),c.el&&(x.type!=="pointercancel"&&((b=u.onPointerUp)==null||b.call(u,x,c.el),x.target&&c.el.contains(x.target)&&(y?i==null||i(x,c.el):l==null||l(x,c.el))),document.documentElement.style.userSelect=c.originalUserSelect||"",c.el.style.touchAction=c.originalTouchAction||""),c.id=void 0,c.started=!1,f(window,"pointermove",w,!1),f(window,"pointerup",v,!1),f(window,"pointercancel",v,!1)}};return{domProps:{onPointerDown:J(p)}}}const We=se(a.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),xs=Ee.createContext(null);function Q(e,n){const{base_url:t}=Gt(),r=h.useContext(xs);return h.useMemo(()=>{if(!e)return{};const o={previewUrl:vs(e,(n==null?void 0:n.preferThumbnail)||!1),downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return r&&(o.previewUrl&&(o.previewUrl=Ke(o.previewUrl,{...r,thumbnail:n!=null&&n.preferThumbnail?"true":""},t)),o.downloadUrl=Ke(o.downloadUrl,r,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.preferThumbnail,r])}function vs(e,n){if(e.url){if(Yt(e.url))if(n&&e.thumbnail){const t=e.extension==="png"?"png":"jpg";return e.url.replace(new RegExp(e.file_name+"$"),`thumbnail.${t}`)}else return e.url;return`${Xt().settings.base_url}/${e.url}`}}function Ke(e,n,t){const r=new URL(e,t);return Object.entries(n).forEach(([s,o])=>{r.searchParams.append(s,o)}),r.toString()}function De(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}const kr=se(a.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function pe(e){return Qt()?e.metaKey:e.ctrlKey}function bs(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:s=>{switch(s.key){case"ArrowLeft":H(s,{cell:{op:"decrement"}},e);break;case"ArrowRight":H(s,{cell:{op:"increment"}},e);break;case"ArrowUp":H(s,{row:{op:"decrement"}},e);break;case"ArrowDown":H(s,{row:{op:"increment"}},e);break;case"PageUp":H(s,{row:{op:"decrement",count:5}},e);break;case"PageDown":H(s,{row:{op:"increment",count:5}},e);break;case"Tab":ws(s);break;case"Home":pe(s)?H(s,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):H(s,{cell:{op:"decrement",count:n}},e);break;case"End":pe(s)?H(s,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):H(s,{cell:{op:"increment",count:n}},e);break}}}}function H(e,n,{cellCount:t,rowCount:r}){var p,w,v,x,b,y,j;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;e.preventDefault();const s=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!s)return;const l=o.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),u=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(u))return;const d=((w=n.row)==null?void 0:w.count)??1;((v=n.row)==null?void 0:v.op)==="increment"?i=Math.min(r,i+d):((x=n.row)==null?void 0:x.op)==="decrement"&&(i=Math.max(1,i-d));const c=((b=n.cell)==null?void 0:b.count)??1;((y=n.cell)==null?void 0:y.op)==="increment"?u=Math.min(t,u+c):((j=n.cell)==null?void 0:j.op)==="decrement"&&(u=Math.max(1,u-c));const g=s.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${u}"]`);if(!g)return;const m=ut(g).nextNode()||g;o.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function ws(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=ut(n,{tabbable:!0});let r,s;do s=t.lastChild(),s&&(r=s);while(s);r&&!r.contains(document.activeElement)&&Zt(r)}}const W=h.createContext(null);function Dt({index:e,isHeader:n}){const{columns:t,cellHeight:r="h-46",headerCellHeight:s="h-46"}=h.useContext(W),o=t[e],l=o==null?void 0:o.padding;let i="justify-start";return(o==null?void 0:o.align)==="center"?i="justify-center":(o==null?void 0:o.align)==="end"&&(i="justify-end"),E("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?s:r,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,i,l,o==null?void 0:o.className)}function ys({rowIndex:e,rowIsHovered:n,index:t,item:r,id:s}){const{columns:o}=h.useContext(W),l=o[t],i=h.useMemo(()=>({index:e,isHovered:n,isPlaceholder:r.isPlaceholder}),[e,n,r.isPlaceholder]),u=Dt({index:t,isHeader:!1});return a.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:s,className:u,children:a.jsx("div",{className:"w-full min-w-0 overflow-hidden overflow-ellipsis",children:l.body(r,i)})})}function js(e){return e.shiftKey||pe(e)}function Cs({index:e,isSelected:n,isHeader:t}){const r=Jt(),s=Re(),{hideBorder:o,enableSelection:l,collapseOnMobile:i,onAction:u}=h.useContext(W);return E("flex gap-x-16 break-inside-avoid outline-none border border-transparent",u&&"cursor-pointer",s&&i&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!r&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&r&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(l||u)&&"focus-visible:bg-focus hover:bg-hover")}const ks=["button","a","input","select","textarea"];function Is({item:e,index:n,renderAs:t,className:r,style:s}){const{selectedRows:o,columns:l,toggleRow:i,selectRow:u,onAction:d,selectRowOnContextMenu:c,enableSelection:g,selectionStyle:f,hideHeaderRow:m}=h.useContext(W),p=h.useRef(!1),w=o.includes(e.id),[v,x]=h.useState(!1),b=k=>k.target.closest(ks.join(",")),y=k=>{f==="highlight"&&d&&!p.current&&!b(k)&&(k.preventDefault(),k.stopPropagation(),d(e,n))},j=!!o.length,D=k=>{b(k)||(f==="checkbox"?g&&(j||!d)?i(e):d&&d(e,n):f==="highlight"&&(p.current?g&&j?i(e):d==null||d(e,n):g&&u(e,js(k))))},{domProps:P}=ps({onPointerDown:k=>{p.current=k.pointerType==="touch"},onPress:D,onLongPress:g?()=>{p.current&&i(e)}:void 0}),A=k=>{g&&k.key===" "?(k.preventDefault(),k.stopPropagation(),f==="checkbox"?i(e):u(e)):k.key==="Enter"&&!o.length&&d&&(k.preventDefault(),k.stopPropagation(),d(e,n))},O=k=>{c&&g&&(o.includes(e.id)||u(e)),p.current&&(k.preventDefault(),k.stopPropagation())},S=Cs({index:n,isSelected:w}),N=t||"div";return a.jsx(N,{role:"row","aria-rowindex":n+1+(m?0:1),"aria-selected":w,tabIndex:-1,className:E(r,S),item:N==="div"?void 0:e,onDoubleClick:J(y),onKeyDown:J(A),onContextMenu:J(O),onPointerEnter:J(()=>x(!0)),onPointerLeave:J(()=>x(!1)),style:s,...P,children:l.map((k,M)=>a.jsx(ys,{rowIndex:n,rowIsHovered:v,index:M,item:e},`${e.id}-${k.key}`))})}const Ss={key:"checkbox",header:()=>a.jsx(Es,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?a.jsx(te,{size:"w-24 h-24",variant:"rect"}):a.jsx(Ds,{item:e})};function Ds({item:e}){const{selectedRows:n,toggleRow:t}=h.useContext(W);return a.jsx(dt,{checked:n.includes(e.id),onChange:()=>t(e)})}function Es(){const{trans:e}=B(),{data:n,selectedRows:t,onSelectionChange:r}=h.useContext(W),s=!!n.length&&n.length===t.length,o=!s&&!!t.length;return a.jsx(dt,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:s,onChange:()=>{r(s?[]:n.map(l=>l.id))}})}const Ps=se(a.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Ms({index:e}){const{columns:n,sortDescriptor:t,onSortChange:r,enableSorting:s}=h.useContext(W),o=n[e],l=Dt({index:e,isHeader:!0}),[i,u]=h.useState(!1),d=o.sortingKey||o.key,c=o.allowsSorting&&s,{orderBy:g,orderDir:f}=t||{},m=c&&g===d;let p;m&&f==="asc"?p="ascending":m&&f==="desc"?p="descending":c&&(p="none");const w=()=>{if(!c)return;let b;m&&f==="desc"?b={orderDir:"asc",orderBy:d}:m&&f==="asc"?b={orderBy:void 0,orderDir:void 0}:b={orderDir:"desc",orderBy:d},r==null||r(b)},v=m||i,x={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return a.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":p,className:E(l,"text-xs font-medium text-muted",c&&"cursor-pointer"),onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onKeyDown:b=>{(b.key===" "||b.key==="Enter")&&(b.preventDefault(),w())},onClick:w,children:[o.hideHeader?a.jsx("div",{className:"opacity-0",children:o.header()}):o.header(),a.jsx(ye,{children:c&&a.jsx(fe.span,{variants:x,animate:v?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"-mt-2 ml-6 inline-block","data-testid":"table-sort-button","aria-hidden":!v,children:a.jsx(Ps,{size:"xs",className:E("text-muted",f==="asc"&&g===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Rs(){const{columns:e}=h.useContext(W);return a.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>a.jsx(Ms,{index:t},n.key))})}function Ir({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:r=!1,hideBorder:s=!1,data:o,selectedRows:l,defaultSelectedRows:i,onSelectionChange:u,sortDescriptor:d,onSortChange:c,enableSorting:g=!0,onDelete:f,enableSelection:m=!0,selectionStyle:p="checkbox",ariaLabelledBy:w,selectRowOnContextMenu:v,onAction:x,renderRowAs:b,tableBody:y,meta:j,tableRef:D,closeOnInteractOutside:P=!1,cellHeight:A,headerCellHeight:O,...S}){const N=Re(),k=!!N&&t;k&&(r=!0,s=!0);const[M,L]=Z(l,i||[],u),[re,oe]=Z(d,void 0,c),ae=h.useCallback(F=>{const $=[...M];if(!$.includes(F.id))$.push(F.id);else{const ie=$.indexOf(F.id);$.splice(ie,1)}L($)},[M,L]),I=h.useCallback((F,$)=>{let ie=[];F&&(ie=$?[...M==null?void 0:M.filter(ce=>ce!==F.id),F.id]:[F.id]),L(ie)},[M,L]),R=h.useMemo(()=>{const F=n.filter(ie=>{const ce=ie.visibleInMode||"regular";if(ce==="all"||ce==="compact"&&k||ce==="regular"&&!k)return!0});return m&&p!=="highlight"&&!N&&F.unshift(Ss),F},[N,n,m,p,k]),K={isCollapsedMode:k,cellHeight:A,headerCellHeight:O,hideBorder:s,hideHeaderRow:r,selectedRows:M,onSelectionChange:L,enableSorting:g,enableSelection:m,selectionStyle:p,data:o,columns:R,sortDescriptor:re,onSortChange:oe,toggleRow:ae,selectRow:I,onAction:x,selectRowOnContextMenu:v,meta:j,collapseOnMobile:t},q=bs({cellCount:m?R.length+1:R.length,rowCount:o.length+1}),V={renderRowAs:b};y?y=h.cloneElement(y,V):y=a.jsx(Fs,{...V});const Ne=Je(D);return wn({ref:Ne,onInteractOutside:F=>{P&&m&&(M!=null&&M.length)&&!F.target.closest('[role="dialog"]')&&L([])}}),a.jsx(W.Provider,{value:K,children:a.jsxs("div",{...de(S,q,{onKeyDown:F=>{F.key==="Escape"?(F.preventDefault(),F.stopPropagation(),M!=null&&M.length&&L([])):F.key==="Delete"?(F.preventDefault(),F.stopPropagation(),M!=null&&M.length&&(f==null||f(o.filter($=>M==null?void 0:M.includes($.id))))):pe(F)&&F.key==="a"&&(F.preventDefault(),F.stopPropagation(),m&&L(o.map($=>$.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":R.length+1,ref:Ne,"aria-multiselectable":m?!0:void 0,"aria-labelledby":w,className:E(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!r&&a.jsx(Rs,{}),y]})})}function Fs({renderRowAs:e}){const{data:n}=h.useContext(W);return a.jsx(h.Fragment,{children:n.map((t,r)=>a.jsx(Is,{item:t,index:r,renderAs:e},t.id))})}const As=2*1024*1024;function Os({file:e,className:n,iconClassName:t,showImage:r=!0}){const{trans:s}=B(),{previewUrl:o}=Q(e,{preferThumbnail:!0});if(e.file_size&&e.file_size>As&&!e.thumbnail&&(r=!1),r&&e.type==="image"&&o){const l=s({message:":fileName thumbnail",values:{fileName:e.name}});return a.jsx("img",{className:E(n,"object-cover"),src:o,alt:l,draggable:!1})}return a.jsx(en,{className:t,type:e.type})}function le(e,n,t){let r=t.initialDeps??[],s;function o(){var l,i,u,d;let c;t.key&&((l=t.debug)!=null&&l.call(t))&&(c=Date.now());const g=e();if(!(g.length!==r.length||g.some((p,w)=>r[w]!==p)))return s;r=g;let m;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(m=Date.now()),s=n(...g),t.key&&((u=t.debug)!=null&&u.call(t))){const p=Math.round((Date.now()-c)*100)/100,w=Math.round((Date.now()-m)*100)/100,v=w/16,x=(b,y)=>{for(b=String(b);b.length<y;)b=" "+b;return b};console.info(`%c⏱ ${x(w,5)} /${x(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(d=t==null?void 0:t.onChange)==null||d.call(t,s),s}return o.updateDeps=l=>{r=l},o}function qe(e,n){if(e===void 0)throw new Error(`Unexpected undefined${n?`: ${n}`:""}`);return e}const Ts=(e,n)=>Math.abs(e-n)<1.01,zs=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},Ge=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Ns=e=>e,Ls=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},$s=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=l=>{const{width:i,height:u}=l;n({width:Math.round(i),height:Math.round(u)})};if(s(Ge(t)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(l=>{const i=()=>{const u=l[0];if(u!=null&&u.borderBoxSize){const d=u.borderBoxSize[0];if(d){s({width:d.inlineSize,height:d.blockSize});return}}s(Ge(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return o.observe(t,{box:"border-box"}),()=>{o.unobserve(t)}},Ye={passive:!0},Xe=typeof window>"u"?!0:"onscrollend"in window,_s=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const o=e.options.useScrollendEvent&&Xe?()=>{}:zs(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),l=c=>()=>{const{horizontal:g,isRtl:f}=e.options;s=g?t.scrollLeft*(f&&-1||1):t.scrollTop,o(),n(s,c)},i=l(!0),u=l(!1);u(),t.addEventListener("scroll",i,Ye);const d=e.options.useScrollendEvent&&Xe;return d&&t.addEventListener("scrollend",u,Ye),()=>{t.removeEventListener("scroll",i),d&&t.removeEventListener("scrollend",u)}},Vs=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Us=(e,{adjustments:n=0,behavior:t},r)=>{var s,o;const l=e+n;(o=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||o.call(s,{[r.options.horizontal?"left":"top"]:l,behavior:t})};class Bs{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(o=>{const l=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var o;return(o=r())==null?void 0:o.observe(s,{box:"border-box"})},unobserve:s=>{var o;return(o=r())==null?void 0:o.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ns,rangeExtractor:Ls,onChange:()=>{},measureElement:Vs,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=le(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,o=new Map;for(let l=r-1;l>=0;l--){const i=t[l];if(s.has(i.lane))continue;const u=o.get(i.lane);if(u==null||i.end>u.end?o.set(i.lane,i):i.end<u.end&&s.set(i.lane,!0),s.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((l,i)=>l.end===i.end?l.index-i.index:l.end-i.end)[0]:void 0},this.getMeasurementOptions=le(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,o,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:o,enabled:l}),{key:!1}),this.getMeasurements=le(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:o,enabled:l},i)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,u);for(let c=u;c<t;c++){const g=o(c),f=this.options.lanes===1?d[c-1]:this.getFurthestMeasurement(d,c),m=f?f.end+this.options.gap:r+s,p=i.get(g),w=typeof p=="number"?p:this.options.estimateSize(c),v=m+w,x=f?f.lane:c%this.options.lanes;d[c]={index:c,start:m,size:w,end:v,key:g,lane:x}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=le(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,o)=>this.range=t.length>0&&r>0?Hs({measurements:t,outerSize:r,scrollOffset:s,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=le(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,o,l)=>o===null||l===null?[]:t({startIndex:o,endIndex:l,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),o=this.measurementsCache[s];if(!o)return;const l=o.key,i=this.elementsCache.get(l);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const o=this.itemSizeCache.get(s.key)??s.size,l=r-o;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,l,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=le(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let o=0,l=t.length;o<l;o++){const i=t[o],u=r[i];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return qe(r[Et(0,r.length-1,s=>qe(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const o=this.getSize(),l=this.getScrollOffset();r==="auto"&&(r=t>=l+o?"end":"start"),r==="center"?t+=(s-o)/2:r==="end"&&(t-=o);const i=this.getTotalSize()+this.options.scrollMargin-o;return Math.max(Math.min(i,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const o=this.getSize(),l=this.getScrollOffset();if(r==="auto")if(s.end>=l+o-this.options.scrollPaddingEnd)r="end";else if(s.start<=l+this.options.scrollPaddingStart)r="start";else return[l,r];const i=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let o=0;const l=10,i=d=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(t,d);if(!c){console.warn("Failed to get offset for index:",t);return}const[g,f]=c;this._scrollToOffset(g,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),p=this.getOffsetForIndex(t,f);if(!p){console.warn("Failed to get offset for index:",t);return}Ts(p[0],m)||u(f)})},u=d=>{this.targetWindow&&(o++,o<l?this.targetWindow.requestAnimationFrame(()=>i(d)):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};i(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const o=Array(this.options.lanes).fill(null);let l=r.length-1;for(;l>=0&&o.some(i=>i===null);){const i=r[l];o[i.lane]===null&&(o[i.lane]=i.end),l--}s=Math.max(...o.filter(i=>i!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Et=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,o=t(s);if(o<r)e=s+1;else if(o>r)n=s-1;else return s}return e>0?e-1:0};function Hs({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,o=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let l=Et(0,s,o,t),i=l;if(r===1)for(;i<s&&e[i].end<t+n;)i++;else if(r>1){const u=Array(r).fill(0);for(;i<s&&u.some(c=>c<t+n);){const c=e[i];u[c.lane]=c.end,i++}const d=Array(r).fill(t+n);for(;l>=0&&d.some(c=>c>=t);){const c=e[l];d[c.lane]=c.start,l--}l=Math.max(0,l-l%r),i=Math.min(s,i+(r-1-i%r))}return{startIndex:l,endIndex:i}}const Qe=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Ws(e){const n=h.useReducer(()=>({}),{})[1],t={...e,onChange:(s,o)=>{var l;o?tn.flushSync(n):n(),(l=e.onChange)==null||l.call(e,s,o)}},[r]=h.useState(()=>new Bs(t));return r.setOptions(t),Qe(()=>r._didMount(),[]),Qe(()=>r._willUpdate()),r}function Sr(e){return Ws({observeElementRect:$s,observeElementOffset:_s,scrollToFn:Us,...e})}const ze=Ee.createContext(null);function X({message:e,className:n,allowDownload:t}){const{entries:r,activeIndex:s}=h.useContext(ze),o=r[s],l=e||a.jsx(T,{message:"No file preview available"}),{downloadUrl:i}=Q(o);return a.jsxs("div",{className:E(n,"w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow"),children:[a.jsx("div",{className:"text-lg",children:l}),t&&a.jsx("div",{className:"mt-20 block text-center",children:a.jsx(ne,{variant:"flat",color:"primary",onClick:()=>{i&&De(i)},children:a.jsx(T,{message:"Download"})})})]})}function Ks(e){const{entry:n,className:t}=e,{trans:r}=B(),{previewUrl:s}=Q(n);return s?a.jsx("img",{className:E(t,"shadow"),src:s,alt:r({message:"Preview for :name",values:{name:n.name}})}):a.jsx(X,{...e})}const qs=5242880;function Gs(e){const{entry:n,className:t}=e,{trans:r}=B(),[s,o]=h.useState(!1),[l,i]=h.useState(!0),[u,d]=h.useState(!1),[c,g]=h.useState(null),{previewUrl:f}=Q(n);return h.useEffect(()=>{n&&(f?n.file_size>=qs?(o(!0),i(!1)):Ys(f).then(m=>{g(m.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,f]),l?a.jsx(Pe,{isIndeterminate:!0,"aria-label":r({message:"Loading file contents"})}):s?a.jsx(X,{...e,message:a.jsx(T,{message:"This file is too large to preview."})}):u?a.jsx(X,{...e,message:a.jsx(T,{message:"There was an issue previewing this file"})}):a.jsx("pre",{className:E("h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm",t),children:a.jsx("div",{className:"container mx-auto",children:`${c}`})})}function Ys(e){return we.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Xs(e){const{entry:n,className:t}=e,{previewUrl:r}=Q(n),s=h.useRef(null),[o,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=s.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!r?a.jsx(X,{...e}):a.jsx("video",{className:t,ref:s,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:a.jsx("source",{src:r,type:n.mime,onError:()=>{l(!0)}})})}function Qs(e){const{entry:n,className:t}=e,{previewUrl:r}=Q(n),s=h.useRef(null),[o,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=s.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!r?a.jsx(X,{...e}):a.jsx("audio",{className:t,ref:s,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:a.jsx("source",{src:r,type:n.mime,onError:()=>{l(!0)}})})}function Zs(e){const{entry:n,className:t}=e,{trans:r}=B(),{previewUrl:s}=Q(n);return s?a.jsx("iframe",{title:r({message:"Preview for :name",values:{name:n.name}}),className:E(t,"h-full w-full"),src:`${s}#toolbar=0`}):a.jsx(X,{...e})}function ke(e){const{entry:n,className:t}=e,{trans:r}=B(),s=h.useRef(null),[o,l]=h.useState(!1),i=h.useRef(),[u,d]=h.useState(!1),{previewUrl:c}=Q(n);return h.useEffect(()=>{c?n.file_size&&n.file_size>25e6?l(!0):s.current&&(s.current.onload=()=>{clearTimeout(i.current),d(!1)},Js(c,n).then(g=>{s.current&&(s.current.src=g)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,c]),o?a.jsx(X,{...e}):a.jsxs("div",{className:E(t,"h-full w-full"),children:[u&&a.jsx(Pe,{}),a.jsx("iframe",{ref:s,title:r({message:"Preview for :name",values:{name:n.name}}),className:E("h-full w-full",u&&"hidden")})]})}async function Js(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:r}=await we.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",r.preview_token)}return er(t)}function er(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const Ze={text:Gs,video:Xs,audio:Qs,image:Ks,pdf:Zs,spreadsheet:ke,powerPoint:ke,word:ke,"text/rtf":X};function tr(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return Ze[n]||Ze[t]||X}const nr=se(a.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function sr({entries:e,onClose:n,showHeader:t=!0,className:r,headerActionsLeft:s,allowDownload:o=!0,...l}){const i=ft("(max-width: 1024px)"),[u,d]=Z(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),c=e[u],g=h.useMemo(()=>({entries:e,activeIndex:u}),[e,u]),f=tr(c);if(!c)return n==null||n(),null;const m=e.length-1>u,p=()=>{d(u+1)},w=u>0,v=()=>{d(u-1)};return a.jsxs(ze.Provider,{value:g,children:[t&&a.jsx(rr,{actionsLeft:s,isMobile:i,onClose:n,onNext:m?p:void 0,onPrevious:w?v:void 0,allowDownload:o}),a.jsxs("div",{className:E("relative flex-auto overflow-hidden",r),children:[i&&a.jsx(Y,{size:"lg",className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!w,onClick:v,children:a.jsx(nn,{})}),a.jsx(ye,{initial:!1,children:a.jsx(fe.div,{className:"absolute inset-0 flex items-center justify-center",...Oe,children:a.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:c,allowDownload:o})},c.id)}),i&&a.jsx(Y,{size:"lg",className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!m,onClick:p,children:a.jsx(mn,{})})]})]})}function rr({onNext:e,onPrevious:n,onClose:t,isMobile:r,actionsLeft:s,allowDownload:o}){const{entries:l,activeIndex:i}=h.useContext(ze),u=l[i],{downloadUrl:d}=Q(u),f=r?a.jsx(Y,{onClick:()=>{d&&De(d)},children:a.jsx(We,{})}):a.jsx(ne,{startIcon:a.jsx(We,{}),variant:"text",onClick:()=>{d&&De(d)},children:a.jsx(T,{message:"Download"})});return a.jsxs("div",{className:"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted",children:[a.jsxs("div",{className:"flex w-1/3 items-center justify-start gap-4",children:[s,o?f:void 0]}),a.jsxs("div",{className:"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main",children:[a.jsx(Os,{file:u,iconClassName:"w-16 h-16",showImage:!1}),a.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:u.name})]}),a.jsxs("div",{className:"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap",children:[!r&&a.jsxs(h.Fragment,{children:[a.jsx(Y,{disabled:!n,onClick:n,children:a.jsx(nr,{})}),a.jsx("div",{children:i+1}),a.jsx("div",{children:"/"}),a.jsx("div",{children:l.length}),a.jsx(Y,{disabled:!e,onClick:e,children:a.jsx(bn,{})}),a.jsx("div",{className:"mx-20 h-24 w-1 bg-divider"})]}),a.jsx(Y,{radius:"rounded-none",onClick:t,children:a.jsx(ct,{})})]})]})}function Dr(e){return a.jsx(Ae,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:a.jsx(or,{...e})})}function or(e){const{close:n}=rt();return a.jsx(sr,{onClose:n,...e})}function ar(e){const n=xt(),[t,r]=h.useState(!e.value&&!e.defaultValue),s=e.onChange,[o,l]=Z(e.value||n,e.defaultValue||n,j=>{r(!1),s==null||s(j)}),{min:i,max:u,granularity:d,timezone:c,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:m}=gn(o,e),p=h.useCallback(()=>{r(!0),l(n),s==null||s(null),f(!1)},[n,l,s,f]),[w,v]=h.useState(()=>[Le(o)]),x=h.useCallback(j=>{i&&j.compare(i)<0?j=i:u&&j.compare(u)>0&&(j=u);const D=o?o.set(j):pn(j,c);l(D),v([Le(D)]),r(!1)},[l,i,u,o,c]),b=h.useCallback(j=>!t&&sn(o,j),[o,t]),y=h.useCallback(j=>({onClick:()=>{x==null||x(j),m&&(f==null||f(!1))}}),[x,f,m]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:b,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:w,setCalendarDates:v,isPlaceholder:t,clear:p,setIsPlaceholder:r,min:i,max:u,granularity:d,timezone:c,closeDialogOnSelection:m}}function ir({showCalendarFooter:e,...n}){const t=ar(n),r=h.useRef(null),s=xt(),o=e&&a.jsx(at,{padding:"px-14 pb-14",startAction:a.jsx(ne,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:a.jsx(T,{message:"Clear"})}),children:a.jsx(ne,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(s),t.setCalendarIsOpen(!1)},children:a.jsx(T,{message:"Today"})})}),l=a.jsx(Fe,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:r,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsxs(Ae,{size:"auto",children:[a.jsx(ot,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:a.jsx(xn,{state:t,visibleMonths:1})}),o]})}),i={onClick:u=>{u.stopPropagation(),u.preventDefault(),lr(u)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return a.jsxs(h.Fragment,{children:[a.jsx(mt,{ref:r,wrapperProps:i,endAdornment:a.jsx(gt,{className:E(n.disabled&&"text-disabled")}),...n,children:a.jsx(Ie,{segmentProps:i,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),l]})}function Er(e){const{min:n,max:t}=e,{trans:r}=B(),{format:s}=rn(),{field:{onChange:o,onBlur:l,value:i=null,ref:u},fieldState:{invalid:d,error:c}}=ve({name:e.name,rules:{validate:m=>{if(!m)return;const p=ge(m);if(n&&p.compare(n)<0)return r({message:"Enter a date after :date",values:{date:s(m)}});if(t&&p.compare(t)>0)return r({message:"Enter a date before :date",values:{date:s(m)}})}}}),g=i?ge(i):null,f={onChange:m=>{o(m&&m.toAbsoluteString())},onBlur:l,value:g,invalid:d,errorMessage:c==null?void 0:c.message,inputRef:u};return a.jsx(ir,{...de(f,e)})}function lr(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const Pr=se(a.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function Mr({className:e,position:n,children:t,size:r="md",mode:s,overlayPosition:o="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:u=!1}){const{isMobileMode:d,leftSidenavStatus:c,setLeftSidenavStatus:g,rightSidenavStatus:f,setRightSidenavStatus:m}=h.useContext(Te),p=d||s==="overlay";let w=n==="left"?c:f;p&&w==="compact"&&(w="open");const v={open:{display:l,width:ur(w==="compact"?"compact":r)},closed:{width:0,transitionEnd:{display:"none"}}},x=cr(w==="compact"?"compact":r);return a.jsx(fe.div,{variants:v,initial:!1,animate:u||w==="closed"?"closed":"open",transition:{type:"tween",duration:.15},onClick:b=>{const y=b.target;d&&(y.closest("button")||y.closest("a"))&&(g("closed"),m("closed"))},className:E(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right",i,x,p&&`${o} bottom-0 top-0 z-20 shadow-2xl`,p&&n==="left"&&"left-0",p&&n==="right"&&"right-0"),children:h.cloneElement(t,{className:E(t.props.className,"w-full h-full overflow-y-auto compact-scrollbar",w==="compact"&&"hidden-scrollbar"),isCompactMode:w==="compact",isOverlayMode:p})})}function cr(e){switch(e){case"compact":return"w-60";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}function ur(e){switch(e){case"compact":return 60;case"sm":return 224;case"md":return 240;case"lg":return 288;default:return null}}function Rr({children:e,isScrollable:n=!0,stableScrollbar:t=!0}){return h.cloneElement(e,{className:E(e.props.className,n&&"overflow-y-auto",n&&t&&"stable-scrollbar","dashboard-grid-content","has-[.dashboard-stable-scrollbar]:stable-scrollbar")})}const dr=se(a.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function Fr({children:e,className:n,hideToggleButton:t,...r}){const{isMobileMode:s,leftSidenavStatus:o,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:u}=h.useContext(Te),d=u&&!s,c=!t&&(s||u),g=()=>{l(o==="open"?"closed":"open")},f=()=>{const m=o==="compact"?"open":"compact";ht(`${i}.sidenav.compact`,m==="compact"),l(m)};return a.jsx(on,{className:E("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:c?a.jsx(Y,{size:"md",onClick:()=>{d?f():g()},children:a.jsx(dr,{})}):void 0,...r,children:e})}function fr(e=!1){h.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function hr(e){const n=h.useRef();return h.useEffect(()=>{n.current=e},[e]),n.current}function Ar({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:r,compactByDefault:s,initialRightSidenavStatus:o,onRightSidenavChange:l,name:i,leftSidenavCanBeCompact:u,height:d="h-screen",className:c,gridClassName:g="dashboard-grid",blockBodyOverflow:f=!0,...m}){fr(!f);const p=ft("(max-width: 1024px)"),v=h.useMemo(()=>{if(!i)return s??!1;const S=$e(`${i}.sidenav.compact`);return S??s??!1},[i,s])?"compact":"open",[x,b]=Z(n,p?"closed":v,t),y=h.useMemo(()=>{if(p)return"closed";if(o!=null)return o;const S=$e(`${i}.sidenav.right.position`,"open");return S??(o||"closed")},[p,i,o]),[j,D]=Z(r,y,l),P=h.useCallback(S=>{D(S),ht(`${i}.sidenav.right.position`,S)},[D,i]),A=hr(p);h.useEffect(()=>{p!==A&&(p?(b("closed"),P("closed")):(b(v),P(y)))},[p,v,y,A,b,P]);const O=p&&(x==="open"||j==="open");return a.jsx(Te.Provider,{value:{leftSidenavStatus:x,setLeftSidenavStatus:b,rightSidenavStatus:j,setRightSidenavStatus:P,leftSidenavCanBeCompact:u,name:i,isMobileMode:p},children:a.jsxs("div",{...m,className:E("relative isolate",g,c,d),children:[e,a.jsx(ye,{children:O&&a.jsx(an,{position:"fixed",onClick:()=>{b("closed"),P("closed")}},"dashboard-underlay")})]})})}export{xr as $,Dn as A,xs as B,Sn as C,vr as D,Ar as E,Vn as F,Mr as G,Rr as H,Pr as I,Fr as J,sr as K,Wn as L,kr as M,os as N,ss as O,rs as P,is as Q,Ce as R,Gn as S,W as T,as as U,hr as V,On as W,jr as X,Ct as Y,ns as Z,vt as _,br as a,Ps as a0,nr as a1,dr as a2,z as b,_ as c,$n as d,_n as e,Te as f,Cr as g,yr as h,me as i,ps as j,bt as k,Pn as l,Q as m,We as n,De as o,Os as p,Ir as q,js as r,pe as s,Sr as t,wr as u,yn as v,Dr as w,Xn as x,Er as y,Bn as z};
//# sourceMappingURL=dashboard-layout-853ee92a.js.map
