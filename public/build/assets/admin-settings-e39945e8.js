import{l as Fe,o as Ce,L as qe,E as I,S as be,T as ze,a as Pe,b as xe,c as De,d as pe,F as Z,e as K,u as Ae,O as Ee,f as Me,M as fe,R as Te,g as Re,h as Le}from"./admin-core-ed02c316.js";import{r as u,g as ve,j as e,l as J,$ as re,t as X,af as Ge,O as Be,w as _e,v as Ue,Q as Oe,A as R,M as Ve,E as y,I as h,L as $e,J as We,R as ye,D as Qe}from"./vendor-react-1bca9862.js";import{c as z,m as ke,A as He}from"./vendor-utils-eb3e2af6.js";import{r as Ie,o as Se,h as q,m as p,j as Ke,al as Je,S as Xe,b as a,a1 as Ye,O as o,s as ee,a3 as we,a4 as f,a as _,P as Ze,k as L,$ as es,aa as v,u as ss,W as g,H,J as l,an as as,ab as rs,aM as is,ac as ns,Q as Ne,v as ts,D as ls,d as os,e as cs,w as ms,c as ds,x as us,F as gs,I as xs,U as ps,aN as V,aO as $,aP as W,aH as je,aQ as Q,aE as js,aG as hs}from"./admin-analytics-86be46fb.js";import{t as A,s as Y,F as ie,ae as bs,e as ne,af as fs,N as vs,O as _s,Q as ys,ag as ks}from"./admin-appearance-887fa44d.js";const Ss=u.forwardRef((s,r)=>{const{children:i,autoFocus:n,size:t,invalid:c,isFirst:m,display:d="inline-flex",...x}=s,j=ve(r);Ie({autoFocus:n},j);const b=ws(t);return e.jsxs("label",{className:z("select-none items-center gap-8 whitespace-nowrap align-middle",d,b.label,s.disabled&&"pointer-events-none text-disabled",s.invalid&&"text-danger"),children:[e.jsx("input",{type:"radio",className:z("outline-none focus-visible:ring","appearance-none rounded-full border-2 transition-button","border-text-muted checked:border-primary checked:hover:border-primary-dark disabled:border-disabled-fg","before:bg-primary before:hover:bg-primary-dark disabled:before:bg-disabled-fg","before:block before:h-full before:w-full before:scale-10 before:rounded-full before:opacity-0 before:transition before:duration-200","checked:before:scale-[.65] checked:before:opacity-100",b.circle),ref:j,...x}),i&&e.jsx("span",{children:i})]})});function T(s){const{field:{onChange:r,onBlur:i,value:n,ref:t},fieldState:{invalid:c}}=J({name:s.name}),m={onChange:r,onBlur:i,checked:s.value===n,invalid:s.invalid||c};return e.jsx(Ss,{ref:t,...re(m,s)})}function ws(s){switch(s){case"xs":return{circle:"h-12 w-12",label:"text-xs"};case"sm":return{circle:"h-16 w-16",label:"text-sm"};case"lg":return{circle:"h-24 w-24",label:"text-lg"};default:return{circle:"h-20 w-20",label:"text-base"}}}const Ns=u.forwardRef((s,r)=>{const i=Se(s),{label:n,children:t,size:c,className:m,orientation:d="horizontal",disabled:x,required:j,invalid:b,errorMessage:N,description:P}=s,E={},D=u.useId(),M=s.name||D;return e.jsxs("fieldset",{"aria-describedby":P?`${D}-description`:void 0,ref:r,className:z("text-left",m),children:[n&&e.jsx("legend",{className:i.label,...E,children:n}),e.jsx("div",{className:z("flex",n?"mt-6":"mt-0",d==="vertical"?"flex-col gap-10":"flex-row flex-wrap gap-16"),children:u.Children.map(t,C=>{if(u.isValidElement(C))return u.cloneElement(C,{name:M,size:c,invalid:C.props.invalid||b||void 0,disabled:C.props.disabled||x,required:C.props.required||j})})}),P&&!N&&e.jsx("div",{className:i.description,id:`${D}-description`,children:P}),N&&e.jsx("div",{className:i.error,children:N})]})});function te({children:s,...r}){const{fieldState:{error:i}}=J({name:r.name});return e.jsx(Ns,{errorMessage:i==null?void 0:i.message,...r,children:s})}const ir=[{path:"drive",lazy:()=>Fe("DriveSettings")}];function le(){return X(Fs)}const Fs=Ge({queryKey:["fetchAdminSettings"],queryFn:()=>Cs(),staleTime:1/0,select:se});function Cs(){return q.get("settings").then(s=>s.data)}function se(s){for(const r in s)Array.isArray(s[r])?s[r]=s[r].map(se):typeof s[r]=="object"?s[r]=se(s[r]):typeof s[r]=="number"?s[r]=s[r].toString():s[r]==null&&(s[r]="");return s}const qs=[{label:p("Drive"),to:"drive"},{label:p("Guest Uploads"),to:"guest-uploads"}],zs=[{label:p("General"),to:"general",position:1},...qs,Ke().settings.billing.integrated&&{label:p("Subscriptions"),to:"subscriptions",position:2},{label:p("Localization"),to:"localization",position:3},{label:p("Authentication"),to:"authentication",position:4},{label:p("Uploading"),to:"uploading",position:5},{label:p("Outgoing email"),to:"outgoing-email",position:6},{label:p("Cache"),to:"cache",position:7},{label:p("Analytics"),to:"analytics",position:8},{label:p("Logging"),to:"logging",position:9},{label:p("Queue"),to:"queue",position:10},{label:p("Recaptcha"),to:"recaptcha",position:11},{label:p("GDPR"),to:"gdpr",position:12},{label:p("Menus"),to:"/admin/appearance/menus",position:13},{label:p("Seo"),to:"/admin/appearance/seo-settings",position:14},{label:p("Themes"),to:"/admin/appearance/themes",position:15}].filter(Boolean),Ps=zs;function nr({className:s,navConfig:r}){const i=Je(),n=u.useMemo(()=>(r??Ps).sort((c,m)=>(c.position??0)-(m.position??0)),[r]);return e.jsxs("div",{className:z(s,"container mx-auto min-h-full items-start gap-30 p-24 md:flex"),children:[e.jsx(Xe,{children:e.jsx(a,{message:"Settings"})}),i?e.jsx(Ds,{navConfig:n}):e.jsx(As,{navConfig:n}),e.jsx("div",{className:"relative max-w-500 flex-auto md:px-30",children:e.jsx(Be,{})})]})}function Ds({navConfig:s}){const{pathname:r}=_e(),i=Ue(),n=r.split("/").pop();return e.jsx(Ye,{minWidth:"min-w-none",className:"mb-24 w-full bg",selectionMode:"single",selectedValue:n,onSelectionChange:t=>{i(t,{state:{prevPath:r}})},children:s.map(t=>e.jsx(o,{value:t.to,children:e.jsx(a,{...t.label})},t.to))})}function As({navConfig:s}){const{pathname:r}=_e();return e.jsx("div",{className:"sticky top-24 w-240 flex-shrink-0",children:s.map(i=>e.jsx(Oe,{to:i.to,state:{prevPath:r},className:({isActive:n})=>z("mb-8 block whitespace-nowrap rounded-button p-14 text-sm transition-bg-color",n?"bg-primary/6 font-semibold text-primary":"hover:bg-hover"),children:e.jsx(a,{...i.label})},i.to))})}function Es(){return R({mutationFn:()=>Ms(),onSuccess:()=>{A(p("Sitemap generated"))},onError:s=>Y(s)})}function Ms(){return q.post("sitemap/generate").then(s=>s.data)}function Ts(s){return R({mutationFn:r=>Rs(r),onSuccess:r=>(A(p("Settings updated"),{position:"bottom-right"}),ee.setQueryData(["fetchAdminSettings"],r)),onError:r=>Ce(r,s)})}function Rs({client:s,server:r,files:i}){const n=new FormData;return s&&n.set("client",JSON.stringify(s)),r&&n.set("server",JSON.stringify(r)),Object.entries(i||{}).forEach(([t,c])=>{n.set(t,c)}),q.post("settings",n,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>t.data)}function F(){return e.jsx("div",{className:"bg-divider-lighter my-30 h-1"})}function Ls(){return e.jsxs(ke.div,{className:"text-sm",...we,children:[e.jsxs("div",{children:[e.jsx(f,{className:"mb-4 max-w-140"}),e.jsx(f,{variant:"rect",size:"h-42 w-full"}),e.jsxs("div",{className:"mt-10 flex items-center gap-8",children:[e.jsx(f,{variant:"rect",size:"h-20 w-20"}),e.jsx(f,{className:"max-w-64 text-xs"})]})]}),e.jsx(F,{}),e.jsxs("div",{children:[e.jsx(f,{className:"mb-4 max-w-140"}),e.jsx(f,{variant:"rect",size:"h-42 w-full"}),e.jsx(f,{className:"mt-10 max-w-4/5 text-xs"})]}),e.jsx(F,{}),e.jsxs("div",{children:[e.jsx(f,{className:"mb-4 max-w-140"}),e.jsx(f,{variant:"rect",size:"h-42 w-full"}),e.jsx(f,{className:"mt-10 max-w-[90%] text-xs"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-20 flex items-center gap-12",children:[e.jsx(f,{variant:"rect",size:"h-20 w-40",radius:"rounded-full"}),e.jsx(f,{className:"max-w-140"})]}),e.jsx(f,{className:"mt-10 max-w-240 text-xs"})]}),e.jsx(F,{}),e.jsxs("div",{children:[e.jsx(f,{variant:"rect",size:"h-30 w-132",radius:"rounded-button"}),e.jsxs("div",{className:"mt-14",children:[e.jsx(f,{className:"max-w-240"}),e.jsx(f,{className:"max-w-384"})]})]}),e.jsx("div",{className:"mt-40",children:e.jsx(f,{variant:"rect",size:"h-36 w-132",radius:"rounded-button"})})]})}function S({children:s,form:r}){const i=Ts(r),{isDirty:n}=Ve({control:r.control});return e.jsxs(ke.section,{...we,children:[e.jsxs(ie,{form:r,onBeforeSubmit:()=>{const t=r.formState.errors,c=Object.keys(t).filter(m=>m.endsWith("_group"));r.clearErrors(c)},onSubmit:t=>{i.mutate(t,{onSuccess:()=>r.reset(t)})},children:[s,e.jsx("div",{className:"mt-40",children:e.jsx(_,{type:"submit",variant:"flat",color:"primary",startIcon:i.isPending?e.jsx(Ze,{size:"xs",isIndeterminate:!0}):null,disabled:i.isPending||!n,children:e.jsx(a,{message:"Save changes"})})})]}),e.jsx(bs,{isBlocked:n})]},"settings-form")}function w({title:s,description:r,headerMargin:i="mb-40",children:n,isLoading:t}){const{data:c}=le();return e.jsxs(u.Fragment,{children:[e.jsxs("div",{className:i,children:[e.jsx("h2",{className:"mb-4 text-xl",children:s}),e.jsx("div",{className:"text-sm text-muted",children:r})]}),e.jsx(He,{initial:!1,mode:"wait",children:c&&!t?n(c):e.jsx(Ls,{},"settings-skeleton")})]})}function G({link:s,className:r}){const{site:i}=L();return i.hide_docs_button?null:e.jsxs("div",{className:z("flex items-center gap-8",r),children:[e.jsx(qe,{size:"sm"}),e.jsx(I,{href:s,children:e.jsx(a,{message:"Learn more"})})]})}function tr(){return e.jsx(w,{title:e.jsx(a,{message:"General"}),description:e.jsx(a,{message:"Configure site url, homepage, theme and other general settings."}),children:s=>e.jsx(Gs,{data:s})})}function Gs({data:s}){var i,n,t,c;const r=y({defaultValues:{client:{homepage:{type:((i=s.client.homepage)==null?void 0:i.type)??"landingPage",value:((n=s.client.homepage)==null?void 0:n.value)??""},themes:{default_id:(t=s.client.themes)!=null&&t.default_id?parseInt(s.client.themes.default_id):0,user_change:((c=s.client.themes)==null?void 0:c.user_change)??!1}}}});return e.jsxs(S,{form:r,children:[e.jsx(Bs,{}),e.jsx(F,{}),e.jsx(Us,{}),e.jsx(F,{}),e.jsx(Os,{}),e.jsx(F,{}),e.jsx(Vs,{})]})}function Bs(){const{data:s}=le();if(!s)return null;let r=null;const i=s.server,n=i.newAppUrl&&i.newAppUrl!==i.app_url;return n&&(r=e.jsx("div",{className:"mt-20 text-sm text-danger",children:e.jsx(a,{values:{baseUrl:i.app_url,currentUrl:i.newAppUrl,b:t=>e.jsx("b",{children:t})},message:"Base site url is set as <b>:baseUrl</b> in configuration, but current url is <b>:currentUrl</b>. It is recommended to set the primary url you want to use in configuration file and then redirect all other url versions to this primary version via cpanel or .htaccess file."})})),e.jsxs(u.Fragment,{children:[e.jsx(es,{readOnly:!0,invalid:!!n,value:i.app_url,label:e.jsx(a,{message:"Primary site url"}),description:e.jsx(G,{link:"https://support.vebto.com/hc/articles/35/primary-site-url"})}),r]})}function Us(){var t,c;const{watch:s}=h(),{homepage:r}=u.useContext(be),{data:i}=ne(["menuItemCategories"]),n=s("client.homepage.type");return e.jsxs("div",{children:[e.jsxs(v,{name:"client.homepage.type",selectionMode:"single",label:e.jsx(a,{message:"Site home page"}),description:e.jsx(a,{message:"Which page should be used as site homepage."}),children:[r.options.map(m=>e.jsx(o,{value:m.value,children:e.jsx(a,{...m.label})},m.value)),(t=i==null?void 0:i.menuItemCategories)==null?void 0:t.map(m=>e.jsx(o,{value:m.type,children:m.name},m.type))]}),(c=i==null?void 0:i.menuItemCategories)==null?void 0:c.map(m=>n===m.type?e.jsx(v,{className:"mt-24",name:"client.homepage.value",selectionMode:"single",label:e.jsx(a,{message:"Homepage :name",values:{name:m.name}}),children:m.items.map(d=>e.jsx(o,{value:`${d.model_id}`,children:d.label},d.label))},m.name):null)]})}function Os(){const s=ss(r=>r.data.themes);return e.jsxs(u.Fragment,{children:[e.jsxs(v,{className:"mb-20",name:"client.themes.default_id",selectionMode:"single",label:e.jsx(a,{message:"Default site theme"}),description:e.jsx(a,{message:"Which theme to use for users that have not chosen a theme manually."}),children:[e.jsx(o,{value:0,children:e.jsx(a,{message:"System"})}),s.map(r=>e.jsx(o,{value:r.id,children:r.name},r.id))]}),e.jsx(g,{name:"client.themes.user_change",description:e.jsx(a,{message:"Allow users to manually change site theme."}),children:e.jsx(a,{message:"Allow theme change"})})]})}function Vs(){const s=Es(),{base_url:r}=L(),i=`${r}/storage/sitemaps/sitemap-index.xml`,n=e.jsx(I,{href:i,children:i});return e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"xs",color:"primary",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(a,{message:"Generate sitemap"})}),e.jsx("div",{className:"mt-14 text-sm text-muted",children:e.jsx(a,{message:"Once generated, sitemap url will be: :url",values:{url:n}})})]})}function k({children:s,name:r,separatorBottom:i=!0,separatorTop:n=!0}){const{formState:{errors:t}}=h(),c=u.useRef(null),m=t[r];return u.useEffect(()=>{var d;m&&((d=c.current)==null||d.scrollIntoView({behavior:"smooth"}))},[m]),e.jsxs("div",{className:z(i&&"border-b mb-20 pb-20",n&&"border-t mt-20 pt-20",m&&"border-y-error"),ref:c,children:[s(!!m),m&&e.jsx("div",{className:"text-danger text-sm mt-20",dangerouslySetInnerHTML:{__html:m.message}})]})}function ae({children:s,...r}){const{field:{onChange:i,onBlur:n,value:t=[],ref:c},fieldState:{invalid:m,error:d}}=J({name:r.name}),x=u.useMemo(()=>{const b=t;return typeof b=="string"?JSON.parse(b):b},[t]),j={onChange:i,onBlur:n,value:x,invalid:m,errorMessage:d==null?void 0:d.message};return e.jsx(fs,{valueKey:"name",ref:c,...re(j,r)})}function lr(){return e.jsx(w,{title:e.jsx(a,{message:"Subscriptions"}),description:e.jsx(a,{message:"Configure gateway integration, accepted cards, invoices and other related settings."}),children:s=>e.jsx($s,{data:s})})}function $s({data:s}){var n,t,c,m,d,x,j,b,N,P,E,D,M,C,B,U,O;const{trans:r}=H(),i=y({defaultValues:{client:{billing:{enable:((n=s.client.billing)==null?void 0:n.enable)??!1,accepted_cards:((t=s.client.billing)==null?void 0:t.accepted_cards)??[],paypal_test_mode:((c=s.client.billing)==null?void 0:c.paypal_test_mode)??!1,paypal:{enable:((d=(m=s.client.billing)==null?void 0:m.paypal)==null?void 0:d.enable)??!1},stripe:{enable:((j=(x=s.client.billing)==null?void 0:x.stripe)==null?void 0:j.enable)??!1},invoice:{address:((N=(b=s.client.billing)==null?void 0:b.invoice)==null?void 0:N.address)??"",notes:((E=(P=s.client.billing)==null?void 0:P.invoice)==null?void 0:E.notes)??""}}},server:{paypal_client_id:((D=s.server)==null?void 0:D.paypal_client_id)??"",paypal_secret:((M=s.server)==null?void 0:M.paypal_secret)??"",paypal_webhook_id:((C=s.server)==null?void 0:C.paypal_webhook_id)??"",stripe_key:((B=s.server)==null?void 0:B.stripe_key)??"",stripe_secret:((U=s.server)==null?void 0:U.stripe_secret)??"",stripe_webhook_secret:((O=s.server)==null?void 0:O.stripe_webhook_secret)??""}}});return e.jsx(S,{form:i,children:e.jsxs(ze,{children:[e.jsxs(Pe,{children:[e.jsx(xe,{children:e.jsx(a,{message:"General"})}),e.jsx(xe,{children:e.jsx(a,{message:"Invoices"})})]}),e.jsxs(De,{className:"pt-30",children:[e.jsxs(pe,{children:[e.jsx(g,{name:"client.billing.enable",description:e.jsx(a,{message:"Enable or disable all subscription related functionality across the site."}),children:e.jsx(a,{message:"Enable subscriptions"})}),e.jsx(F,{}),e.jsx(Ws,{}),e.jsx(Qs,{}),e.jsx(F,{}),e.jsx(ae,{label:e.jsx(a,{message:"Accepted cards"}),name:"client.billing.accepted_cards",placeholder:r({message:"Add new card..."})})]}),e.jsxs(pe,{children:[e.jsx(l,{inputElementType:"textarea",rows:5,label:e.jsx(a,{message:"Invoice address"}),name:"client.billing.invoice.address",className:"mb-30"}),e.jsx(l,{inputElementType:"textarea",rows:5,label:e.jsx(a,{message:"Invoice notes"}),description:e.jsx(a,{message:"Default notes to show under `notes` section of user invoice. Optional."}),name:"client.billing.invoice.notes"})]})]})]})})}function Ws(){const{watch:s}=h(),r=s("client.billing.paypal.enable");return e.jsxs("div",{className:"mb-30",children:[e.jsx(g,{name:"client.billing.paypal.enable",description:e.jsxs("div",{children:[e.jsx(a,{message:"Enable PayPal payment gateway integration."}),e.jsx(G,{className:"mt-6",link:"https://support.vebto.com/hc/articles/147/configuring-paypal"})]}),children:e.jsx(a,{message:"PayPal gateway"})}),r?e.jsx(k,{name:"paypal_group",children:i=>e.jsxs(u.Fragment,{children:[e.jsx(l,{name:"server.paypal_client_id",label:e.jsx(a,{message:"PayPal Client ID"}),required:!0,invalid:i,className:"mb-20"}),e.jsx(l,{name:"server.paypal_secret",label:e.jsx(a,{message:"PayPal Secret"}),required:!0,invalid:i,className:"mb-20"}),e.jsx(l,{name:"server.paypal_webhook_id",label:e.jsx(a,{message:"PayPal Webhook ID"}),required:!0,invalid:i,className:"mb-20"}),e.jsx(g,{name:"client.billing.paypal_test_mode",invalid:i,description:e.jsx("div",{children:e.jsx(a,{message:"Allows testing PayPal payments with sandbox accounts."})}),children:e.jsx(a,{message:"PayPal test mode"})})]})}):null]})}function Qs(){const{watch:s}=h(),r=s("client.billing.stripe.enable");return e.jsxs(u.Fragment,{children:[e.jsx(g,{name:"client.billing.stripe.enable",description:e.jsxs("div",{children:[e.jsx(a,{message:"Enable Stripe payment gateway integration."}),e.jsx(G,{className:"mt-6",link:"https://support.vebto.com/hc/articles/148/configuring-stripe"})]}),children:e.jsx(a,{message:"Stripe gateway"})}),r?e.jsx(k,{name:"stripe_group",separatorBottom:!1,children:i=>e.jsxs(u.Fragment,{children:[e.jsx(l,{name:"server.stripe_key",label:e.jsx(a,{message:"Stripe publishable key"}),required:!0,className:"mb-20",invalid:i}),e.jsx(l,{name:"server.stripe_secret",label:e.jsx(a,{message:"Stripe secret key"}),required:!0,className:"mb-20",invalid:i}),e.jsx(l,{name:"server.stripe_webhook_secret",label:e.jsx(a,{message:"Stripe webhook signing secret"}),className:"mb-20",invalid:i})]})}):null]})}function or(){const s=ne(["timezones","localizations"]);return e.jsx(w,{title:e.jsx(a,{message:"Localization"}),description:e.jsx(a,{message:"Configure global date, time and language settings."}),isLoading:s.isLoading,children:r=>e.jsx(Hs,{data:r,timezones:s.data.timezones,localizations:s.data.localizations})})}function Hs({data:s,timezones:r,localizations:i}){var m;const n=as(),{trans:t}=H(),c=y({defaultValues:{client:{dates:{default_timezone:s.client.dates.default_timezone??"auto",format:s.client.dates.format??"auto"},locale:{default:((m=s.client.locale)==null?void 0:m.default)??"auto"},i18n:{enable:s.client.i18n.enable??!0}}}});return e.jsxs(S,{form:c,children:[e.jsxs(v,{className:"mb-30",required:!0,name:"client.dates.default_timezone",showSearchField:!0,selectionMode:"single",label:e.jsx(a,{message:"Default timezone"}),searchPlaceholder:t(p("Search timezones")),description:e.jsx(a,{message:"Which timezone should be selected by default for new users and guests."}),children:[e.jsx(o,{value:"auto",children:e.jsx(a,{message:"Auto"})},"auto"),Object.entries(r).map(([d,x])=>e.jsx(rs,{label:d,children:x.map(j=>e.jsx(o,{value:j.value,children:j.text},j.value))},d))]}),e.jsxs(v,{name:"client.locale.default",className:"mb-30",selectionMode:"single",label:e.jsx(a,{message:"Default language"}),description:e.jsx(a,{message:"Which localization should be selected by default for new users and guests."}),children:[e.jsx(o,{value:"auto",children:e.jsx(a,{message:"Auto"})},"auto"),i.map(d=>e.jsx(o,{value:d.language,capitalizeFirst:!0,children:d.name},d.language))]}),e.jsxs(te,{required:!0,className:"mb-30",size:"sm",name:"client.dates.format",orientation:"vertical",label:e.jsx(a,{message:"Date verbosity"}),description:e.jsx(a,{message:"Default verbosity for all dates displayed across the site. Month/day order and separators will be adjusted automatically, based on user's locale."}),children:[e.jsx(T,{value:"auto",children:e.jsx(a,{message:"Auto"})},"auto"),Object.entries(is).map(([d,x])=>e.jsx(T,{value:d,children:e.jsx(ns,{date:n,options:x})},d))]}),e.jsx(g,{name:"client.i18n.enable",description:e.jsx(a,{message:"If disabled, site will always be shown in default language and user will not be able to change their locale."}),children:e.jsx(a,{message:"Enable translations"})})]})}function cr(){return e.jsx(w,{title:e.jsx(a,{message:"Authentication"}),description:e.jsx(a,{message:"Configure registration, social login and related 3rd party integrations."}),children:s=>e.jsx(Is,{data:s})})}function Is({data:s}){var i,n,t,c,m,d,x,j,b,N,P,E,D,M,C,B,U,O,ce,me,de,ue,ge;const r=y({defaultValues:{client:{require_email_confirmation:((i=s.client)==null?void 0:i.require_email_confirmation)??!1,registration:{disable:((n=s.client.registration)==null?void 0:n.disable)??!1},social:{requireAccount:((t=s.client.social)==null?void 0:t.requireAccount)??!1,compact_buttons:((c=s.client.social)==null?void 0:c.compact_buttons)??!1,envato:{enable:((d=(m=s.client.social)==null?void 0:m.envato)==null?void 0:d.enable)??!1},google:{enable:((j=(x=s.client.social)==null?void 0:x.google)==null?void 0:j.enable)??!1},facebook:{enable:((N=(b=s.client.social)==null?void 0:b.facebook)==null?void 0:N.enable)??!1},twitter:{enable:((E=(P=s.client.social)==null?void 0:P.twitter)==null?void 0:E.enable)??!1}},single_device_login:s.client.single_device_login??!1,auth:{domain_blacklist:((D=s.client.auth)==null?void 0:D.domain_blacklist)??""}},server:{envato_id:((M=s.server)==null?void 0:M.envato_id)??"",envato_secret:((C=s.server)==null?void 0:C.envato_secret)??"",envato_personal_token:((B=s.server)==null?void 0:B.envato_personal_token)??"",google_id:((U=s.server)==null?void 0:U.google_id)??"",google_secret:((O=s.server)==null?void 0:O.google_secret)??"",facebook_id:((ce=s.server)==null?void 0:ce.facebook_id)??"",facebook_secret:((me=s.server)==null?void 0:me.facebook_secret)??"",twitter_id:((de=s.server)==null?void 0:de.twitter_id)??"",twitter_secret:((ue=s.server)==null?void 0:ue.twitter_secret)??"",mail_setup:((ge=s.server)==null?void 0:ge.mail_setup)??!1}}});return e.jsxs(S,{form:r,children:[e.jsx(Js,{}),e.jsx(g,{className:"mb-24",name:"client.registration.disable",description:e.jsx(a,{message:"All registration related functionality will be disabled and hidden from users."}),children:e.jsx(a,{message:"Disable registration"})}),e.jsx(g,{className:"mb-24",name:"client.social.requireAccount",description:e.jsx(a,{message:"If enabled, user will only be able to login via particular social site, if they have connected it from their account settings page."}),children:e.jsx(a,{message:"Social login requires existing account"})}),e.jsx(g,{className:"mb-24",name:"client.single_device_login",description:e.jsx(a,{message:"Only allow one device to be logged into user account at the same time."}),children:e.jsx(a,{message:"Single device login"})}),e.jsx(g,{name:"client.social.compact_buttons",description:e.jsx(a,{message:"Use compact design for social login buttons."}),children:e.jsx(a,{message:"Compact buttons"})}),e.jsx(Xs,{}),e.jsx(Ys,{}),e.jsx(Zs,{}),e.jsx(ea,{}),e.jsx(F,{}),e.jsx(l,{inputElementType:"textarea",rows:3,className:"mt-24",name:"client.auth.domain_blacklist",label:e.jsx(a,{message:"Domain blacklist"}),description:e.jsx(a,{message:"Comma separated list of domains. Users will not be able to register or login using any email adress from specified domains."})})]})}function Ks(){const{watch:s}=h();return s("server.mail_setup")?null:e.jsx("p",{className:"mt-10 rounded-panel border p-10 text-sm text-danger",children:e.jsx(a,{message:"Outgoing mail method needs to be setup before enabling this setting. <a>Fix now</a>",values:{a:i=>e.jsx(_,{elementType:$e,variant:"outline",size:"xs",display:"flex",className:"mt-10 max-w-max",to:"/admin/settings/outgoing-email",children:i})}})})}function Js(){return e.jsx(g,{className:"mb-30",name:"client.require_email_confirmation",description:e.jsxs(u.Fragment,{children:[e.jsx(a,{message:"Require newly registered users to validate their email address before being able to login."}),e.jsx(Ks,{})]}),children:e.jsx(a,{message:"Require email confirmation"})})}function Xs(){var n;const{watch:s}=h(),r=L(),i=s("client.social.envato.enable");return(n=r.envato)!=null&&n.enable?e.jsx(k,{separatorBottom:!1,name:"envato_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:t,name:"client.social.envato.enable",description:e.jsx(a,{message:"Enable logging into the site via envato."}),children:e.jsx(a,{message:"Envato login"})}),!!i&&e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:t,className:"mt-30",name:"server.envato_id",label:e.jsx(a,{message:"Envato ID"}),required:!0}),e.jsx(l,{invalid:t,className:"mt-30",name:"server.envato_secret",label:e.jsx(a,{message:"Envato secret"}),required:!0}),e.jsx(l,{invalid:t,className:"mt-30",name:"server.envato_personal_token",label:e.jsx(a,{message:"Envato personal token"}),required:!0})]})]})}):null}function Ys(){const{watch:s}=h(),r=s("client.social.google.enable");return e.jsx(k,{name:"google_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:i,name:"client.social.google.enable",description:e.jsx(a,{message:"Enable logging into the site via google."}),children:e.jsx(a,{message:"Google login"})}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:i,className:"mt-30",name:"server.google_id",label:e.jsx(a,{message:"Google client ID"}),required:!0}),e.jsx(l,{className:"mt-30",name:"server.google_secret",label:e.jsx(a,{message:"Google client secret"}),required:!0})]})]})})}function Zs(){const{watch:s}=h(),r=s("client.social.facebook.enable");return e.jsx(k,{name:"facebook_group",separatorTop:!1,children:i=>e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:i,name:"client.social.facebook.enable",description:e.jsx(a,{message:"Enable logging into the site via facebook."}),children:e.jsx(a,{message:"Facebook login"})}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:i,className:"mt-30",name:"server.facebook_id",label:e.jsx(a,{message:"Facebook app ID"}),required:!0}),e.jsx(l,{invalid:i,className:"mt-30",name:"server.facebook_secret",label:e.jsx(a,{message:"Facebook app secret"}),required:!0})]})]})})}function ea(){const{watch:s}=h(),r=s("client.social.twitter.enable");return e.jsx(k,{name:"twitter_group",separatorTop:!1,separatorBottom:!1,children:i=>e.jsxs(e.Fragment,{children:[e.jsx(g,{invalid:i,name:"client.social.twitter.enable",description:e.jsx(a,{message:"Enable logging into the site via twitter."}),children:e.jsx(a,{message:"Twitter login"})}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:i,className:"mt-30",name:"server.twitter_id",label:e.jsx(a,{message:"Twitter ID"}),required:!0}),e.jsx(l,{invalid:i,className:"mt-30",name:"server.twitter_secret",label:e.jsx(a,{message:"Twitter secret"}),required:!0})]})]})})}function sa(){return q.get("uploads/server-max-file-size").then(s=>s.data)}function aa(){return X({queryKey:["MaxServerUploadSize"],queryFn:()=>sa()})}function ra(){return R({mutationFn:s=>ia(s),onError:s=>Y(s)})}function ia(s){return q.post("settings/uploading/dropbox-refresh-token",s).then(r=>r.data)}function na({isInvalid:s}){const{watch:r,setValue:i}=h(),n=r("server.storage_dropbox_app_key"),t=r("server.storage_dropbox_app_secret");return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_key",label:e.jsx(a,{message:"Dropbox application key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_secret",label:e.jsx(a,{message:"Dropbox application secret"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-20",name:"server.storage_dropbox_refresh_token",label:e.jsx(a,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(Ne,{type:"modal",onClose:c=>{c&&i("server.storage_dropbox_refresh_token",c)},children:[e.jsx(_,{variant:"outline",color:"primary",size:"xs",disabled:!n||!t,children:e.jsx(a,{message:"Get dropbox refresh token"})}),e.jsx(ta,{appKey:n,appSecret:t})]})]})}function ta({appKey:s,appSecret:r}){const i=y(),{formId:n,close:t}=ts(),c=ra();return e.jsxs(ls,{children:[e.jsx(os,{children:e.jsx(a,{message:"Connected dropbox account"})}),e.jsx(cs,{children:e.jsxs(ie,{id:n,form:i,onSubmit:m=>{c.mutate({app_key:s,app_secret:r,access_code:m.accessCode},{onSuccess:d=>{t(d.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 border-b pb-20",children:[e.jsx("div",{className:"mb-10 text-sm text-muted",children:e.jsx(a,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(_,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(a,{message:"Get access code"})})]}),e.jsx(l,{name:"accessCode",label:e.jsx(a,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(ms,{children:[e.jsx(_,{onClick:()=>{t()},children:e.jsx(a,{message:"Cancel"})}),e.jsx(_,{variant:"flat",color:"primary",form:n,type:"submit",disabled:!s||!r||c.isPending,children:e.jsx(a,{message:"Connect"})})]})]})}function la(){const{trans:s}=H();return R({mutationFn:()=>oa(),onSuccess:()=>{A(s(p("CORS file updated")))},onError:r=>Y(r)})}function oa(){return q.post("s3/cors/upload").then(s=>s.data)}function mr(){return e.jsx(w,{title:e.jsx(a,{message:"Uploading"}),description:e.jsx(a,{message:"Configure size and type of files that users are able to upload. This will affect all uploads across the site."}),children:s=>e.jsx(ca,{data:s})})}function ca({data:s}){const{trans:r}=H(),i=y({defaultValues:{client:{uploads:{max_size:s.client.uploads.max_size??0,chunk_size:s.client.uploads.chunk_size??0,available_space:s.client.uploads.available_space??0,allowed_extensions:s.client.uploads.allowed_extensions??[],blocked_extensions:s.client.uploads.blocked_extensions??[],s3_direct_upload:s.client.uploads.s3_direct_upload??!1}},server:{static_file_delivery:s.server.static_file_delivery??"",uploads_disk_driver:s.server.uploads_disk_driver??"local",public_disk_driver:s.server.public_disk_driver??"local",storage_s3_key:s.server.storage_s3_key??"",storage_s3_secret:s.server.storage_s3_secret??"",storage_s3_region:s.server.storage_s3_region??"",storage_s3_bucket:s.server.storage_s3_bucket??"",storage_s3_endpoint:s.server.storage_s3_endpoint??"",storage_digitalocean_key:s.server.storage_digitalocean_key??"",storage_digitalocean_secret:s.server.storage_digitalocean_secret??"",storage_digitalocean_region:s.server.storage_digitalocean_region??"",storage_digitalocean_bucket:s.server.storage_digitalocean_bucket??"",storage_backblaze_key:s.server.storage_backblaze_key??"",storage_backblaze_secret:s.server.storage_backblaze_secret??"",storage_backblaze_region:s.server.storage_backblaze_region??"",storage_backblaze_bucket:s.server.storage_backblaze_bucket??"",storage_ftp_host:s.server.storage_ftp_host??"",storage_ftp_username:s.server.storage_ftp_username??"",storage_ftp_password:s.server.storage_ftp_password??"",storage_ftp_root:s.server.storage_ftp_root??"",storage_ftp_port:s.server.storage_ftp_port??"21",storage_ftp_passive:s.server.storage_ftp_passive??!1,storage_ftp_ssl:s.server.storage_ftp_ssl??!1,storage_dropbox_app_key:s.server.storage_dropbox_app_key??"",storage_dropbox_app_secret:s.server.storage_dropbox_app_secret??"",storage_dropbox_refresh_token:s.server.storage_dropbox_refresh_token??""}}});return e.jsxs(S,{form:i,children:[e.jsx(da,{}),e.jsx(ua,{}),e.jsx(ga,{}),e.jsx(k,{name:"static_delivery_group",children:n=>e.jsxs(te,{invalid:n,size:"sm",name:"server.static_file_delivery",orientation:"vertical",label:e.jsx(a,{message:"File delivery optimization"}),description:e.jsx(a,{message:"Both X-Sendfile and X-Accel need to be enabled on the server first. When enabled, it will reduce server memory and CPU usage when previewing or downloading files, especially for large files."}),children:[e.jsx(T,{value:"",children:e.jsx(a,{message:"None"})}),e.jsx(T,{value:"xsendfile",children:e.jsx(a,{message:"X-Sendfile (Apache)"})}),e.jsx(T,{value:"xaccel",children:e.jsx(a,{message:"X-Accel (Nginx)"})})]})}),e.jsx(Z,{className:"mb-30",name:"client.uploads.chunk_size",min:1,label:e.jsx(a,{message:"Chunk size"}),placeholder:"Infinity",description:e.jsx(a,{message:"Size (in bytes) for each file chunk. It should only be changed if there is a maximum upload size on your server or proxy (for example cloudflare). If chunk size is larger then limit on the server, uploads will fail."})}),e.jsx(ma,{}),e.jsx(F,{}),e.jsx(Z,{min:1,name:"client.uploads.max_size",className:"mb-30",label:e.jsx(a,{message:"Maximum file size"}),description:e.jsx(a,{message:"Maximum size (in bytes) for a single file user can upload."})}),e.jsx(Z,{min:1,name:"client.uploads.available_space",className:"mb-30",label:e.jsx(a,{message:"Available space"}),description:e.jsx(a,{message:"Disk space (in bytes) each user uploads are allowed to take up. This can be overridden per user."})}),e.jsx(ae,{name:"client.uploads.allowed_extensions",className:"mb-30",label:e.jsx(a,{message:"Allowed extensions"}),placeholder:r(p("Add extension...")),description:e.jsx(a,{message:"List of allowed file types (jpg, mp3, pdf etc.). Leave empty to allow all file types."})}),e.jsx(ae,{name:"client.uploads.blocked_extensions",label:e.jsx(a,{message:"Blocked extensions"}),placeholder:r(p("Add extension...")),description:e.jsx(a,{message:"Prevent uploading of these file types, even if they are allowed above."})})]})}function ma(){const{data:s}=aa();return e.jsx(K,{color:"warning",description:e.jsx(a,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:r=>e.jsx("b",{children:r})}})})}function da(){const{watch:s,clearErrors:r}=h();return s("server.uploads_disk_driver")?e.jsxs(v,{className:"mb-30",selectionMode:"single",name:"server.uploads_disk_driver",label:e.jsx(a,{message:"User Uploads Storage Method"}),description:e.jsx(a,{message:"Where should user private file uploads be stored."}),onSelectionChange:()=>{r()},children:[e.jsx(o,{value:"local",children:e.jsx(a,{message:"Local Disk (Default)"})}),e.jsx(o,{value:"ftp",children:"FTP"}),e.jsx(o,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(o,{value:"backblaze_s3",children:"Backblaze"}),e.jsx(o,{value:"s3",children:"Amazon S3 (Or compatible service)"}),e.jsx(o,{value:"dropbox",children:"Dropbox"}),e.jsx(o,{value:"rackspace",children:"Rackspace"})]}):null}function ua(){const{watch:s,clearErrors:r}=h();return s("server.public_disk_driver")?e.jsxs(v,{label:e.jsx(a,{message:"Public Uploads Storage Method"}),selectionMode:"single",name:"server.public_disk_driver",description:e.jsx(a,{message:"Where should user public uploads (like avatars) be stored."}),onSelectionChange:()=>{r()},children:[e.jsx(o,{value:"local",children:e.jsx(a,{message:"Local Disk (Default)"})}),e.jsx(o,{value:"s3",children:"Amazon S3"}),e.jsx(o,{value:"ftp",children:"FTP"}),e.jsx(o,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(o,{value:"backblaze_s3",children:"Backblaze"})]}):null}function ga(){const{watch:s}=h(),r=[s("server.uploads_disk_driver"),s("server.public_disk_driver")];return r[0]==="local"&&r[1]==="local"?null:e.jsx(k,{separatorBottom:!1,name:"storage_group",children:i=>{if(r.includes("s3"))return e.jsx(xa,{isInvalid:i});if(r.includes("ftp"))return e.jsx(ha,{isInvalid:i});if(r.includes("dropbox"))return e.jsx(na,{isInvalid:i});if(r.includes("digitalocean_s3"))return e.jsx(pa,{isInvalid:i});if(r.includes("backblaze_s3"))return e.jsx(ja,{isInvalid:i})}})}function xa({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_s3_key",label:e.jsx(a,{message:"Amazon S3 key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_s3_secret",label:e.jsx(a,{message:"Amazon S3 secret"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_s3_region",label:e.jsx(a,{message:"Amazon S3 region"}),placeholder:"us-east-1"}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_s3_bucket",label:e.jsx(a,{message:"Amazon S3 bucket"}),required:!0}),e.jsx(l,{invalid:s,name:"server.storage_s3_endpoint",label:e.jsx(a,{message:"Amazon S3 endpoint"}),description:e.jsx(a,{message:"Only change endpoint if you are using another S3 compatible storage service."})}),e.jsx(oe,{invalid:s})]})}function pa({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_key",label:e.jsx(a,{message:"DigitalOcean key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_secret",label:e.jsx(a,{message:"DigitalOcean secret"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_region",label:e.jsx(a,{message:"DigitalOcean region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-east-1",required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_bucket",label:e.jsx(a,{message:"DigitalOcean bucket"}),required:!0}),e.jsx(oe,{invalid:s})]})}function ja({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_backblaze_key",label:e.jsx(a,{message:"Backblaze KeyID"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_backblaze_secret",label:e.jsx(a,{message:"Backblaze applicationKey"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_backblaze_region",label:e.jsx(a,{message:"Backblaze Region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-west-002",required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_backblaze_bucket",label:e.jsx(a,{message:"Backblaze bucket name"}),required:!0}),e.jsx(oe,{invalid:s})]})}function oe({invalid:s}){var t,c;const r=la(),{data:i}=le(),n=((t=i==null?void 0:i.server.uploads_disk_driver)==null?void 0:t.endsWith("s3"))||((c=i==null?void 0:i.server.public_disk_driver)==null?void 0:c.endsWith("s3"));return e.jsxs(u.Fragment,{children:[e.jsx(g,{className:"mt-30",invalid:s,name:"client.uploads.s3_direct_upload",description:e.jsxs("div",{children:[e.jsx("p",{children:e.jsx(a,{message:"Upload files directly from the browser to s3 without going through the server. It will save on server bandwidth and should result in faster upload times. This should be enabled, unless storage provider does not support multipart uploads."})}),e.jsx("p",{className:"mt-10",children:e.jsx(a,{message:"If s3 provider is not configured to allow uploads from browser, this can be done automatically via CORS button below, when valid credentials are saved."})})]}),children:e.jsx(a,{message:"Direct upload"})}),e.jsx(_,{variant:"flat",color:"primary",size:"xs",className:"mt-20",onClick:()=>{r.mutate()},disabled:!n||r.isPending,children:e.jsx(a,{message:"Configure CORS"})})]})}function ha({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_ftp_host",label:e.jsx(a,{message:"FTP hostname"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_ftp_username",label:e.jsx(a,{message:"FTP username"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_ftp_password",label:e.jsx(a,{message:"FTP password"}),type:"password",required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_ftp_root",label:e.jsx(a,{message:"FTP directory"}),placeholder:"/"}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.storage_ftp_port",label:e.jsx(a,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(g,{invalid:s,name:"server.storage_ftp_passive",className:"mb-30",children:e.jsx(a,{message:"Passive"})}),e.jsx(g,{invalid:s,name:"server.storage_ftp_ssl",children:e.jsx(a,{message:"SSL"})})]})}function ba({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.mailgun_domain",label:e.jsx(a,{message:"Mailgun domain"}),description:e.jsx(a,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.mailgun_secret",label:e.jsx(a,{message:"Mailgun API key"}),description:e.jsx(a,{message:"Should start with `key-`"}),required:!0}),e.jsx(l,{invalid:s,name:"server.mailgun_endpoint",label:e.jsx(a,{message:"Mailgun endpoint"}),description:e.jsx(a,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function fa({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.mail_host",label:e.jsx(a,{message:"SMTP host"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.mail_username",label:e.jsx(a,{message:"SMTP username"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",type:"password",name:"server.mail_password",label:e.jsx(a,{message:"SMTP password"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",type:"number",name:"server.mail_port",label:e.jsx(a,{message:"SMTP port"})}),e.jsxs(v,{selectionMode:"single",invalid:s,className:"mb-30",name:"server.mail_encryption",label:e.jsx(a,{message:"SMTP encryption"}),children:[e.jsx(o,{value:"",children:e.jsx(a,{message:"None"})}),e.jsx(o,{value:"tls",children:e.jsx(a,{message:"TLS"})}),e.jsx(o,{value:"ssl",children:e.jsx(a,{message:"SSL"})})]})]})}function va({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.ses_key",label:e.jsx(a,{message:"SES key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.ses_secret",label:e.jsx(a,{message:"SES secret"}),required:!0}),e.jsx(l,{invalid:s,name:"server.ses_region",label:e.jsx(a,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function _a({isInvalid:s}){return e.jsx(l,{invalid:s,name:"server.postmark_token",label:e.jsx(a,{message:"Postmark token"}),required:!0})}const he=ds([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function ya(){const{watch:s,setValue:r}=h(),{connectSocial:i}=Ae(),n=s("server.connectedGmailAccount"),t=async()=>{const d=await i("secure/settings/mail/gmail/connect");if((d==null?void 0:d.status)==="SUCCESS"){const x=d.callbackData.profile.email;r("server.connectedGmailAccount",x),A(p("Connected gmail account: :email",{values:{email:x}}))}},c=e.jsx(_,{variant:"outline",color:"primary",startIcon:e.jsx(he,{}),onClick:()=>t(),children:e.jsx(a,{message:"Connect gmail account"})}),m=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(he,{size:"lg"}),n,e.jsx(_,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>t(),children:e.jsx(a,{message:"Reconnect"})})]});return e.jsxs(u.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(a,{message:"Gmail account"})}),n?m:c]})}function ka(){const{watch:s,clearErrors:r}=h(),i=s("server.mail_driver"),n=[];return i==="mailgun"&&n.push(ba),i==="smtp"&&n.push(fa),i==="ses"&&n.push(va),i==="postmark"&&n.push(_a),i==="gmailApi"&&n.push(ya),e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:t=>e.jsxs(u.Fragment,{children:[e.jsxs(v,{onSelectionChange:()=>{r()},invalid:t,selectionMode:"single",name:"server.mail_driver",label:e.jsx(a,{message:"Outgoing mail method"}),description:e.jsxs("div",{children:[e.jsx(a,{message:"Which method should be used for sending outgoing application emails (like registration confirmation)"}),e.jsx(G,{className:"mt-8",link:"https://support.vebto.com/hc/articles/42/44/76/outgoing-emails"})]}),children:[e.jsx(o,{value:"mailgun",children:"Mailgun"}),e.jsx(o,{value:"gmailApi",children:"Gmail Api"}),e.jsx(o,{value:"smtp",children:"SMTP"}),e.jsx(o,{value:"postmark",children:"Postmark"}),e.jsx(o,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(o,{value:"sendmail",children:"SendMail"}),e.jsx(o,{value:"log",children:"Log (Email will be saved to error log)"})]}),n.length?e.jsx("div",{className:"mt-30",children:n.map((c,m)=>e.jsx(c,{isInvalid:t},m))}):null]})})}function dr(){return e.jsx(w,{title:e.jsx(a,{message:"Outgoing email settings"}),description:e.jsx(a,{message:"Change outgoing email handlers, email credentials and other related settings."}),children:s=>e.jsx(Sa,{data:s})})}function Sa({data:s}){var i;const r=y({defaultValues:{server:{mail_from_address:s.server.mail_from_address??"",mail_from_name:s.server.mail_from_name??"",mail_driver:s.server.mail_driver??"",mailgun_domain:s.server.mailgun_domain??"",mailgun_secret:s.server.mailgun_secret??"",mailgun_endpoint:s.server.mailgun_endpoint??"",mail_host:s.server.mail_host??"",mail_username:s.server.mail_username??"",mail_password:s.server.mail_password??"",mail_port:s.server.mail_port??"",mail_encryption:s.server.mail_encryption??"",ses_key:s.server.ses_key??"",ses_secret:s.server.ses_secret??"",ses_region:s.server.ses_region??"",postmark_token:s.server.postmark_token??"",connectedGmailAccount:s.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((i=s.client.mail)==null?void 0:i.contact_page_address)??""}}}});return e.jsxs(S,{form:r,children:[e.jsx(l,{id:"outgoing-emails",className:"mb-30",type:"email",name:"server.mail_from_address",label:e.jsx(a,{message:"From address"}),description:e.jsx(a,{message:"All outgoing application emails will be sent from this email address."}),required:!0}),e.jsx(wa,{}),e.jsx(l,{className:"mb-30",name:"server.mail_from_name",label:e.jsx(a,{message:"From name"}),description:e.jsx(a,{message:"All outgoing application emails will be sent using this name."}),required:!0}),e.jsx(K,{color:"warning",description:e.jsx(a,{message:"Your selected mail method must be authorized to send emails using this address and name."})}),e.jsx(F,{}),e.jsx(ka,{})]})}function wa(){const{base_url:s}=L(),r=`${s}/contact`,i=e.jsx(I,{href:r,children:r});return e.jsx(l,{className:"mb-30",type:"email",name:"client.mail.contact_page_address",label:e.jsx(a,{message:"Contact page address"}),description:e.jsx(a,{values:{contactPageUrl:i},message:"Where emails from :contactPageUrl page should be sent to."})})}function Na(){return q.post("cache/flush").then(s=>s.data)}function Fa(){return R({mutationFn:()=>Na(),onSuccess:()=>{A(p("Cache cleared"))},onError:s=>Y(s)})}function ur(){return e.jsx(w,{title:e.jsx(a,{message:"Cache settings"}),description:e.jsx(a,{message:"Select cache provider and manually clear cache."}),children:s=>e.jsx(Ca,{data:s})})}function Ca({data:s}){const r=Fa(),i=y({defaultValues:{server:{cache_driver:s.server.cache_driver??"file",memcached_host:s.server.memcached_host??"",memcached_port:s.server.memcached_port??""}}});return e.jsxs(S,{form:i,children:[e.jsx(qa,{}),e.jsx(_,{type:"button",variant:"outline",size:"xs",color:"primary",disabled:r.isPending,onClick:()=>r.mutate(),children:e.jsx(a,{message:"Clear cache"})}),e.jsx(K,{color:"warning",className:"mt-30",description:e.jsx(a,{message:'"File" is the best option for most cases and should not be changed, unless you are familiar with another cache method and have it set up on the server already.'})})]})}function qa(){const{watch:s,clearErrors:r}=h(),i=s("server.cache_driver");let n=null;return i==="memcached"&&(n=za),e.jsx(k,{separatorTop:!1,name:"cache_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{invalid:t,onSelectionChange:()=>r(),selectionMode:"single",name:"server.cache_driver",label:e.jsx(a,{message:"Cache method"}),description:e.jsx(a,{message:"Which method should be used for storing and retrieving cached items."}),children:[e.jsx(o,{value:"file",children:e.jsx(a,{message:"File (Default)"})}),e.jsx(o,{value:"array",children:e.jsx(a,{message:"None"})}),e.jsx(o,{value:"apc",children:"APC"}),e.jsx(o,{value:"memcached",children:"Memcached"}),e.jsx(o,{value:"redis",children:"Redis"})]}),n&&e.jsx("div",{className:"mt-30",children:e.jsx(n,{isInvalid:t})})]})})}function za({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.memcached_host",label:e.jsx(a,{message:"Memcached host"}),required:!0}),e.jsx(l,{invalid:s,type:"number",name:"server.memcached_port",label:e.jsx(a,{message:"Memcached port"}),required:!0})]})}function gr(){return e.jsx(w,{title:e.jsx(a,{message:"Error logging"}),description:e.jsx(a,{message:"Configure site error logging and related 3rd party integrations."}),children:s=>e.jsx(Pa,{data:s})})}function Pa({data:s}){const r=y({defaultValues:{server:{sentry_dsn:s.server.sentry_dsn??""}}});return e.jsxs(S,{form:r,children:[e.jsx(Da,{}),e.jsx(K,{className:"mt-30",color:"positive",description:e.jsx(a,{values:{a:i=>e.jsx(I,{href:"https://sentry.io",children:i})},message:"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production."})})]})}function Da(){const{clearErrors:s}=h();return e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"logging_group",children:r=>e.jsx(l,{onChange:()=>s(),invalid:r,name:"server.sentry_dsn",type:"url",minLength:30,label:e.jsx(a,{message:"Sentry DSN"})})})}function Aa(){return X({queryKey:["queue-stats"],queryFn:()=>Ea(),refetchInterval:5e3})}function Ea(){return q.get("horizon/api/stats").then(s=>s.data)}function xr(){return e.jsx(w,{title:e.jsx(a,{message:"Queue"}),description:e.jsxs(u.Fragment,{children:[e.jsx(a,{message:"Queues allow to defer time consuming tasks, such as sending an email, until a later time. They are fully optional and do not provide any additional functionality."}),e.jsx(G,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(Ma,{data:s})})}function Ma({data:s}){const r=y({defaultValues:{server:{queue_driver:s.server.queue_driver??"sync",sqs_queue_key:s.server.sqs_queue_key??"",sqs_queue_secret:s.server.sqs_queue_secret??"",sqs_queue_prefix:s.server.sqs_queue_prefix??"",sqs_queue_name:s.server.sqs_queue_name??"",sqs_queue_region:s.server.sqs_queue_region??""}}}),i=r.watch("server.queue_driver");return e.jsxs(S,{form:r,children:[i!=="sync"&&e.jsx(Ta,{}),e.jsx(Ra,{})]})}function Ta(){const{base_url:s}=L(),{data:r}=Aa(),i=r==null?void 0:r.status;return e.jsx("div",{className:"mb-30 flex h-32 items-center justify-between gap-14",children:i&&e.jsxs(u.Fragment,{children:[e.jsxs("div",{className:z("min-w-108 flex w-max items-center gap-8 rounded-button px-10 py-4 text-sm capitalize",i==="running"&&"bg-positive-lighter",i==="inactive"&&"bg-danger-lighter",i==="paused"&&"bg-chip"),children:[e.jsx("div",{className:z("h-10 w-10 rounded-full",i==="running"&&"bg-positive",i==="inactive"&&"bg-danger",i==="paused"&&"bg-chip")}),e.jsx(a,{message:`Worker ${i}`})]}),e.jsx(_,{variant:"outline",size:"xs",elementType:"a",href:`${s}/horizon`,target:"_blank",endIcon:e.jsx(Ee,{}),children:e.jsx(a,{message:"Monitor"})})]})})}function Ra(){const{watch:s,clearErrors:r}=h(),i=s("server.queue_driver");let n=null;return i==="sqs"&&(n=La),e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{invalid:t,onSelectionChange:()=>{r()},selectionMode:"single",name:"server.queue_driver",label:e.jsx(a,{message:"Queue method"}),required:!0,children:[e.jsx(o,{value:"sync",children:e.jsx(a,{message:"None (Default)"})}),e.jsx(o,{value:"beanstalkd",children:"Beanstalkd"}),e.jsx(o,{value:"database",children:e.jsx(a,{message:"Database"})}),e.jsx(o,{value:"sqs",children:e.jsx(a,{message:"SQS (Amazon simple queue service)"})}),e.jsx(o,{value:"redis",children:"Redis"})]}),n&&e.jsx("div",{className:"mt-30",children:e.jsx(n,{isInvalid:t})})]})})}function La({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-30",name:"server.sqs_queue_key",label:e.jsx(a,{message:"SQS queue key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.sqs_queue_secret",label:e.jsx(a,{message:"SQS queue secret"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.sqs_queue_prefix",label:e.jsx(a,{message:"SQS queue prefix"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.sqs_queue_name",label:e.jsx(a,{message:"SQS queue name"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-30",name:"server.sqs_queue_region",label:e.jsx(a,{message:"SQS queue region"}),required:!0})]})}function pr(){return e.jsx(w,{title:e.jsx(a,{message:"Websockets"}),description:e.jsxs(u.Fragment,{children:[e.jsx(a,{message:"Configure websockets provider responsible for all realtime functionality on the site."}),e.jsx(G,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(Ga,{data:s})})}function Ga({data:s}){const r=y({defaultValues:{server:{broadcast_driver:s.server.broadcast_driver??"null",pusher_app_id:s.server.pusher_app_id??"",pusher_app_key:s.server.pusher_app_key??"",pusher_app_secret:s.server.pusher_app_secret??"",pusher_app_cluster:s.server.pusher_app_cluster??"",reverb_app_id:s.server.reverb_app_id??"",reverb_app_key:s.server.reverb_app_key??"",reverb_app_secret:s.server.reverb_app_secret??"",reverb_host:s.server.reverb_host??"",reverb_port:s.server.reverb_port??"",reverb_scheme:s.server.reverb_scheme??"https",ably_app_id:s.server.ably_app_id??"",ably_app_key:s.server.ably_app_key??"",ably_app_secret:s.server.ably_app_secret??""}}});return e.jsx(S,{form:r,children:e.jsx(Ba,{})})}function Ba(){const{clearErrors:s,control:r}=h(),i=We({control:r,name:"server.broadcast_driver"});let n=null;return i==="pusher"?n=Ua:i==="ably"&&(n=Oa),e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:t=>e.jsxs(u.Fragment,{children:[e.jsxs(v,{invalid:t,onSelectionChange:()=>s(),selectionMode:"single",name:"server.broadcast_driver",label:e.jsx(a,{message:"Websockets provider"}),required:!0,children:[e.jsx(o,{value:"null",children:e.jsx(a,{message:"None (Disabled)"})}),e.jsx(o,{value:"reverb",children:"Local"}),e.jsx(o,{value:"pusher",children:"Pusher"}),e.jsx(o,{value:"ably",children:e.jsx(a,{message:"Ably"})})]}),n&&e.jsx("div",{className:"mt-30",children:e.jsx(n,{isInvalid:t})})]})})}function Ua({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{name:"server.pusher_app_id",label:e.jsx(a,{message:"Pusher app ID"}),className:"mb-30",required:!0}),e.jsx(l,{name:"server.pusher_app_key",label:e.jsx(a,{message:"Pusher app key"}),className:"mb-30",required:!0}),e.jsx(l,{name:"server.pusher_app_secret",label:e.jsx(a,{message:"Pusher app secret"}),className:"mb-30",required:!0}),e.jsx(l,{name:"server.pusher_app_cluster",label:e.jsx(a,{message:"Pusher app cluster"}),className:"mb-30",placeholder:"mt1",required:!0})]})}function Oa({isInvalid:s}){return e.jsxs(u.Fragment,{children:[e.jsx(l,{name:"server.ably_app_id",label:e.jsx(a,{message:"Ably app ID"}),className:"mb-30",required:!0}),e.jsx(l,{name:"server.ably_app_key",label:e.jsx(a,{message:"Ably app key"}),className:"mb-30",required:!0}),e.jsx(l,{name:"server.ably_app_secret",label:e.jsx(a,{message:"Ably app secret"}),className:"mb-30",required:!0})]})}function jr(){return e.jsx(w,{title:e.jsx(a,{message:"Recaptcha"}),description:e.jsx(a,{message:"Configure google recaptcha integration and credentials."}),children:s=>e.jsx(Va,{data:s})})}function Va({data:s}){var n,t,c,m,d,x,j,b;const{settings:r}=u.useContext(be),i=y({defaultValues:{client:{recaptcha:{enable:{link_creation:((t=(n=s.client.recaptcha)==null?void 0:n.enable)==null?void 0:t.link_creation)??!1,contact:((m=(c=s.client.recaptcha)==null?void 0:c.enable)==null?void 0:m.contact)??!1,register:((x=(d=s.client.recaptcha)==null?void 0:d.enable)==null?void 0:x.register)??!1},site_key:((j=s.client.recaptcha)==null?void 0:j.site_key)??"",secret_key:((b=s.client.recaptcha)==null?void 0:b.secret_key)??""}}}});return e.jsxs(S,{form:i,children:[(r==null?void 0:r.showRecaptchaLinkSwitch)&&e.jsx(g,{className:"mb-30",name:"client.recaptcha.enable.link_creation",description:e.jsx(a,{message:"Enable recaptcha integration when creating links from homepage or user dashboard."}),children:e.jsx(a,{message:"Link creation"})}),e.jsx(g,{className:"mb-30",name:"client.recaptcha.enable.contact",description:e.jsx(a,{message:'Enable recaptcha integration for "contact us" page.'}),children:e.jsx(a,{message:"Contact page"})}),e.jsx(g,{className:"mb-30",name:"client.recaptcha.enable.register",description:e.jsx(a,{message:"Enable recaptcha integration for registration page."}),children:e.jsx(a,{message:"Registration page"})}),e.jsx($a,{})]})}function $a(){const{clearErrors:s}=h();return e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"recaptcha_group",children:r=>e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-30",onChange:()=>{s()},invalid:r,name:"client.recaptcha.site_key",label:e.jsx(a,{message:"Recaptcha v3 site key"})}),e.jsx(l,{onChange:()=>{s()},invalid:r,name:"client.recaptcha.secret_key",label:e.jsx(a,{message:"Recaptcha v3 secret key"})})]})})}const Wa=ye.forwardRef((s,r)=>{const i=ve(r),{fieldProps:n,inputProps:t}=us({...s,focusRef:i}),c=Se(s);return e.jsx(gs,{ref:r,fieldClassNames:c,...n,children:e.jsx("input",{type:"file",ref:i,...t,className:z(c.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})})});function Qa({name:s,...r}){const{field:{onChange:i,onBlur:n,ref:t},fieldState:{invalid:c,error:m}}=J({name:s}),[d,x]=ye.useState(""),j={onChange:b=>{var N;i((N=b.target.files)==null?void 0:N[0]),x(b.target.value)},onBlur:n,value:d,invalid:c,errorMessage:m==null?void 0:m.message};return e.jsx(Wa,{ref:t,...re(j,r)})}function hr(){return e.jsx(w,{title:e.jsx(a,{message:"Analytics"}),description:e.jsx(a,{message:"Configure google analytics integration and credentials."}),children:s=>e.jsx(Ha,{data:s})})}function Ha({data:s}){var i,n;const r=y({defaultValues:{files:{certificate:""},server:{analytics_property_id:s.server.analytics_property_id??""},client:{analytics:{tracking_code:((i=s.client.analytics)==null?void 0:i.tracking_code)??"",gchart_api_key:((n=s.client.analytics)==null?void 0:n.gchart_api_key)??""}}}});return e.jsx(S,{form:r,children:e.jsx(Ia,{})})}function Ia(){const{clearErrors:s}=h();return e.jsx(k,{separatorTop:!1,separatorBottom:!1,name:"analytics_group",children:r=>e.jsxs(u.Fragment,{children:[e.jsx(Qa,{className:"mb-30",onChange:()=>s(),invalid:r,name:"files.certificate",accept:".json",label:e.jsx(a,{message:"Google service account key file (.json)"})}),e.jsx(l,{className:"mb-30",onChange:()=>s(),invalid:r,name:"server.analytics_property_id",type:"number",label:e.jsx(a,{message:"Google analytics property ID"})}),e.jsx(l,{className:"mb-30",onChange:()=>s(),invalid:r,name:"client.analytics.tracking_code",placeholder:"G-******",min:"1",max:"20",description:e.jsx(a,{message:"Google analytics measurement ID only, not the whole javascript snippet."}),label:e.jsx(a,{message:"Google tag manager measurement ID"})}),e.jsx(l,{name:"client.analytics.gchart_api_key",label:e.jsx(a,{message:"Google maps javascript API key"}),description:e.jsx(a,{message:"Only required in order to show world geochart on integrated analytics pages."})})]})})}function br({isInternal:s=!1}){const{trans:r}=H(),{workspaces:i}=L(),{watch:n,setValue:t}=h(),c=n("type");return e.jsxs(e.Fragment,{children:[e.jsx(l,{label:e.jsx(a,{message:"Name"}),name:"name",className:"mb-20",required:!0}),e.jsx(l,{label:e.jsx(a,{message:"Description"}),name:"description",inputElementType:"textarea",placeholder:r(p("Role description...")),rows:4,className:"mb-20"}),i.integrated&&e.jsxs(v,{label:e.jsx(a,{message:"Type"}),name:"type",selectionMode:"single",className:"mb-20",description:e.jsx(a,{message:"Whether this role will be assigned to users globally on the site or only within workspaces."}),children:[e.jsx(o,{value:"sitewide",children:e.jsx(a,{message:"Sitewide"})}),e.jsx(o,{value:"workspace",children:e.jsx(a,{message:"Workspace"})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(g,{name:"default",className:"mb-20",description:e.jsx(a,{message:"Assign this role to new users automatically."}),children:e.jsx(a,{message:"Default"})}),c==="sitewide"&&e.jsx(g,{name:"guests",description:e.jsx(a,{message:"Assign this role to guests (not logged in users)."}),children:e.jsx(a,{message:"Guests"})})]}),e.jsxs("div",{className:"mb-14 mt-30 flex items-end justify-between gap-12",children:[e.jsx("h2",{className:"text-lg leading-tight",children:e.jsx(a,{message:"Permissions"})}),e.jsx(_,{variant:"outline",size:"xs",onClick:()=>t("permissions",[]),children:e.jsx(a,{message:"Remove all"})})]}),e.jsx(Me,{name:"permissions",valueListKey:c==="sitewide"?"permissions":"workspacePermissions"})]})}function fr(){const s=ne(["menuItemCategories"]);return e.jsx(w,{title:e.jsx(a,{message:"GDPR"}),description:e.jsx(a,{message:"Configure settings related to EU General Data Protection Regulation."}),isLoading:s.isLoading,children:r=>e.jsx(Ka,{data:r})})}function Ka({data:s}){var i,n,t,c;const r=y({defaultValues:{client:{cookie_notice:{enable:((i=s.client.cookie_notice)==null?void 0:i.enable)??!1,button:((n=s.client.cookie_notice)==null?void 0:n.button)??{},position:((t=s.client.cookie_notice)==null?void 0:t.position)??"bottom"},registration:{policies:((c=s.client.registration)==null?void 0:c.policies)??[]}}}});return e.jsxs(S,{form:r,children:[e.jsx(Ja,{}),e.jsx(F,{}),e.jsx(Xa,{})]})}function Ja(){const{watch:s}=h(),r=s("client.cookie_notice.enable");return e.jsxs("div",{children:[e.jsx(g,{name:"client.cookie_notice.enable",className:"mb-20",description:e.jsx(a,{message:"Whether cookie notice should be shown automatically to users from EU until it is accepted."}),children:e.jsx(a,{message:"Enable cookie notice"})}),r&&e.jsxs(u.Fragment,{children:[e.jsxs("div",{className:"mb-20 border-b pb-6",children:[e.jsx("div",{className:"mb-20 border-b pb-10 text-sm font-medium",children:e.jsx(a,{message:"Information button"})}),e.jsx("div",{className:"mb-20",children:e.jsx(fe,{hideRoleAndPermissionFields:!0,formPathPrefix:"client.cookie_notice.button"})})]}),e.jsxs(v,{name:"client.cookie_notice.position",selectionMode:"single",label:e.jsx(a,{message:"Cookie notice position"}),className:"mb-20",children:[e.jsx(o,{value:"top",children:e.jsx(a,{message:"Top"})}),e.jsx(o,{value:"bottom",children:e.jsx(a,{message:"Bottom"})})]})]})]})}function Xa(){const{fields:s,append:r,remove:i}=Qe({name:"client.registration.policies"});return h(),e.jsxs(u.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(a,{message:"Registration policies"})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(a,{message:"Create policies that will be shown on registration page. User will be required to accept them by toggling a checkbox."})}),e.jsx(vs,{className:"mt-16",variant:"outline",children:s.map((n,t)=>e.jsx(_s,{label:n.label,chevronPosition:"left",endAppend:e.jsx(xs,{variant:"text",color:"danger",size:"sm",onClick:()=>i(t),children:e.jsx(ps,{})}),children:e.jsx(fe,{hideRoleAndPermissionFields:!0,formPathPrefix:`client.registration.policies.${t}`})},n.id))}),e.jsxs(Ne,{type:"modal",onClose:n=>{n&&r(n)},children:[e.jsx(_,{className:"mt-12",variant:"link",color:"primary",startIcon:e.jsx(ys,{}),size:"xs",children:e.jsx(a,{message:"Add another policy"})}),e.jsx(ks,{title:e.jsx(a,{message:"Add policy"})})]})]})}function vr(){return e.jsx(w,{title:e.jsx(a,{message:"Drive"}),description:e.jsx(a,{message:"Configure defaults for drive user dashboard."}),children:s=>e.jsx(Ya,{data:s})})}function Ya({data:s}){var i,n,t;const r=y({defaultValues:{client:{drive:{default_view:((i=s.client.drive)==null?void 0:i.default_view)??"list",send_share_notification:((n=s.client.drive)==null?void 0:n.send_share_notification)??!1},share:{suggest_emails:((t=s.client.share)==null?void 0:t.suggest_emails)??!1}}}});return e.jsxs(S,{form:r,children:[e.jsxs(te,{required:!0,className:"mb-30",size:"md",name:"client.drive.default_view",orientation:"vertical",label:e.jsx(a,{message:"Default view mode"}),description:e.jsx(a,{message:"Which view mode should user drive use by default."}),children:[e.jsx(T,{value:"list",children:e.jsx(a,{message:"List"})}),e.jsx(T,{value:"grid",children:e.jsx(a,{message:"Grid"})})]}),e.jsx(g,{className:"mb-30",name:"client.drive.send_share_notification",description:e.jsx(a,{message:"Send a notification to user when a file or folder is shared with them."}),children:e.jsx(a,{message:"Share notifications"})}),e.jsx(g,{name:"client.share.suggest_emails",description:e.jsx(a,{message:"Suggest email address of existing users when sharing a file or folder."}),children:e.jsx(a,{message:"Suggest emails"})})]})}function _r(){const{data:s,isLoading:r}=X({queryKey:["transfer-settings"],queryFn:()=>q.get("admin/settings/transfer").then(d=>d.data)}),i=y({defaultValues:s||{}}),n=R({mutationFn:d=>q.put("admin/settings/transfer",d),onSuccess:()=>{A.positive(e.jsx(a,{message:"Transfer settings updated successfully"})),ee.invalidateQueries({queryKey:["transfer-settings"]})},onError:d=>{var x,j;A.danger(((j=(x=d.response)==null?void 0:x.data)==null?void 0:j.message)||e.jsx(a,{message:"Failed to update settings"}))}}),t=R({mutationFn:()=>q.post("admin/settings/transfer/reset"),onSuccess:()=>{A.positive(e.jsx(a,{message:"Settings reset to defaults"})),ee.invalidateQueries({queryKey:["transfer-settings"]})}}),c=d=>{n.mutate(d)},m=()=>{confirm("Are you sure you want to reset all settings to defaults?")&&t.mutate()};return r?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e.jsx(u.Fragment,{children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:e.jsx(a,{message:"Transfer Service Settings"})}),e.jsx("p",{className:"text-muted mt-1",children:e.jsx(a,{message:"Configure your transfer service parameters and security settings"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(_,{variant:"outline",onClick:m,disabled:t.isPending,startIcon:e.jsx(Te,{}),children:e.jsx(a,{message:"Reset to Defaults"})})})]}),e.jsx(ie,{form:i,onSubmit:c,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"text-primary"}),e.jsx(a,{message:"General Settings"})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"max_file_size",label:e.jsx(a,{message:"Maximum File Size (MB)"}),type:"number",min:"1",max:"10240",description:e.jsx(a,{message:"Maximum size for individual files"})}),e.jsx(l,{name:"max_total_size",label:e.jsx(a,{message:"Maximum Total Transfer Size (MB)"}),type:"number",min:"1",max:"51200",description:e.jsx(a,{message:"Maximum total size for all files in a transfer"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"max_files_per_transfer",label:e.jsx(a,{message:"Maximum Files per Transfer"}),type:"number",min:"1",max:"1000",description:e.jsx(a,{message:"Maximum number of files in a single transfer"})}),e.jsxs(v,{name:"default_expiry",label:e.jsx(a,{message:"Default Expiry Period"}),description:e.jsx(a,{message:"Default expiration time for new transfers"}),children:[e.jsx(o,{value:"1_hour",children:e.jsx(a,{message:"1 Hour"})}),e.jsx(o,{value:"24_hours",children:e.jsx(a,{message:"24 Hours"})}),e.jsx(o,{value:"7_days",children:e.jsx(a,{message:"7 Days"})}),e.jsx(o,{value:"30_days",children:e.jsx(a,{message:"30 Days"})}),e.jsx(o,{value:"never",children:e.jsx(a,{message:"Never"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{name:"allow_anonymous_transfers",description:e.jsx(a,{message:"Allow users to create transfers without registration"}),children:e.jsx(a,{message:"Allow Anonymous Transfers"})}),e.jsx(g,{name:"require_email_verification",description:e.jsx(a,{message:"Require email verification for anonymous transfers"}),children:e.jsx(a,{message:"Require Email Verification"})})]})]})]}),e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"text-success"}),e.jsx(a,{message:"Security Settings"})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{name:"enable_password_protection",description:e.jsx(a,{message:"Allow users to password protect their transfers"}),children:e.jsx(a,{message:"Enable Password Protection"})}),e.jsx(g,{name:"enable_download_notifications",description:e.jsx(a,{message:"Notify senders when files are downloaded"}),children:e.jsx(a,{message:"Enable Download Notifications"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"max_download_attempts",label:e.jsx(a,{message:"Maximum Download Attempts"}),type:"number",min:"1",max:"100",description:e.jsx(a,{message:"Maximum number of download attempts per transfer"})}),e.jsxs(v,{name:"virus_scanning",label:e.jsx(a,{message:"Virus Scanning"}),description:e.jsx(a,{message:"Enable virus scanning for uploaded files"}),children:[e.jsx(o,{value:"disabled",children:e.jsx(a,{message:"Disabled"})}),e.jsx(o,{value:"enabled",children:e.jsx(a,{message:"Enabled"})}),e.jsx(o,{value:"quarantine",children:e.jsx(a,{message:"Enabled with Quarantine"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"blocked_file_extensions",label:e.jsx(a,{message:"Blocked File Extensions"}),placeholder:"exe,bat,com,scr",description:e.jsx(a,{message:"Comma-separated list of blocked file extensions"})}),e.jsx(l,{name:"allowed_domains",label:e.jsx(a,{message:"Allowed Email Domains"}),placeholder:"company.com,partner.org",description:e.jsx(a,{message:"Restrict transfers to specific email domains (leave empty for all)"})})]})]})]}),e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"text-info"}),e.jsx(a,{message:"Performance Settings"})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"chunk_size",label:e.jsx(a,{message:"Upload Chunk Size (MB)"}),type:"number",min:"1",max:"100",description:e.jsx(a,{message:"Size of upload chunks for large files"})}),e.jsx(l,{name:"concurrent_uploads",label:e.jsx(a,{message:"Concurrent Uploads"}),type:"number",min:"1",max:"10",description:e.jsx(a,{message:"Maximum number of concurrent file uploads"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{name:"enable_compression",description:e.jsx(a,{message:"Compress files during upload to save bandwidth"}),children:e.jsx(a,{message:"Enable File Compression"})}),e.jsx(g,{name:"enable_deduplication",description:e.jsx(a,{message:"Remove duplicate files to save storage space"}),children:e.jsx(a,{message:"Enable File Deduplication"})})]})]})]}),e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"text-warning"}),e.jsx(a,{message:"Email Settings"})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{name:"sender_email",label:e.jsx(a,{message:"Sender Email Address"}),type:"email",description:e.jsx(a,{message:"Email address used for transfer notifications"})}),e.jsx(l,{name:"sender_name",label:e.jsx(a,{message:"Sender Name"}),description:e.jsx(a,{message:"Name displayed in transfer notification emails"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{name:"send_upload_confirmation",description:e.jsx(a,{message:"Send confirmation email when transfer is uploaded"}),children:e.jsx(a,{message:"Send Upload Confirmation"})}),e.jsx(g,{name:"send_expiry_reminder",description:e.jsx(a,{message:"Send reminder email before transfer expires"}),children:e.jsx(a,{message:"Send Expiry Reminder"})})]}),e.jsx(l,{name:"custom_email_footer",label:e.jsx(a,{message:"Custom Email Footer"}),multiline:!0,rows:3,description:e.jsx(a,{message:"Custom footer text for transfer notification emails"})})]})]}),e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"text-purple-500"}),e.jsx(a,{message:"Storage Settings"})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{name:"storage_driver",label:e.jsx(a,{message:"Storage Driver"}),description:e.jsx(a,{message:"Storage backend for transfer files"}),children:[e.jsx(o,{value:"local",children:e.jsx(a,{message:"Local Storage"})}),e.jsx(o,{value:"s3",children:e.jsx(a,{message:"Amazon S3"})}),e.jsx(o,{value:"gcs",children:e.jsx(a,{message:"Google Cloud Storage"})}),e.jsx(o,{value:"azure",children:e.jsx(a,{message:"Azure Blob Storage"})})]}),e.jsx(l,{name:"cleanup_interval",label:e.jsx(a,{message:"Cleanup Interval (hours)"}),type:"number",min:"1",max:"168",description:e.jsx(a,{message:"How often to clean up expired transfers"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{name:"auto_cleanup_expired",description:e.jsx(a,{message:"Automatically delete expired transfers"}),children:e.jsx(a,{message:"Auto Cleanup Expired Transfers"})}),e.jsx(g,{name:"backup_before_cleanup",description:e.jsx(a,{message:"Create backup before deleting expired transfers"}),children:e.jsx(a,{message:"Backup Before Cleanup"})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{type:"submit",disabled:n.isPending,startIcon:e.jsx(Le,{}),children:e.jsx(a,{message:"Save Settings"})})})]})})]})})}export{nr as A,ur as C,vr as D,tr as G,or as L,dr as O,xr as Q,jr as R,lr as S,_r as T,mr as U,pr as W,cr as a,gr as b,hr as c,fr as d,ir as e,Ts as f,br as g,Ns as h,Ss as i,se as p,le as u};
//# sourceMappingURL=admin-settings-e39945e8.js.map
