{"version":3,"file":"ArrowBack-7e40eb40.js","sources":["../../../common/foundation/resources/client/ui/library/forms/input-field/input.jsx","../../../common/foundation/resources/client/ui/library/utils/date/start-of-day.jsx","../../../common/foundation/resources/client/ui/library/utils/date/end-of-day.jsx","../../../common/foundation/resources/client/ui/library/i18n/get-user-timezone.jsx","../../../common/foundation/resources/client/ui/library/i18n/use-current-date-time.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-presets.jsx","../../../common/foundation/resources/client/ui/library/icons/material/DateRange.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/date-picker-field.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/utils.jsx","../../../common/foundation/resources/client/ui/library/i18n/to-safe-zoned.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/use-base-date-picker-state.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/use-date-range-picker-state.jsx","../../../common/foundation/resources/client/ui/library/icons/material/ArrowRightAlt.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/adjust-segment.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/set-segment.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/page-step.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/editable-date-segment.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/literal-segment.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/get-segment-limits.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/date-segment-list.jsx","../../../common/foundation/resources/client/ui/library/icons/material/KeyboardArrowRight.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar-cell.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar-month.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar.jsx","../../../common/foundation/resources/client/ui/library/i18n/formatted-date-time-range.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.jsx","../../../common/foundation/resources/client/ui/library/utils/hooks/is-tablet-media-query.jsx","../../../common/foundation/resources/client/ui/library/forms/toggle/switch.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.jsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-dialog.jsx","../../../common/foundation/resources/client/ui/library/i18n/formatted-number.jsx","../../../common/foundation/resources/client/ui/library/icons/material/ArrowBack.jsx"],"sourcesContent":["import { FocusScope } from '@react-aria/focus';\nimport React from 'react';\nimport clsx from 'clsx';\nexport const Input = React.forwardRef((props, ref) => {\n  const {\n    children,\n    inputProps,\n    wrapperProps,\n    className,\n    autoFocus,\n    style,\n    onClick\n  } = props;\n  return <div {...wrapperProps} onClick={onClick}>\n        <div {...inputProps} role=\"group\" className={clsx(className, 'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60')} ref={ref} style={style}>\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>;\n});","export function startOfDay(date) {\n  return date.set({\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0\n  });\n}","export function endOfDay(date) {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1\n  });\n}","import { getBootstrapData } from '@ui/bootstrap-data/bootstrap-data-store';\nimport { getLocalTimeZone } from '@internationalized/date';\nexport function getUserTimezone() {\n  const defaultTimezone = getBootstrapData()?.settings.dates.default_timezone;\n  const preferredTimezone = getBootstrapData()?.user?.timezone || defaultTimezone || 'auto';\n  if (!preferredTimezone || preferredTimezone === 'auto') {\n    return getLocalTimeZone();\n  }\n  return preferredTimezone;\n}","import { useMemo } from 'react';\nimport { now } from '@internationalized/date';\nimport { useUserTimezone } from '@ui/i18n/use-user-timezone';\nimport { getUserTimezone } from '@ui/i18n/get-user-timezone';\nexport function useCurrentDateTime() {\n  const timezone = useUserTimezone();\n  return useMemo(() => {\n    try {\n      return now(timezone);\n    } catch (e) {\n      return now('UTC');\n    }\n  }, [timezone]);\n}\nexport function getCurrentDateTime() {\n  const timezone = getUserTimezone();\n  try {\n    return now(timezone);\n  } catch (e) {\n    return now('UTC');\n  }\n}","import { message } from '@ui/i18n/message';\nimport { endOfMonth, endOfWeek, endOfYear, startOfMonth, startOfWeek, startOfYear } from '@internationalized/date';\nimport { startOfDay } from '@ui/utils/date/start-of-day';\nimport { endOfDay } from '@ui/utils/date/end-of-day';\nimport { getBootstrapData } from '@ui/bootstrap-data/bootstrap-data-store';\nimport { getCurrentDateTime } from '@ui/i18n/use-current-date-time';\nconst Now = startOfDay(getCurrentDateTime());\nconst locale = getBootstrapData()?.i18n?.language || 'en';\nexport const DateRangePresets = [{\n  key: 0,\n  label: message('Today'),\n  getRangeValue: () => ({\n    preset: 0,\n    start: Now,\n    end: endOfDay(Now)\n  })\n}, {\n  key: 1,\n  label: message('Yesterday'),\n  getRangeValue: () => ({\n    preset: 1,\n    start: Now.subtract({\n      days: 1\n    }),\n    end: endOfDay(Now).subtract({\n      days: 1\n    })\n  })\n}, {\n  key: 2,\n  label: message('This week'),\n  getRangeValue: () => ({\n    preset: 2,\n    start: startOfWeek(Now, locale),\n    end: endOfWeek(endOfDay(Now), locale)\n  })\n}, {\n  key: 3,\n  label: message('Last week'),\n  getRangeValue: () => {\n    const start = startOfWeek(Now, locale).subtract({\n      days: 7\n    });\n    return {\n      preset: 3,\n      start,\n      end: start.add({\n        days: 6\n      })\n    };\n  }\n}, {\n  key: 4,\n  label: message('Last 7 days'),\n  getRangeValue: () => ({\n    preset: 4,\n    start: Now.subtract({\n      days: 7\n    }),\n    end: endOfDay(Now)\n  })\n}, {\n  key: 6,\n  label: message('Last 30 days'),\n  getRangeValue: () => ({\n    preset: 6,\n    start: Now.subtract({\n      days: 30\n    }),\n    end: endOfDay(Now)\n  })\n}, {\n  key: 7,\n  label: message('Last 3 months'),\n  getRangeValue: () => ({\n    preset: 7,\n    start: Now.subtract({\n      months: 3\n    }),\n    end: endOfDay(Now)\n  })\n}, {\n  key: 8,\n  label: message('Last 12 months'),\n  getRangeValue: () => ({\n    preset: 8,\n    start: Now.subtract({\n      months: 12\n    }),\n    end: endOfDay(Now)\n  })\n}, {\n  key: 9,\n  label: message('This month'),\n  getRangeValue: () => ({\n    preset: 9,\n    start: startOfMonth(Now),\n    end: endOfMonth(endOfDay(Now))\n  })\n}, {\n  key: 10,\n  label: message('This year'),\n  getRangeValue: () => ({\n    preset: 10,\n    start: startOfYear(Now),\n    end: endOfYear(endOfDay(Now))\n  })\n}, {\n  key: 11,\n  label: message('Last year'),\n  getRangeValue: () => ({\n    preset: 11,\n    start: startOfYear(Now).subtract({\n      years: 1\n    }),\n    end: endOfYear(endOfDay(Now)).subtract({\n      years: 1\n    })\n  })\n}];","import { createSvgIcon } from '../create-svg-icon';\nexport const DateRangeIcon = createSvgIcon(<path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />, 'DateRangeOutlined');","import React from 'react';\nimport clsx from 'clsx';\nimport { createFocusManager } from '@react-aria/focus';\nimport { mergeProps, useObjectRef } from '@react-aria/utils';\nimport { getInputFieldClassNames } from '../../get-input-field-class-names';\nimport { Field } from '../../field';\nimport { Input } from '../../input';\nimport { useField } from '../../use-field';\nexport const DatePickerField = React.forwardRef(({\n  inputRef,\n  wrapperProps,\n  children,\n  onBlur,\n  ...other\n}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n  const {\n    fieldProps,\n    inputProps\n  } = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span'\n  });\n  fieldClassNames.wrapper = clsx(fieldClassNames.wrapper, other.disabled && 'pointer-events-none');\n  return <Field wrapperProps={mergeProps(wrapperProps, {\n    onBlur: e => {\n      if (!objRef.current?.contains(e.relatedTarget)) {\n        onBlur?.(e);\n      }\n    },\n    onClick: () => {\n      // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n      const focusManager = createFocusManager(objRef);\n      focusManager?.focusFirst();\n    }\n  })} fieldClassNames={fieldClassNames} ref={objRef} {...fieldProps}>\n      <Input inputProps={inputProps} className={clsx(fieldClassNames.input, 'gap-10')} ref={inputRef}>\n        {children}\n      </Input>\n    </Field>;\n});","import { CalendarDate } from '@internationalized/date';\nexport function getDefaultGranularity(date) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\nexport function dateIsInvalid(date, min, max) {\n  return min != null && date.compare(min) < 0 || max != null && date.compare(max) > 0;\n}","import { toZoned } from '@internationalized/date';\nexport function toSafeZoned(date, timeZone, disambiguation) {\n  try {\n    return toZoned(date, timeZone, disambiguation);\n  } catch (e) {\n    return toZoned(date, 'UTC', disambiguation);\n  }\n}","import { useState } from 'react';\nimport { getDefaultGranularity } from './utils';\nimport { useUserTimezone } from '@ui/i18n/use-user-timezone';\nimport { toSafeZoned } from '@ui/i18n/to-safe-zoned';\nexport function useBaseDatePickerState(selectedDate, props) {\n  const timezone = useUserTimezone();\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toSafeZoned(props.min, timezone) : undefined;\n  const max = props.max ? toSafeZoned(props.max, timezone) : undefined;\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection\n  };\n}","import { useControlledState } from '@react-stately/utils';\nimport { useCallback, useState } from 'react';\nimport { endOfMonth, isSameDay, isSameMonth, maxDate, minDate, startOfMonth, toCalendarDate } from '@internationalized/date';\nimport { useBaseDatePickerState } from '../use-base-date-picker-state';\nimport { startOfDay } from '@ui/utils/date/start-of-day';\nimport { endOfDay } from '@ui/utils/date/end-of-day';\nimport { useCurrentDateTime } from '@ui/i18n/use-current-date-time';\nimport { toSafeZoned } from '@ui/i18n/to-safe-zoned';\nexport function useDateRangePickerState(props) {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(props.value ? completeRange(props.value, now) : undefined, !props.value ? completeRange(props.defaultValue, now) : undefined, value => {\n    setIsPlaceholder({\n      start: false,\n      end: false\n    });\n    setStateValue?.(value);\n  });\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection\n  } = useBaseDatePickerState(internalValue.start, props);\n  const clear = useCallback(() => {\n    setIsPlaceholder({\n      start: true,\n      end: true\n    });\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n  const [anchorDate, setAnchorDate] = useState(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] = useState(internalValue);\n  const [calendarDates, setCalendarDates] = useState(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n  const constrainRange = useCallback(range => {\n    let start = range.start;\n    let end = range.end;\n\n    // make sure start date is after min date and before max date/range end\n    if (min) {\n      start = maxDate(start, min);\n    }\n    const startMax = max ? minDate(max, end) : end;\n    start = minDate(start, startMax);\n\n    // make sure end date is after min date/range start and before max date\n    const endMin = min ? maxDate(min, start) : start;\n    end = maxDate(end, endMin);\n    if (max) {\n      end = minDate(end, max);\n    }\n    return {\n      start: toSafeZoned(start, timezone),\n      end: toSafeZoned(end, timezone)\n    };\n  }, [min, max, timezone]);\n  const setSelectedValue = useCallback(newRange => {\n    const value = {\n      ...constrainRange(newRange),\n      preset: newRange.preset\n    };\n    setInternalValue(value);\n    setHighlightedRange(value);\n    setCalendarDates(rangeToCalendarDates(value, max));\n    setIsPlaceholder({\n      start: false,\n      end: false\n    });\n  }, [setInternalValue, constrainRange, max]);\n  const dayIsActive = useCallback(day => {\n    return !isPlaceholder.start && isSameDay(day, highlightedRange.start) || !isPlaceholder.end && isSameDay(day, highlightedRange.end);\n  }, [highlightedRange, isPlaceholder]);\n  const dayIsHighlighted = useCallback(day => {\n    return (isHighlighting || !isPlaceholder.start && !isPlaceholder.end) && day.compare(highlightedRange.start) >= 0 && day.compare(highlightedRange.end) <= 0;\n  }, [highlightedRange, isPlaceholder, isHighlighting]);\n  const dayIsRangeStart = useCallback(day => isSameDay(day, highlightedRange.start), [highlightedRange]);\n  const dayIsRangeEnd = useCallback(day => isSameDay(day, highlightedRange.end), [highlightedRange]);\n  const getCellProps = useCallback((date, isSameMonth) => {\n    return {\n      onPointerEnter: () => {\n        if (isHighlighting && isSameMonth) {\n          setHighlightedRange(makeRange({\n            start: anchorDate,\n            end: date,\n            timezone\n          }));\n        }\n      },\n      onClick: () => {\n        if (!isHighlighting) {\n          setIsHighlighting(true);\n          setAnchorDate(date);\n          setHighlightedRange(makeRange({\n            start: date,\n            end: date,\n            timezone\n          }));\n        } else {\n          const finalRange = makeRange({\n            start: anchorDate,\n            end: date,\n            timezone\n          });\n          // cast to start and end of day after making range, because \"makeRange\"\n          // will flip start and end dates, if they are out of order\n          finalRange.start = startOfDay(finalRange.start);\n          finalRange.end = endOfDay(finalRange.end);\n          setIsHighlighting(false);\n          setAnchorDate(null);\n          setSelectedValue?.(finalRange);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        }\n      }\n    };\n  }, [anchorDate, isHighlighting, setSelectedValue, setCalendarIsOpen, closeDialogOnSelection, timezone]);\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection\n  };\n}\nfunction rangeToCalendarDates(range, max) {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({\n      months: 1\n    }));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({\n      months: 1\n    }));\n  }\n  return [start, end];\n}\nfunction makeRange(props) {\n  const start = toSafeZoned(props.start, props.timezone);\n  const end = toSafeZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {\n      start: end,\n      end: start\n    };\n  }\n  return {\n    start,\n    end\n  };\n}\nfunction completeRange(range, now) {\n  if (range?.start && range?.end) {\n    return range;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({\n      months: 1\n    });\n    return range;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({\n      months: 1\n    });\n    return range;\n  }\n  return {\n    start: now,\n    end: now.add({\n      months: 1\n    })\n  };\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const ArrowRightAltIcon = createSvgIcon(<path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />, 'ArrowRightAltOutlined');","export function adjustSegment(value, part, amount, options) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {\n        round: part === 'year'\n      });\n  }\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod':\n        {\n          const hours = value.hour;\n          const isPM = hours >= 12;\n          return value.set({\n            hour: isPM ? hours - 12 : hours + 12\n          });\n        }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24\n        });\n    }\n  }\n  return value;\n}","export function setSegment(value, part, segmentValue, options) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({\n        [part]: segmentValue\n      });\n  }\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod':\n        {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          const isPM = segmentValue >= 12;\n          if (isPM === wasPM) {\n            return value;\n          }\n          return value.set({\n            hour: wasPM ? hours - 12 : hours + 12\n          });\n        }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({\n          [part]: segmentValue\n        });\n    }\n  }\n  return value;\n}","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1\n};","import { useFocusManager } from '@react-aria/focus';\nimport React, { useMemo, useRef } from 'react';\nimport { NumberParser } from '@internationalized/number';\nimport { mergeProps } from '@react-aria/utils';\nimport { today } from '@internationalized/date';\nimport { useSelectedLocale } from '@ui/i18n/selected-locale';\nimport { useDateFormatter } from '@ui/i18n/use-date-formatter';\nimport { adjustSegment } from './utils/adjust-segment';\nimport { setSegment } from './utils/set-segment';\nimport { PAGE_STEP } from './utils/page-step';\nimport { useIsMobileMediaQuery } from '@ui/utils/hooks/is-mobile-media-query';\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen\n  }\n}) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {\n    localeCode\n  } = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({\n    timeZone: timezone\n  });\n  const parser = useMemo(() => new NumberParser(localeCode, {\n    maximumFractionDigits: 0\n  }), [localeCode]);\n  const setSegmentValue = newValue => {\n    onChange(setSegment(value, segment.type, newValue, formatter.resolvedOptions()));\n  };\n  const adjustSegmentValue = amount => {\n    onChange(adjustSegment(value, segment.type, amount, formatter.resolvedOptions()));\n  };\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n  const onKeyDown = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusNext();\n        break;\n      case 'Enter':\n        e.target.closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete':\n        {\n          e.preventDefault();\n          e.stopPropagation();\n          backspace();\n          break;\n        }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n    onInput(e.key);\n  };\n  const amPmFormatter = useDateFormatter({\n    hour: 'numeric',\n    hour12: true\n  });\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter.formatToParts(amDate).find(part => part.type === 'dayPeriod').value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter.formatToParts(pmDate).find(part => part.type === 'dayPeriod').value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = key => {\n    const newValue = enteredKeys.current + key;\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager?.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year':\n        {\n          if (!parser.isValidPartialNumber(newValue)) {\n            return;\n          }\n          let numberValue = parser.parse(newValue);\n          let segmentValue = numberValue;\n          let allowsZero = segment.minValue === 0;\n          if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n            switch (formatter.resolvedOptions().hourCycle) {\n              case 'h11':\n                if (numberValue > 11) {\n                  segmentValue = parser.parse(key);\n                }\n                break;\n              case 'h12':\n                allowsZero = false;\n                if (numberValue > 12) {\n                  segmentValue = parser.parse(key);\n                }\n                break;\n            }\n            if (segment.value >= 12 && numberValue > 1) {\n              numberValue += 12;\n            }\n          } else if (numberValue > segment.maxValue) {\n            segmentValue = parser.parse(key);\n          }\n          if (Number.isNaN(numberValue)) {\n            return;\n          }\n          const shouldSetValue = segmentValue !== 0 || allowsZero;\n          if (shouldSetValue) {\n            setSegmentValue(segmentValue);\n          }\n          if (Number(`${numberValue}0`) > segment.maxValue || newValue.length >= String(segment.maxValue).length) {\n            enteredKeys.current = '';\n            if (shouldSetValue) {\n              focusManager?.focusNext();\n            }\n          } else {\n            enteredKeys.current = newValue;\n          }\n          break;\n        }\n    }\n  };\n  const spinButtonProps = isMobile ? {} : {\n    'aria-label': segment.type,\n    'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n    'aria-valuemin': segment.minValue,\n    'aria-valuemax': segment.maxValue,\n    'aria-valuenow': isPlaceholder ? undefined : segment.value,\n    tabIndex: 0,\n    onKeyDown\n  };\n  return <div {...mergeProps(domProps, {\n    ...spinButtonProps,\n    onFocus: e => {\n      enteredKeys.current = '';\n      e.target.scrollIntoView({\n        block: 'nearest'\n      });\n    },\n    onClick: e => {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  })} className=\"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary\">\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>;\n}","import { useFocusManager } from '@react-aria/focus';\nexport function LiteralDateSegment({\n  segment,\n  domProps\n}) {\n  const focusManager = useFocusManager();\n  return <div {...domProps} onPointerDown={e => {\n    if (e.pointerType === 'mouse') {\n      e.preventDefault();\n      const res = focusManager?.focusNext({\n        from: e.target\n      });\n      if (!res) {\n        focusManager?.focusPrevious({\n          from: e.target\n        });\n      }\n    }\n  }} aria-hidden className=\"min-w-4 cursor-default select-none\">\n      {segment.text}\n    </div>;\n}","import { getMinimumDayInMonth, getMinimumMonthInYear } from '@internationalized/date';\nexport function getSegmentLimits(date, type, options) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date)\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date)\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd'\n      };\n  }\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--'\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--'\n          };\n        }\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--'\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--'\n        };\n    }\n  }\n  return {};\n}","import React, { useMemo } from 'react';\nimport { EditableDateSegment } from './editable-date-segment';\nimport { LiteralDateSegment } from './literal-segment';\nimport { useDateFormatter } from '@ui/i18n/use-date-formatter';\nimport { getSegmentLimits } from './utils/get-segment-limits';\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder\n}) {\n  const {\n    granularity\n  } = state;\n  const options = useMemo(() => {\n    const memoOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric'\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n  const formatter = useDateFormatter(options);\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(value, segment.type, formatter.resolvedOptions());\n      const textValue = isPlaceholder && segment.type !== 'literal' ? limits.placeholder : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength: segment.type !== 'literal' ? String(limits.maxValue).length : 1\n      };\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n  return <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n      if (segment.type === 'literal') {\n        return <LiteralDateSegment domProps={segmentProps} key={index} segment={segment} />;\n      }\n      return <EditableDateSegment isPlaceholder={isPlaceholder} domProps={segmentProps} state={state} value={value} onChange={onChange} segment={segment} key={index} />;\n    })}\n    </div>;\n}","import { createSvgIcon } from '../create-svg-icon';\nexport const KeyboardArrowRightIcon = createSvgIcon(<path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />, 'KeyboardArrowRightOutlined');","import React from 'react';\nimport clsx from 'clsx';\nimport { getDayOfWeek, isSameMonth, isToday } from '@internationalized/date';\nimport { useSelectedLocale } from '@ui/i18n/selected-locale';\nimport { dateIsInvalid } from '../utils';\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max\n  }\n}) {\n  const {\n    localeCode\n  } = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n  return <div role=\"button\" aria-disabled={isDisabled} className={clsx('relative isolate h-40 w-40 flex-shrink-0 text-sm', isDisabled && 'pointer-events-none text-disabled', !sameMonth && 'pointer-events-none invisible')} {...getCellProps(date, sameMonth)}>\n      <span className={clsx('absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full', !isActive && !dayIsToday && 'hover:bg-hover', isActive && 'bg-primary font-semibold text-on-primary', dayIsToday && !isActive && 'bg-chip')}>\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && <span className={clsx('absolute inset-0 h-full w-full bg-primary/focus', (isRangeStart || dayOfWeek === 0 || date.day === 1) && 'rounded-l-full', (isRangeEnd || dayOfWeek === 6 || date.day === currentMonth.calendar.getDaysInMonth(currentMonth)) && 'rounded-r-full')} />}\n    </div>;\n}","import React from 'react';\nimport clsx from 'clsx';\nimport { m } from 'framer-motion';\nimport { endOfMonth, getWeeksInMonth, startOfMonth, startOfWeek } from '@internationalized/date';\nimport { KeyboardArrowLeftIcon } from '@ui/icons/material/KeyboardArrowLeft';\nimport { IconButton } from '@ui/buttons/icon-button';\nimport { KeyboardArrowRightIcon } from '@ui/icons/material/KeyboardArrowRight';\nimport { CalendarCell } from './calendar-cell';\nimport { useDateFormatter } from '@ui/i18n/use-date-formatter';\nimport { useSelectedLocale } from '@ui/i18n/selected-locale';\nimport { dateIsInvalid } from '../utils';\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast\n}) {\n  const {\n    localeCode\n  } = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n  return <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader isFirst={isFirst} isLast={isLast} state={state} currentMonth={startDate} />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => <m.div className=\"mb-6 flex\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => <CalendarCell key={dayIndex} date={monthStart.add({\n          weeks: weekIndex,\n          days: dayIndex\n        })} currentMonth={startDate} state={state} />)}\n          </m.div>)}\n      </div>\n    </div>;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {\n    calendarDates,\n    setCalendarDates,\n    timezone,\n    min,\n    max\n  }\n}) {\n  const shiftCalendars = direction => {\n    const count = calendarDates.length;\n    let newDates;\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date => endOfMonth(date.add({\n        months: count\n      })));\n    } else {\n      newDates = calendarDates.map(date => endOfMonth(date.subtract({\n        months: count\n      })));\n    }\n    setCalendarDates(newDates);\n  };\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier\n  });\n  const isBackwardDisabled = dateIsInvalid(currentMonth.subtract({\n    days: 1\n  }), min, max);\n  const isForwardDisabled = dateIsInvalid(startOfMonth(currentMonth.add({\n    months: 1\n  })), min, max);\n  return <div className=\"flex items-center justify-between gap-10\">\n      <IconButton size=\"md\" className={clsx('text-muted', !isFirst && 'invisible')} disabled={!isFirst || isBackwardDisabled} aria-hidden={!isFirst} onClick={() => {\n      shiftCalendars('backward');\n    }}>\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"select-none text-sm font-semibold\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton size=\"md\" className={clsx('text-muted', !isLast && 'invisible')} disabled={!isLast || isForwardDisabled} aria-hidden={!isLast} onClick={() => {\n      shiftCalendars('forward');\n    }}>\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>;\n}\nfunction WeekdayHeader({\n  state: {\n    timezone\n  },\n  startDate\n}) {\n  const {\n    localeCode\n  } = useSelectedLocale();\n  const dayFormatter = useDateFormatter({\n    weekday: 'short'\n  });\n  const monthStart = startOfWeek(startDate, localeCode);\n  return <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n      const date = monthStart.add({\n        days: index\n      });\n      const dateDay = date.toDate(timezone);\n      const weekday = dayFormatter.format(dateDay);\n      return <div className=\"relative h-40 w-40 flex-shrink-0 text-sm font-semibold\" key={index}>\n            <div className=\"absolute flex h-full w-full select-none items-center justify-center\">\n              {weekday}\n            </div>\n          </div>;\n    })}\n    </div>;\n}","import React, { Fragment } from 'react';\nimport { startOfMonth, toCalendarDate } from '@internationalized/date';\nimport { useIsMobileMediaQuery } from '@ui/utils/hooks/is-mobile-media-query';\nimport { CalendarMonth } from './calendar-month';\nexport function Calendar({\n  state,\n  visibleMonths = 1\n}) {\n  const isMobile = useIsMobileMediaQuery();\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n  return <Fragment>\n      {[...new Array(visibleMonths).keys()].map(index => {\n      const startDate = toCalendarDate(startOfMonth(state.calendarDates[index]));\n      const isFirst = index === 0;\n      const isLast = index === visibleMonths - 1;\n      return <CalendarMonth key={index} state={state} startDate={startDate} isFirst={isFirst} isLast={isLast} />;\n    })}\n    </Fragment>;\n}","import { parseAbsolute } from '@internationalized/date';\nimport { Fragment, memo } from 'react';\nimport { useDateFormatter } from '@ui/i18n/use-date-formatter';\nimport { useSettings } from '@ui/settings/use-settings';\nimport { shallowEqual } from '@ui/utils/shallow-equal';\nimport { useUserTimezone } from '@ui/i18n/use-user-timezone';\nimport { DateFormatPresets } from '@ui/i18n/formatted-date';\nexport const FormattedDateTimeRange = memo(({\n  start,\n  end,\n  options,\n  preset,\n  timezone: propsTimezone\n}) => {\n  const {\n    dates\n  } = useSettings();\n  const userTimezone = useUserTimezone();\n  const timezone = propsTimezone || options?.timeZone || userTimezone;\n  const formatter = useDateFormatter(options || DateFormatPresets[preset || dates?.format]);\n  if (!start || !end) {\n    return null;\n  }\n  let value;\n  try {\n    value = formatter.formatRange(castToDate(start, timezone), castToDate(end, timezone));\n  } catch (e) {\n    value = '';\n  }\n  return <Fragment>{value}</Fragment>;\n}, shallowEqual);\nfunction castToDate(date, timezone) {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}","import { List, ListItem } from '@ui/list/list';\nimport { DateRangePresets } from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport { Trans } from '@ui/i18n/trans';\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue\n}) {\n  return <List>\n      {DateRangePresets.map(preset => <ListItem borderRadius=\"rounded-none\" capitalizeFirst key={preset.key} isSelected={selectedValue?.preset === preset.key} onSelected={() => {\n      const newValue = preset.getRangeValue();\n      onPresetSelected(newValue);\n    }}>\n          <Trans {...preset.label} />\n        </ListItem>)}\n    </List>;\n}","import { useMediaQuery } from '@ui/utils/hooks/use-media-query';\nexport function useIsTabletMediaQuery(options) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}","import React, { useId } from 'react';\nimport clsx from 'clsx';\nimport { useController } from 'react-hook-form';\nimport { mergeProps, useObjectRef } from '@react-aria/utils';\nimport { getInputFieldClassNames } from '../input-field/get-input-field-class-names';\nimport { useAutoFocus } from '@ui/focus/use-auto-focus';\nexport const Switch = React.forwardRef((props, ref) => {\n  const {\n    children,\n    size = 'sm',\n    description,\n    className,\n    invalid,\n    autoFocus,\n    errorMessage,\n    iconRight,\n    ...domProps\n  } = props;\n  const inputRef = useObjectRef(ref);\n  useAutoFocus({\n    autoFocus\n  }, inputRef);\n  const style = getSizeClassName(size);\n  const fieldClassNames = getInputFieldClassNames(props);\n  const descriptionId = useId();\n  return <div className={clsx(className, 'isolate')}>\n        <label className=\"flex select-none items-center\">\n          <input {...domProps} type=\"checkbox\" role=\"switch\" aria-invalid={invalid || undefined} aria-describedby={description ? descriptionId : undefined} ref={inputRef} aria-checked={domProps.checked} className={clsx(style, !invalid && 'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark', invalid && 'checked:border-danger checked:bg-danger', 'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary', 'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform', 'checked:before:border-white', 'focus-visible:ring', props.disabled && 'cursor-not-allowed opacity-80')} />\n          {children && <span className={clsx(fieldClassNames.size.font, 'ml-12', invalid && 'text-danger', props.disabled && 'text-disabled')}>\n              {children}\n            </span>}\n          {iconRight}\n        </label>\n        {description && !errorMessage && <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>}\n        {errorMessage && <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>}\n      </div>;\n});\nexport function FormSwitch(props) {\n  const {\n    field: {\n      onChange,\n      onBlur,\n      value = false,\n      ref\n    },\n    fieldState: {\n      invalid,\n      error\n    }\n  } = useController({\n    name: props.name\n  });\n  const formProps = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name\n  };\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\nfunction getSizeClassName(size) {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}","import { message } from '@ui/i18n/message';\nexport const DateRangeComparePresets = [{\n  key: 0,\n  label: message('Preceding period'),\n  getRangeValue: range => {\n    const startDate = range.start;\n    const endDate = range.end;\n    const diffInMilliseconds = endDate.toDate().getTime() - startDate.toDate().getTime();\n    const diffInMinutes = diffInMilliseconds / (1000 * 60);\n    const newStart = startDate.subtract({\n      minutes: diffInMinutes\n    });\n    return {\n      preset: 0,\n      start: newStart,\n      end: startDate\n    };\n  }\n}, {\n  key: 1,\n  label: message('Same period last year'),\n  getRangeValue: range => {\n    return {\n      start: range.start.subtract({\n        years: 1\n      }),\n      end: range.end.subtract({\n        years: 1\n      }),\n      preset: 1\n    };\n  }\n}, {\n  key: 2,\n  label: message('Custom'),\n  getRangeValue: range => {\n    return {\n      start: range.start.subtract({\n        weeks: 1\n      }),\n      end: range.end.subtract({\n        weeks: 1\n      }),\n      preset: 2\n    };\n  }\n}];","import { List, ListItem } from '@ui/list/list';\nimport { Trans } from '@ui/i18n/trans';\nimport { DateRangeComparePresets } from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\nexport function DateRangeComparePresetList({\n  originalRangeValue,\n  onPresetSelected,\n  selectedValue\n}) {\n  return <List>\n      {DateRangeComparePresets.map(preset => <ListItem borderRadius=\"rounded-none\" capitalizeFirst key={preset.key} isSelected={selectedValue?.preset === preset.key} onSelected={() => {\n      const newValue = preset.getRangeValue(originalRangeValue);\n      onPresetSelected(newValue);\n    }}>\n          <Trans {...preset.label} />\n        </ListItem>)}\n    </List>;\n}","import React, { Fragment, useRef, useState } from 'react';\nimport { AnimatePresence, m } from 'framer-motion';\nimport { DatePickerField } from '../date-picker-field';\nimport { Calendar } from '../../calendar/calendar';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { Button } from '@ui/buttons/button';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { ArrowRightAltIcon } from '@ui/icons/material/ArrowRightAlt';\nimport { DateSegmentList } from '../../segments/date-segment-list';\nimport { Trans } from '@ui/i18n/trans';\nimport { FormattedDateTimeRange } from '@ui/i18n/formatted-date-time-range';\nimport { DatePresetList } from './date-range-preset-list';\nimport { useIsTabletMediaQuery } from '@ui/utils/hooks/is-tablet-media-query';\nimport { Switch } from '@ui/forms/toggle/switch';\nimport { DateRangeComparePresetList } from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\nexport function DateRangeDialog({\n  state,\n  compareState,\n  showInlineDatePickerField = false,\n  compareVisibleDefault = false\n}) {\n  const isTablet = useIsTabletMediaQuery();\n  const {\n    close\n  } = useDialogContext();\n  const initialStateRef = useRef(state);\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\n  const footer = <DialogFooter dividerTop startAction={!hasPlaceholder && !isTablet ? <div className=\"text-xs\">\n            <FormattedDateTimeRange start={state.selectedValue.start.toDate()} end={state.selectedValue.end.toDate()} options={{\n      dateStyle: 'medium'\n    }} />\n          </div> : undefined}>\n      <Button variant=\"text\" size=\"xs\" onClick={() => {\n      state.setSelectedValue(initialStateRef.current.selectedValue);\n      state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n      close();\n    }}>\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button variant=\"flat\" color=\"primary\" size=\"xs\" onClick={() => {\n      const value = state.selectedValue;\n      if (compareState && compareVisible) {\n        value.compareStart = compareState.selectedValue.start;\n        value.compareEnd = compareState.selectedValue.end;\n      }\n      close(value);\n    }}>\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>;\n  return <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && <div className=\"min-w-192 py-14\">\n            <DatePresetList selectedValue={state.selectedValue} onPresetSelected={preset => {\n          state.setSelectedValue(preset);\n          if (state.closeDialogOnSelection) {\n            close(preset);\n          }\n        }} />\n            {!!compareState && <Fragment>\n                <Switch className=\"mx-20 mb-10 mt-14\" checked={compareVisible} onChange={e => setCompareVisible(e.target.checked)}>\n                  <Trans message=\"Compare\" />\n                </Switch>\n                {compareVisible && <DateRangeComparePresetList originalRangeValue={state.selectedValue} selectedValue={compareState.selectedValue} onPresetSelected={preset => {\n            compareState.setSelectedValue(preset);\n          }} />}\n              </Fragment>}\n          </div>}\n        <AnimatePresence initial={false}>\n          <Calendars state={state} compareState={compareState} showInlineDatePickerField={showInlineDatePickerField} compareVisible={compareVisible} />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>;\n}\nfunction Calendars({\n  state,\n  compareState,\n  showInlineDatePickerField,\n  compareVisible\n}) {\n  return <m.div initial={{\n    width: 0,\n    overflow: 'hidden'\n  }} animate={{\n    width: 'auto'\n  }} exit={{\n    width: 0,\n    overflow: 'hidden'\n  }} transition={{\n    type: 'tween',\n    duration: 0.125\n  }} className=\"border-l px-20 pb-20 pt-10\">\n      {showInlineDatePickerField && <div>\n          <InlineDatePickerField state={state} />\n          {!!compareState && compareVisible && <InlineDatePickerField state={compareState} label={<Trans message=\"Compare\" />} />}\n        </div>}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>;\n}\nfunction InlineDatePickerField({\n  state,\n  label\n}) {\n  const {\n    selectedValue,\n    setSelectedValue\n  } = state;\n  return <DatePickerField className=\"mb-20 mt-10\" label={label}>\n      <DateSegmentList state={state} value={selectedValue.start} onChange={newValue => {\n      setSelectedValue({\n        ...selectedValue,\n        start: newValue\n      });\n    }} />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList state={state} value={selectedValue.end} onChange={newValue => {\n      setSelectedValue({\n        ...selectedValue,\n        end: newValue\n      });\n    }} />\n    </DatePickerField>;\n}","import { Fragment, memo } from 'react';\nimport { useNumberFormatter } from '@ui/i18n/use-number-formatter';\nimport { shallowEqual } from '@ui/utils/shallow-equal';\nexport const FormattedNumber = memo(({\n  value,\n  ...options\n}) => {\n  const formatter = useNumberFormatter(options);\n  if (isNaN(value)) {\n    value = 0;\n  }\n  return <Fragment>{formatter.format(value)}</Fragment>;\n}, shallowEqual);","import { createSvgIcon } from '../create-svg-icon';\nexport const ArrowBackIcon = createSvgIcon(<path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />, 'ArrowBackOutlined');"],"names":["Input","React","props","ref","children","inputProps","wrapperProps","className","autoFocus","style","onClick","jsx","clsx","FocusScope","startOfDay","date","endOfDay","getUserTimezone","defaultTimezone","_a","getBootstrapData","preferredTimezone","_c","_b","getLocalTimeZone","useCurrentDateTime","timezone","useUserTimezone","useMemo","now","getCurrentDateTime","Now","locale","DateRangePresets","message","startOfWeek","endOfWeek","start","startOfMonth","endOfMonth","startOfYear","endOfYear","DateRangeIcon","createSvgIcon","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","Field","mergeProps","e","focusManager","createFocusManager","getDefaultGranularity","CalendarDate","dateIsInvalid","min","max","toSafeZoned","timeZone","disambiguation","toZoned","useBaseDatePickerState","selectedDate","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","useDateRangePickerState","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","useControlledState","completeRange","value","clear","useCallback","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","ArrowRightAltIcon","adjustSegment","part","amount","options","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","domProps","onChange","isMobile","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","useFocusManager","formatter","useDateFormatter","parser","NumberParser","setSegmentValue","newValue","adjustSegmentValue","backspace","parsed","today","onKeyDown","onInput","amPmFormatter","am","amDate","pm","pmDate","key","numberValue","allowsZero","shouldSetValue","spinButtonProps","LiteralDateSegment","getSegmentLimits","type","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","state","memoOptions","dateValue","segments","limits","textValue","index","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isDisabled","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","jsxs","CalendarMonthHeader","WeekdayHeader","weekIndex","m","dayIndex","shiftCalendars","direction","count","newDates","monthFormatter","isBackwardDisabled","isForwardDisabled","IconButton","KeyboardArrowLeftIcon","dayFormatter","dateDay","weekday","Calendar","visibleMonths","Fragment","FormattedDateTimeRange","memo","preset","propsTimezone","dates","useSettings","userTimezone","DateFormatPresets","castToDate","shallowEqual","parseAbsolute","DatePresetList","onPresetSelected","selectedValue","List","ListItem","Trans","useIsTabletMediaQuery","useMediaQuery","Switch","size","description","invalid","errorMessage","iconRight","useAutoFocus","getSizeClassName","descriptionId","useId","FormSwitch","error","useController","formProps","DateRangeComparePresets","diffInMinutes","DateRangeComparePresetList","originalRangeValue","DateRangeDialog","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","close","useDialogContext","initialStateRef","hasPlaceholder","compareVisible","setCompareVisible","footer","DialogFooter","Button","Dialog","DialogBody","AnimatePresence","Calendars","InlineDatePickerField","label","FormattedNumber","useNumberFormatter","ArrowBackIcon"],"mappings":"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"}